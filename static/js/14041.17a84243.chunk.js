"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[14041],{36231:function(e,t,n){n.d(t,{q:function(){return o}});var r,i,u,s={},a={get exports(){return s},set exports(e){s=e}};r=a,i=function(){function e(n,r,i,u,s){for(;u>i;){if(u-i>600){var a=u-i+1,o=r-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(a-c)/a)*(o-a/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-o*c/a+p)),Math.min(u,Math.floor(r+(a-o)*c/a+p)),s)}var f=n[r],d=i,h=u;for(t(n,i,r),s(n[u],f)>0&&t(n,i,u);d<h;){for(t(n,d,h),d++,h--;s(n[d],f)<0;)d++;for(;s(n[h],f)>0;)h--}0===s(n[i],f)?t(n,i,h):t(n,++h,u),h<=r&&(i=h+1),r<=h&&(u=h-1)}}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}return function(t,r,i,u,s){e(t,r,i||0,u||t.length-1,s||n)}},void 0!==(u=i())&&(r.exports=u);var o=s},59026:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(15671),i=n(43144),u=n(18759),s=function(){function e(t,n){(0,r.Z)(this,e),this._storage=new u.WJ,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return(0,i.Z)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}()},93963:function(e,t,n){n.d(t,{f:function(){return a}});var r=n(15671),i=n(43144),u=n(39052),s=n(56885),a=function(){function e(t){(0,r.Z)(this,e),this._observable=new s.s,this._value=t}return(0,i.Z)(e,[{key:"get",value:function(){return(0,u.it)(this._observable),this._value}},{key:"set",value:function(e){e!==this._value&&(this._value=e,this._observable.notify())}}]),e}()},14921:function(e,t,n){n.d(t,{Ed:function(){return y},UI:function(){return v},mt:function(){return Z},q6:function(){return b},vr:function(){return S},w6:function(){return k}});var r=n(74165),i=n(15671),u=n(43144),s=n(60136),a=n(92572),o=n(15861),l=n(27366),c=n(85015),p=n(92026),f=n(66978),d=n(49861),h=(n(25243),n(63780),n(69912));function y(e,t,n){return(0,f.as)(e.map((function(e,r){return t.apply(n,[e,r])})))}function v(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.as)(t.map((function(e,t){return n.apply(i,[e,t])})));case 2:return e.abrupt("return",e.sent.map((function(e){return e.value})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return{ok:!0,value:e}}function _(e){return{ok:!1,error:e}}function b(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.Wi)(t)){e.next=2;break}return e.abrupt("return",{ok:!1,error:new Error("no promise provided")});case 2:return e.prev=2,e.t0=g,e.next=6,t;case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",_(e.t2));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Z(e){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=g,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",((0,f.r9)(e.t2),_(e.t2)));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(e){if(!0===e.ok)return e.value;throw e.error}function S(e,t){return new I(e,t)}var I=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e,r){var u;(0,i.Z)(this,n),(u=t.call(this,{}))._result=null,u._abortHandle=null,u.abort=function(){u._abortController=(0,p.IM)(u._abortController)},u.remove=u.abort,u._abortController=new AbortController;var s=u._abortController.signal;return u.promise=e(s),u.promise.then((function(e){u._result=g(e),u._cleanup()}),(function(e){u._result=_(e),u._cleanup()})),u._abortHandle=(0,f.fu)(r,u.abort),u}return(0,u.Z)(n,[{key:"value",get:function(){return e=this._result,(0,p.pC)(e)&&!0===e.ok?e.value:null;var e}},{key:"error",get:function(){return e=this._result,(0,p.pC)(e)&&!1===e.ok?e.error:null;var e}},{key:"finished",get:function(){return(0,p.pC)(this._result)}},{key:"normalizeCtorArgs",value:function(){return{}}},{key:"destroy",value:function(){this.abort()}},{key:"_cleanup",value:function(){this._abortHandle=(0,p.hw)(this._abortHandle),this._abortController=null}}]),n}(c.Z);(0,l._)([(0,d.Cb)()],I.prototype,"value",null),(0,l._)([(0,d.Cb)()],I.prototype,"error",null),(0,l._)([(0,d.Cb)()],I.prototype,"finished",null),(0,l._)([(0,d.Cb)()],I.prototype,"promise",void 0),(0,l._)([(0,d.Cb)()],I.prototype,"_result",void 0),I=(0,l._)([(0,h.j)("esri.core.asyncUtils.ReactiveTask")],I)},58971:function(e,t,n){n.d(t,{G6:function(){return S},Ie:function(){return k},J9:function(){return Z},RF:function(){return g},U1:function(){return w},vY:function(){return l},ym:function(){return x}});var r=n(29439),i=n(92026),u=n(77981);var s=function(e,t,n){return[t,n]},a=function(e,t,n){return[t,n,e[2]]},o=function(e,t,n){return[t,n,e[2],e[3]]};function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,i.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function p(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function f(e,t,n){for(var r,i,u,s,a=[],o=0;o<n.length;o++){var l=n[o];o>0?(u=c(e,l[0]),s=p(e,l[1]),u===r&&s===i||(a.push(t(l,u-r,s-i)),r=u,i=s)):(r=c(e,l[0]),i=p(e,l[1]),a.push(t(l,r,i)))}return a.length>0?a:null}function d(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function h(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function y(e,t,n){var i=new Array(n.length);if(!n.length)return i;var u=(0,r.Z)(e.scale,2),s=u[0],a=u[1],o=d(e,n[0][0]),l=h(e,n[0][1]);i[0]=t(n[0],o,l);for(var c=1;c<n.length;c++){var p=n[c];o+=p[0]*s,l-=p[1]*a,i[c]=t(p,o,l)}return i}function v(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=y(e,t,n[i]);return r}function m(e,t,n,r,i){var u;return t.points=null!==(u=function(e,t,n,r){return f(e,n?r?o:a:r?a:s,t)}(e,n.points,r,i))&&void 0!==u?u:[],t}function g(e,t,n,r,i){return t.x=c(e,n.x),t.y=p(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function _(e,t,n,r,i){var u=function(e,t,n,r){for(var i=[],u=n?r?o:a:r?a:s,l=0;l<t.length;l++){var c=f(e,u,t[l]);c&&c.length>=3&&i.push(c)}return i.length?i:null}(e,n.rings,r,i);return u?(t.rings=u,t):null}function b(e,t,n,r,i){var u=function(e,t,n,r){for(var i=[],u=n?r?o:a:r?a:s,l=0;l<t.length;l++){var c=f(e,u,t[l]);c&&c.length>=2&&i.push(c)}return i.length?i:null}(e,n.paths,r,i);return u?(t.paths=u,t):null}function x(e,t){return e&&t?(0,u.wp)(t)?g(e,{},t,!1,!1):(0,u.l9)(t)?b(e,{},t,!1,!1):(0,u.oU)(t)?_(e,{},t,!1,!1):(0,u.aW)(t)?m(e,{},t,!1,!1):(0,u.YX)(t)?function(e,t,n,r,i){return t.xmin=c(e,n.xmin),t.ymin=p(e,n.ymin),t.xmax=c(e,n.xmax),t.ymax=p(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),i&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function Z(e,t,n,r,u){return(0,i.pC)(n)&&(t.points=function(e,t,n,r){return y(e,n?r?o:a:r?a:s,t)}(e,n.points,r,u)),t}function w(e,t,n,r,u){return(0,i.Wi)(n)||(t.x=d(e,n.x),t.y=h(e,n.y),t!==n&&(r&&(t.z=n.z),u&&(t.m=n.m))),t}function k(e,t,n,r,u){return(0,i.pC)(n)&&(t.rings=function(e,t,n,r){return v(e,n?r?o:a:r?a:s,t)}(e,n.rings,r,u)),t}function S(e,t,n,r,u){return(0,i.pC)(n)&&(t.paths=function(e,t,n,r){return v(e,n?r?o:a:r?a:s,t)}(e,n.paths,r,u)),t}},34311:function(e,t,n){function r(e,t,n){return{objectId:e,target:t,distance:n,type:"vertex"}}function i(e,t,n,r,i){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{objectId:e,target:t,distance:n,type:"edge",start:r,end:i,draped:u}}n.d(t,{p:function(){return i},u:function(){return r}})},51657:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(1413),i=n(37762),u=n(74165),s=n(15861),a=n(15671),o=n(43144),l=n(76200),c=n(14921),p=n(10064),f=n(32718),d=n(92026),h=n(66978),y=n(77981),v=n(92975),m=n(83406),g=n(68928),_=n(19995),b=n(14e3),x=n(47615),Z=n(63543),w=n(68808),k=n(52410),S=n(85249),I=n(80031),F={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},E=function(){function e(){var t=this;(0,a.Z)(this,e),this._queryEngine=null,this._snapshotFeatures=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._fetch(n);case 2:return r=e.sent,e.abrupt("return",t._createFeatures(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return(0,o.Z)(e,[{key:"destroy",value:function(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,s,a,o,l,c,f,d,h,y,m,_,w,E,q,T,C,j,R,A,M,O,z,P,D,G,Q,U,W,L=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.length>1&&void 0!==L[1]?L[1]:{},this._loadOptions={url:t.url,customParameters:t.customParameters},s=[],e.next=5,this._checkProjection(t.spatialReference);case 5:if(a=null,e.t0=t.url,!e.t0){e.next=11;break}return e.next=10,this._fetch(null===n||void 0===n?void 0:n.signal);case 10:a=e.sent;case 11:o=(0,x.my)(a,{geometryType:t.geometryType}),l=t.fields||o.fields||[],c=null!=t.hasZ?t.hasZ:o.hasZ,f=o.geometryType,d=t.objectIdField||o.objectIdFieldName||"__OBJECTID",h=t.spatialReference||v.Zn,y=t.timeInfo,l===o.fields&&o.unknownFields.length>0&&s.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:o.unknownFields}}),(m=new k.Z(l).get(d))?("esriFieldTypeString"!==m.type&&(m.type="esriFieldTypeOID"),m.editable=!1,m.nullable=!1,d=m.name):(m={alias:d,name:d,type:"string"===o.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},l.unshift(m)),_={},w=(0,i.Z)(l),e.prev=20,w.s();case 22:if((E=w.n()).done){e.next=31;break}if(null==(q=E.value).name&&(q.name=q.alias),null==q.alias&&(q.alias=q.name),q.name){e.next=26;break}throw new p.Z("geojson-layer:invalid-field-name","field name is missing",{field:q});case 26:if(S.v.jsonValues.includes(q.type)){e.next=28;break}throw new p.Z("geojson-layer:invalid-field-type",'invalid type for field "'.concat(q.name,'"'),{field:q});case 28:q.name!==m.name&&void 0!==(T=(0,I.os)(q))&&(_[q.name]=T);case 29:e.next=22;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(20),w.e(e.t1);case 36:return e.prev=36,w.f(),e.finish(36);case 39:return this._fieldsIndex=new k.Z(l),(C=this._fieldsIndex.requiredFields.indexOf(m))>-1&&this._fieldsIndex.requiredFields.splice(C,1),y&&(y.startTimeField&&((j=this._fieldsIndex.get(y.startTimeField))?(y.startTimeField=j.name,j.type="esriFieldTypeDate"):y.startTimeField=null),y.endTimeField&&((R=this._fieldsIndex.get(y.endTimeField))?(y.endTimeField=R.name,R.type="esriFieldTypeDate"):y.endTimeField=null),y.trackIdField&&((A=this._fieldsIndex.get(y.trackIdField))?y.trackIdField=A.name:(y.trackIdField=null,s.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:y}}))),y.startTimeField||y.endTimeField||(s.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:y}}),y=null)),M=f?(0,Z.bU)(f):void 0,O={warnings:s,featureErrors:[],layerDefinition:(0,r.Z)((0,r.Z)({},F),{},{drawingInfo:null!==M&&void 0!==M?M:void 0,templates:(0,Z.Hq)(_),extent:void 0,geometryType:f,objectIdField:d,fields:l,hasZ:!!c,timeInfo:y})},this._queryEngine=new b.q({fields:l,geometryType:f,hasM:!1,hasZ:c,objectIdField:d,spatialReference:h,timeInfo:y,featureStore:new g.Z({geometryType:f,hasM:!1,hasZ:c}),cacheSpatialQueries:!0}),this._createDefaultAttributes=(0,Z.Dm)(_,d),e.next=46,this._createFeatures(a);case 46:return z=e.sent,this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,z),P=this._normalizeFeatures(z,O.warnings,O.featureErrors),this._queryEngine.featureStore.addMany(P),e.next=52,this._queryEngine.fetchRecomputedExtents();case 52:return D=e.sent,G=D.fullExtent,Q=D.timeExtent,O.layerDefinition.extent=G,Q&&(U=Q.start,W=Q.end,O.layerDefinition.timeInfo.timeExtent=[U,W]),e.abrupt("return",O);case 57:case"end":return e.stop()}}),e,this,[[20,33,36,39]])})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,r,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._queryEngine,r=n.spatialReference,i=n.geometryType,e.next=3,Promise.all([(0,w.b)(r,i),(0,_._W)(t.adds,r),(0,_._W)(t.updates,r)]);case 3:return e.next=5,this._waitSnapshotComplete();case 5:return e.abrupt("return",this._applyEdits(t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,n,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,n,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,n,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,n,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySnapping",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,n.signal));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,r,i,s,a=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._loadOptions.customParameters=t,null!==(n=this._snapshotTask)&&void 0!==n&&n.abort(),this._snapshotTask=(0,c.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){a._queryEngine.featureStore.clear(),a._objectIdGenerator=a._createObjectIdGenerator(a._queryEngine,e);var t=a._normalizeFeatures(e);t&&a._queryEngine.featureStore.addMany(t)}),(function(e){a._queryEngine.featureStore.clear(),(0,h.D_)(e)||f.Z.getLogger("esri.layers.GeoJSONLayer").error(new p.Z("geojson-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.next=8,this._queryEngine.fetchRecomputedExtents();case 8:return r=e.sent,i=r.fullExtent,s=r.timeExtent,e.abrupt("return",{extent:i,timeExtent:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createFeatures",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,r,s,a,o,l,c,p;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=this._queryEngine,r=n.geometryType,s=n.hasZ,a=n.objectIdField,o=(0,x.lG)(t,{geometryType:r,hasZ:s,objectIdField:a}),!(0,v.fS)(this._queryEngine.spatialReference,v.Zn)){l=(0,i.Z)(o);try{for(l.s();!(c=l.n()).done;)p=c.value,(0,d.pC)(p.geometry)&&(p.geometry=(0,m.GH)((0,_.iV)((0,m.di)(p.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),v.Zn,this._queryEngine.spatialReference)))}catch(u){l.e(u)}finally{l.f()}}return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitSnapshotComplete",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_fetch",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,i,s,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._loadOptions,i=n.url,s=n.customParameters,e.next=5,(0,l.default)(i,{responseType:"json",query:(0,r.Z)({},s),signal:t});case 5:return a=e.sent.data,e.next=8,(0,x.O3)(a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_normalizeFeatures",value:function(e,t,n){var r,u=this._queryEngine.objectIdField,s=[],a=(0,i.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,l=this._createDefaultAttributes(),c=(0,w.O0)(this._fieldsIndex,l,o.attributes,!0,t);c?null===n||void 0===n||n.push(c):(this._assignObjectId(l,o.attributes,!0),o.attributes=l,o.objectId=l[u],s.push(o))}}catch(p){a.e(p)}finally{a.f()}return s}},{key:"_applyEdits",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){var n,r,s,a,o,l,c,p,f,d;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.adds,r=t.updates,s=t.deletes,a={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}},n&&n.length&&this._applyAddEdits(a,n),r&&r.length&&this._applyUpdateEdits(a,r),s&&s.length){o=(0,i.Z)(s);try{for(o.s();!(l=o.n()).done;)c=l.value,a.deleteResults.push((0,w.d1)(c))}catch(u){o.e(u)}finally{o.f()}this._queryEngine.featureStore.removeManyById(s)}return e.next=4,this._queryEngine.fetchRecomputedExtents();case 4:return p=e.sent,f=p.fullExtent,d=p.timeExtent,e.abrupt("return",{extent:f,timeExtent:d,featureEditResults:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_applyAddEdits",value:function(e,t){var n,r=e.addResults,u=this._queryEngine,s=u.geometryType,a=u.hasM,o=u.hasZ,l=u.objectIdField,c=u.spatialReference,p=u.featureStore,f=[],h=(0,i.Z)(t);try{for(h.s();!(n=h.n()).done;){var v=n.value;if(v.geometry&&s!==(0,y.Ji)(v.geometry))r.push((0,w.av)("Incorrect geometry type."));else{var g=this._createDefaultAttributes(),b=(0,w.O0)(this._fieldsIndex,g,v.attributes);if(b)r.push(b);else{if(this._assignObjectId(g,v.attributes),v.attributes=g,null!=v.uid){var x=v.attributes[l];e.uidToObjectId[v.uid]=x}if((0,d.pC)(v.geometry)){var Z,k=null!==(Z=v.geometry.spatialReference)&&void 0!==Z?Z:c;v.geometry=(0,_.iV)((0,w.og)(v.geometry,k),k,c)}f.push(v),r.push((0,w.d1)(v.attributes[l]))}}}}catch(S){h.e(S)}finally{h.f()}p.addMany((0,m.Yn)([],f,s,o,a,l))}},{key:"_applyUpdateEdits",value:function(e,t){var n,r=e.updateResults,u=this._queryEngine,s=u.geometryType,a=u.hasM,o=u.hasZ,l=u.objectIdField,c=u.spatialReference,p=u.featureStore,f=(0,i.Z)(t);try{for(f.s();!(n=f.n()).done;){var h=n.value,v=h.attributes,g=h.geometry,b=v&&v[l];if(null!=b)if(p.has(b)){var x=(0,m.EI)(p.getFeature(b),s,o,a);if((0,d.pC)(g)){var Z;if(s!==(0,y.Ji)(g)){r.push((0,w.av)("Incorrect geometry type."));continue}var k=null!==(Z=g.spatialReference)&&void 0!==Z?Z:c;x.geometry=(0,_.iV)((0,w.og)(g,k),k,c)}if(v){var S=(0,w.O0)(this._fieldsIndex,x.attributes,v);if(S){r.push(S);continue}}p.add((0,m.XA)(x,s,o,a,l)),r.push((0,w.d1)(b))}else r.push((0,w.av)("Feature with object id ".concat(b," missing")));else r.push((0,w.av)("Identifier field ".concat(l," missing")))}}catch(I){f.e(I)}finally{f.f()}}},{key:"_createObjectIdGenerator",value:function(e,t){var n=e.fieldsIndex.get(e.objectIdField);if("esriFieldTypeString"===n.type)return function(){return n.name+"-"+Date.now().toString(16)};var r,u=Number.NEGATIVE_INFINITY,s=(0,i.Z)(t);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.objectId&&(u=Math.max(u,a.objectId))}}catch(o){s.e(o)}finally{s.f()}return u=Math.max(0,u)+1,function(){return u++}}},{key:"_assignObjectId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._queryEngine.objectIdField;e[r]=n&&r in t?t[r]:this._objectIdGenerator()}},{key:"_checkProjection",value:function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_._W)(v.Zn,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new p.Z("geojson-layer","Projection not supported");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},63543:function(e,t,n){n.d(t,{Dm:function(){return f},Hq:function(){return d},MS:function(){return h},bU:function(){return l}});var r=n(4942),i=n(1413),u=n(93169),s=n(84652),a=n(60480),o=n(76115);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.I4:"esriGeometryPolyline"===e?o.ET:o.lF}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function f(e,t){if((0,u.Z)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,r.Z)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var s in e)n+="this".concat(c.test(s)?".".concat(s):'["'.concat(s,'"]')," = ").concat(JSON.stringify(e[s]),";");var a=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new a}}catch(o){return function(){return(0,i.Z)((0,r.Z)({},t,null),e)}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,s.d9)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:a.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},68808:function(e,t,n){n.d(t,{O0:function(){return g},av:function(){return d},b:function(){return w},d1:function(){return y},og:function(){return b}});var r=n(74165),i=n(15861),u=n(37762),s=n(43144),a=n(15671),o=n(92026),l=n(92975),c=n(80031),p=(0,s.Z)((function e(){(0,a.Z)(this,e),this.code=null,this.description=null})),f=(0,s.Z)((function e(t){(0,a.Z)(this,e),this.error=new p,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}));function d(e){return new f(e)}var h=(0,s.Z)((function e(t){(0,a.Z)(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}));function y(e){return new h(e)}var v,m=new Set;function g(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;for(var a in m.clear(),n){var o=e.get(a);if(o){var l=n[a],p=_(o,l);if(p!==l&&s&&s.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:o,originalValue:l,sanitizedValue:p}}),m.add(o.name),o&&(i||o.editable)){var f=(0,c.Qc)(o,p);if(f)return d((0,c.vP)(f,o,p));t[o.name]=p}}}var h,y=(0,u.Z)(null!==(r=null===e||void 0===e?void 0:e.requiredFields)&&void 0!==r?r:[]);try{for(y.s();!(h=y.n()).done;){var v=h.value;if(!m.has(v.name))return d('missing required field "'.concat(v.name,'"'))}}catch(g){y.e(g)}finally{y.f()}return null}function _(e,t){var n=t;return"string"==typeof t&&(0,c.H7)(e)?n=parseFloat(t):null!=t&&(0,c.qN)(e)&&"string"!=typeof t&&(n=String(t)),(0,c.Pz)(n)}function b(e,t){if(!e||!(0,l.JY)(t))return e;if("rings"in e||"paths"in e){if((0,o.Wi)(v))throw new TypeError("geometry engine not loaded");return v.simplify(t,e)}return e}function x(){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,o.Wi)(v),!e.t0){e.next=5;break}return e.next=4,Promise.all([n.e(99058),n.e(63645)]).then(n.bind(n,50309));case 4:v=e.sent;case 5:return e.abrupt("return",v);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(0,l.JY)(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n,e.t0){e.next=4;break}return e.next=4,x();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},76115:function(e,t,n){n.d(t,{ET:function(){return s},I4:function(){return u},SQ:function(){return r},X1:function(){return i},eG:function(){return l},lF:function(){return a},lj:function(){return p},qP:function(){return o},wW:function(){return c}});var r=[252,146,31,255],i=[153,153,153,255],u={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=14041.17a84243.chunk.js.map