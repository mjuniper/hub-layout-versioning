{"version":3,"file":"static/js/58405.608d5f5f.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Collection.js\";import r from\"../../../core/CollectionFlattener.js\";import{isSome as i,isNone as s}from\"../../../core/maybe.js\";import{initial as o,watch as a}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../rest/support/DirectionLine.js\";import c from\"../../../rest/support/DirectionPoint.js\";import l from\"../../../rest/support/PointBarrier.js\";import g from\"../../../rest/support/PolygonBarrier.js\";import u from\"../../../rest/support/PolylineBarrier.js\";import d from\"../../../rest/support/RouteInfo.js\";import _ from\"../../../rest/support/Stop.js\";import{LayerView2DMixin as m}from\"./LayerView2D.js\";import w from\"./graphics/GraphicContainer.js\";import f from\"./graphics/GraphicsView2D.js\";import y from\"../../layers/LayerView.js\";const k=Object.freeze({remove(){},pause(){},resume(){}}),v=[\"route-info\",\"direction-line\",\"direction-point\",\"polygon-barrier\",\"polyline-barrier\",\"point-barrier\",\"stop\"],M={graphic:null,property:null,oldValue:null,newValue:null};function V(t){return t instanceof p||t instanceof c||t instanceof l||t instanceof g||t instanceof u||t instanceof d||t instanceof _}function j(t){return e.isCollection(t)&&t.length&&V(t.getItemAt(0))}function G(t){return Array.isArray(t)&&t.length>0&&V(t[0])}let I=class extends(m(y)){constructor(){super(...arguments),this._graphics=new e,this._highlightIds=new Map,this._networkFeatureMap=new Map,this._networkGraphicMap=new Map}get _routeItems(){return new r({getCollections:()=>i(this.layer)&&!this.destroyed?[i(this.layer.routeInfo)?new e([this.layer.routeInfo]):null,this.layer.directionLines,this.layer.directionPoints,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.pointBarriers,this.layer.stops]:[]})}initialize(){this.updatingHandles.addOnCollectionChange((()=>this._routeItems),(t=>this._routeItemsChanged(t)),o)}destroy(){this._networkFeatureMap.clear(),this._networkGraphicMap.clear(),this._graphics.removeAll(),this._get(\"_routeItems\")?.destroy()}attach(){this._createGraphicsView()}detach(){this._destroyGraphicsView()}async fetchPopupFeatures(t){return this._graphicsView.hitTest(t).filter((t=>!!t.popupTemplate))}highlight(t){let e;e=V(t)?[this._getNetworkFeatureUid(t)]:G(t)?t.map((t=>this._getNetworkFeatureUid(t))):j(t)?t.map((t=>this._getNetworkFeatureUid(t))).toArray():[t.uid];const r=e.filter(i);return r.length?(this._addHighlight(r),{remove:()=>this._removeHighlight(r)}):k}async hitTest(t,e){if(this.suspended)return null;const r=this._graphicsView.hitTest(t).filter(i).map((t=>this._networkGraphicMap.get(t)));if(!r.length)return null;const{layer:s}=this;return r.reverse().map((e=>({type:\"route\",layer:s,mapPoint:t,networkFeature:e})))}isUpdating(){return this._graphicsView.updating}moveStart(){}moveEnd(){}update(t){this._graphicsView.processUpdate(t)}viewChange(){this._graphicsView.viewChange()}_addHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e);this._highlightIds.set(e,t+1)}else this._highlightIds.set(e,1);this._updateHighlight()}_createGraphic(t){const e=t.toGraphic();return e.layer=this.layer,e.sourceLayer=this.layer,e}_createGraphicsView(){const t=this.view,e=()=>this.requestUpdate(),r=new w(t.featuresTilingScheme);this._graphicsView=new f({container:r,graphics:this._graphics,requestUpdateCallback:e,view:t}),this.container.addChild(r),this._updateHighlight()}_destroyGraphicsView(){this.container.removeChild(this._graphicsView.container),this._graphicsView.destroy()}_getDrawOrder(t){const e=this._networkGraphicMap.get(t);return v.indexOf(e.type)}_getNetworkFeatureUid(t){return this._networkFeatureMap.has(t)?this._networkFeatureMap.get(t).uid:null}_removeHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e)-1;0===t?this._highlightIds.delete(e):this._highlightIds.set(e,t)}this._updateHighlight()}_routeItemsChanged(t){if(t.removed.length){this._graphics.removeMany(t.removed.map((t=>{const e=this._networkFeatureMap.get(t);return this._networkFeatureMap.delete(t),this._networkGraphicMap.delete(e),e})));for(const e of t.removed)this.removeHandles(e)}if(t.added.length){this._graphics.addMany(t.added.map((t=>{const e=this._createGraphic(t);return s(e.symbol)?null:(this._networkFeatureMap.set(t,e),this._networkGraphicMap.set(e,t),e)})).filter(i));for(const e of t.added)this.addHandles([a((()=>e.geometry),((t,r)=>{this._updateGraphic(e,\"geometry\",t,r)})),a((()=>e.symbol),((t,r)=>{this._updateGraphic(e,\"symbol\",t,r)}))],e);this._graphics.sort(((t,e)=>this._getDrawOrder(t)-this._getDrawOrder(e)))}}_updateGraphic(t,e,r,i){if(!this._networkFeatureMap.has(t)){const e=this._createGraphic(t);return this._networkFeatureMap.set(t,e),this._networkGraphicMap.set(e,t),void this._graphics.add(e)}const s=this._networkFeatureMap.get(t);s[e]=r,M.graphic=s,M.property=e,M.oldValue=i,M.newValue=r,this._graphicsView.graphicUpdateHandler(M)}_updateHighlight(){const t=Array.from(this._highlightIds.keys());this._graphicsView.setHighlight(t)}};t([h()],I.prototype,\"_graphics\",void 0),t([h()],I.prototype,\"_routeItems\",null),I=t([n(\"esri.views.2d.layers.RouteLayerView2D\")],I);const F=I;export{F as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["k","Object","freeze","remove","pause","resume","v","M","graphic","property","oldValue","newValue","V","t","p","c","l","g","u","d","_","I","arguments","_graphics","e","_highlightIds","Map","_networkFeatureMap","_networkGraphicMap","get","r","getCollections","i","layer","destroyed","routeInfo","directionLines","directionPoints","polygonBarriers","polylineBarriers","pointBarriers","stops","this","updatingHandles","addOnCollectionChange","_routeItems","_routeItemsChanged","o","clear","removeAll","_get","destroy","_createGraphicsView","_destroyGraphicsView","_graphicsView","hitTest","filter","popupTemplate","_getNetworkFeatureUid","Array","isArray","length","G","map","getItemAt","j","toArray","uid","_addHighlight","_removeHighlight","suspended","s","reverse","type","mapPoint","networkFeature","updating","processUpdate","viewChange","has","set","_updateHighlight","toGraphic","sourceLayer","view","w","featuresTilingScheme","f","container","graphics","requestUpdateCallback","requestUpdate","addChild","removeChild","indexOf","delete","removed","removeMany","removeHandles","added","addMany","_createGraphic","symbol","addHandles","a","geometry","_updateGraphic","sort","_getDrawOrder","add","graphicUpdateHandler","from","keys","setHighlight","m","y","h","prototype","F","n","attributeView","update","children","some","hasData","bindTextures","context","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","highlight","bind","defines","draw","unbind"],"sourceRoot":""}