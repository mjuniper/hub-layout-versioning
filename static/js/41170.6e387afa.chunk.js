"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[41170],{42069:function(e,n,t){t.d(n,{A:function(){return b}});var r=t(74165),i=t(15861),a=t(15671),s=t(43144),o=t(11752),l=t(61120),u=t(60136),c=t(92572),p=t(27366),d=t(42537),v=t(66978),f=t(94172),h=t(49861),y=(t(25243),t(63780),t(69912)),g=t(5354),b=function(e){var n=function(e){(0,u.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,a.Z)(this,t),(e=n.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,s.Z)(t,[{key:"postscript",value:function(e){(0,o.Z)((0,l.Z)(t.prototype),"postscript",this).call(this,e),(0,g.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n,t,i,a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,t=n.signal,this.handles.add((0,d.kB)((function(){return n.abort()}))),e.next=4,(0,f.N1)((function(){var e;return null===(e=a.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),t);case 4:if((0,v.k_)(t),!(i=(0,g.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw i;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,o.Z)((0,l.Z)(t.prototype),"canResume",this).call(this)&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}},{key:"getSuspendInfo",value:function(){var e=(0,o.Z)((0,l.Z)(t.prototype),"getSuspendInfo",this).call(this),n=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return n&&n.minScale&&n.maxScale&&n.minScale<n.maxScale&&(e.outsideScaleRange=!0),e}}]),t}(e);return(0,p._)([(0,h.Cb)()],n.prototype,"view",void 0),(0,p._)([(0,h.Cb)()],n.prototype,"slicePlaneEnabled",void 0),n=(0,p._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],n)}},60487:function(e,n,t){t.d(n,{W:function(){return f}});var r=t(74165),i=t(37762),a=t(15861),s=(t(59486),t(92026)),o=t(66978),l=t(65618),u=t(74509),c=t(69691),p=t(78935),d=t(8821),v=t(78952);function f(e,n,t,r,i){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function e(n,t,a,l,p){var v,f,h,k,Z,m,w,x,C,I,S,_,R,P,O,E,W,j,D,L,q,H,M,F,G;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=n.elevationProvider,f=n.renderCoordsHelper,h=n.spatialReference,k=t.elevationInfo,Z=(0,d.WI)(k,!0),e.next=7,(0,d.kr)(Z,h,p);case 7:m=e.sent,(0,o.k_)(p),w=[],x=new Set,C=new Set,I=(0,i.Z)(l),e.prev=11,I.s();case 13:if((S=I.n()).done){e.next=28;break}if(_=S.value,R=_.objectId,P=_.points,O=a(R),!(0,s.Wi)(O)){e.next=21;break}E=(0,i.Z)(P);try{for(E.s();!(W=E.n()).done;)j=W.value,w.push(j[2])}catch(r){E.e(r)}finally{E.f()}return x.add(R),e.abrupt("continue",26);case 21:O.isDraped&&C.add(R),D=O.graphic.geometry,y.setFromElevationInfo((0,u.Jn)(D,k)),y.updateFeatureExpressionInfoContext(m,O.graphic,t),g.spatialReference=n.spatialReference,L=(0,i.Z)(P);try{for(L.s();!(q=L.n()).done;)H=q.value,M=H.x,F=H.y,G=H.z,g.x=M,g.y=F,g.z=null!==G&&void 0!==G?G:0,(0,c.qZ)(g,v,y,f,b),w.push(b.z)}catch(r){L.e(r)}finally{L.f()}case 26:e.next=13;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(11),I.e(e.t0);case 33:return e.prev=33,I.f(),e.finish(33);case 36:return e.abrupt("return",{elevations:w,drapedObjectIds:C,failedObjectIds:x});case 37:case"end":return e.stop()}}),e,null,[[11,30,33,36]])}))),h.apply(this,arguments)}var y=new p.o,g=(0,l.Tx)(0,0,0,v.Z.WGS84),b=new c.Lm},77098:function(e,n,t){t.d(n,{c:function(){return u}});var r=t(37762),i=t(74165),a=t(15861),s=t(92026),o=t(66978),l=t(819);function u(e,n,t){return c.apply(this,arguments)}function c(){return c=(0,a.Z)((0,i.Z)().mark((function e(n,t,u){var c,d,v,f,h,y,g,b,k,Z,m,w,x,C,I,S,_,R,P,O,E,W;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.Wi)(n)&&0!==t.candidates.length){e.next=2;break}return e.abrupt("return",p);case 2:d=null!==(c=n.graphics3DGraphicsByObjectID)&&void 0!==c?c:n.graphics3DGraphics,v=[],f=[],h=n.renderer,y=(0,s.pC)(h)&&"arcadeRequired"in h&&h.arcadeRequired?(0,l.LC)():null,g=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var a,o,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.graphic,o=r.graphics3DSymbol,e.next=3,y;case 3:return l=e.sent,e.next=6,n.getRenderingInfoAsync(a,h,l,{signal:u});case 6:return c=e.sent,e.abrupt("return",(0,s.Wi)(c)?[]:o.queryForSnapping(t,k,c,u));case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),b=t.candidates,k=t.spatialReference,Z=0;case 4:if(!(Z<b.length)){e.next=13;break}if(m=b[Z],w=m.objectId,x="number"==typeof w?null===d||void 0===d?void 0:d.get(w):void 0,!(0,s.Wi)(x)){e.next=8;break}return e.abrupt("continue",10);case 8:x.graphics3DSymbol.symbologySnappingSupported&&(v.push(g(m,x)),f.push(Z));case 10:++Z,e.next=4;break;case 13:if(0!==v.length){e.next=15;break}return e.abrupt("return",p);case 15:return e.next=17,Promise.all(v);case 17:for(C=e.sent,(0,o.k_)(u),I=[],S=[],_=0;_<C.length;++_){R=C[_],P=f[_],O=(0,r.Z)(R);try{for(O.s();!(E=O.n()).done;)W=E.value,I.push(W),S.push(P)}catch(j){O.e(j)}finally{O.f()}}return e.abrupt("return",{candidates:I,sourceCandidateIndices:S});case 22:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}var p={candidates:[],sourceCandidateIndices:[]}},61712:function(e,n,t){t.d(n,{E:function(){return s}});var r=t(92026),i=t(81753),a=t(67387);function s(e){var n=e.view.spatialReference,t=e.layer.fullExtent,s=(0,r.pC)(t)&&t.spatialReference;if((0,r.Wi)(t)||!s)return Promise.resolve(null);if(s.equals(n))return Promise.resolve(t.clone());var o=(0,i.iV)(t,n);return(0,r.pC)(o)?Promise.resolve(o):e.view.state.isLocal?(0,a.projectGeometry)(t,n,e.layer.portalItem).then((function(n){return!e.destroyed&&n?n:null})).catch((function(){return null})):Promise.resolve(null)}},67581:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(15671),i=t(43144),a=t(60136),s=t(92572),o=t(27366),l=t(85015),u=t(91505),c=t(41691),p=t(79056),d=t(32718),v=t(92026),f=t(67426),h=t(49861),y=(t(25243),t(63780),t(69912)),g=function(e){(0,a.Z)(t,e);var n=(0,s.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this,e)).layer=null,i.parent=null,i}return(0,i.Z)(t,[{key:"initialize",value:function(){var e=this;this.when().catch((function(n){if("layerview:create-error"!==n.name){var t=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";d.Z.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(t,"')"),n)}}))}},{key:"fullOpacity",get:function(){return(0,v.Pt)(this.get("layer.opacity"),1)*(0,v.Pt)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,n,t;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(n=this.parent)&&void 0!==n&&n.suspended)&&(null===(t=this.view)||void 0===t?void 0:t.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),t}((0,c.p)((0,p.IG)((0,f.v)(u.Z.EventedMixin(l.Z)))));(0,o._)([(0,h.Cb)()],g.prototype,"fullOpacity",null),(0,o._)([(0,h.Cb)()],g.prototype,"layer",void 0),(0,o._)([(0,h.Cb)()],g.prototype,"parent",void 0),(0,o._)([(0,h.Cb)({readOnly:!0})],g.prototype,"suspended",null),(0,o._)([(0,h.Cb)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,o._)([(0,h.Cb)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,o._)([(0,h.Cb)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,o._)([(0,h.Cb)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,o._)([(0,h.Cb)()],g.prototype,"visible",null),(0,o._)([(0,h.Cb)()],g.prototype,"view",void 0);var b=g=(0,o._)([(0,y.j)("esri.views.layers.LayerView")],g)}}]);
//# sourceMappingURL=41170.6e387afa.chunk.js.map