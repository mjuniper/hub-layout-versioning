"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[16669],{22018:function(e,t,n){n.d(t,{a:function(){return d},b:function(){return c},c:function(){return a},d:function(){return o},f:function(){return h},i:function(){return r},m:function(){return s},r:function(){return l},s:function(){return u},t:function(){return p}});var i=n(26277);function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function o(e,t,n,i,r,o,a){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=o,e[5]=a,e}function a(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=n*o-i*r;return l?(l=1/l,e[0]=o*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-o*a)*l,e[5]=(i*a-n*s)*l,e):null}function s(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=n[0],p=n[1],c=n[2],h=n[3],d=n[4],v=n[5];return e[0]=i*u+o*p,e[1]=r*u+a*p,e[2]=i*c+o*h,e[3]=r*c+a*h,e[4]=i*d+o*v+s,e[5]=r*d+a*v+l,e}function l(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=Math.sin(n),p=Math.cos(n);return e[0]=i*p+o*u,e[1]=r*p+a*u,e[2]=i*-u+o*p,e[3]=r*-u+a*p,e[4]=s,e[5]=l,e}function u(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=n[0],p=n[1];return e[0]=i*u,e[1]=r*u,e[2]=o*p,e[3]=a*p,e[4]=s,e[5]=l,e}function p(e,t,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=n[0],p=n[1];return e[0]=i,e[1]=r,e[2]=o,e[3]=a,e[4]=i*u+o*p+s,e[5]=r*u+a*p+l,e}function c(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=-n,e[3]=i,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function v(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var f=s,y=v;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=t[0],p=t[1],c=t[2],h=t[3],d=t[4],v=t[5],f=(0,i.g)();return Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-p)<=f*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-c)<=f*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=f*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(l-v)<=f*Math.max(1,Math.abs(l),Math.abs(v))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},fromRotation:c,fromScaling:h,fromTranslation:d,identity:r,invert:a,mul:f,multiply:s,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e},rotate:l,scale:u,set:o,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:y,subtract:v,translate:p},Symbol.toStringTag,{value:"Module"}))},89494:function(e,t,n){function i(){return[1,0,0,1,0,0]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,{a:function(){return r},c:function(){return i}});Object.freeze(Object.defineProperty({__proto__:null,clone:r,create:i,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,n,i,r,o){return[e,t,n,i,r,o]}},Symbol.toStringTag,{value:"Module"}))},67077:function(e,t,n){function i(){return[0,0,0,0]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,n,i){return[e,t,n,i]}function a(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),i=0;i<n;++i)t[i]=e[i];return t}function s(e,t){return new Float64Array(e,t,4)}function l(){return[0,0,0,0]}function u(){return o(1,1,1,1)}function p(){return o(1,0,0,0)}function c(){return o(0,1,0,0)}function h(){return o(0,0,1,0)}function d(){return o(0,0,0,1)}n.d(t,{O:function(){return f},Z:function(){return v},a:function(){return s},b:function(){return a},c:function(){return i},d:function(){return r},f:function(){return o}});var v=[0,0,0,0],f=u(),y=p(),g=c(),m=h(),_=d();Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_W:_,UNIT_X:y,UNIT_Y:g,UNIT_Z:m,ZEROS:v,clone:r,create:i,createView:s,fromArray:a,fromValues:o,ones:u,unitW:d,unitX:p,unitY:c,unitZ:h,zeros:l},Symbol.toStringTag,{value:"Module"}))},73982:function(e,t,n){n.d(t,{T:function(){return ye},I:function(){return _e}});var i=n(1413),r=n(15671),o=n(43144),a=n(60136),s=n(92572),l=n(27366),u=n(52639),p=n(91505),c=n(41691),h=n(42537),d=n(92026),v=n(47898),f=n(94172),y=n(68860),g=n(49861),m=(n(25243),n(63780)),_=n(69912),b=n(93655),C=n(74509),w=(n(59486),n(84652)),x=n(11186),M=n(71353),T=n(42137),S=n(2170),O=n(69662),k=n(92975),Z=n(22018),V=n(89494),I=n(48976),W=n(98131),P=n(14320),R=n(585);function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,d.pC)(n)?[e,t,n]:[e,t]}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,d.pC)(n)?{x:e,y:t,z:n}:{x:e,y:t}}var E=function(){function e(t){(0,r.Z)(this,e),this.spatialReference=t}return(0,o.Z)(e,[{key:"mapToLocalMultiple",value:function(e){var t=this;return(0,d.lV)(e.map((function(e){return t.mapToLocal(e)})))}},{key:"doUnnormalization",get:function(){return!1}}]),e}(),D=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,r.Z)(this,n),(o=t.call(this,i))._defaultZ=a,o.transform=(0,V.c)(),o.transformInv=(0,V.c)(),o.transform=(0,V.a)(e),(0,Z.c)(o.transformInv,o.transform),o}return(0,o.Z)(n,[{key:"makeMapPoint",value:function(e,t){return G(e,t,this._defaultZ)}},{key:"mapToLocal",value:function(e){return z(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}},{key:"localToMap",value:function(e){return G(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}]),n}(E),F=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var o;(0,r.Z)(this,n),(o=t.call(this,e.spatialReference)).view=e,o.defaultZ=null,o.pWS=(0,M.c)(),o.tangentFrameUpWS=(0,M.c)(),o.tangentFrameRightWS=(0,M.c)(),o.tangentFrameForwardWS=(0,M.c)(),o.localFrameRightWS=(0,M.c)(),o.localFrameUpWS=(0,M.c)(),o.worldToLocalTransform=(0,W.a)(),o.localToWorldTransform=(0,W.a)(),o.scale=1,o.scale=e.resolution,o.referenceMapPoint=i,o.defaultZ=i.hasZ?i.z:null;var a=e.state.camera.viewRight;o.view.renderCoordsHelper.toRenderCoords(o.referenceMapPoint,o.pWS),o.view.renderCoordsHelper.worldBasisAtPosition(o.pWS,P.R.X,o.tangentFrameRightWS),o.view.renderCoordsHelper.worldBasisAtPosition(o.pWS,P.R.Y,o.tangentFrameUpWS),o.view.renderCoordsHelper.worldBasisAtPosition(o.pWS,P.R.Z,o.tangentFrameForwardWS);var s=(0,M.c)();return(0,x.g)(s,o.tangentFrameForwardWS,(0,x.e)(a,o.tangentFrameForwardWS)),(0,x.b)(o.localFrameRightWS,a,s),(0,x.n)(o.localFrameRightWS,o.localFrameRightWS),(0,x.f)(o.localFrameUpWS,o.tangentFrameForwardWS,o.localFrameRightWS),(0,I.r)(o.worldToLocalTransform,o.localFrameRightWS,o.tangentFrameRightWS),(0,I.i)(o.localToWorldTransform,o.worldToLocalTransform),o}return(0,o.Z)(n,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}},{key:"makeMapPoint",value:function(e,t){return G(e,t,this.defaultZ)}},{key:"mapToLocal",value:function(e){var t=(0,M.c)();this.view.renderCoordsHelper.toRenderCoords(new R.Z({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,x.q)(t,t,this.worldToLocalTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return(0,d.pC)(n)?z(n.x/this.scale,n.y/this.scale):null}},{key:"localToMap",value:function(e){var t=(0,M.c)();this.view.renderCoordsHelper.toRenderCoords(new R.Z({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,x.q)(t,t,this.localToWorldTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(t,this.view.spatialReference);return(0,d.pC)(n)?G(n.x,n.y,this.defaultZ):null}}]),n}(E);function A(e,t){if("2d"===e.type)return new D(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){var n=t.length>2?new R.Z({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new R.Z({x:t[0],y:t[1],spatialReference:e.spatialReference});return new F(e,n)}return null}var H=n(77577),U=n(29909),N=n(80885);function L(e,t){var n=new R.Z({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function q(e,t){return new H.Z({points:e,spatialReference:t})}function j(e,t,n){var i=new U.Z({paths:e,spatialReference:t});return n&&(0,O.nc)(i),i}function Y(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=(0,w.d9)(e);r.forEach((function(e){var t=e[0],n=e[e.length-1];(0,m.fS)(t,n)&&1!==e.length||e.push(e[0])}));var o=new N.Z({rings:r,spatialReference:t});return o.rings.forEach((function(e){(0,O.bu)(e,!1,!1)||e.reverse()})),n&&(0,O.nc)(o),i&&o.isSelfIntersecting&&(0,k.JY)(t)&&(o=(0,S.simplify)(o)),o}function Q(e,t,n){var i=t.mapToLocalMultiple(e),r=[],o={x:i[0].x,y:i[0].y},a=i[1].x,s=i[1].y,l=Math.round(a-o.x),u=Math.round(s-o.y),p=Math.max(Math.abs(l),Math.abs(u));if(n){var c={x:o.x+p,y:o.y+p},h={x:o.x-p,y:o.y-p};r.push(z(c.x,h.y),z(h.x,h.y),z(h.x,c.y),z(c.x,c.y))}else{var v={x:l>0?o.x+p:o.x-p,y:u>0?o.y+p:o.y-p};r.push(z(o.x,o.y),z(v.x,o.y),z(v.x,v.y),z(o.x,v.y))}return B(Y([(0,d.lV)(r.map((function(e){return t.localToMap(e)})))],t.spatialReference,t.doUnnormalization,!0),r,t)}function X(e,t,n){var i=t.mapToLocalMultiple(e);if(1===i.length){var r=48,o=i[0];i=[z(o.x-r,o.y+r),z(o.x+r,o.y-r),z(o.x+r,o.y-r),z(o.x-r,o.y+r)]}var a=[],s={x:i[0].x,y:i[0].y},l={x:i[1].x,y:i[1].y};if(n){var u=Math.round(l.x-s.x),p=Math.round(l.y-s.y);a.push(z(s.x-u,s.y-p),z(l.x,s.y-p),z(l.x,l.y),z(s.x-u,l.y))}else a.push(z(s.x,s.y),z(l.x,s.y),z(l.x,l.y),z(s.x,l.y));return B(Y([(0,d.lV)(a.map((function(e){return t.localToMap(e)})))],t.spatialReference,t.doUnnormalization,!0),a,t)}function B(e,t,n){var i=J(t[3],t[2],n),r=J(t[1],t[2],n),o=J(t[0],t[1],n),a=J(t[0],t[3],n);return{geometry:e,midpoints:(0,d.pC)(i)&&(0,d.pC)(r)&&(0,d.pC)(o)&&(0,d.pC)(a)?{top:i,right:r,bottom:o,left:a}:null}}function J(e,t,n){$[0]=e.x,$[1]=e.y,$[2]=0,ee[0]=t.x,ee[1]=t.y,ee[2]=0,(0,x.h)($,$,ee,.5),K.x=$[0],K.y=ee[1],K.z=ee[2];var i=n.localToMap(K);return(0,d.pC)(i)?L(i,n.spatialReference):null}var K=z(0,0,0),$=(0,M.c)(),ee=(0,M.c)();function te(e,t,n,i){var r=t.mapToLocalMultiple(e),o=null,a=null;if(n)o=r[0],a=r[1];else{var s=r[0],l=r[1],u=Math.round(l.x-s.x),p=Math.round(l.y-s.y),c=Math.max(Math.abs(u),Math.abs(p));o=z(u>0?s.x+c/2:s.x-c/2,p>0?s.y+c/2:s.y-c/2),a=z(Math.abs(u)>Math.abs(p)?o.x-c/2:o.x,Math.abs(u)>Math.abs(p)?o.y:o.y-c/2)}var h=t.localToMap(o),v=t.localToMap(a);if((0,d.Wi)(h)||(0,d.Wi)(v))return null;t.doUnnormalization&&(0,O.Sq)([[h,v]],t.spatialReference);var f=L(h,t.spatialReference),g=L(v,t.spatialReference),m=(0,y.c9)(t.spatialReference),_=0;if((0,k.JY)(t.spatialReference))_=m*(0,S.distance)(f,g,null);else{var b=o.x-a.x,C=o.y-a.y;_=m*Math.sqrt(b*b+C*C)*(i||1)}var w=new T.Z({center:f,radius:_,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:Y(w.rings,w.spatialReference,!1),center:f,edge:g}}function ne(e,t,n){var i=t.mapToLocalMultiple(e),r=i[0],o=i[1],a=Math.round(o.x-r.x),s=Math.round(o.y-r.y),l=z(n?r.x:r.x+a/2,n?r.y:r.y+s/2),u=n?a:a/2,p=n?s:s/2,c=[],h=2*Math.PI/60;function v(e){var t=Math.cos(e),n=Math.sin(e);return z(u*t+l.x,p*n+l.y)}for(var f=0;f<60;f++)c.push(v(f*h));c.push(c[0]);var y=t.spatialReference,g=t.doUnnormalization,m=Y([(0,d.lV)(c.map((function(e){return t.localToMap(e)})))],y,g,!1),_=t.localToMap(v(Math.PI/2)),b=t.localToMap(v(0)),C=t.localToMap(v(-Math.PI/2)),w=t.localToMap(v(Math.PI));return{geometry:m,midpoints:(0,d.pC)(_)&&(0,d.pC)(b)&&(0,d.pC)(C)&&(0,d.pC)(w)?{top:L(_,y),right:L(b,y),bottom:L(C,y),left:L(w,y)}:null}}function ie(e,t){switch(e){case"point":case"multipoint":return"point";case"polyline":return((0,d.pC)(t)&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex";case"polygon":var n=(0,d.pC)(t)&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return n<3?"polylineZeroVertices":n<4?"polygonOneVertex":"polygonTwoVertices";default:return}}var re=n(29919),oe=n(52349),ae=n(77560),se=n(4943),le=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="draw-point",i.helpMessage=void 0,i}return(0,o.Z)(n)}(se.h);(0,l._)([(0,g.Cb)()],le.prototype,"type",void 0),(0,l._)([(0,g.Cb)()],le.prototype,"elevation",void 0),(0,l._)([(0,g.Cb)()],le.prototype,"viewType",void 0),(0,l._)([(0,g.Cb)()],le.prototype,"helpMessage",void 0),le=(0,l._)([(0,_.j)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],le);var ue=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="draw-polyline",i.totalLength=v.yP,i.helpMessage=void 0,i}return(0,o.Z)(n)}(se.h);(0,l._)([(0,g.Cb)()],ue.prototype,"type",void 0),(0,l._)([(0,g.Cb)()],ue.prototype,"elevation",void 0),(0,l._)([(0,g.Cb)()],ue.prototype,"totalLength",void 0),(0,l._)([(0,g.Cb)()],ue.prototype,"viewType",void 0),(0,l._)([(0,g.Cb)()],ue.prototype,"helpMessage",void 0),ue=(0,l._)([(0,_.j)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],ue);var pe=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="draw-polygon",i.area=v.MQ,i.helpMessage=void 0,i}return(0,o.Z)(n)}(se.h);(0,l._)([(0,g.Cb)()],pe.prototype,"type",void 0),(0,l._)([(0,g.Cb)()],pe.prototype,"elevation",void 0),(0,l._)([(0,g.Cb)()],pe.prototype,"area",void 0),(0,l._)([(0,g.Cb)()],pe.prototype,"viewType",void 0),(0,l._)([(0,g.Cb)()],pe.prototype,"helpMessage",void 0),pe=(0,l._)([(0,_.j)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],pe);var ce=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="draw-rectangle",i.xSize=v.yP,i.ySize=v.yP,i.area=v.MQ,i}return(0,o.Z)(n)}(se.h);(0,l._)([(0,g.Cb)()],ce.prototype,"type",void 0),(0,l._)([(0,g.Cb)()],ce.prototype,"xSize",void 0),(0,l._)([(0,g.Cb)()],ce.prototype,"ySize",void 0),(0,l._)([(0,g.Cb)()],ce.prototype,"area",void 0),ce=(0,l._)([(0,_.j)("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],ce);var he=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="draw-circle",i.radius=null,i.xSize=null,i.ySize=null,i.area=v.MQ,i}return(0,o.Z)(n)}(se.h);(0,l._)([(0,g.Cb)()],he.prototype,"type",void 0),(0,l._)([(0,g.Cb)()],he.prototype,"radius",void 0),(0,l._)([(0,g.Cb)()],he.prototype,"xSize",void 0),(0,l._)([(0,g.Cb)()],he.prototype,"ySize",void 0),(0,l._)([(0,g.Cb)()],he.prototype,"area",void 0),he=(0,l._)([(0,_.j)("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],he);var de=n(12494),ve=n(21971),fe=n(59418),ye=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e))._graphic=null,i._createOperationGeometry=null,i.defaultZ=0,i.geometryType=null,i.hasZ=!0,i.labelOptions=new oe.Z,i.mode=null,i.snappingManager=null,i.snapToScene=!1,i.tooltip=null,i.tooltipOptions=new ae.Z,i}return(0,o.Z)(n,[{key:"initialize",value:function(){var e=this;this.internalGraphicsLayer=new b.Z({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(function(t){return e.onVertexAdd(t)})),this.drawOperation.on("vertex-remove",(function(t){return e.onVertexRemove(t)})),this.drawOperation.on("vertex-update",(function(t){return e.onVertexUpdate(t)})),this.drawOperation.on("cursor-update",(function(t){return e.onCursorUpdate(t)})),this.drawOperation.on("complete",(function(t){return e.onComplete(t)})),(0,f.YP)((function(){return e.tooltipOptions.enabled}),(function(t){e.tooltip=t?new de.u({view:e.view,info:e._tooltipInfo}):(0,d.SC)(e.tooltip)}),f.tX),(0,f.YP)((function(){return e._tooltipInfo}),(function(t){(0,d.pC)(e.tooltip)&&(e.tooltip.info=t)}),f.tX)]),this.finishToolCreation()}},{key:"destroy",value:function(){this.drawOperation=(0,d.SC)(this.drawOperation),this.tooltip=(0,d.SC)(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,d.SC)(this.internalGraphicsLayer),this._set("view",null)}},{key:"_defaultElevation",get:function(){return(0,v.yG)(this.defaultZ,"meters")}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},{key:"centered",set:function(e){this._set("centered",e),this._updateGraphic()}},{key:"enabled",set:function(e){this.drawOperation.interactive=e,this._set("enabled",e)}},{key:"forceUniformSize",set:function(e){this._set("forceUniformSize",e),this._updateGraphic()}},{key:"graphic",get:function(){return this._graphic}},{key:"graphicSymbol",set:function(e){this._set("graphicSymbol",e),(0,d.pC)(this._graphic)&&(this._graphic.symbol=e)}},{key:"updating",get:function(){var e,t;return null!==(e=null===(t=this.drawOperation)||void 0===t?void 0:t.updating)&&void 0!==e&&e}},{key:"completeCreateOperation",value:function(){this.drawOperation.complete()}},{key:"onInputEvent",value:function(e){this.drawOperation.onInputEvent(e)}},{key:"redo",value:function(){this.drawOperation.redo()}},{key:"reset",value:function(){}},{key:"undo",value:function(){this.drawOperation.undo()}},{key:"_createGraphic",value:function(e){var t=this;this._graphic=new u.Z((0,i.Z)((0,i.Z)({},this.graphicProperties),{},{geometry:e,symbol:this.graphicSymbol})),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add((0,h.kB)((function(){(0,d.pC)(t._graphic)&&(t.internalGraphicsLayer.remove(t._graphic),t._graphic=(0,d.SC)(t._graphic))})),ge)}},{key:"_destroyAllVisualisations",value:function(){this.handles.remove(me.outline),this.handles.remove(me.regularVertices),this.handles.remove(me.activeVertex),this.handles.remove(ge)}},{key:"_getCreateOperationGeometry",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{operationComplete:!1};if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;var t=this.drawOperation.stagedVertex,n=this.drawOperation.committedVertices,i=n.slice();(0,d.pC)(t)&&i.push(this.drawOperation.coordinateHelper.pointToArray(t));var r=(0,d.pC)(t)?this.drawOperation.coordinateHelper.pointToArray(t):n.splice(-1)[0],o={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null},a=i.length,s=this.view.spatialReference,l="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":o.regularVertices=n,o.activeVertex=r,o.full=this.drawOperation.coordinateHelper.arrayToPoint(i[0]);break;case"multipoint":o.regularVertices=n,o.activeVertex=r,a>0&&(o.full=q(i,s));break;case"polyline":o.regularVertices=n,o.activeVertex=r,a>0&&(o.full=j([i],s,l));break;case"polygon":o.regularVertices=n,o.activeVertex=r,a>0&&(o.full=Y([i],s,l,!0));break;case"circle":if(a>0){var u=A(this.view,i[0]);if(1===a&&e.operationComplete){var p=i[0],c=u.makeMapPoint(p[0]+be*this.view.resolution,p[1]);o.circle=te([p,c],u,!0),o.full=(0,d.pC)(o.circle)?o.circle.geometry:null}else 2===a&&(this.forceUniformSize?(o.circle=te(i,u,this.centered),o.full=(0,d.pC)(o.circle)?o.circle.geometry:null):(o.rectangle=ne(i,u,this.centered),o.full=o.rectangle.geometry))}break;case"rectangle":if(a>0){var h=A(this.view,i[0]);if(1===a&&e.operationComplete){var v=i[0],f=h.makeMapPoint(v[0]+be*this.view.resolution,v[1]);o.rectangle=Q([v,f],h,!0),o.full=o.rectangle.geometry}else 2===a&&(o.rectangle=this.forceUniformSize?Q(i,h,this.centered):X(i,h,this.centered),o.full=o.rectangle.geometry)}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":a>1&&(o.outline=j([i],s,l));break;case"circle":case"rectangle":(0,d.pC)(o.full)&&"polygon"===o.full.type&&(o.outline=Y(o.full.rings,s,l))}return o}},{key:"initializeGraphic",value:function(e){return null}},{key:"onComplete",value:function(e){this._updateGraphic();var t=null;if(this.drawOperation.isCompleted){var n=this._getCreateOperationGeometry({operationComplete:!0});(0,d.pC)(n)&&((0,d.Wi)(this._graphic)?this._createGraphic(n.full):this._graphic.geometry=n.full,t=(0,d.Wg)(this._graphic).clone())}this._createOperationGeometry=null,this.emit("complete",(0,i.Z)({graphic:t},e))}},{key:"onCursorUpdate",value:function(e){this._updateGraphic(),this.emit("cursor-update",e)}},{key:"onDeactivate",value:function(){this.drawOperation.isCompleted||this.drawOperation.cancel()}},{key:"onVertexAdd",value:function(e){this._updateGraphic(),this.emit("vertex-add",e)}},{key:"onVertexRemove",value:function(e){this._updateGraphic(),this.emit("vertex-remove",e)}},{key:"onVertexUpdate",value:function(e){this._updateGraphic(),this.emit("vertex-update",e)}},{key:"_updateGraphic",value:function(){var e=this._getCreateOperationGeometry();this._createOperationGeometry=e,(0,d.Wi)(e)?this._destroyAllVisualisations():((0,d.pC)(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),me.outline):this.handles.remove(me.outline),(0,d.pC)(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),me.regularVertices):this.handles.remove(me.regularVertices),(0,d.pC)(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),me.activeVertex):this.handles.remove(me.activeVertex),(0,d.pC)(e.full)?(0,d.Wi)(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(ge))}},{key:"_tooltipInfo",get:function(){if(!this.drawOperation)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;default:return null}}},{key:"_drawPointTooltipInfo",get:function(){var e=(0,d.yw)(this.graphic,(function(e){return e.geometry}));return(0,d.Wi)(e)||"point"!==e.type||"2d"===this.view.type&&0===this.defaultZ?null:new le({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,viewType:this.view.type,helpMessage:ie("point",e)})}},{key:"_drawPolylineTooltipInfo",get:function(){var e=this._createOperationGeometry,t=(0,d.pC)(e)?e.full:null;if((0,d.Wi)(t)||"polyline"!==t.type)return null;var n=(0,fe.Ul)(t,this._elevationMode);return new ue({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:(0,d.Pt)(n,v.yP),viewType:this.view.type,helpMessage:ie("polyline",t)})}},{key:"_drawPolygonTooltipInfo",get:function(){var e=this._createOperationGeometry,t=(0,d.pC)(e)?e.full:null;if((0,d.Wi)(t)||"polygon"!==t.type)return null;var n=(0,ve.k)(t,this._elevationMode);return new pe({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:(0,d.Pt)(n,v.MQ),viewType:this.view.type,helpMessage:ie("polygon",t)})}},{key:"_drawRectangleTooltipInfo",get:function(){return(0,d.Wi)(this.drawOperation)?null:new ce({tooltipOptions:this.tooltipOptions,xSize:(0,d.Pt)(this._xSize,v.yP),ySize:(0,d.Pt)(this._ySize,v.yP),area:(0,d.Pt)(this._fullGeometryArea,v.MQ)})}},{key:"_drawCircleTooltipInfo",get:function(){if((0,d.Wi)(this.drawOperation))return null;var e=this.forceUniformSize;return new he({tooltipOptions:this.tooltipOptions,radius:e?(0,d.Pt)(this._circleRadius,v.yP):null,xSize:e?null:(0,d.Pt)(this._xSize,v.yP),ySize:e?null:(0,d.Pt)(this._ySize,v.yP),area:(0,d.Pt)(this._fullGeometryArea,v.MQ)})}},{key:"_circleRadius",get:function(){var e=this._createOperationGeometry;return(0,d.pC)(e)&&(0,d.pC)(e.circle)&&(0,d.pC)(e.circle.center)&&(0,d.pC)(e.circle.edge)?(0,fe.GQ)(e.circle.center,e.circle.edge,this._elevationMode):null}},{key:"_xSize",get:function(){var e=this._createOperationGeometry;if((0,d.Wi)(e)||(0,d.Wi)(e.rectangle))return null;var t=e.rectangle.midpoints;return(0,d.pC)(t)?(0,fe.GQ)(t.left,t.right,this._elevationMode):null}},{key:"_ySize",get:function(){var e=this._createOperationGeometry;if((0,d.Wi)(e)||(0,d.Wi)(e.rectangle))return null;var t=e.rectangle.midpoints;return(0,d.pC)(t)?(0,fe.GQ)(t.top,t.bottom,this._elevationMode):null}},{key:"_fullGeometryArea",get:function(){var e=this._createOperationGeometry,t=(0,d.pC)(e)?e.full:null;return(0,d.Wi)(t)||"polygon"!==t.type?null:(0,ve.k)(t,this._elevationMode)}},{key:"_elevationTooltipDetail",get:function(){return(0,i.Z)({mode:this.drawOperation.elevationInfo.mode},this._vertexTooltipElevation)}},{key:"_vertexTooltipElevation",get:function(){var e,t,n=this.tooltipOptions,i=this.view,r=this.drawOperation;if((0,d.Wi)(r))return this._defaultElevation;var o=null!==(e=r.stagedVertex)&&void 0!==e?e:r.lastVertex;if((0,d.Wi)(o)||"2d"===i.type)return this._defaultElevation;var a={mode:n.elevation.mode,offset:0},s=(null!==(t=(0,C.vQ)(i,o,r.elevationInfo,a))&&void 0!==t?t:0)*(0,y._R)(o.spatialReference);return(0,v.yG)(s,"meters")}},{key:"_elevationMode",get:function(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}}]),n}((0,c.p)(p.Z.EventedMixin(re.m)));(0,l._)([(0,g.Cb)()],ye.prototype,"_createOperationGeometry",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"_defaultElevation",null),(0,l._)([(0,g.Cb)({value:!0})],ye.prototype,"centered",null),(0,l._)([(0,g.Cb)({nonNullable:!0})],ye.prototype,"defaultZ",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"drawOperation",void 0),(0,l._)([(0,g.Cb)({value:!0})],ye.prototype,"enabled",null),(0,l._)([(0,g.Cb)({value:!0})],ye.prototype,"forceUniformSize",null),(0,l._)([(0,g.Cb)({constructOnly:!0})],ye.prototype,"geometryType",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"graphic",null),(0,l._)([(0,g.Cb)({constructOnly:!0})],ye.prototype,"graphicProperties",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"graphicSymbol",null),(0,l._)([(0,g.Cb)({constructOnly:!0})],ye.prototype,"hasZ",void 0),(0,l._)([(0,g.Cb)({constructOnly:!0,type:oe.Z})],ye.prototype,"labelOptions",void 0),(0,l._)([(0,g.Cb)({constructOnly:!0})],ye.prototype,"mode",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"snappingManager",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"snapToScene",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"tooltip",void 0),(0,l._)([(0,g.Cb)({constructOnly:!0,type:ae.Z})],ye.prototype,"tooltipOptions",void 0),(0,l._)([(0,g.Cb)({readOnly:!0})],ye.prototype,"type",void 0),(0,l._)([(0,g.Cb)({readOnly:!0})],ye.prototype,"updating",null),(0,l._)([(0,g.Cb)({constructOnly:!0,nonNullable:!0})],ye.prototype,"view",void 0),(0,l._)([(0,g.Cb)()],ye.prototype,"_tooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_drawPointTooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_drawPolylineTooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_drawPolygonTooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_drawRectangleTooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_drawCircleTooltipInfo",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_circleRadius",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_xSize",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_ySize",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_fullGeometryArea",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_elevationTooltipDetail",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_vertexTooltipElevation",null),(0,l._)([(0,g.Cb)()],ye.prototype,"_elevationMode",null),ye=(0,l._)([(0,_.j)("esri.views.draw.DrawGraphicTool")],ye);var ge="create-operation-graphic",me={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function _e(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment"}}var be=48},42046:function(e,t,n){n.d(t,{w:function(){return R}});var i=n(93433),r=n(1413),o=n(15671),a=n(43144),s=n(60136),l=n(92572),u=n(27366),p=n(91505),c=n(41691),h=n(84652),d=n(92026),v=n(66978),f=n(94172),y=n(17842),g=n(49861),m=(n(25243),n(69912)),_=n(70178),b=n(74509),C=n(50951),w="click",x=function(){function e(t){var n=t.grabbableForEvent;(0,o.Z)(this,e),this.events=new p.Z,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=n}return(0,a.Z)(e,[{key:"intersectionDistance",value:function(e,t){return 0}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"onElevationChange",value:function(){}},{key:"onViewChange",value:function(){}}]),e}(),M=n(14813),T=n(74229),S=n(84954),O=n(87268),k=n(52349),Z=n(77560),V=n(34019),I=n(80151),W=n(71040),P=n(64674),R=function(e){(0,s.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._createOperationCompleted=!1,i._pointerDownStates=new Set,i.isDraped=!0,i.labelOptions=new k.Z,i.tooltipOptions=new Z.Z,i.snapToSceneEnabled=null,i.lastVertex=null,(0,d.Wi)(e.elevationInfo)&&(i.elevationInfo=(0,b.mF)(!!e.hasZ)),i}return(0,a.Z)(n,[{key:"initialize",value:function(){var e=this,t=this.geometryType,n=this.view,i=n.spatialReference,o="viewingMode"in n.state?n.state.viewingMode:C.JY.Local,a="segment"===t||"multipoint"===t?"polyline":t;this.coordinateHelper=(0,M.Y6)(this.hasZ,this.hasM,i),this._editGeometryOperations=new O.c(new S.XE(a,this.coordinateHelper)),this._snappingOperation=new W.y({view:n,constrainResult:function(t){var n;return(0,d.Wi)(t)?t:null===(n=e._getEffectiveDrawSurface())||void 0===n?void 0:n.constrainZ(t)}}),this.handles.add((0,f.YP)((function(){return e.stagedVertex}),(function(t){(0,d.Wi)(t)||e.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:e._activeComponent.vertices.length,coordinates:e.coordinateHelper.pointToArray(t)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:function(e,t){return(0,d._W)(e,t,_.k)}})),this._activeComponent=new S.wA(i,o),this._editGeometryOperations.data.components.push(this._activeComponent);var s=this.segmentLabels;(0,d.pC)(s)&&(s.context={view:n,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([(0,f.YP)((function(){return e.labelOptions.enabled}),(function(e){s.visible=e}),f.tX),this.on("cursor-update",(function(){var t=e.stagedVertex;s.stagedVertex=(0,d.pC)(t)?e.coordinateHelper.pointToVector(t):null}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(function(t){var n=t.vertices.map((function(t){return{componentIndex:0,vertexIndex:t.index,coordinates:e.coordinateHelper.vectorToArray(t.pos)}})),i=n.map((function(e){return e.coordinates}));switch(t.type){case"vertex-add":e.emit(t.type,(0,r.Z)((0,r.Z)({},t),{},{added:i,vertices:n}));break;case"vertex-update":e.emit(t.type,(0,r.Z)((0,r.Z)({},t),{},{updated:i,vertices:n}));break;case"vertex-remove":e.emit(t.type,(0,r.Z)((0,r.Z)({},t),{},{removed:i,vertices:n}))}var o=e._activeComponent.getLastVertex(),a=(0,d.pC)(o)?e.coordinateHelper.vectorToDehydratedPoint(o.pos):null;((0,d.Wi)(a)||(0,d.Wi)(e.lastVertex)||!(0,_.k)(e.lastVertex,a))&&(e.lastVertex=a)}))),this._manipulator=new x({grabbableForEvent:function(t){return"click"!==e.drawingMode||"touch"===t.pointerType&&e._snappingEnabled&&1===e._pointerDownStates.size}}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==t,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(function(t){return e._onImmediateClick(t)})),this._manipulator.events.on("immediate-double-click",(function(t){return e._onImmediateDoubleClick(t)}))]),(0,P.Ob)(this,(function(){var t=(0,d.Pt)(e.view.inputManager.latestPointerType,"mouse"),n=e._getSnappingContext(t);(0,d.pC)(e.snappingManager)&&e.updatingHandles.addPromise((0,v.R8)(e._snappingOperation.resnap(e.snappingManager,n)))}))}},{key:"destroy",value:function(){(0,d.SC)(this.segmentLabels),(0,d.SC)(this._snappingOperation),this._editGeometryOperations=(0,d.SC)(this._editGeometryOperations)}},{key:"_snappingEnabled",get:function(){return(0,d.pC)(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}},{key:"_requiresScenePoint",get:function(){var e=this._getEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},{key:"committedVertices",get:function(){var e=this;return this._activeComponent.vertices.map((function(t){return e.coordinateHelper.vectorToArray(t.pos)}))}},{key:"drawingMode",set:function(e){this._set("drawingMode",null!==e&&void 0!==e?e:w)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(e){this._manipulator.interactive=e}},{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"numVertices",get:function(){return(0,d.pC)(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"snappingOptions",get:function(){return(0,d.pC)(this.snappingManager)?this.snappingManager.options:null}},{key:"stagedVertex",get:function(){return this._snappingOperation.stagedPoint},set:function(e){this._snappingOperation.stagedPoint=(0,h.d9)(e)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"vertices",get:function(){var e=this.committedVertices;return(0,d.pC)(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}},{key:"cancel",value:function(){this.complete({aborted:!0})}},{key:"commitStagedVertex",value:function(){if(this._snappingOperation.abort(),(0,d.pC)(this.stagedVertex)){var e=this.stagedVertex;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}},{key:"complete",value:function(e){var t=e&&e.aborted||!1;this._snappingOperation.abort(),(0,d.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;var n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((function(e,t){return{componentIndex:0,vertexIndex:t,coordinates:e}})),aborted:t,type:"complete"})}},{key:"onInputEvent",value:function(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}},{key:"redo",value:function(){this._editGeometryOperations.redo()}},{key:"undo",value:function(){(0,d.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}},{key:"_closeOnClickVertexIndex",value:function(e){var t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}},{key:"_createManipulatorDragPipeline",value:function(e){switch((0,d.Wg)(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}},{key:"_createManipulatorDragPipelineClick",value:function(e){var t=this;return(0,T.Xd)(e,(function(e,n,r,o){var a,s="touch"===o&&t._snappingEnabled;if(!t.isCompleted&&s){var l=(0,I.W)({predicate:function(){return s},snappingManager:t.snappingManager,snappingContext:new V.N({editGeometryOperations:t._editGeometryOperations,elevationInfo:t.elevationInfo,pointer:o,visualizer:t.snappingVisualizer}),updatingHandles:t.updatingHandles,useZ:!t._requiresScenePoint}),u=l.snappingStep,p=l.cancelSnapping;r=r.next((function(e){return s&&(0,d.pC)(t.snappingManager)&&t.snappingManager.doneSnapping(),e})).next(p),(a=n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&(t.stagedVertex=e.mapStart,("segment"===t.geometryType||s&&0===t.numVertices)&&t.commitStagedVertex()),e})).next((0,T.BS)(t.view,t.elevationInfo))).next.apply(a,(0,i.Z)(u)).next((function(e){return s&&(t.stagedVertex=e.mapEnd,"end"===e.action&&t.commitStagedVertex()),e})).next((function(e){return"end"===e.action&&("segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()),e}))}}))}},{key:"_createManipulatorDragPipelineFreehand",value:function(e){var t=this;return(0,T.Xd)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&((0,d.Wi)(t.stagedVertex)&&(t.stagedVertex=e.mapStart),"segment"===t.geometryType&&t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":t.complete()}return e}))}))}},{key:"_createManipulatorDragPipelineHybrid",value:function(e){var t=this;return(0,T.Xd)(e,(function(e,n){t.isCompleted||n.next(t._screenToMapDragEventStep()).next((function(e){return"start"===e.action&&((0,d.Wi)(t.stagedVertex)&&(t.stagedVertex=e.mapStart),t.commitStagedVertex()),e})).next((function(e){switch(e.action){case"start":case"update":t.stagedVertex=e.mapEnd,"polygon"!==t.geometryType&&"polyline"!==t.geometryType||t.commitStagedVertex();break;case"end":"segment"!==t.geometryType&&"point"!==t.geometryType||t.complete()}return e}))}))}},{key:"_drawAtFixedElevation",get:function(){return("segment"===this.geometryType||"polygon"===this.geometryType)&&this.numCommittedVertices>0}},{key:"_getEffectiveDrawSurface",value:function(){if((0,d.Wi)(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ())return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;var e=this.defaultZ,t=!1;return(0,d.pC)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),(0,d.pC)(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),(0,d.pC)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1),this._drawAtFixedElevation&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}},{key:"_mapToScreen",value:function(e){var t;return null===(t=this._getEffectiveDrawSurface())||void 0===t?void 0:t.mapToScreen(e)}},{key:"_onHold",value:function(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}},{key:"_onImmediateClick",value:function(e){if(!("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)){var t=this._activeComponent,n=this._closeOnClickVertexIndex(e.screenPoint);if((0,d.pC)(n))return e.stopPropagation(),void this.complete();var i=this._screenToMap(e.screenPoint);if((0,d.pC)(i))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&((0,d.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),(0,d.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete()}e.stopPropagation()}}},{key:"_onImmediateDoubleClick",value:function(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}},{key:"_onPointerMove",value:function(e){var t,n=(0,y.vW)(e.x,e.y),i=this._snappingOperation;if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)i.abort();else{e.stopPropagation();var r=this._closeOnClickVertexIndex(n);if((0,d.pC)(r))return this._closeOnVertex(r),void i.abort();var o=this._screenToMap(n),a=this._requiresScenePoint?null===(t=this.drawSurface)||void 0===t?void 0:t.screenToMap(n):null;if(this._manipulator.cursor=(0,d.pC)(o)?"crosshair":null,(0,d.Wi)(o))i.abort();else{var s=this.snappingManager;if((0,d.Wi)(s))return this.stagedVertex=o,void i.abort();var l=this._getSnappingContext(e.pointerType);this.updatingHandles.addPromise((0,v.R8)(i.snap({point:o,scenePoint:a},s,l)))}}}},{key:"_closeOnVertex",value:function(e){this.stagedVertex=null;var t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}},{key:"_screenToMap",value:function(e){var t;return null===(t=this._getEffectiveDrawSurface())||void 0===t?void 0:t.screenToMap(e)}},{key:"_screenToMapDragEventStep",value:function(){var e=this,t=null;return function(n){if("start"===n.action&&(t=e._screenToMap(n.screenStart)),(0,d.Wi)(t))return null;var i=e._screenToMap(n.screenEnd);return(0,d.pC)(i)?(0,r.Z)((0,r.Z)({},n),{},{mapStart:t,mapEnd:i}):null}}},{key:"_vertexWithinPointerDistance",value:function(e,t){var n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!(0,d.pC)(n)&&function(e,t,n){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r<=n}(n,t,25)}},{key:"_getSnappingContext",value:function(e){var t=this._drawAtFixedElevation?(0,d.yw)(this.elevationDrawSurface,(function(e){return e.defaultZ})):null;return new V.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,visualizer:this.snappingVisualizer,selfSnappingZ:(0,d.pC)(t)?{value:t,elevationInfo:this.elevationInfo}:null})}}]),n}(p.Z.EventedMixin(c.r));(0,u._)([(0,g.Cb)()],R.prototype,"_snappingEnabled",null),(0,u._)([(0,g.Cb)()],R.prototype,"defaultZ",void 0),(0,u._)([(0,g.Cb)()],R.prototype,"isDraped",void 0),(0,u._)([(0,g.Cb)({value:w})],R.prototype,"drawingMode",null),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"elevationDrawSurface",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"elevationInfo",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0,type:k.Z})],R.prototype,"labelOptions",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0,type:Z.Z})],R.prototype,"tooltipOptions",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"geometryType",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"hasM",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"hasZ",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"manipulators",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"drawSurface",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"segmentLabels",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"snappingManager",void 0),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"snappingVisualizer",void 0),(0,u._)([(0,g.Cb)()],R.prototype,"snapToSceneEnabled",void 0),(0,u._)([(0,g.Cb)()],R.prototype,"_snappingOperation",void 0),(0,u._)([(0,g.Cb)()],R.prototype,"stagedVertex",null),(0,u._)([(0,g.Cb)()],R.prototype,"lastVertex",void 0),(0,u._)([(0,g.Cb)()],R.prototype,"updating",null),(0,u._)([(0,g.Cb)({constructOnly:!0})],R.prototype,"view",void 0),R=(0,u._)([(0,m.j)("esri.views.draw.DrawOperation")],R)},46640:function(e,t,n){n.d(t,{aL:function(){return p},hP:function(){return h},iW:function(){return c}});var i=n(15671),r=n(43144),o=n(92026),a=n(17842),s=n(65618),l=n(37818),u=n(74509),p=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,i.Z)(this,e),this._elevationInfo=t,this.defaultZ=n,this._view=r,this._excludeGraphics=o}return(0,r.Z)(e,[{key:"screenToMap",value:function(e){if((0,o.pC)(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,a.s1)(e.x,e.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);var t=this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,a.s1)(e.x,e.y),this._elevationInfo,0,this._excludeGraphics);return(0,o.pC)(t)&&(t.z=void 0),t}},{key:"mapToScreen",value:function(e){var t=(0,s.Tx)(e.x,e.y,(0,u.vQ)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}},{key:"constrainZ",value:function(e){var t=this.defaultZ;return(0,o.pC)(t)&&e.z!==t&&((e=(0,l.WG)(e)).z=t),e}}]),e}(),c=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,i.Z)(this,e),this.view=t,this.elevationInfo=n,this.exclude=r}return(0,r.Z)(e,[{key:"screenToMap",value:function(e){var t=this.view.toMap(e,{exclude:this.exclude});return(0,o.pC)(t)&&(t.z=(0,u.Ou)(t,this.view,this.elevationInfo)),t}},{key:"mapToScreen",value:function(e){var t=e;return(0,o.pC)(this.elevationInfo)&&(t=(0,s.Tx)(e.x,e.y,(0,u.vQ)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}},{key:"constrainZ",value:function(e){return e}}]),e}(),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,i.Z)(this,e),this.view=t,this.hasZ=n,this.defaultZ=r,this.mapToScreen=function(e){return t.toScreen(e)},this.screenToMap=n?function(e){var n=t.toMap(e);return n.z=r,n}:function(e){return t.toMap(e)}}return(0,r.Z)(e,[{key:"constrainZ",value:function(e){var t=this.defaultZ;return this.hasZ&&e.z!==t&&((e=(0,l.WG)(e)).z=t),e}}]),e}()},92583:function(e,t,n){n.d(t,{NI:function(){return b},lv:function(){return m},mO:function(){return y},nn:function(){return f},ny:function(){return _}});var i=n(92026),r=n(47898),o=n(88396),a=n(11186),s=n(71353),l=n(82218),u=n(51378),p=n(254),c=n(12225),h=n(29014),d=n(34778),v=n(59418);function f(e,t){return g(e,t,!1)}function y(e,t){return g(e,t,!0)}function g(e,t,n){if(e instanceof d.y){if(e.operation instanceof p.z)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?-1:1,r=(0,s.f)(i*e.dx,i*e.dy,i*e.dz);(0,a.a)(t.origin,t.origin,r)}(e.operation,t,n),!0;if(e.operation instanceof c.S)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?-e.angle:e.angle;(0,a.I)(t.basis1,t.basis1,s.Z,i),(0,a.I)(t.basis2,t.basis2,s.Z,i)}(e.operation,t,n),!0;if(e.operation instanceof h.q)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n?1/e.factor1:e.factor1,r=n?1/e.factor2:e.factor2;(0,a.g)(t.basis1,t.basis1,i),(0,a.g)(t.basis2,t.basis2,r),(0,o.u)(t.origin,t.origin,e.origin,e.axis1,i),(0,o.u)(t.origin,t.origin,e.origin,e.axis2,r)}(e.operation,t,n),!0}return!1}function m(e,t,n,i){i||(i=(0,l.a)());var r=(0,o.s)(u.qW.get(),e[1],-e[0]),a=(0,o.s)(u.qW.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),s=(0,o.s)(u.qW.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),p=u.qW.get();t.components.forEach((function(t){return t.vertices.forEach((function(t){var n=t.pos;(0,o.s)(p,(0,o.h)(e,n),(0,o.h)(r,n)),(0,o.y)(a,a,p),(0,o.z)(s,s,p)}))}));var c=1e-6,h=(0,o.s)(u.qW.get(),s[0]-a[0]<c?n/2:0,s[1]-a[1]<c?n/2:0);return(0,o.a)(a,a,h),(0,o.j)(s,s,h),(0,o.b)(i.basis1,e,(s[0]-a[0])/2),(0,o.b)(i.basis2,r,(s[1]-a[1])/2),(0,o.s)(i.origin,a[0]*e[0]+a[1]*r[0],a[0]*e[1]+a[1]*r[1]),(0,o.j)(i.origin,i.origin,i.basis1),(0,o.j)(i.origin,i.origin,i.basis2),i}function _(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;r||(r=(0,l.a)()),t.toRenderCoords(e.origin,n,r.origin);var o=u.WM.get();(0,a.a)(o,e.origin,e.basis1),(0,a.a)(o,o,e.basis2),t.toRenderCoords(o,n,o);var s=u.WM.get();(0,a.a)(s,e.origin,e.basis1),(0,a.b)(s,s,e.basis2),t.toRenderCoords(s,n,s);var p=u.WM.get();(0,a.b)(p,e.origin,e.basis1),(0,a.b)(p,p,e.basis2),t.toRenderCoords(p,n,p);var c=u.WM.get();(0,a.b)(c,e.origin,e.basis1),(0,a.a)(c,c,e.basis2),t.toRenderCoords(c,n,c);var h=(0,a.h)(u.WM.get(),o,s,.5);(0,a.b)(h,h,r.origin);var d=(0,a.h)(u.WM.get(),p,c,.5);(0,a.b)(d,r.origin,d),(0,a.h)(r.basis1,h,d,.5);var v=(0,a.h)(u.WM.get(),c,o,.5);(0,a.b)(v,v,r.origin);var f=(0,a.h)(u.WM.get(),s,p,.5);(0,a.b)(f,r.origin,f),(0,a.h)(r.basis2,v,f,.5);var y=(0,a.f)(u.WM.get(),r.basis1,r.basis2),g=(0,a.f)(y,y,r.basis1);return(0,a.n)(g,g),(0,a.g)(r.basis2,g,(0,a.e)(r.basis2,g)),(0,a.g)(r.basis1,r.basis1,1+i/(0,a.l)(r.basis1)),(0,a.g)(r.basis2,r.basis2,1+i/(0,a.l)(r.basis2)),(0,l.u)(r),r}function b(e,t,n,o){var s=u.WM.get();(0,a.b)(s,(0,a.b)(s,e.origin,e.basis1),e.basis2);var l=u.WM.get();(0,a.z)(l,s,e.basis1,2);var p=u.WM.get();(0,a.z)(p,l,e.basis2,2);var c=u.WM.get();(0,a.z)(c,s,e.basis2,2),s[2]=l[2]=p[2]=c[2]=t;var h=o?"on-the-ground":"absolute-height",d=(0,r.Fp)((0,v.bZ)(s,l,n,h),(0,v.bZ)(c,p,n,h)),f=(0,r.Fp)((0,v.bZ)(l,p,n,h),(0,v.bZ)(s,c,n,h));return(0,i.Wi)(f)||(0,i.Wi)(d)?null:[d,f]}},99034:function(e,t,n){var i,r,o;n.d(t,{Q9:function(){return r},bH:function(){return i},jg:function(){return o}}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(o||(o={}))},21971:function(e,t,n){n.d(t,{f:function(){return y},k:function(){return f}});var i=n(92026),r=n(12611),o=(n(59486),n(47898)),a=n(2170),s=n(79803),l=n(15559),u=n(47072),p=n(78952);function c(e){var t=e.spatialReference;return(0,u.T)(t,h,d,v,e)}function h(e){return(0,o.ne)(Math.abs((0,l.p8)([e],"square-meters")[0]),"square-meters")}function d(e){try{return(0,o.ne)(Math.abs((0,a.geodesicArea)(e,"square-meters")),"square-meters")}catch(t){return null}}function v(e){var t=[];return(0,s.K2)(e,t)?(0,o.ne)(Math.abs((0,l.p8)([{type:"polygon",rings:t,spatialReference:p.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.ln)();if("on-the-ground"===t){var o=c(e);return(0,i.pC)(o)?o:(0,r.X)(e,n)}return(0,r.oN)(e,n)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.ln)();return f(e,"on-the-ground",t)}},12611:function(e,t,n){n.d(t,{X:function(){return f},bT:function(){return b},ln:function(){return _},oN:function(){return v}});var i=n(37762),r=n(92026),o=n(47898),a=n(68860),s=n(79347),l=n(11186),u=n(71353),p=n(79803),c=n(55652),h=n(74702),d=n(25003);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return y(e,t)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return y(e,t,!1)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.hasZ,s=(0,d.m)(e.spatialReference),v=(0,a.oq)(s);if((0,r.Wi)(v))return null;var f,y=function(e,t){return!(t.length<2)&&((0,l.s)(e,t[0],t[1],n&&t[2]||0),!0)},_=0,C=(0,i.Z)(e.rings);try{for(C.s();!(f=C.n()).done;){var w=f.value,x=w.length;if(!(x<3)){for(var M=t.positionsWorldCoords;M.length<x;)M.push((0,u.c)());for(var T=g,S=(0,l.s)(m,0,0,0),O=1/x,k=0;k<x;k++){if(!y(T,w[k]))return null;if(!(0,p.SH)(T,e.spatialReference,M[k],s))return null;(0,l.z)(S,S,M[k],O)}var Z=(0,c.zk)(M[0],M[1],S,(0,c.re)());if(0!==(0,l.p)((0,c.mJ)(Z))){for(var V=0;V<x;V++)(0,c.tx)(Z,S,M[V],M[V]);for(var I=b(M),W=0;W<I.length;W+=3)_+=(0,h.wu)(M[I[W]],M[I[W+1]],M[I[W+2]])}}}}catch(P){C.e(P)}finally{C.f()}return(0,o.ne)(_,v)}var g=(0,u.c)(),m=(0,u.c)();function _(){return{positionsWorldCoords:[]}}function b(e){return(0,s.e)(function(e){for(var t=new Float64Array(2*e.length),n=0;n<e.length;++n){var i=e[n],r=2*n;t[r+0]=i[0],t[r+1]=i[1]}return t}(e),[],2)}}}]);
//# sourceMappingURL=16669.bba63ab6.chunk.js.map