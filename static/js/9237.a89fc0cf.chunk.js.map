{"version":3,"file":"static/js/9237.a89fc0cf.chunk.js","mappings":"yWAI+iBA,EAAC,0CAAqB,aAAa,MAAmI,OAAnI,gBAAC,eAASC,YAAgBC,KAAK,aAAa,EAAKC,iBAAgBC,EAAAA,EAAAA,IAAC,yCAAE,WAAMC,GAAC,sEAAG,EAAKC,QAAQ,SAACD,EAAEE,GAAC,OAAG,EAAKC,aAAaH,EAAEE,EAAE,GAAEF,GAAE,2CAAC,mDAA3D,GAA6D,KAAI,EAA2zC,OAA1zC,6CAAY,WAACI,KAAKC,QAAQC,IAAI,EAACC,EAAAA,EAAAA,KAAG,kBAAI,EAAKC,KAAKC,eAAeC,KAAK,IAAG,kBAAI,EAAKC,kCAAkC,GAAE,CAACC,MAAK,EAAGC,SAAQ,IAAKT,KAAKU,MAAMC,GAAG,UAAU,kBAAI,EAAKC,gBAAgBC,WAAW,EAAKnB,kBAAkB,MAAKM,KAAKY,gBAAgBV,KAAK,0BAAc,QAAd,EAAI,EAAKQ,aAAK,OAA8B,QAA9B,EAAV,EAAYI,oCAA4B,WAA9B,EAAV,EAA0CC,OAAO,IAAG,WAAK,EAAKH,gBAAgBC,WAAW,EAAKG,mBAAmB,IAAIhB,KAAKY,gBAAgBV,KAAK,wBAAc,QAAd,EAAI,EAAKQ,aAAK,aAAV,EAAYO,QAAQ,IAAG,WAAK,EAAKL,gBAAgBC,WAAW,EAAKG,mBAAmB,IAAIhB,KAAKY,gBAAgBV,KAAK,kBAAI,EAAKgB,UAAU,IAAG,kBAAI,EAAKN,gBAAgBC,WAAW,EAAKG,mBAAmB,GAAE,GAAC,yDAAmChB,KAAKmB,sBAAsBnB,KAAKU,MAAMU,OAAOpB,KAAKU,MAAMW,kBAAkBC,UAAU,IAAI,GAAC,wCAAkB,MAAM,CAACJ,WAAWlB,KAAKkB,WAAW,GAAC,+EAAoBtB,EAAEE,EAAEH,GAAC,0EAAEG,EAAEyB,qBAAoB,gBAAC3B,EAAE4B,MAAM1B,EAAEyB,qBAAoB,sBAAkE,OAAhE3B,EAAE4B,MAAMC,SAASC,cAAc,UAAU9B,EAAE+B,UAAU7B,EAAE6B,UAAS,SAAO3B,KAAKD,aAAaH,EAAED,GAAE,gDAAE,uDAAjL,IAAiL,8EAAmBC,EAAED,GAAC,uFAAOC,EAAE4B,iBAAiBI,qBAAoB9B,EAAAA,EAAAA,IAAEF,EAAE+B,WAAU,sBAAO,IAAIE,MAAK,OAAqC,OAA9B1B,EAAEP,EAAE4B,MAAMM,EAAE3B,EAAE4B,WAAW,MAAK,SAAS/B,KAAKU,MAAMsB,cAAcpC,EAAE+B,UAAU,CAACM,OAAOtC,IAAG,OAAuC,GAA/FuC,EAAC,OAAwDC,EAAEnC,KAAKU,MAAM0B,YAAYF,GAAGG,aAAcvC,EAAAA,EAAAA,IAAEqC,GAAE,uBAAO,IAAIN,MAAK,QAAC1B,EAAEmC,MAAMH,EAAEG,MAAMnC,EAAEoC,OAAOJ,EAAEI,QAAahD,EAAEuC,EAAEU,gBAAgBL,EAAEG,MAAMH,EAAEI,SAAUE,KAAKC,IAAIP,EAAEQ,aAAab,EAAEc,aAAarD,EAAE,EAAE,GAAE,iDAAC,qDAA9X,MAA8X,EAAh+C,EAAe4C,E,QAAAA,GAAED,EAAAA,IAA6gDW,EAA5DtD,GAAEK,EAAAA,EAAAA,GAAE,EAACkC,EAAAA,EAAAA,GAAE,4CAA4CvC,E,wQCAx9CuD,EAAE,SAAAA,GAAI,IAAIC,EAAC,0CAAiB,SAAAA,IAAa,MAAmC,OAAnC,gBAAC,eAASvD,YAAgBY,KAAK,KAAI,EAAk4B,OAAj4B,8FAAyBR,EAAEsC,GAAC,oGAAa,GAACc,EAAGhD,KAATU,MAAkBd,EAAC,sBAAO,IAAIkC,EAAAA,EAAE,sCAAsC,gCAAgC,CAACpB,MAAMsC,IAAG,OAAiC,GAAblD,EAAGkD,EAAhBC,aAAkBH,GAAEI,EAAAA,EAAAA,GAAEF,EAAEd,GAAOpC,KAAGH,EAAAA,EAAAA,IAAEmD,GAAE,sBAAO,IAAIhB,EAAAA,EAAE,sCAAsC,iDAAiD,CAACmB,aAAanD,EAAEqD,cAAcL,IAAG,uBAAeA,EAAEM,oBAAmB,OAAsa,OAAncL,EAAC,QAA6BM,EAAE,IAAI9D,EAAAA,GAAI2B,WAAWlB,KAAKkB,WAAWmC,EAAEC,SAAS1D,EAAEyD,EAAEE,UAAUR,EAAEM,EAAEG,oBAAoB5D,EAAE6D,iBAAiB,EAAuCzD,KAAKI,KAA3BsD,EAAC,EAAZC,WAA8Bd,EAAC,EAAlBY,iBAA8BG,EAAE,OAAO5D,KAAKI,KAAKX,KAAK,IAAIU,EAAAA,EAAEuD,EAAEA,EAAEb,GAAG,IAAI1C,EAAAA,EAAE,GAAGuD,EAAE,GAAGA,EAAEb,GAAE,EAA6CC,EAAEe,cAAc,CAACC,qBAAoB,EAAGC,mBAAkB,GAAjFC,EAAC,EAArBF,oBAAwCG,EAAC,EAAnBF,kBAAmFG,EAAE,CAACC,oBAAmB,EAAGL,oBAAoBE,EAAE1C,UAAUsC,EAAEG,kBAAkBE,EAAEhC,QAAOE,EAAAA,EAAAA,IAAED,GAAGA,EAAED,OAAO,MAAK,kBAAQe,EAAEoB,oBAAoBf,EAAEa,GAAGG,MAAM,SAAAzE,GAAC,OAAEA,CAAC,KAAE,iDAAC,qDAAh0B,IAAg0B,kCAAW,MAAC,SAAQ,4DAAmC,QAAhB,EAACI,KAAKkB,kBAAU,OAAf,EAAiBoD,QAAO,KAAC,EAAn8B,CAAexB,GAAs7B,OAAOlD,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,OAAKa,EAAEwB,UAAU,aAAQ,IAAQ3E,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,OAAKa,EAAEwB,UAAU,iBAAY,IAAQ3E,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,IAAEpC,EAAAA,KAAIiD,EAAEwB,UAAU,kBAAa,IAAQ3E,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,OAAKa,EAAEwB,UAAU,YAAO,GAAQxB,GAAEnD,EAAAA,EAAAA,GAAE,EAACoD,EAAAA,EAAAA,GAAE,uCAAuCD,EAAI,C,8LCAh2C5C,EAAE,SAAAA,GAAI,IAAI4C,EAAC,qGAAuM,OAAvM,kCAAiB,WAAY,WAAC/C,KAAKC,QAAQC,KAAIiC,EAAAA,EAAAA,KAAG,kBAAI,EAAKzB,KAAK,GAAE,WAAW,SAAAoB,GAAI,EAAK0C,UAAU1C,EAAE2C,aAAaC,OAAO,SAAA5C,IAAII,EAAAA,EAAAA,IAAEJ,IAAIlC,EAAAA,EAAAA,UAAY,EAAK+E,eAAeC,MAAM9C,EAAE,GAAG,IAAI,uBAAuB,KAAC,EAAvM,CAAe3B,GAA0L,OAAO2B,EAAAA,EAAAA,GAAE,EAACnC,EAAAA,EAAAA,OAAKoD,EAAEwB,UAAU,aAAQ,GAAQxB,GAAEjB,EAAAA,EAAAA,GAAE,EAAChC,EAAAA,EAAAA,GAAE,4CAA4CiD,EAAI,C,0ICA7kB,SAAeF,EAAE,GAAD,4CAA8e,OAA9e,0BAAhB,WAAiBQ,GAAC,4GAAkB,GAAjBR,EAAC,+BAACQ,EAAEF,gBAAkBvD,EAAAA,EAAAA,IAAEiD,GAAE,yCAAO,IAAE,uBAAeA,EAAEO,kBAAkBC,EAAEwB,aAAY,OAAuF,GAAjI3C,EAAC,OAA+D/B,EAAG0C,EAAvBiC,oBAAwCvF,EAAiD8D,EAA/D0B,cAA4B7B,EAAmCG,EAA/C2B,YAA4BlF,EAAmBuD,EAAjC4B,cAA8B9C,EAAGkB,EAAjB6B,eAAsBhD,EAAEiD,SAAS,KAAI,0CAAO,CAAC,MAAI,YAAShF,EAAC,mCAAO6C,EAAAA,EAAAA,IAAEK,GAAE,iDAAC,GAAE,QAA+B,OAAhDvB,EAAC,KAAiBkC,GAAErE,EAAAA,EAAAA,IAAE0D,EAAEwB,YAAW,kBAAK3C,IAAC,OAAIJ,KAAG,mBAAQoB,GAAGc,EAAEoB,KAAKlC,GAAGc,GAAGzE,GAAgB,QAAf,EAAE8D,EAAEwB,mBAAW,OAAb,EAAeQ,IAAI9F,KAAKyE,EAAEmB,SAAS5F,IAAIyE,EAAEoB,KAAK7F,GAAGyE,GAAGlE,GAAgB,QAAf,EAAEuD,EAAEwB,mBAAW,OAAb,EAAeQ,IAAIvF,KAAKkE,EAAEmB,SAASrF,IAAIkE,EAAEoB,KAAKtF,GAAGqC,GAAGA,EAAEmD,SAAS,SAAA1F,GAAG,MAAgBoD,EAAGpD,EAAZ2F,SAAcvB,GAAGhB,IAAgB,QAAf,EAAEK,EAAEwB,mBAAW,aAAb,EAAeQ,IAAIrC,MAAKgB,EAAEmB,SAASnC,IAAIgB,EAAEoB,KAAKpC,EAAE,IAAIgB,IAAC,4CAAC,iCAAS9B,EAAEtC,EAAEoD,GAAG,OAAOpD,EAAEuD,cAAcvD,EAAEuD,eAAcE,EAAAA,EAAAA,IAAEL,IAAIA,EAAEwC,8BAA6BnC,EAAAA,EAAAA,IAAEzD,EAAE6F,sBAAsB7F,EAAE6F,qBAAqB,IAAI,C","sources":["../node_modules/@arcgis/core/views/3d/layers/ImageryLayerView3D.js","../node_modules/@arcgis/core/views/layers/ImageryLayerView.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{isNone as a}from\"../../../core/maybe.js\";import{debounce as t}from\"../../../core/promiseUtils.js\";import{when as i}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/Error.js\";import\"../../../core/has.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./DynamicLayerView3D.js\";import o from\"../../layers/ImageryLayerView.js\";let n=class extends(o(s)){constructor(){super(...arguments),this.type=\"imagery-3d\",this.redrawDebounced=t((async e=>{this.redraw(((e,a)=>this._redrawImage(e,a)),e)}),2e3)}initialize(){this.handles.add([i((()=>this.view.basemapTerrain.ready),(()=>this._initializeMaximumDataResolution()),{once:!0,initial:!0}),this.layer.on(\"redraw\",(()=>this.updatingHandles.addPromise(this.redrawDebounced())))]),this.updatingHandles.add((()=>this.layer?.exportImageServiceParameters?.version),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())})),this.updatingHandles.add((()=>this.layer?.renderer),(()=>{this.updatingHandles.addPromise(this.refreshDebounced())})),this.updatingHandles.add((()=>this.timeExtent),(()=>this.updatingHandles.addPromise(this.refreshDebounced())))}_initializeMaximumDataResolution(){this.maximumDataResolution=this.layer.loaded?this.layer.serviceRasterInfo.pixelSize:null}getFetchOptions(){return{timeExtent:this.timeExtent}}async processResult(e,a,t){a.imageOrCanvasElement?e.image=a.imageOrCanvasElement:(e.image=document.createElement(\"canvas\"),e.pixelData=a.pixelData,await this._redrawImage(e,t))}async _redrawImage(e,t){if(!(e.image instanceof HTMLCanvasElement)||a(e.pixelData))throw new Error;const i=e.image,r=i.getContext(\"2d\"),s=await this.layer.applyRenderer(e.pixelData,{signal:t}),o=this.layer.applyFilter(s).pixelBlock;if(a(o))throw new Error;i.width=o.width,i.height=o.height;const n=r.createImageData(o.width,o.height);n.data.set(o.getAsRGBA()),r.putImageData(n,0,0)}};n=e([r(\"esri.views.3d.layers.ImageryLayerView3D\")],n);const d=n;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isNone as t,isSome as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as a}from\"../../layers/support/commonProperties.js\";import n from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const m=m=>{let c=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,s){const{layer:p}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:p});const{popupEnabled:a}=p,m=u(p,s);if(!a||t(m))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:m});const c=await m.getRequiredFields(),l=new n;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=c,l.outSpatialReference=e.spatialReference;const{resolution:y,spatialReference:d}=this.view,w=\"2d\"===this.view.type?new i(y,y,d):new i(.5*y,.5*y,d),{returnTopmostRaster:f,showNoDataRecords:h}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},R={returnDomainValues:!0,returnTopmostRaster:f,pixelSize:w,showNoDataRecords:h,signal:o(s)?s.signal:null};return p.queryVisibleRasters(l,R).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([s()],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"suspended\",void 0),e([s(a)],c.prototype,\"timeExtent\",void 0),e([s()],c.prototype,\"view\",void 0),c=e([p(\"esri.views.layers.ImageryLayerView\")],c),c};export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as l}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as t}from\"../../../layers/support/fieldUtils.js\";async function d(l,d=l.popupTemplate){if(e(d))return[];const s=await d.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:i}=d,{objectIdField:n,typeIdField:u,globalIdField:a,relationships:o}=l;if(s.includes(\"*\"))return[\"*\"];const r=i?await p(l):[],f=t(l.fieldsIndex,[...s,...r]);return u&&f.push(u),f&&n&&l.fieldsIndex?.has(n)&&!f.includes(n)&&f.push(n),f&&a&&l.fieldsIndex?.has(a)&&!f.includes(a)&&f.push(a),o&&o.forEach((e=>{const{keyField:p}=e;f&&p&&l.fieldsIndex?.has(p)&&!f.includes(p)&&f.push(p)})),f}function s(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{s as getFetchPopupTemplate,d as getRequiredFields};\n"],"names":["n","arguments","type","redrawDebounced","t","e","redraw","a","_redrawImage","this","handles","add","i","view","basemapTerrain","ready","_initializeMaximumDataResolution","once","initial","layer","on","updatingHandles","addPromise","exportImageServiceParameters","version","refreshDebounced","renderer","timeExtent","maximumDataResolution","loaded","serviceRasterInfo","pixelSize","imageOrCanvasElement","image","document","createElement","pixelData","HTMLCanvasElement","Error","r","getContext","applyRenderer","signal","s","o","applyFilter","pixelBlock","width","height","createImageData","data","set","getAsRGBA","putImageData","d","m","c","p","popupEnabled","u","popupTemplate","getRequiredFields","l","geometry","outFields","outSpatialReference","spatialReference","y","resolution","w","layerOptions","returnTopmostRaster","showNoDataRecords","f","h","R","returnDomainValues","queryVisibleRasters","then","isEmpty","prototype","doRefresh","dataChanged","catch","declaredClass","error","fieldsIndex","lastEditInfoEnabled","objectIdField","typeIdField","globalIdField","relationships","includes","push","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}