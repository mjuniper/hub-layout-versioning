"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[12964,99086],{12964:function(e,t,r){r.r(t),r.d(t,{executeRelationshipQuery:function(){return w},executeRelationshipQueryForCount:function(){return j}});var o=r(1413),n=r(74165),i=r(15861),u=r(23084),s=r(37762),a=r(76200),c=r(22585);function d(e,t){var r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),!r.outFields||null!==t&&void 0!==t&&t.returnCountOnly?delete r.outFields:r.outFields.includes("*")?r.outFields="*":r.outFields=r.outFields.join(","),r.outSpatialReference&&(r.outSR=r.outSR.wkid||JSON.stringify(r.outSR.toJSON()),delete r.outSpatialReference),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}function l(e,t,r){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var u,a,c,d,l,p,y,f,v,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,r,i);case 2:u=e.sent,a=u.data,c=a.geometryType,d=a.spatialReference,l={},p=(0,s.Z)(a.relatedRecordGroups);try{for(p.s();!(y=p.n()).done;)if(f=y.value,v={fields:void 0,objectIdFieldName:void 0,geometryType:c,spatialReference:d,hasZ:!!a.hasZ,hasM:!!a.hasM,features:f.relatedRecords},null!=f.objectId)l[f.objectId]=v;else for(b in f)f.hasOwnProperty(b)&&"relatedRecords"!==b&&(l[f[b]]=v)}catch(n){p.e(n)}finally{p.f()}return e.abrupt("return",(0,o.Z)((0,o.Z)({},u),{},{data:l}));case 10:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function y(e,t,r){return f.apply(this,arguments)}function f(){return f=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var u,a,c,d,l,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,r,i,{returnCountOnly:!0});case 2:u=e.sent,a=u.data,c={},d=(0,s.Z)(a.relatedRecordGroups);try{for(d.s();!(l=d.n()).done;)null!=(p=l.value).objectId&&(c[p.objectId]=p.count)}catch(n){d.e(n)}finally{d.f()}return e.abrupt("return",(0,o.Z)((0,o.Z)({},u),{},{data:c}));case 8:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e,t){return v.apply(this,arguments)}function v(){return v=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i,u,s,l=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]?l[2]:{},u=l.length>3?l[3]:void 0,s=(0,c.A)((0,o.Z)((0,o.Z)((0,o.Z)({},t.query),{},{f:"json"},u),d(r,u))),e.abrupt("return",(0,a.default)(t.path+"/queryRelatedRecords",(0,o.Z)((0,o.Z)({},i),{},{query:(0,o.Z)((0,o.Z)({},i.query),s)})));case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var b=r(49818),m=r(99086);function w(e,t,r){return Z.apply(this,arguments)}function Z(){return Z=(0,i.Z)((0,n.Z)().mark((function e(t,r,o){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.default.from(r),i=(0,u.en)(t),e.abrupt("return",l(i,r,o).then((function(e){var t=e.data,r={};return Object.keys(t).forEach((function(e){return r[e]=b.Z.fromJSON(t[e])})),r})));case 3:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function j(e,t,r){return S.apply(this,arguments)}function S(){return S=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.default.from(r),s=(0,u.en)(t),e.abrupt("return",y(s,r,(0,o.Z)({},i)).then((function(e){return e.data})));case 3:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},99086:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var o,n=r(15671),i=r(43144),u=r(60136),s=r(92572),a=r(27366),c=(r(59486),r(46784)),d=r(84652),l=r(49861),p=r(25243),y=r(69912),f=r(31201),h=r(64020),v=r(78952),b=o=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,n.Z)(this,r),(o=t.call(this,e)).cacheHint=void 0,o.dynamicDataSource=void 0,o.gdbVersion=null,o.geometryPrecision=void 0,o.historicMoment=null,o.maxAllowableOffset=void 0,o.objectIds=null,o.orderByFields=null,o.outFields=null,o.outSpatialReference=null,o.relationshipId=void 0,o.start=void 0,o.num=void 0,o.returnGeometry=!1,o.returnM=void 0,o.returnZ=void 0,o.where=null,o}return(0,i.Z)(r,[{key:"_writeHistoricMoment",value:function(e,t){t.historicMoment=e&&e.getTime()}},{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(t.definitionExpression="1=1")}},{key:"clone",value:function(){return new o((0,d.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}}]),r}(c.wq);(0,a._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"cacheHint",void 0),(0,a._)([(0,l.Cb)({type:h.n,json:{write:!0}})],b.prototype,"dynamicDataSource",void 0),(0,a._)([(0,l.Cb)({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0),(0,a._)([(0,l.Cb)({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0),(0,a._)([(0,l.Cb)({type:Date})],b.prototype,"historicMoment",void 0),(0,a._)([(0,f.c)("historicMoment")],b.prototype,"_writeHistoricMoment",null),(0,a._)([(0,l.Cb)({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0),(0,a._)([(0,l.Cb)({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0),(0,a._)([(0,l.Cb)({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0),(0,a._)([(0,l.Cb)({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0),(0,a._)([(0,l.Cb)({type:v.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0),(0,a._)([(0,l.Cb)({json:{write:!0}})],b.prototype,"relationshipId",void 0),(0,a._)([(0,l.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0),(0,a._)([(0,f.c)("start"),(0,f.c)("num")],b.prototype,"writeStart",null),(0,a._)([(0,l.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0),(0,a._)([(0,l.Cb)({json:{write:!0}})],b.prototype,"returnGeometry",void 0),(0,a._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"returnM",void 0),(0,a._)([(0,l.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"returnZ",void 0),(0,a._)([(0,l.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],b.prototype,"where",void 0),(b=o=(0,a._)([(0,y.j)("esri.rest.support.RelationshipQuery")],b)).from=(0,p.se)(b);var m=b}}]);
//# sourceMappingURL=12964.c3146e9a.chunk.js.map