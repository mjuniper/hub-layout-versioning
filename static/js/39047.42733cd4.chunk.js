"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[39047,65905],{44925:function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:function(){return r}})},65905:function(e,t,n){n.d(t,{V:function(){return c},b:function(){return l}});var r=n(42265),o=n(76200),a=n(10064),i=n(32718),s=n(35995),u=i.Z.getLogger("esri.assets");function l(e,t){return(0,o.default)(c(e),t)}function c(e){if(!r.Z.assetsPath)throw u.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(r.Z.assetsPath,e)}},84397:function(e,t,n){n.d(t,{c:function(){return r},g:function(){return o}});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},41691:function(e,t,n){n.d(t,{p:function(){return h},r:function(){return v}});var r=n(15671),o=n(43144),a=n(60136),i=n(92572),s=n(27366),u=n(31319),l=n(100),c=n(49861),p=n(69912),d=n(61826),h=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new l.Z}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new d.t}}]),n}(e);return(0,s._)([(0,c.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,c.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,p.j)("esri.core.HandleOwner")],t),t},v=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(h(u.Z));v=(0,s._)([(0,p.j)("esri.core.HandleOwner")],v)},59026:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(15671),o=n(43144),a=n(18759),i=function(){function e(t,n){(0,r.Z)(this,e),this._storage=new a.WJ,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return(0,o.Z)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}()},18759:function(e,t,n){n.d(t,{WJ:function(){return d},Xq:function(){return p},an:function(){return c},lN:function(){return r}});var r,o=n(29439),a=n(37762),i=n(15671),s=n(43144),u=n(92026),l=n(27546),c=-3;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(r||(r={}));var p=function(){function e(t,n,r){(0,i.Z)(this,e),this._namespace=t,this._storage=n,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}return(0,s.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,n,r)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,i.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}return(0,s.Z)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,n,o){var a=this._db.get(e);if(a&&(this._size-=a.size,this._db.delete(e),a.entry!==t&&this._notifyRemove(e,a.entry,r.ALL)),n>this._maxSize)this._notifyRemove(e,t,r.ALL);else if(void 0!==t)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var i=1+Math.max(o,c)-c;this._db.set(e,{entry:t,size:n,lifetime:i,lives:i}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,n){var o=this._db.get(e);if(o&&o.entry===t){for(this._size-=o.size;n>this._maxSize;){var a=this._notifyRemove(e,t,r.SOME);if(!((0,u.pC)(a)&&a>0))return void this._db.delete(e);n=a}o.size=n,this._size+=n,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},r=new Array;this._db.forEach((function(t,o){var a=t.lifetime;r[a]=(r[a]||0)+t.size,e._users.forAll((function(e){var r=e.namespace;if(o.startsWith(r)){var a=n[r]||0;n[r]=a+t.size}}))}));var o={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var r=n[t]||0;n[t]=r,o[t]=Math.round(100*e.hitRate)+"%"}else o[t]="0%"}));var a=Object.keys(n);a.sort((function(e,t){return n[t]-n[e]})),a.forEach((function(e){return t[e]=Math.round(n[e]/Math.pow(2,20))+"MB / "+o[e]}));for(var i=r.length-1;i>=0;--i){var s=r[i];s&&(t["Priority "+(i+c-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(n,o){o.startsWith(e)&&(t._size-=n.size,t._db.delete(o),t._notifyRemove(o,n.entry,r.ALL))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,n){return e._notifyRemove(n,t.entry,r.ALL)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,n){var r;return this._removeFuncs.some((function(o){if(e.startsWith(o[0])){var a=o[1](t,n);return"number"==typeof a&&(r=a),!0}return!1})),r}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=(0,a.Z)(this._db);try{for(t.s();!(e=t.n()).done;){var n=(0,o.Z)(e.value,2),i=n[0],s=n[1];if(this._db.delete(i),s.lives<=1){this._size-=s.size;var l=this._notifyRemove(i,s.entry,r.SOME);(0,u.pC)(l)&&l>0&&(this._size+=l,s.lives=s.lifetime,s.size=l,this._db.set(i,s))}else--s.lives,this._db.set(i,s);if(this._size<=.9*this.maxSize)return}}catch(c){t.e(c)}finally{t.f()}}}}]),e}()},43e3:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(37762),o=n(15671),a=n(43144),i=n(92026),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.values().next().value};(0,o.Z)(this,e),this._peeker=t,this._items=new Set}return(0,a.Z)(e,[{key:"length",get:function(){return this._items.size}},{key:"clear",value:function(){this._items.clear()}},{key:"last",value:function(){if(0!==this._items.size){var e,t,n=(0,r.Z)(this._items);try{for(n.s();!(t=n.n()).done;)e=t.value}catch(o){n.e(o)}finally{n.f()}return e}}},{key:"peek",value:function(){if(0!==this._items.size)return this._peeker(this._items)}},{key:"push",value:function(e){this.contains(e)||this._items.add(e)}},{key:"contains",value:function(e){return this._items.has(e)}},{key:"pop",value:function(){if(0!==this.length){var e=this.peek();return this._items.delete((0,i.j0)(e)),e}}},{key:"popLast",value:function(){if(0!==this.length){var e=this.last();return this._items.delete((0,i.j0)(e)),e}}},{key:"remove",value:function(e){this._items.delete(e)}},{key:"filter",value:function(e){var t=this;return this._items.forEach((function(n){e(n)||t._items.delete(n)})),this}}]),e}()},93963:function(e,t,n){n.d(t,{f:function(){return s}});var r=n(15671),o=n(43144),a=n(39052),i=n(56885),s=function(){function e(t){(0,r.Z)(this,e),this._observable=new i.s,this._value=t}return(0,o.Z)(e,[{key:"get",value:function(){return(0,a.it)(this._observable),this._value}},{key:"set",value:function(e){e!==this._value&&(this._value=e,this._observable.notify())}}]),e}()},41644:function(e,t,n){n.d(t,{Bg:function(){return r},sM:function(){return o}});n(93169);function r(e){}function o(e){return function(){return e}}},61826:function(e,t,n){n.d(t,{t:function(){return f}});var r=n(15671),o=n(43144),a=n(60136),i=n(92572),s=n(27366),u=n(31319),l=n(100),c=n(92026),p=n(94172),d=n(99346),h=n(49861),v=n(69912),f=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._handles=new l.Z,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,o.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this._handles.destroy()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,p.YP)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,p.gx)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.initial,a=void 0!==o&&o,i=r.final,s=void 0!==i&&i,u=++this._handleId;return this._handles.add([(0,p.on)(e,"after-changes",this._createSyncUpdatingCallback(),p.Z_),(0,p.on)(e,"change",t,{onListenerAdd:a?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:s?function(e){return t({added:[],removed:e.toArray()})}:void 0})],u),{remove:function(){return n._handles.remove(u)}}}},{key:"addPromise",value:function(e){var t=this;if((0,c.Wi)(e))return e;var n=++this._handleId;this._handles.add({remove:function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t._handles.has(y)||t._set("updating",!1))}},n),this._pendingPromises.add(e),this._set("updating",!0);var r=function(){return t._handles.remove(n)};return e.then(r,r),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,a);var i=o(e,t,r);return this._handles.add(i,a),{remove:function(){return n._handles.remove(a)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),r=(0,p.YP)(e,n,{sync:!0,equals:function(){return!1}});return this._handles.add(r,t),r}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e._handles.remove(y),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e._handles.add((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e._handles.remove(y))})),y)}}}]),n}(u.Z);(0,s._)([(0,h.Cb)({readOnly:!0})],f.prototype,"updating",void 0),f=(0,s._)([(0,v.j)("esri.core.support.WatchUpdatingTracking")],f);var y=-42},8537:function(e,t,n){n.d(t,{YP:function(){return a}});var r=n(44927),o=(n(98928),n(84652),n(32718));n(66978);(0,r.K)(o.Z.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});function a(e,t,n,r){return e.watch(t,n,r)}},42137:function(e,t,n){n.d(t,{Z:function(){return Z}});var r,o=n(1413),a=n(15671),i=n(43144),s=n(11752),u=n(61120),l=n(60136),c=n(92572),p=n(27366),d=n(68860),h=n(49861),v=(n(25243),n(63780),n(69912)),f=n(83448),y=n(585),m=n(80885),g=n(15559),_=n(81753),b=n(89093),k=r=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).center=null,e.geodesic=!1,e.numberOfPoints=60,e.radius=1e3,e.radiusUnit="meters",e}return(0,i.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t){var r;if(e&&e.center)r=e;else{if(e&&e.rings)return(0,s.Z)((0,u.Z)(n.prototype),"normalizeCtorArgs",this).call(this,e,t);r={center:e}}return(0,o.Z)((0,o.Z)((0,o.Z)({},(0,s.Z)((0,u.Z)(n.prototype),"normalizeCtorArgs",this).call(this)),r),t)}},{key:"initialize",value:function(){var e,t=this.center,n=this.numberOfPoints;if(this.hasZ=null!==(e=null===t||void 0===t?void 0:t.hasZ)&&void 0!==e&&e,0===this.rings.length&&t){var r,o=(0,d.En)(this.radius,this.radiusUnit,"meters"),a=t.spatialReference,i="geographic";if(a.isWebMercator?i="webMercator":(null!=(a.wkid&&b.Z[a.wkid])||a.wkt&&0===a.wkt.indexOf("PROJCS"))&&(i="projected"),this.geodesic){var s;switch(i){case"webMercator":s=(0,_.Sx)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":s=t}r=this._createGeodesicCircle(s,o,n),"webMercator"===i&&(r=(0,_.$)(r))}else{var u;"webMercator"===i||"projected"===i?u=o/this._convert2Meters(1,t.spatialReference):"geographic"===i&&(u=(0,d.ty)(o,"meters",(0,f.Iu)(t.spatialReference).radius)),r=this._createPlanarCircle(t,u,n)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}}},{key:"clone",value:function(){var e=this.center,t=this.numberOfPoints,n=this.radius,o=this.radiusUnit,a=this.geodesic;return new r({center:null===e||void 0===e?void 0:e.clone(),numberOfPoints:t,radius:n,radiusUnit:o,geodesic:a})}},{key:"_createGeodesicCircle",value:function(e,t,n){for(var r=0,o=[];r<360;){var a=[0,0],i=[e.x,e.y];(0,g.TB)(a,i,r,t),this.hasZ&&a.push(e.z),o.push(a),r+=360/n}return o.push(o[0]),new m.Z(o)}},{key:"_createPlanarCircle",value:function(e,t,n){for(var r=[],o=2*Math.PI/n,a=0;a<n;++a){var i=o*a,s=[e.x+Math.cos(-i)*t,e.y+Math.sin(-i)*t];this.hasZ&&s.push(e.z),r.push(s)}return r.push(r[0]),new m.Z({spatialReference:e.spatialReference,rings:[r]})}},{key:"_convert2Meters",value:function(e,t){var n;if(t.wkid&&null!=b.Z[t.wkid])n=b.Z.values[b.Z[t.wkid]];else{var r=t.wkt,o=r.lastIndexOf(",")+1,a=r.lastIndexOf("]]");n=parseFloat(r.substring(o,a))}return e*n}}]),n}(m.Z);(0,p._)([(0,h.Cb)({type:y.Z})],k.prototype,"center",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"geodesic",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"numberOfPoints",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"radius",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"radiusUnit",void 0);var Z=k=r=(0,p._)([(0,v.j)("esri.geometry.Circle")],k)},58971:function(e,t,n){n.d(t,{G6:function(){return E},Ie:function(){return x},J9:function(){return Z},RF:function(){return g},U1:function(){return w},vY:function(){return l},ym:function(){return k}});var r=n(29439),o=n(92026),a=n(77981);var i=function(e,t,n){return[t,n]},s=function(e,t,n){return[t,n,e[2]]},u=function(e,t,n){return[t,n,e[2],e[3]]};function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,o.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){var n=e.scale,r=e.translate;return Math.round((t-r[0])/n[0])}function p(e,t){var n=e.scale,r=e.translate;return Math.round((r[1]-t)/n[1])}function d(e,t,n){for(var r,o,a,i,s=[],u=0;u<n.length;u++){var l=n[u];u>0?(a=c(e,l[0]),i=p(e,l[1]),a===r&&i===o||(s.push(t(l,a-r,i-o)),r=a,o=i)):(r=c(e,l[0]),o=p(e,l[1]),s.push(t(l,r,o)))}return s.length>0?s:null}function h(e,t){var n=e.scale,r=e.translate;return t*n[0]+r[0]}function v(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function f(e,t,n){var o=new Array(n.length);if(!n.length)return o;var a=(0,r.Z)(e.scale,2),i=a[0],s=a[1],u=h(e,n[0][0]),l=v(e,n[0][1]);o[0]=t(n[0],u,l);for(var c=1;c<n.length;c++){var p=n[c];u+=p[0]*i,l-=p[1]*s,o[c]=t(p,u,l)}return o}function y(e,t,n){for(var r=new Array(n.length),o=0;o<n.length;o++)r[o]=f(e,t,n[o]);return r}function m(e,t,n,r,o){var a;return t.points=null!==(a=function(e,t,n,r){return d(e,n?r?u:s:r?s:i,t)}(e,n.points,r,o))&&void 0!==a?a:[],t}function g(e,t,n,r,o){return t.x=c(e,n.x),t.y=p(e,n.y),t!==n&&(r&&(t.z=n.z),o&&(t.m=n.m)),t}function _(e,t,n,r,o){var a=function(e,t,n,r){for(var o=[],a=n?r?u:s:r?s:i,l=0;l<t.length;l++){var c=d(e,a,t[l]);c&&c.length>=3&&o.push(c)}return o.length?o:null}(e,n.rings,r,o);return a?(t.rings=a,t):null}function b(e,t,n,r,o){var a=function(e,t,n,r){for(var o=[],a=n?r?u:s:r?s:i,l=0;l<t.length;l++){var c=d(e,a,t[l]);c&&c.length>=2&&o.push(c)}return o.length?o:null}(e,n.paths,r,o);return a?(t.paths=a,t):null}function k(e,t){return e&&t?(0,a.wp)(t)?g(e,{},t,!1,!1):(0,a.l9)(t)?b(e,{},t,!1,!1):(0,a.oU)(t)?_(e,{},t,!1,!1):(0,a.aW)(t)?m(e,{},t,!1,!1):(0,a.YX)(t)?function(e,t,n,r,o){return t.xmin=c(e,n.xmin),t.ymin=p(e,n.ymin),t.xmax=c(e,n.xmax),t.ymax=p(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),o&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function Z(e,t,n,r,a){return(0,o.pC)(n)&&(t.points=function(e,t,n,r){return f(e,n?r?u:s:r?s:i,t)}(e,n.points,r,a)),t}function w(e,t,n,r,a){return(0,o.Wi)(n)||(t.x=h(e,n.x),t.y=v(e,n.y),t!==n&&(r&&(t.z=n.z),a&&(t.m=n.m))),t}function x(e,t,n,r,a){return(0,o.pC)(n)&&(t.rings=function(e,t,n,r){return y(e,n?r?u:s:r?s:i,t)}(e,n.rings,r,a)),t}function E(e,t,n,r,a){return(0,o.pC)(n)&&(t.paths=function(e,t,n,r){return y(e,n?r?u:s:r?s:i,t)}(e,n.paths,r,a)),t}},93655:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(15671),o=n(43144),a=n(11752),i=n(61120),s=n(60136),u=n(92572),l=n(27366),c=n(49861),p=(n(25243),n(63780),n(69912)),d=n(68748),h=n(30651),v=n(6693),f=n(56811),y=n(78983),m=n(64575),g=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).elevationInfo=null,o.graphics=new y.J,o.screenSizePerspectiveEnabled=!0,o.type="graphics",o.internal=!1,o}return(0,o.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return(0,a.Z)((0,i.Z)(n.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),n}((0,v.h)((0,f.M)(h.Z)));(0,l._)([(0,c.Cb)({type:m.Z})],g.prototype,"elevationInfo",void 0),(0,l._)([(0,c.Cb)((0,d.z)(y.J,"graphics"))],g.prototype,"graphics",void 0),(0,l._)([(0,c.Cb)({type:["show","hide"]})],g.prototype,"listMode",void 0),(0,l._)([(0,c.Cb)()],g.prototype,"screenSizePerspectiveEnabled",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],g.prototype,"type",void 0),(0,l._)([(0,c.Cb)({constructOnly:!0})],g.prototype,"internal",void 0);var _=g=(0,l._)([(0,p.j)("esri.layers.GraphicsLayer")],g)},34311:function(e,t,n){function r(e,t,n){return{objectId:e,target:t,distance:n,type:"vertex"}}function o(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{objectId:e,target:t,distance:n,type:"edge",start:r,end:o,draped:a}}n.d(t,{p:function(){return o},u:function(){return r}})},70178:function(e,t,n){n.d(t,{f:function(){return l},k:function(){return s}});n(93169);var r=n(92026),o=n(92975);function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],o=t[n];if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==o[a])return!1}return!0}function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;return!0}function s(e,t){return e===t||(0,r.pC)(e)&&(0,r.pC)(t)&&(0,o.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function u(e,t){if(e===t)return!0;if((0,r.Wi)(e)||(0,r.Wi)(t))return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return s(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&i(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&i(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,o.fS)(e.spatialReference,t.spatialReference)&&a(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function l(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!u(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0,a=n;o<a.length;o++){var i=a[o];if(e[i]!==t[i])return!1}return!0}(e.attributes,t.attributes)}},65618:function(e,t,n){n.d(t,{FS:function(){return E},MS:function(){return C},PA:function(){return _},Pj:function(){return g},R3:function(){return w},S6:function(){return m},TF:function(){return S},Tx:function(){return k},Wh:function(){return y},Xw:function(){return Z},dF:function(){return x}});var r=n(37762),o=n(43144),a=n(15671),i=n(59896),s=(n(93169),n(92026)),u=n(18722),l=n(95439),c=n(78952),p=n(41414),d=n(65156),h=n(58971),v=n(27823),f=n(83040),y=(n(70178),(0,o.Z)((function e(t,n,r){(0,a.Z)(this,e),this.uid=t,this.geometry=n,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null})));function m(e){return(0,s.pC)(e.geometry)}var g=(0,o.Z)((function e(){(0,a.Z)(this,e),this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}));function _(e){var t,n,r=v.M.fromJSON(e.geometryType),o=c.Z.fromJSON(e.spatialReference),a=e.transform,i=e.features.map((function(t){var n=function(e,t,n,r){return{uid:(0,l.D)(),objectId:r&&e.attributes?e.attributes[r]:null,attributes:e.attributes,geometry:b(e.geometry,t,n),visible:!0}}(t,r,o,e.objectIdFieldName),i=n.geometry;if((0,s.pC)(i)&&a)switch(i.type){case"point":n.geometry=(0,h.U1)(a,i,i,i.hasZ,i.hasM);break;case"multipoint":n.geometry=(0,h.J9)(a,i,i,!!i.hasZ,!!i.hasM);break;case"polygon":n.geometry=(0,h.Ie)(a,i,i,!!i.hasZ,!!i.hasM);break;case"polyline":n.geometry=(0,h.G6)(a,i,i,!!i.hasZ,!!i.hasM);break;case"extent":case"mesh":n.geometry=i}return n}));return{geometryType:r,features:i,spatialReference:o,fields:null!==(t=null===(n=e.fields)||void 0===n?void 0:n.map((function(e){return f.Z.fromJSON(e)})))&&void 0!==t?t:[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function b(e,t,n){if((0,s.Wi)(e))return null;switch(t){case"point":var r=e;return{x:r.x,y:r.y,z:r.z,m:r.m,hasZ:null!=r.z,hasM:null!=r.m,type:"point",spatialReference:n};case"polyline":var o=e;return{paths:o.paths,hasZ:!!o.hasZ,hasM:!!o.hasM,type:"polyline",spatialReference:n};case"polygon":var a=e;return{rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polygon",spatialReference:n};case"multipoint":var i=e;return{points:i.points,hasZ:!!i.hasZ,hasM:!!i.hasM,type:"multipoint",spatialReference:n}}}function k(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}function Z(e){var t=32;return t+=(0,i.f2)(e.attributes),t+=3,t+=8+function(e){if((0,s.Wi)(e))return 0;var t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":var n,o=0,a=2+(e.hasZ?1:0)+(e.hasM?1:0),i="polyline"===e.type?e.paths:e.rings,l=(0,r.Z)(i);try{for(l.s();!(n=l.n()).done;)o+=n.value.length}catch(d){l.e(d)}finally{l.f()}t+=8*o*a+64,t+=128*o,t+=34,t+=32*(i.length+1);break;case"multipoint":var c=2+(e.hasZ?1:0)+(e.hasM?1:0),p=e.points.length;t+=8*p*c+64,t+=128*p,t+=34,t+=32;break;case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=(0,u.Xw)(e.vertexAttributes.position),t+=(0,u.Xw)(e.vertexAttributes.normal),t+=(0,u.Xw)(e.vertexAttributes.uv),t+=(0,u.Xw)(e.vertexAttributes.tangent)}return t}(e.geometry),t}function w(e){if((0,s.Wi)(e))return 0;switch(e.type){case"point":return 1;case"polyline":var t,n=0,o=(0,r.Z)(e.paths);try{for(o.s();!(t=o.n()).done;){n+=t.value.length}}catch(c){o.e(c)}finally{o.f()}return n;case"polygon":var a,i=0,u=(0,r.Z)(e.rings);try{for(u.s();!(a=u.n()).done;){i+=a.value.length}}catch(c){u.e(c)}finally{u.f()}return i;case"multipoint":return e.points.length;case"extent":return 2;case"mesh":var l=e.vertexAttributes&&e.vertexAttributes.position;return l?l.length/3:0;default:return}}function x(e){if((0,s.Wi)(e))return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":var t,n=(0,r.Z)(e.paths);try{for(n.s();!(t=n.n()).done;){if(t.value.length>0)return!0}}catch(i){n.e(i)}finally{n.f()}return!1;case"polygon":var o,a=(0,r.Z)(e.rings);try{for(a.s();!(o=a.n()).done;){if(o.value.length>0)return!0}}catch(i){a.e(i)}finally{a.f()}return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function E(e,t){switch((0,p.cS)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(var n=0;n<e.paths.length;n++)(0,p.Wi)(t,e.paths[n],!!e.hasZ);break;case"polygon":for(var r=0;r<e.rings.length;r++)(0,p.Wi)(t,e.rings[r],!!e.hasZ);break;case"multipoint":(0,p.Wi)(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function S(e,t){switch((0,d.cS)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(var n=0;n<e.paths.length;n++)(0,d.Wi)(t,e.paths[n]);break;case"polygon":for(var r=0;r<e.rings.length;r++)(0,d.Wi)(t,e.rings[r]);break;case"multipoint":(0,d.Wi)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function C(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}},6693:function(e,t,n){n.d(t,{h:function(){return d}});var r=n(43144),o=n(15671),a=n(60136),i=n(92572),s=n(27366),u=n(49861),l=(n(25243),n(63780),n(69912)),c=n(60676),p={read:{reader:c.ij},write:{allowNull:!0,writer:c.cW}},d=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,o.Z)(this,n),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return(0,r.Z)(n)}(e);return(0,s._)([(0,u.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,s._)([(0,u.Cb)({json:{read:!1,write:!1,origins:{"web-map":p,"portal-item":p}}})],t.prototype,"effect",void 0),t=(0,s._)([(0,l.j)("esri.layers.mixins.BlendLayer")],t)}},56811:function(e,t,n){n.d(t,{M:function(){return c}});var r=n(15671),o=n(43144),a=n(60136),i=n(92572),s=n(27366),u=n(49861),l=(n(25243),n(63780),n(69912)),c=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return(0,o.Z)(n,[{key:"effectiveScaleRange",get:function(){var e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);var n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}}]),n}(e);return(0,s._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,s._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,s._)([(0,l.j)("esri.layers.mixins.ScaleRangeLayer")],t)}},9114:function(e,t,n){n.d(t,{u:function(){return d}});var r,o=n(15671),a=n(43144),i=n(60136),s=n(92572),u=n(27366),l=n(46784),c=n(49861),p=(n(25243),n(63780),n(69912)),d=r=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).name=null,r.code=null,r}return(0,a.Z)(n,[{key:"clone",value:function(){return new r({name:this.name,code:this.code})}}]),n}(l.wq);(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,u._)([(0,c.Cb)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0),d=r=(0,u._)([(0,p.j)("esri.layers.support.CodedValue")],d)},52175:function(e,t,n){n.d(t,{Z:function(){return y}});var r,o=n(15671),a=n(43144),i=n(60136),s=n(92572),u=n(27366),l=n(84652),c=n(49861),p=(n(25243),n(27135)),d=n(69912),h=n(9114),v=n(64538),f=r=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).codedValues=null,r.type="coded-value",r}return(0,a.Z)(n,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var n=String(e);this.codedValues.some((function(e){return String(e.code)===n&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new r({codedValues:(0,l.d9)(this.codedValues),name:this.name})}}]),n}(v.Z);(0,u._)([(0,c.Cb)({type:[h.u],json:{write:!0}})],f.prototype,"codedValues",void 0),(0,u._)([(0,p.J)({codedValue:"coded-value"})],f.prototype,"type",void 0);var y=f=r=(0,u._)([(0,d.j)("esri.layers.support.CodedValueDomain")],f)},64538:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(43144),o=n(15671),a=n(60136),i=n(92572),s=n(27366),u=n(43404),l=n(46784),c=n(49861),p=(n(25243),n(63780),n(27135)),d=n(69912),h=new u.X({inherited:"inherited",codedValue:"coded-value",range:"range"}),v=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).name=null,r.type=null,r}return(0,r.Z)(n)}(l.wq);(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],v.prototype,"name",void 0),(0,s._)([(0,p.J)(h)],v.prototype,"type",void 0);var f=v=(0,s._)([(0,d.j)("esri.layers.support.Domain")],v)},83040:function(e,t,n){n.d(t,{Z:function(){return b}});var r,o=n(15671),a=n(43144),i=n(60136),s=n(92572),u=n(27366),l=n(43404),c=n(46784),p=n(49861),d=n(25243),h=(n(63780),n(27135)),v=n(38511),f=n(69912),y=n(67755),m=n(85249),g=new l.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),_=r=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).alias=null,r.defaultValue=void 0,r.description=null,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r.valueType=null,r.visible=!0,r}return(0,a.Z)(n,[{key:"readDescription",value:function(e,t){var n,r,o=t.description,a=null;try{a=o?JSON.parse(o):null}catch(i){}return null!==(n=null===(r=a)||void 0===r?void 0:r.value)&&void 0!==n?n:null}},{key:"readValueType",value:function(e,t){var n=t.description,r=null;try{r=n?JSON.parse(n):null}catch(o){}return r?g.fromJSON(r.fieldValueType):null}},{key:"clone",value:function(){return new r({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),n}(c.wq);(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],_.prototype,"alias",void 0),(0,u._)([(0,p.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],_.prototype,"defaultValue",void 0),(0,u._)([(0,p.Cb)()],_.prototype,"description",void 0),(0,u._)([(0,v.r)("description")],_.prototype,"readDescription",null),(0,u._)([(0,p.Cb)({types:y.V5,json:{read:{reader:y.im},write:!0}})],_.prototype,"domain",void 0),(0,u._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"editable",void 0),(0,u._)([(0,p.Cb)({type:d.z8,json:{write:!0}})],_.prototype,"length",void 0),(0,u._)([(0,p.Cb)({type:String,json:{write:!0}})],_.prototype,"name",void 0),(0,u._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"nullable",void 0),(0,u._)([(0,h.J)(m.v)],_.prototype,"type",void 0),(0,u._)([(0,p.Cb)()],_.prototype,"valueType",void 0),(0,u._)([(0,v.r)("valueType",["description"])],_.prototype,"readValueType",null),(0,u._)([(0,p.Cb)({type:Boolean,json:{read:!1}})],_.prototype,"visible",void 0);var b=_=r=(0,u._)([(0,f.j)("esri.layers.support.Field")],_)},56754:function(e,t,n){n.d(t,{Z:function(){return h}});var r,o=n(15671),a=n(43144),i=n(60136),s=n(92572),u=n(27366),l=(n(32718),n(25243),n(63780),n(10064),n(93169),n(27135)),c=n(69912),p=n(64538),d=r=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).type="inherited",r}return(0,a.Z)(n,[{key:"clone",value:function(){return new r}}]),n}(p.Z);(0,u._)([(0,l.J)({inherited:"inherited"})],d.prototype,"type",void 0);var h=d=r=(0,u._)([(0,c.j)("esri.layers.support.InheritedDomain")],d)},30539:function(e,t,n){n.d(t,{Z:function(){return v}});var r,o=n(15671),a=n(43144),i=n(60136),s=n(92572),u=n(27366),l=n(49861),c=(n(25243),n(63780),n(27135)),p=n(69912),d=n(64538),h=r=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).maxValue=null,r.minValue=null,r.type="range",r}return(0,a.Z)(n,[{key:"clone",value:function(){return new r({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),n}(d.Z);(0,u._)([(0,l.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,n){t[n]=[this.minValue||0,e]}}}})],h.prototype,"maxValue",void 0),(0,u._)([(0,l.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,n){t[n]=[e,this.maxValue||0]}}}})],h.prototype,"minValue",void 0),(0,u._)([(0,c.J)({range:"range"})],h.prototype,"type",void 0);var v=h=r=(0,u._)([(0,p.j)("esri.layers.support.RangeDomain")],h)},67755:function(e,t,n){n.d(t,{V5:function(){return s},im:function(){return u}});n(93169);var r=n(52175),o=n(64538),a=n(56754),i=n(30539),s={key:"type",base:o.Z,typeMap:{range:i.Z,"coded-value":r.Z,inherited:a.Z}};function u(e){if(!e||!e.type)return null;switch(e.type){case"range":return i.Z.fromJSON(e);case"codedValue":return r.Z.fromJSON(e);case"inherited":return a.Z.fromJSON(e)}return null}},49229:function(e,t,n){n.d(t,{a:function(){return a}});var r=n(68860),o=n(22186),a={inches:(0,r.En)(1,"meters","inches"),feet:(0,r.En)(1,"meters","feet"),"us-feet":(0,r.En)(1,"meters","us-feet"),yards:(0,r.En)(1,"meters","yards"),miles:(0,r.En)(1,"meters","miles"),"nautical-miles":(0,r.En)(1,"meters","nautical-miles"),millimeters:(0,r.En)(1,"meters","millimeters"),centimeters:(0,r.En)(1,"meters","centimeters"),decimeters:(0,r.En)(1,"meters","decimeters"),meters:(0,r.En)(1,"meters","meters"),kilometers:(0,r.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,r.ty)(1,"meters",o.sv.radius)}},74509:function(e,t,n){n.d(t,{Jn:function(){return l},Lt:function(){return d},Ou:function(){return v},RL:function(){return p},VW:function(){return u},W_:function(){return b},Zz:function(){return i},jG:function(){return k},mF:function(){return s},tR:function(){return Z},tq:function(){return g},vQ:function(){return f},vu:function(){return c},zx:function(){return y}});var r=n(92026),o=n(88152);function a(e){return e?k:Z}function i(e,t){return(0,r.Wi)(t)||!t.mode?a(e).mode:t.mode}function s(e,t){return(0,r.pC)(t)?t:a(e)}function u(e,t){return i(!!(0,r.pC)(e)&&e.hasZ,t)}function l(e,t){return s(!!(0,r.pC)(e)&&!!e.hasZ,t)}function c(e){var t=h(e);return u(e.geometry,t)}function p(e){var t=h(e),n=u(e.geometry,t);return{mode:n,offset:(0,r.pC)(t)&&"on-the-ground"!==n?(0,r.Pt)(t.offset,0)*(0,o.Z7)((0,r.Pt)(t.unit,"meters")):0}}function d(e){if("on-the-ground"===c(e))return!1;var t=h(e),n=(0,r.pC)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function v(e,t,n){if(!(0,r.Wi)(n)&&n.mode){var o=e.hasZ?e.z:0,a=(0,r.pC)(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return o-a;case"on-the-ground":return 0;case"relative-to-ground":return o-((0,r.Pt)(t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return o-((0,r.Pt)(t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"scene"),0)+a)}}}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return m(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function y(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return m(e,t[0],t[1],t.length>2?t[2]:0,n,r,o)}function m(e,t,n,o,a,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!(0,r.Wi)(i)){var u=(0,r.pC)(s)?s.mode:"absolute-height";if("on-the-ground"===u)return 0;var l=g(t,n,o,a,e,i),c=l.absoluteZ;return _(c,t,n,o,a,e,s,u)}}function g(e,t,n,o,a,i){var s=(0,r.pC)(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":var u=(0,r.Pt)(a.elevationProvider.getElevation(e,t,0,o,"ground"),0);return{absoluteZ:u,elevation:u};case"relative-to-ground":var l=(0,r.Pt)(a.elevationProvider.getElevation(e,t,n,o,"ground"),0);return{absoluteZ:n+l+s,elevation:l};case"relative-to-scene":var c=(0,r.Pt)(a.elevationProvider.getElevation(e,t,n,o,"scene"),0);return{absoluteZ:n+c+s,elevation:c}}}function _(e,t,n,o,a,i,s,u){var l=(0,r.pC)(s)&&(0,r.pC)(s.offset)?s.offset:0;switch(u){case"absolute-height":return e-l;case"relative-to-ground":return e-((0,r.Pt)(i.elevationProvider.getElevation(t,n,o,a,"ground"),0)+l);case"relative-to-scene":return e-((0,r.Pt)(i.elevationProvider.getElevation(t,n,o,a,"scene"),0)+l)}}function b(e,t){if((0,r.Wi)(t))return!1;var n=t.mode;return(0,r.pC)(n)&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}var k={mode:"absolute-height",offset:0},Z={mode:"on-the-ground",offset:null}},64575:function(e,t,n){n.d(t,{Z:function(){return O}});var r,o=n(15671),a=n(43144),i=n(11752),s=n(61120),u=n(60136),l=n(92572),c=n(27366),p=n(43404),d=n(46784),h=n(92026),v=n(49861),f=(n(25243),n(63780),n(38511)),y=n(69912),m=n(31201),g=n(74165),_=n(15861),b=n(80031),k=r=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){return(0,o.Z)(this,n),t.call(this,e)}return(0,a.Z)(n,[{key:"collectRequiredFields",value:function(){var e=(0,_.Z)((0,g.Z)().mark((function e(t,n){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.io)(t,n,this.expression));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new r({expression:this.expression,title:this.title})}},{key:"equals",value:function(e){return this.expression===e.expression&&this.title===e.title}}]),n}(d.wq);(0,c._)([(0,v.Cb)({type:String,json:{write:!0}})],k.prototype,"expression",void 0),(0,c._)([(0,v.Cb)({type:String,json:{write:!0}})],k.prototype,"title",void 0);var Z,w=k=r=(0,c._)([(0,y.j)("esri.layers.support.FeatureExpressionInfo")],k),x=n(88152),E=(0,p.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),S=new p.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),C=Z=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).offset=null,r}return(0,a.Z)(n,[{key:"readFeatureExpressionInfo",value:function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}},{key:"writeFeatureExpressionInfo",value:function(e,t,n,r){t[n]=e.write({},r),"0"===e.expression&&(t.featureExpression={value:0})}},{key:"mode",get:function(){var e=this.offset,t=this.featureExpressionInfo;return this._isOverridden("mode")?this._get("mode"):(0,h.pC)(e)||t?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)}},{key:"unit",set:function(e){this._set("unit",e)}},{key:"write",value:function(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?(0,i.Z)((0,s.Z)(n.prototype),"write",this).call(this,e,t):null}},{key:"clone",value:function(){return new Z({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}},{key:"equals",value:function(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,h._W)(this.featureExpressionInfo,e.featureExpressionInfo)}}]),n}(d.wq);(0,c._)([(0,v.Cb)({type:w,json:{write:!0}})],C.prototype,"featureExpressionInfo",void 0),(0,c._)([(0,f.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],C.prototype,"readFeatureExpressionInfo",null),(0,c._)([(0,m.c)("featureExpressionInfo",{featureExpressionInfo:{type:w},"featureExpression.value":{type:[0]}})],C.prototype,"writeFeatureExpressionInfo",null),(0,c._)([(0,v.Cb)({type:E.apiValues,nonNullable:!0,json:{type:E.jsonValues,read:E.read,write:{writer:E.write,isRequired:!0}}})],C.prototype,"mode",null),(0,c._)([(0,v.Cb)({type:Number,json:{write:!0}})],C.prototype,"offset",void 0),(0,c._)([(0,v.Cb)({type:x.f9,json:{type:String,read:S.read,write:S.write}})],C.prototype,"unit",null);var O=C=Z=(0,c._)([(0,y.j)("esri.layers.support.ElevationInfo")],C)},88152:function(e,t,n){n.d(t,{Z7:function(){return a},f9:function(){return i},lt:function(){return o}});var r=n(49229);function o(e){return!!e&&null!=r.a[e]}function a(e){return 1/(r.a[e]||1)}var i=function(){var e=Object.keys(r.a);return e.sort(),e}()},77498:function(e,t,n){n.d(t,{Z:function(){return o},e:function(){return r}});var r;n(93169);function o(e){switch(e){case r.SUPPORTED:break;case r.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case r.GEOMETRY_MISSING:return"no geometry";case r.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case r.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case r.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(r||(r={}))},57889:function(e,t,n){n.d(t,{P:function(){return i}});n(93169);var r=n(92026),o=n(74509),a=n(77498);function i(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return a.e.GRAPHICS_LAYER_MISSING;if((0,r.Wi)(e.geometry))return a.e.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return a.e.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==(0,o.vu)(e)&&(0,o.Lt)(e)?a.e.ELEVATION_MODE_UNSUPPORTED:a.e.SUPPORTED}},46684:function(e,t,n){n.d(t,{P:function(){return s},b:function(){return u}});var r=n(92026),o=n(42137),a=n(74509),i=n(77498);function s(e){return l(e).result}function u(e){return l(e).geometry}function l(e){var t;return"graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type)?{result:i.e.GRAPHICS_LAYER_MISSING,geometry:null}:(0,r.Wi)(e.geometry)?{result:i.e.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==(0,a.vu)(e)&&(0,a.Lt)(e)?{result:i.e.ELEVATION_MODE_UNSUPPORTED,geometry:null}:"point"!==e.geometry.type&&"polyline"!==e.geometry.type&&("polygon"!==e.geometry.type||e.geometry instanceof o.Z)?{result:i.e.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:i.e.SUPPORTED,geometry:e.geometry}}},83089:function(e,t,n){n.d(t,{j:function(){return a},p:function(){return o}});var r=n(92026);function o(e,t,n){if(t&&e&&e.map){var r=e.map,o=r.layers.find((function(e){return e===t}));o||r.add(t,n),o&&null!=n&&r.layers.reorder(o,n)}}function a(e,t){return e.allLayerViews.find((function(e){var n=e.layer;return n===t||"sublayers"in n&&(0,r.pC)(n.sublayers)&&n.sublayers.includes(t)}))}},52349:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(43144),o=n(15671),a=n(60136),i=n(92572),s=n(27366),u=n(31319),l=n(49861),c=(n(25243),n(63780),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).enabled=!1,r}return(0,r.Z)(n)}(u.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],p.prototype,"enabled",void 0);var d=p=(0,s._)([(0,c.j)("esri.views.interactive.sketch.SketchLabelOptions")],p)},77560:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(15671),o=n(43144),a=n(60136),i=n(92572),s=n(27366),u=n(31319),l=n(49861),c=(n(25243),n(63780),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).mode="absolute-height",o}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{mode:this.mode}}}]),n}(u.Z);(0,s._)([(0,l.Cb)({type:String,nonNullable:!0})],p.prototype,"mode",void 0),p=(0,s._)([(0,c.j)("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],p);var d=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).distance=!0,e.elevation=!0,e.size=!0,e.scale=!0,e.rotation=!0,e.orientation=!0,e.totalLength=!0,e.area=!0,e.radius=!0,e.helpMessage=!1,e}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}}]),n}(u.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"distance",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"size",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"scale",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"rotation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"orientation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"totalLength",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"area",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"radius",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"helpMessage",void 0),d=(0,s._)([(0,c.j)("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],d);var h=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).enabled=!1,o.elevation=new p,o.visibleElements=new d,o.visualVariables=null,o}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}}]),n}(u.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],h.prototype,"enabled",void 0),(0,s._)([(0,l.Cb)({type:p,nonNullable:!0})],h.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:d,nonNullable:!0})],h.prototype,"visibleElements",void 0),(0,s._)([(0,l.Cb)()],h.prototype,"visualVariables",void 0);var v=h=(0,s._)([(0,c.j)("esri.widgets.Sketch.SketchTooltipOptions")],h)},74923:function(e,t,n){n.d(t,{ZV:function(){return i},qm:function(){return c}});var r=n(74165),o=n(15861),a=n(92026);function i(e,t){return s.apply(this,arguments)}function s(){return s=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,i,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("2d"!==t.type){e.next=2;break}return e.abrupt("return",t.hitTest(n));case 2:return e.next=4,t.hitTest(n);case 4:if(0!==(i=e.sent).results.length){e.next=7;break}return e.abrupt("return",i);case 7:return s=i.results[0],l=(null!==(o=(0,a.Wg)(s.distance))&&void 0!==o?o:0)*(1+u),c=i.results.findIndex((function(e){var t;return(null!==(t=e.distance)&&void 0!==t?t:0)>l})),e.abrupt("return",(-1!==c&&(i.results=i.results.slice(0,c)),i));case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var u=.05;function l(e){return(0,a.pC)(e)&&"graphic"===e.type}function c(e){var t;return null!==(t=e.find(l))&&void 0!==t?t:null}},43345:function(e,t,n){n.d(t,{Z:function(){return ue}});var r=n(93433),o=n(74165),a=n(15861),i=n(1413),s=n(37762),u=n(15671),l=n(43144),c=n(60136),p=n(92572),d=n(27366),h=n(51508),v=n(80987),f=n(10064),y=n(91505),m=n(100),g=n(32718),_=n(92026),b=n(66978),k=n(94172),Z=n(49861),w=(n(25243),n(63780),n(69912)),x=n(83448),E=n(79803),S=n(69662),C=n(92975),O=n(93655),T=n(77498),G=n(57889),R=n(46684),P=(n(93169),n(74509));function M(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return T.e.GRAPHICS_LAYER_MISSING;if((0,_.Wi)(e.geometry))return T.e.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return T.e.SUPPORTED;default:return T.e.GEOMETRY_TYPE_UNSUPPORTED}var n=(0,_.pC)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return n&&n.length>0&&n.some((function(e){return"object"===e.type}))?"on-the-ground"!==(0,P.vu)(e)&&(0,P.Lt)(e)?T.e.ELEVATION_MODE_UNSUPPORTED:T.e.SUPPORTED:T.e.SYMBOL_TYPE_UNSUPPORTED}var A=n(83089),I=n(1614),U=n(87888),D=n(52349),H=n(77560),z=n(38856),L=n(98173),j=n(64674),N=n(74923),W=n(72612),V=n(41644),F=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,u.Z)(this,n),(r=t.call(this,e)).cancelled=!1,r.history={undo:[],redo:[]},r.type=null,r}return(0,l.Z)(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,V.Bg)(this.activeComponent)}return null}},{key:"addToHistory",value:function(e){this.history.redo=[],this.history.undo.push(e)}},{key:"resetHistory",value:function(){this.history.redo=[],this.history.undo=[]}},{key:"canUndo",value:function(){return this.history.undo.length>0}},{key:"canRedo",value:function(){return this.history.redo.length>0}},{key:"complete",value:function(){this._reset(),this.onEnd(),this.emit("complete")}},{key:"cancel",value:function(){this.cancelled=!0,this.complete()}},{key:"_reset",value:function(){var e;null===(e=this.activeComponent)||void 0===e||e.reset()}},{key:"refreshComponent",value:function(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}},{key:"undo",set:function(e){var t=this;this._set("undo",(function(){t.canUndo()&&e()}))}},{key:"redo",set:function(e){var t=this;this._set("redo",(function(){t.canRedo()&&e()}))}}]),n}(y.Z.EventedAccessor);(0,d._)([(0,Z.Cb)()],F.prototype,"activeComponent",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"cancelled",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"history",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"tool",null),(0,d._)([(0,Z.Cb)()],F.prototype,"type",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"canUndo",null),(0,d._)([(0,Z.Cb)()],F.prototype,"canRedo",null),(0,d._)([(0,Z.Cb)()],F.prototype,"onEnd",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"undo",null),(0,d._)([(0,Z.Cb)()],F.prototype,"redo",null),(0,d._)([(0,Z.Cb)()],F.prototype,"toggleTool",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"addToSelection",void 0),(0,d._)([(0,Z.Cb)()],F.prototype,"removeFromSelection",void 0);var Y=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(F=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.OperationHandle")],F));(0,d._)([(0,Z.Cb)()],Y.prototype,"activeComponent",void 0),Y=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.CreateOperationHandle")],Y);var B=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,u.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(F);(0,d._)([(0,Z.Cb)()],B.prototype,"activeComponent",void 0),B=(0,d._)([(0,w.j)("esri.widgets.Sketch.support.UpdateOperationHandle")],B);var q=n(16072),J=n(61459),K=n(16851),X={defaultZ:0},Q={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"},$=function(e){(0,c.Z)(d,e);var t=(0,p.Z)(d);function d(e){var n;return(0,u.Z)(this,d),(n=t.call(this,e))._numUpdating=0,n._handles=new m.Z,n._internalGraphicsLayer=new O.Z({listMode:"hide",internal:!0,title:"SVM Internal"}),n._operationHandle=null,n._viewHandles=new m.Z,n.activeFillSymbol=null,n.activeLineSymbol=null,n.activeVertexSymbol=null,n.allowDeleteKey=!0,n.labelOptions=new D.Z,n.layer=null,n.pointSymbol=new q.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n.polygonSymbol=new J.Z({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),n.polylineSymbol=new K.Z({color:[130,130,130,1],width:2}),n._snappingManager=null,n.tooltipOptions=new H.Z,n.updateGraphics=new v.Z,n.updateOnGraphicClick=!0,n.updatePointSymbol=new q.Z({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),n.updatePolygonSymbol=new J.Z({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),n.updatePolylineSymbol=new K.Z({color:[12,207,255],width:2}),n.vertexSymbol=new q.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n._moduleLoaderAbortController=null,n._viewReadyAbortController=null,n._originalAutoOpenEnabled=null,n.defaultCreateOptions=X,n.defaultUpdateOptions=Q,n.snappingOptions=new L.Z,n}return(0,l.Z)(d,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,k.on)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers}),"change",(function(t){t.removed.includes(e.layer)&&e.cancel()})),(0,k.on)((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.graphics}),"change",(function(t){if((0,_.pC)(e._operationHandle)){var n,r=(0,s.Z)(t.removed);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.updateGraphics.includes(o)&&(e.updateGraphics.length>1?e._operationHandle.removeFromSelection(o):e._operationHandle.cancel())}}catch(a){r.e(a)}finally{r.f()}}})),(0,k.YP)((function(){var t,n;return null!==(t=null===(n=e.layer)||void 0===n?void 0:n.elevationInfo)&&void 0!==t?t:null}),(function(t){t!==e._internalGraphicsLayer.elevationInfo&&(e.cancel(),e._internalGraphicsLayer.elevationInfo=t)}),k.tX),(0,k.YP)((function(){return e.view}),(function(t){(0,_.SC)(e._snappingManager),t&&(e._snappingManager=new z.N({view:t,options:e.snappingOptions}),"2d"===t.type?Promise.all([n.e(93463),n.e(32456),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(23307),n.e(71004),n.e(16669),n.e(34327),n.e(36133),n.e(51130)]).then(n.bind(n,10461)):"3d"===t.type&&(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)),Promise.all([n.e(51378),n.e(79857),n.e(62029),n.e(9014),n.e(21149),n.e(56717),n.e(93463),n.e(41170),n.e(25158),n.e(55652),n.e(49729),n.e(21236),n.e(37186),n.e(9900),n.e(80143),n.e(66505),n.e(47858),n.e(36271),n.e(84993)]).then(n.bind(n,79240))))}),k.tX),(0,k.YP)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.spatialReference}),(function(t,n){t&&n&&!t.equals(n)&&e.cancel()}))]),(0,j.Ob)(this)}},{key:"destroy",value:function(){this.cancel(),this._handles=(0,_.SC)(this._handles),this._viewHandles=(0,_.SC)(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=(0,_.SC)(this._snappingManager),this._set("view",null),this.emit("destroy")}},{key:"_defaultUpdateTool",get:function(){var e;return"3d"===(null===(e=this.view)||void 0===e?void 0:e.type)?"move":"transform"}},{key:"updating",get:function(){return this._numUpdating>0||(0,_.pC)(this._snappingManager)&&this._snappingManager.updating}},{key:"activeTool",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.tool)&&void 0!==e?e:null}},{key:"activeComponent",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.activeComponent)&&void 0!==e?e:null}},{key:"createGraphic",get:function(){return!(0,_.pC)(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):(0,_.Wg)(this.activeComponent.graphic)}},{key:"defaultCreateOptions",get:function(){return this._get("defaultCreateOptions")},set:function(e){this._set("defaultCreateOptions",(0,i.Z)((0,i.Z)({},X),e))}},{key:"defaultUpdateOptions",get:function(){return this._get("defaultUpdateOptions")},set:function(e){this._set("defaultUpdateOptions",(0,i.Z)((0,i.Z)((0,i.Z)({},Q),e),{},{reshapeOptions:(0,i.Z)((0,i.Z)({},Q.reshapeOptions),null===e||void 0===e?void 0:e.reshapeOptions)}))}},{key:"snappingOptions",set:function(e){(0,_.pC)(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}},{key:"state",get:function(){var e,t=!(null===(e=this.view)||void 0===e||!e.ready||!this.layer),n=this._operationHandle;return t&&n?"active":t?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this,n=this._get("view");if(n){var r=n.container,o=n.map;r&&(n.cursor=null),o&&o.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}var a="view-ready";this._handles.remove(a),e&&this._handles.add((0,k.gx)((function(){return e.ready}),(function(n){t._viewHandles.removeAll(),n&&t._viewHandles.add(t._generateViewHandles(e))}),k.tX),a),this._set("view",e)}},{key:"cancel",value:function(){this._moduleLoaderAbortController=(0,_.IM)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,_.IM)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}},{key:"complete",value:function(){this._operationHandle&&this._operationHandle.complete()}},{key:"delete",value:function(){var e=this.state,t=this.updateGraphics;if("active"===e&&t.length){var n=this.activeTool,r=this.layer,o=t.toArray();r.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:n})}}},{key:"duplicate",value:function(){if("active"===this.state&&this.updateGraphics.length){var e=this.updateGraphics.map((function(e){return e.clone()})).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}},{key:"create",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,i,s,u=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(r=this.view,a=this.layer,r&&"disabled"!==this.state){e.next=6;break}throw a||this._logMissingLayer(),(0,b.zE)();case 6:if((0,_.pC)(r.activeTool)&&(r.activeTool=null),t){e.next=8;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'tool'."));case 8:return(0,A.p)(r,this._internalGraphicsLayer),e.next=11,this._setupCreateOperation(t,n);case 11:if(i=e.sent,!(0,_.Wi)(i)&&!this.destroyed){e.next=14;break}return e.abrupt("return",void r.map.remove(this._internalGraphicsLayer));case 14:s=function(){if(i===u._operationHandle){var e=u.createGraphic,n=u._operationHandle.cancelled;u._operationHandle.destroy(),u._operationHandle=null,u._set("createGraphic",null),u.view&&u.view.map&&u.view.map.remove(u._internalGraphicsLayer),i.cancelled||null==e||a.add(e),u.emit("create",{graphic:e,state:n?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}},i.on("complete",s),this._operationHandle=i,r.ready&&r.focus();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,i,s,u,l=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(r=this.layer,a=this.view,i=this.state,a&&"disabled"!==i){e.next=6;break}throw r||this._logMissingLayer(),(0,b.zE)();case 6:if((0,_.pC)(a.activeTool)&&(a.activeTool=null),s=Array.isArray(t)?t:[t],null!=t&&s&&s.length){e.next=10;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'graphics'."));case 10:if(!s.some((function(e){return e.layer!==r?(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!(0,_.Wi)(e.geometry)&&(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)}))){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,this._setupUpdateOperation(s,n);case 14:u=e.sent,this.destroyed||(0,_.Wi)(u)||se(u)||((0,A.p)(a,this._internalGraphicsLayer),this._setUpdateOperationHandle(u,n),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:u.tool,toolEventInfo:null,type:"update"}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_updateSpatialReference",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.view)){e.next=28;break}this._beginAsyncOperation(),t=Array.isArray(t)?t:[t],r=(0,s.Z)(t),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=17;break}if(i=a.value,e.t0=(0,_.pC)(i.geometry)&&"mesh"!==i.geometry.type&&!(0,C.fS)(i.geometry.spatialReference,n.spatialReference),!e.t0){e.next=15;break}if(e.t1=(0,E.Up)(i.geometry.spatialReference,n.spatialReference)||(0,E.kR)(),e.t1){e.next=14;break}return e.next=14,(0,E.zD)();case 14:i.geometry=(0,E.iV)(i.geometry,n.spatialReference);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(4),r.e(e.t2);case 22:return e.prev=22,r.f(),e.finish(22);case 25:this._endAsyncOperation(),e.next=29;break;case 28:this._logMissingView();case 29:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"undo",value:function(){var e;this.canUndo()&&(null===(e=this._operationHandle)||void 0===e||e.undo())}},{key:"redo",value:function(){var e;this.canRedo()&&(null===(e=this._operationHandle)||void 0===e||e.redo())}},{key:"canUndo",value:function(){return!(!this._operationHandle||!this._operationHandle.canUndo())}},{key:"canRedo",value:function(){return!(!this._operationHandle||!this._operationHandle.canRedo())}},{key:"toggleUpdateTool",value:function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}},{key:"_getFirstHit",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:if("2d"!==n.type){e.next=10;break}return r=[],n.map.allLayers.forEach((function(e){"vector-tile"!==e.type&&"imagery"!==e.type||r.push(e)})),e.next=8,n.hitTest(t,{exclude:r});case 8:return a=e.sent,e.abrupt("return",(0,N.qm)(a.results));case 10:return i=[n.map.ground],n.map.allLayers.forEach((function(e){"integrated-mesh"===e.type&&i.push(e)})),e.next=14,n.hitTest(t,{exclude:i});case 14:if(!((s=e.sent).results.length>0)){e.next=19;break}if(u=s.results[0],!((0,_.pC)(u)&&"graphic"===u.type&&u.graphic&&(!s.ground.mapPoint||n.map.ground.opacity<1||s.ground.distance-(0,_.Pt)(u.distance,0)>-Math.min(3*s.ground.distance,"global"===n.viewingMode?(0,x.Iu)(n.renderCoordsHelper.spatialReference).radius/n.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))){e.next=19;break}return e.abrupt("return",u);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_generateViewHandles",value:function(e){var t=this;return[e.on("immediate-click",function(){var n=(0,a.Z)((0,o.Z)().mark((function n(r){var a,s,u,l,c;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s="active"===t.state&&"create"===(null===(a=t._operationHandle)||void 0===a?void 0:a.type),"disabled"!==t.state&&!s&&t.updateOnGraphicClick){n.next=3;break}return n.abrupt("return");case 3:return t._beginAsyncOperation(),n.next=6,r.async((function(){return t._getFirstHit((0,W.vT)(r))}));case 6:if(u=n.sent,l=null,(0,_.pC)(u)?(c=u.graphic,t.updateGraphics.includes(c)||c.layer===t.layer?(r.stopPropagation(),l=c):"2d"!==e.type||t._isComponentGraphic(c)||"active"!==t.state||t.cancel()):"active"===t.state&&t.cancel(),n.t0=(0,_.pC)(l)&&!t.updateGraphics.includes(l),!n.t0){n.next=13;break}return n.next=13,t.update([l],(0,i.Z)((0,i.Z)({},t.defaultUpdateOptions),{},{reshapeOptions:(0,i.Z)({},t.defaultUpdateOptions.reshapeOptions)}));case 13:t._endAsyncOperation();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),I.f.WIDGET)]}},{key:"_setupCreateOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:return a=(0,i.Z)((0,i.Z)({hasZ:"3d"===r.type},this.defaultCreateOptions),n),e.next=6,this._setupDrawGraphicTool(t,r,a);case 6:return s=e.sent,e.abrupt("return",(0,_.Wi)(s)?null:(r.tools.add(s),r.activeTool=s,this._setupCreateOperationHandle(s)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupDrawGraphicTool",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multipoint"!==t||"3d"!==n.type){e.next=2;break}return e.abrupt("return",(this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null));case 2:if(n){e.next=4;break}return e.abrupt("return",(this._logMissingView(),null));case 4:return a="rectangle"!==t,s="rectangle"!==t,u=(0,i.Z)((0,i.Z)({view:n,mode:"rectangle"===t||"circle"===t?"hybrid":"click"},r),{},{snapToScene:!1,geometryType:t,graphicSymbol:this._getGraphicSymbolFromTool(t),snappingManager:this._snappingManager,forceUniformSize:s,centered:a}),e.abrupt("return","2d"===n.type?this._makeDrawGraphicTool2D(u):this._makeDrawGraphicTool3D(u));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool2D",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(93463),n.e(32456),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(23307),n.e(71004),n.e(16669),n.e(34327),n.e(36133),n.e(51130)]).then(n.bind(n,10461)));case 2:return r=e.sent,e.abrupt("return",se(r)||this.destroyed?null:new r.module.DrawGraphicTool2D((0,i.Z)((0,i.Z)({},t),{},{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:ne(t.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool3D",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)));case 2:if(!se(r=e.sent)&&!this.destroyed){e.next=5;break}return e.abrupt("return",null);case 5:return a=this.layer.elevationInfo,e.abrupt("return",new r.module.DrawGraphicTool3D((0,i.Z)((0,i.Z)({},t),{},{elevationInfo:a,snapToScene:!(0,_.pC)(a)||"absolute-height"===a.mode,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupCreateOperationHandle",value:function(e){var t=this,n=this.view;if(!n)return this._logMissingView(),null;var r=null,o=e.forceUniformSize,a=e.centered,i=[n.on("key-down",(function(t){if(t.key===U.j.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===U.j.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==U.j.vertexAdd||t.repeat)t.key===U.j.undo?(t.stopPropagation(),s.undo()):t.key===U.j.redo?(t.stopPropagation(),s.redo()):t.key!==U.j.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===U.j.center&&(t.repeat||(e.centered=!a,t.stopPropagation())):(e.forceUniformSize=!o,t.stopPropagation());else{var n=e.drawOperation.geometryType;"polyline"!==n&&"polygon"!==n&&"multipoint"!==n||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),I.f.WIDGET),n.on("key-up",(function(t){t.key===U.j.pan?e.enabled=!0:t.key!==U.j.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===U.j.center&&(e.centered=a,t.stopPropagation()):(e.forceUniformSize=o,t.stopPropagation())}),I.f.WIDGET),e.on("vertex-add",(function(n){switch(r=(0,_.Wi)(r)?"start":"active",n.operation){case"apply":t.emit("create",{graphic:(0,_.Wg)(e.graphic),state:r,tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[(0,_.Wg)(e.graphic)],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[(0,_.Wg)(e.graphic)],tool:e.geometryType})}})),e.on("cursor-update",(function(n){e.drawOperation.numCommittedVertices>0&&t.emit("create",{graphic:(0,_.Wg)(e.graphic),state:"active",tool:t.activeTool,toolEventInfo:{coordinates:n.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(function(n){switch(n.operation){case"apply":t.emit("create",{graphic:(0,_.Wg)(e.graphic),state:"active",tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[(0,_.Wg)(e.graphic)],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[(0,_.Wg)(e.graphic)],tool:e.geometryType})}})),e.on("complete",(function(e){t._set("createGraphic",(0,_.Wg)(e.graphic)),r="complete",e.aborted?s&&s.cancel():s&&s.complete()})),(0,k.YP)((function(){return t._getGraphicSymbolFromTool(e.geometryType)}),(function(t){e.graphicSymbol=t}))],s=new Y({activeComponent:e,tool:e.geometryType,type:"create",onEnd:function(){var t;i.forEach((function(e){return e.remove()})),i.length=0,null===(t=n.tools)||void 0===t||t.remove(e)},undo:function(){e.canUndo&&e.undo()},redo:function(){e.canRedo&&e.redo()},canUndo:function(){return e.canUndo},canRedo:function(){return e.canRedo}});return s}},{key:"_getGraphicSymbolFromTool",value:function(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol}}},{key:"_setupUpdateOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r,a,u,l,c,p,d,h,v,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.layer,a=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:u=(0,i.Z)((0,i.Z)((0,i.Z)({tool:this._defaultUpdateTool},this.defaultUpdateOptions),n),{},{reshapeOptions:(0,i.Z)((0,i.Z)({},this.defaultUpdateOptions.reshapeOptions),null===n||void 0===n?void 0:n.reshapeOptions)}),l=u.tool,c=(0,s.Z)(t);try{for(c.s();!(p=c.n()).done;)d=p.value,r.remove(d),r.add(d)}catch(o){c.e(o)}finally{c.f()}if("3d"!==a.type){e.next=19;break}if(0!==t.length){e.next=10;break}return e.abrupt("return",null);case 10:e.t0=l,e.next="move"===e.t0?13:"reshape"===e.t0?14:"transform"===e.t0?18:19;break;case 13:return e.abrupt("return",this._setupMove3DOperation(t,u,a,l));case 14:if(!(t.length>1)){e.next=16;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 16:return h=(0,R.P)(t[0]),e.abrupt("return",h===T.e.SUPPORTED?this._setupReshape3DOperation(t[0],u,a):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,T.Z)(h),").")),null));case 18:return e.abrupt("return",this._setupGraphicTransform3DOperation(t,u,a));case 19:e.t1=l,e.next="move"===e.t1?22:"reshape"===e.t1?23:"transform"===e.t1?27:29;break;case 22:return e.abrupt("return",this._setupMove2DOperation(t,u,a));case 23:if(!(t.length>1)){e.next=25;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 25:return v=(0,R.P)(t[0]),e.abrupt("return",v===T.e.SUPPORTED?this._setupTransformOrReshape2DOperation(t,l,u,a):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,T.Z)(v),").")),null));case 27:return 1===t.length&&("point"!==(f=(0,_.U2)(t[0].geometry,"type"))&&"multipoint"!==f||(l="reshape")),e.abrupt("return",this._setupTransformOrReshape2DOperation(t,l,u,a));case 29:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupMove3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,u,l){var c,p,d,h,v,f,y,m,g,_=this,b=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=b.length>4&&void 0!==b[4]&&b[4],p=(0,s.Z)(t),e.prev=2,p.s();case 4:if((d=p.n()).done){e.next=11;break}if(h=d.value,(v=(0,G.P)(h))===T.e.SUPPORTED){e.next=9;break}return e.abrupt("return",(this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat((0,T.Z)(v),").")),null));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),p.e(e.t0);case 16:return e.prev=16,p.f(),e.finish(16);case 19:return e.next=21,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)));case 21:if(!se(f=e.sent)){e.next=24;break}return e.abrupt("return",f);case 24:return y=new f.module.GraphicMoveTool({view:u,enableZ:i.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions}),u.tools.add(y),y.graphics.addMany(t),c||this.updateGraphics.addMany(t),m=[],g=new B({activeComponent:y,tool:l,type:"update",onEnd:function(){var e;m.forEach((function(e){return e.remove()})),m.length=0,null!==(e=u.tools)&&void 0!==e&&e.remove(y),y.destroyed||y.destroy()},undo:function(){re(g,_.updateGraphics.toArray()),_._emitUndoEvent({graphics:_.updateGraphics.toArray(),tool:l})},redo:function(){oe(g,_.updateGraphics.toArray()),_._emitRedoEvent({graphics:_.updateGraphics.toArray(),tool:l})},addToSelection:function(e){_.updateGraphics.push(e),y.graphics.push(e),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=_.updateGraphics.indexOf(e);g.history.undo.forEach((function(e){return e.updates.splice(t,1)})),g.history.redo.forEach((function(e){return e.updates.splice(t,1)})),_.updateGraphics.remove(e),_.emit("update",{graphics:_.updateGraphics.toArray(),state:"active",aborted:!1,tool:_.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==_.updateGraphics.length?y.graphics.remove(e):g.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===_.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if("transform"===l){e.next=4;break}return e.abrupt("return");case 4:if(t=_.updateGraphics.getItemAt(0),(0,R.P)(t)===T.e.SUPPORTED){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,_._setupReshape3DOperation(t,i,u,!0);case 9:se(n=e.sent)||(g.onEnd(),g.destroy(),_._setUpdateOperationHandle(n,i));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(m.push.apply(m,(0,r.Z)(this._getHandlesForComponent(g,i)).concat([u.on("immediate-click",(function(e){return _._getCommonUpdateOperationClickHandlers(g,e,i)}),I.f.WIDGET),u.on("key-down",(function(e){_._getCommonUpdateOperationKeyDownHandlers(g,e)}),I.f.WIDGET)])),g));case 28:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"_setupGraphicTransform3DOperation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&M(e[0])===T.e.SUPPORTED){var o=e[0],a=o.geometry;if((0,_.pC)(a)&&("point"===a.type||"mesh"===a.type))return this._setupPointTransform3DOperation(o,t,n);if((0,_.pC)(a)&&("polygon"===a.type||"polyline"===a.type))return this._setupPolyTransform3DOperation(o,t,n,r)}return this._setupMove3DOperation(e,t,n,"transform",r)}},{key:"_setupPointTransform3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var u,l,c,p,d,h,v,f,y=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u="transform",l=i.enableRotation,c=i.enableScaling,p=i.enableZ,e.next=6,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)));case 6:if(!se(d=e.sent)){e.next=9;break}return e.abrupt("return",d);case 9:return h=new d.module.GraphicTransformTool({graphic:t,view:s,enableRotation:l,enableScaling:c,enableZ:p,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions}),s.tools.add(h),this.updateGraphics.add(t),v=[],f=new B({activeComponent:h,tool:u,type:"update",onEnd:function(){var e;v.forEach((function(e){return e.remove()})),v.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(h),h.destroyed||h.destroy()},undo:function(){re(f,y.updateGraphics.toArray()),y._emitUndoEvent({graphics:y.updateGraphics.toArray(),tool:u})},redo:function(){oe(f,y.updateGraphics.toArray()),y._emitRedoEvent({graphics:y.updateGraphics.toArray(),tool:u})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.updateGraphics.add(t),y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,y._setupMove3DOperation(y.updateGraphics.toArray(),i,s,"transform",!0);case 3:se(n=e.sent)||(f.onEnd(),f.destroy(),y._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){y.updateGraphics.remove(e),y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),f.complete()},toggleTool:function(){}}),e.abrupt("return",(v.push.apply(v,(0,r.Z)(this._getHandlesForComponent(f,i)).concat([s.on("immediate-click",(function(e){return y._getCommonUpdateOperationClickHandlers(f,e,i)}),I.f.WIDGET),s.on("key-down",(function(e){y._getCommonUpdateOperationKeyDownHandlers(f,e)}),I.f.WIDGET)])),f));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupPolyTransform3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var u,l,c,p,d,h,v,f,y,m,g=this,_=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=_.length>3&&void 0!==_[3]&&_[3],l="transform",c=i.enableRotation,p=i.enableScaling,d=i.enableZ,h=i.preserveAspectRatio,e.next=8,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)));case 8:if(!se(v=e.sent)){e.next=11;break}return e.abrupt("return",v);case 11:return f=new v.module.ExtentTransformTool({graphic:t,view:s,enableRotation:c,enableScaling:p,enableZ:d,preserveAspectRatio:h,tooltipOptions:this.tooltipOptions}),s.tools.add(f),u||this.updateGraphics.add(t),y=[],m=new B({activeComponent:f,tool:l,type:"update",onEnd:function(){var e;y.forEach((function(e){return e.remove()})),y.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(f),f.destroyed||f.destroy()},canUndo:function(){return f.canUndo},undo:function(){f.undo(),g._emitUndoEvent({graphics:g.updateGraphics.toArray(),tool:l})},canRedo:function(){return f.canRedo},redo:function(){f.redo(),g._emitRedoEvent({graphics:g.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.updateGraphics.add(t),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,g._setupMove3DOperation(g.updateGraphics.toArray(),i,s,"transform",!0);case 3:se(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){g.updateGraphics.remove(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),m.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===g.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if(t=g.updateGraphics.getItemAt(0),(0,R.P)(t)===T.e.SUPPORTED){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,g._setupReshape3DOperation(t,i,s,!0);case 7:se(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(y.push.apply(y,(0,r.Z)(this._getHandlesForComponent(m,i)).concat([s.on("immediate-click",(function(e){return g._getCommonUpdateOperationClickHandlers(m,e,i)}),I.f.WIDGET),s.on("key-down",(function(e){return g._getCommonUpdateOperationKeyDownHandlers(m,e)}),I.f.WIDGET),s.on("key-down",(function(e){e.key!==U.j.constraint||e.repeat||(f.preserveAspectRatio=!f.preserveAspectRatio,e.stopPropagation())}),I.f.WIDGET),s.on("key-up",(function(e){e.key===U.j.constraint&&(f.preserveAspectRatio=!f.preserveAspectRatio,e.stopPropagation())}),I.f.WIDGET)])),m));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupMove2DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i){var s,u,l,c,p,d,h=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="move",this.updateGraphics.addMany(t),e.next=4,this._updateSpatialReference(t);case 4:return e.next=6,this._getGraphicMover(t,n,i);case 6:if(!se(u=e.sent)){e.next=9;break}return e.abrupt("return",u);case 9:return l=new B({activeComponent:u,tool:s,type:"update",onEnd:function(){var e;h._displayDefaultCursor(),d.forEach((function(e){return e.remove()})),p.forEach((function(e){return e.remove()})),d=[],p=[],u.destroy(),null===(e=h._internalGraphicsLayer)||void 0===e||e.removeMany((0,r.Z)(h.updateGraphics.toArray()))},undo:function(){var e=h.updateGraphics.toArray();re(l,e),l.refreshComponent(),h._emitUndoEvent({graphics:e,tool:s})},redo:function(){var e=h.updateGraphics.toArray();oe(l,e),l.refreshComponent(),h._emitRedoEvent({graphics:e,tool:s})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h._updateSpatialReference(t);case 2:h.updateGraphics.push(t),u.graphics=h.updateGraphics.toArray(),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){var t=h.updateGraphics.indexOf(e);l.history.undo.forEach((function(e){return e.updates.splice(t,1)})),l.history.redo.forEach((function(e){return e.updates.splice(t,1)})),h.updateGraphics.remove(e);var n=h.updateGraphics.toArray();h.emit("update",{graphics:n,state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==h.updateGraphics.length?u.graphics=n:l.complete()}}),c=!1,p=[i.on("immediate-click",(function(e){return h._getCommonUpdateOperationClickHandlers(l,e,n)}),I.f.WIDGET),i.on("key-down",(function(e){h._getCommonUpdateOperationKeyDownHandlers(l,e),e.key!==U.j.constraint||e.repeat||(c=!0,u.enableMoveAllGraphics=!u.enableMoveAllGraphics)}),I.f.WIDGET),i.on("key-up",(function(e){e.key===U.j.constraint&&c&&(c=!1,u.enableMoveAllGraphics=!u.enableMoveAllGraphics)}),I.f.WIDGET)],d=this._getHandlesForComponent(l,n),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupReshape3DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,i,s){var u,l,c,p,d,h,v,f=this,y=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=y.length>3&&void 0!==y[3]&&y[3],l="reshape",e.next=4,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(29302)]).then(n.bind(n,56136)));case 4:if(!se(c=e.sent)){e.next=7;break}return e.abrupt("return",c);case 7:return p=i.reshapeOptions,d=new c.module.GraphicReshapeTool({view:s,graphic:t,enableZVertex:i.enableZ&&"move"===(null===p||void 0===p?void 0:p.vertexOperation),enableZShape:i.enableZ&&"move"===(null===p||void 0===p?void 0:p.shapeOperation),enableMoveGraphic:"move"===(null===p||void 0===p?void 0:p.shapeOperation)||"move-xy"===(null===p||void 0===p?void 0:p.shapeOperation),enableMidpoints:"split"===(null===p||void 0===p?void 0:p.edgeOperation),enableEdgeOffset:"offset"===(null===p||void 0===p?void 0:p.edgeOperation),snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions}),s.tools.add(d),u||this.updateGraphics.add(t),h=[],v=new B({activeComponent:d,tool:l,type:"update",onEnd:function(){var e;h.forEach((function(e){return e.remove()})),h.length=0,null!==(e=s.tools)&&void 0!==e&&e.remove(d),d.destroyed||d.destroy()},canUndo:function(){return d.canUndo},undo:function(){d.undo(),f._emitUndoEvent({graphics:f.updateGraphics.toArray(),tool:l})},canRedo:function(){return d.canRedo},redo:function(){d.redo(),f._emitRedoEvent({graphics:f.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.updateGraphics.add(t),f.emit("update",{graphics:f.updateGraphics.toArray(),state:"active",aborted:!1,tool:f.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,f._setupMove3DOperation(f.updateGraphics.toArray(),i,s,"transform",!0);case 3:se(n=e.sent)||(v.onEnd(),v.destroy(),f._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){f.updateGraphics.remove(e),f.emit("update",{graphics:f.updateGraphics.toArray(),state:"active",aborted:!1,tool:f.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),v.complete()},toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f._setupGraphicTransform3DOperation(f.updateGraphics.toArray(),i,s,!0);case 4:se(t=e.sent)||(v.onEnd(),v.destroy(),f._setUpdateOperationHandle(t,i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(h.push.apply(h,(0,r.Z)(this._getHandlesForComponent(v,i)).concat([s.on("immediate-click",(function(e){return f._getCommonUpdateOperationClickHandlers(v,e,i)}),I.f.WIDGET),s.on("key-down",(function(e){f._getCommonUpdateOperationKeyDownHandlers(v,e)}),I.f.WIDGET)])),v));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_setupTransformOrReshape2DOperation",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,i,s){var u,l,c,p,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateGraphics.addMany(t),e.next=3,this._updateSpatialReference(t);case 3:if("transform"!==n){e.next=9;break}return e.next=6,this._getBox(t,i,s);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this._getReshape(t,i,s);case 11:e.t0=e.sent;case 12:if(!se(u=e.t0)){e.next=15;break}return e.abrupt("return",u);case 15:return l=new B({activeComponent:u,type:"update",onEnd:function(){p.forEach((function(e){return e.remove()})),c.forEach((function(e){return e.remove()})),p=[],c=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),d._internalGraphicsLayer.removeMany(d.updateGraphics.toArray())},undo:function(){re(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitUndoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},redo:function(){oe(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitRedoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},addToSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,a,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reshape"!==(null===(n=l.activeComponent)||void 0===n?void 0:n.type)){e.next=12;break}return a=[].concat((0,r.Z)(d.updateGraphics),[t]),d.updateGraphics.removeAll(),e.next=6,d._setupMove2DOperation(a,i,s);case 6:if(!se(u=e.sent)){e.next=9;break}return e.abrupt("return");case 9:l.onEnd(),l.destroy(),d._setUpdateOperationHandle(u,i),e.next=13;break;case 12:d.updateGraphics.add(t),n.graphics=d.updateGraphics.toArray(),n.refresh(),l.resetHistory();case 13:d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.updateGraphics.indexOf(t),l.history.undo.forEach((function(e){return e.updates.splice(n,1)})),l.history.redo.forEach((function(e){return e.updates.splice(n,1)})),d.updateGraphics.remove(t),0===(r=d.updateGraphics.toArray()).length?l.complete():(a=r[0].geometry,1!==r.length||!(0,_.pC)(a)||"point"!==a.type&&"multipoint"!==a.type?l.activeComponent.graphics=r:l.toggleTool()),d.emit("update",{graphics:r,state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t,n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.updateGraphics.length>1)){e.next=2;break}return e.abrupt("return");case 2:if(n=d.updateGraphics.getItemAt(0),r=n.geometry,!(0,_.pC)(r)||("reshape"!==l.tool||"point"!==r.type&&"multipoint"!==r.type)&&("transform"!==l.tool||"extent"!==r.type)){e.next=5;break}return e.abrupt("return");case 5:if(a=null,"transform"!==l.tool){e.next=12;break}return e.next=9,d._getReshape([n],i,s);case 9:a=e.sent,e.next=17;break;case 12:if(e.t0="reshape"===l.tool,!e.t0){e.next=17;break}return e.next=16,d._getBox([n],i,s);case 16:a=e.sent;case 17:se(a)||(null!==(t=l.activeComponent)&&void 0!==t&&t.destroy(),l.activeComponent=a,l.activeComponent&&(p.forEach((function(e){return e.remove()})),p=d._getHandlesForComponent(l,i)));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),c=[s.on("immediate-click",(function(e){return d._getCommonUpdateOperationClickHandlers(l,e,i)}),I.f.WIDGET),s.on("key-down",(function(e){if(d._getCommonUpdateOperationKeyDownHandlers(l,e),e.key===U.j.constraint&&!e.repeat&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),I.f.WIDGET),s.on("key-up",(function(e){if(e.key===U.j.constraint&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),I.f.WIDGET)],p=this._getHandlesForComponent(l,i),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"_getGraphicMover",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var i,s,u=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.enableMoveAllGraphics,e.next=3,this._requireModule(Promise.all([n.e(53503),n.e(2346)]).then(n.bind(n,53503)));case 3:return s=e.sent,e.abrupt("return",se(s)?s:new s.module.default({enableMoveAllGraphics:i,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:t,view:a,callbacks:{onGraphicMoveStart:function(e){var t=e.dx,n=e.dy,r=e.graphic;u._displayGrabbingCursor(),u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-start"},type:"update"})},onGraphicMove:function(e){var t=e.dx,n=e.dy,r=e.graphic;return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move"},type:"update"})},onGraphicMoveStop:function(e){var t=e.dx,n=e.dy,r=e.graphic;u._displayPointerCursor(),u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:"move-stop"},type:"update"})},onGraphicPointerOver:function(){return u._displayPointerCursor()},onGraphicPointerOut:function(){return u._displayDefaultCursor()}}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getBox",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var s,u,l,c,p=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.enableRotation,u=r.enableScaling,l=r.preserveAspectRatio,e.next=5,this._requireModule(Promise.all([n.e(32456),n.e(23307),n.e(53503),n.e(49232),n.e(29899)]).then(n.bind(n,96306)));case 5:return c=e.sent,e.abrupt("return",se(c)?c:new c.module.default({graphics:t,enableRotation:s,enableScaling:u,preserveAspectRatio:l,layer:this._internalGraphicsLayer,view:a,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onMove:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onMoveStop:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScaleStart:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScale:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onScaleStop:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotateStart:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotate:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onRotateStop:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})}}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getReshape",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r,a){var s,u,l,c,p,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="split"===(null===(s=r.reshapeOptions)||void 0===s?void 0:s.edgeOperation),c="move"===(null===(u=r.reshapeOptions)||void 0===u?void 0:u.shapeOperation),e.next=4,this._requireModule(Promise.all([n.e(32456),n.e(55652),n.e(1103),n.e(23307),n.e(53503),n.e(34327),n.e(34141),n.e(63050)]).then(n.bind(n,83362)));case 4:return p=e.sent,e.abrupt("return",se(p)?p:new p.module.default({enableMidpoints:l,enableMovement:c,graphic:t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:a,callbacks:{onReshapeStart:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onReshape:function(e){return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:(0,i.Z)({},e),type:"update"})},onReshapeStop:function(e){var t=e.mover,n=e.type;return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{mover:t,type:n},type:"update"})},onMoveStart:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onMove:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onMoveStop:function(e){var t=e.dx,n=e.dy,r=e.mover,o=e.type;return d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{dx:t,dy:n,mover:r,type:o},type:"update"})},onVertexAdd:function(e){var t=e.added,n=e.type,r=e.vertices,o=t.map((function(e){return(0,S.nA)(e.geometry)}));d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:o,vertices:r,type:n},type:"update"})},onVertexRemove:function(e){var t=e.removed,n=e.type,r=e.vertices,o=t.map((function(e){return(0,S.nA)(e.geometry)}));d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{removed:o,vertices:r,type:n},type:"update"})}}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getHandlesForComponent",value:function(e,t){var n=this,r=e.activeComponent;if(!r)return[];switch(r.type){case"graphic-mover":return[r.on("graphic-click",(function(t){var n,r=t.graphic,o=t.viewEvent;(null===(n=o.native)||void 0===n?void 0:n.shiftKey)&&(o.stopPropagation(),e.removeFromSelection(r))})),r.on("graphic-move-start",(function(t){return e.addToHistory(ie(t.allGraphics))}))];case"box":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(ie(t.graphics))})),r.on("rotate-start",(function(t){return e.addToHistory(ie(t.graphics))})),r.on("scale-start",(function(t){return e.addToHistory(ie(t.graphics))}))];case"reshape":return[r.on("graphic-click",(function(r){return n._onTransformOrReshape2DGraphicClick(e,t,r)})),r.on("move-start",(function(t){return e.addToHistory(ie([t.mover]))})),r.on("reshape-start",(function(t){return e.addToHistory(ie([t.graphic]))})),r.on("vertex-add",(function(t){return e.addToHistory(ie([t.oldGraphic]))})),r.on("vertex-remove",(function(t){return e.addToHistory(ie([t.oldGraphic]))}))];case"move-3d":return[r.on("graphic-move-start",(function(t){e.addToHistory(ie(t.allGraphics)),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),r.on("graphic-move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),r.on("graphic-move-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[r.on("record-undo",(function(t){var n=t.record;e.addToHistory({updates:[n]})})),r.on("graphic-translate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),r.on("graphic-translate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),r.on("graphic-rotate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),r.on("graphic-rotate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),r.on("graphic-scale-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),r.on("graphic-scale-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),r.on("graphic-translate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),r.on("graphic-rotate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),r.on("graphic-scale",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[r.on("reshape",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("vertex-add",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("vertex-remove",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),r.on("immediate-click",(function(r){r.shiftKey?n._toggleSelection([r.graphic],e,t):e.toggleTool()}))]}}},{key:"_onTransformOrReshape2DGraphicClick",value:function(e,t,n){var r,o=n.graphic,a=n.viewEvent;return null!==(r=a.native)&&void 0!==r&&r.shiftKey&&o.layer===this.layer?(a.stopPropagation(),e.removeFromSelection(o)):t.toggleToolOnClick?(a.stopPropagation(),e.toggleTool()):void 0}},{key:"_setUpdateOperationHandle",value:function(e,t){var n,r=this;this._operationHandle=e;var o=null===(n=this.view)||void 0===n?void 0:n.map;this._disablePopup(t);e.on("complete",(function(){if(e===r._operationHandle){var n=r.updateGraphics.toArray(),a=r._operationHandle.tool;r._operationHandle.destroy(),r._operationHandle=null,r._internalGraphicsLayer.removeMany(r.updateGraphics.toArray()),r.updateGraphics.removeAll(),o&&o.remove(r._internalGraphicsLayer),r._restorePopup(t),r.emit("update",{graphics:n,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}},{key:"_getCommonUpdateOperationClickHandlers",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n,r){var a,i,s=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,W.vT)(n),e.next=3,n.async((function(){return s._getFirstHit(a)}));case 3:if(i=e.sent,!(0,_.Wi)(i)){e.next=6;break}return e.abrupt("return",void t.complete());case 6:if(!n.native.shiftKey||!this._toggleSelection([i.graphic],t,r)){e.next=8;break}return e.abrupt("return",void n.stopPropagation());case 8:this.updateGraphics.includes(i.graphic)?n.stopPropagation():t.complete();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_toggleSelection",value:function(e,t,n){var r=this,o=!!n.multipleSelectionEnabled;return e.some((function(e){return null!=e&&!(!o||e.layer!==r.layer)&&(r.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),!0)}))}},{key:"_getCommonUpdateOperationKeyDownHandlers",value:function(e,t){if(e){var n=t.key;n===U.j.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===U.j.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===U.j.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&U.j.delete.includes(n)&&this._onDeleteKey(t)}}},{key:"_onDeleteKey",value:function(e){if(this._operationHandle&&"update"===this._operationHandle.type){var t=this.activeComponent,n=this.updateGraphics.toArray();(0,_.Wi)(t)||"reshape-3d"===t.type||("reshape"!==t.type||1===n.length&&"point"===(0,_.U2)(n[0].geometry,"type"))&&(e.stopPropagation(),this.delete())}}},{key:"_removeDefaultLayer",value:function(){var e,t;this._internalGraphicsLayer&&(null!==(e=this.view)&&void 0!==e&&null!==(t=e.map)&&void 0!==t&&t.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,_.SC)(this._internalGraphicsLayer))}},{key:"_isComponentGraphic",value:function(e){var t=this.activeComponent;return!(!e||(0,_.Wi)(t))&&(e.attributes&&e.attributes.esriSketchTool||"draw-2d"===t.type&&t.graphic===e||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}},{key:"_displayPointerCursor",value:function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}},{key:"_displayGrabbingCursor",value:function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}},{key:"_displayDefaultCursor",value:function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}},{key:"_logError",value:function(e,t,n){g.Z.getLogger(this.declaredClass).error(new f.Z(e,t,n))}},{key:"_requireModule",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,this._moduleLoaderAbortController=n,e.next=4,t;case 4:return r=e.sent,e.abrupt("return",this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitUndoEvent",value:function(e){this.emit("undo",(0,i.Z)((0,i.Z)({},e),{},{type:"undo"}))}},{key:"_emitRedoEvent",value:function(e){this.emit("redo",(0,i.Z)((0,i.Z)({},e),{},{type:"redo"}))}},{key:"_emitDeleteEvent",value:function(e){this.emit("delete",(0,i.Z)((0,i.Z)({},e),{},{type:"delete"}))}},{key:"test",get:function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:Q}}},{key:"wait",value:function(){var e=this;return(0,k.N1)((function(){return!e.updating}))}},{key:"_beginAsyncOperation",value:function(){this._numUpdating+=1,this.notifyChange("updating")}},{key:"_endAsyncOperation",value:function(){this._numUpdating-=1,this.notifyChange("updating")}},{key:"_disablePopupEnabled",value:function(e){var t,n,r;return"3d"!==(null===(t=this.view)||void 0===t?void 0:t.type)||this.updateOnGraphicClick||null!==(n=null===(r=(0,_.Wg)(e))||void 0===r?void 0:r.toggleToolOnClick)&&void 0!==n&&n}},{key:"_disablePopup",value:function(e){var t;if(this._disablePopupEnabled(e)){var n=null===(t=this.view)||void 0===t?void 0:t.popup;n&&(0,_.Wi)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=n.autoOpenEnabled,n.autoOpenEnabled=!1)}}},{key:"_restorePopup",value:function(e){var t;if(this._disablePopupEnabled(e)){var n=null===(t=this.view)||void 0===t?void 0:t.popup;n&&(0,_.pC)(this._originalAutoOpenEnabled)&&(n.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}}},{key:"_waitViewReady",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.view)){e.next=8;break}return(0,_.IM)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,e.next=6,(0,b.Hl)((0,k.N1)((function(){return null===t||void 0===t?void 0:t.ready})),this._viewReadyAbortController.signal);case 6:e.next=9;break;case 8:this._logMissingView();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_logMissingView",value:function(){this._logError("sketch:missing-property",te("view"))}},{key:"_logMissingLayer",value:function(){this._logError(ee,te("layer"))}}]),d}(y.Z.EventedAccessor);(0,d._)([(0,Z.Cb)()],$.prototype,"updating",null),(0,d._)([(0,Z.Cb)()],$.prototype,"_operationHandle",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"activeTool",null),(0,d._)([(0,Z.Cb)()],$.prototype,"activeFillSymbol",void 0),(0,d._)([(0,Z.Cb)()],$.prototype,"activeLineSymbol",void 0),(0,d._)([(0,Z.Cb)()],$.prototype,"activeVertexSymbol",void 0),(0,d._)([(0,Z.Cb)()],$.prototype,"allowDeleteKey",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"createGraphic",null),(0,d._)([(0,Z.Cb)()],$.prototype,"defaultCreateOptions",null),(0,d._)([(0,Z.Cb)()],$.prototype,"defaultUpdateOptions",null),(0,d._)([(0,Z.Cb)({type:D.Z,nonNullable:!0})],$.prototype,"labelOptions",void 0),(0,d._)([(0,Z.Cb)()],$.prototype,"layer",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"pointSymbol",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"polygonSymbol",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"polylineSymbol",void 0),(0,d._)([(0,Z.Cb)({type:L.Z,nonNullable:!0})],$.prototype,"snappingOptions",null),(0,d._)([(0,Z.Cb)()],$.prototype,"_snappingManager",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"state",null),(0,d._)([(0,Z.Cb)({type:H.Z,nonNullable:!0})],$.prototype,"tooltipOptions",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"updateGraphics",void 0),(0,d._)([(0,Z.Cb)()],$.prototype,"updateOnGraphicClick",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"updatePointSymbol",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"updatePolygonSymbol",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"updatePolylineSymbol",void 0),(0,d._)([(0,Z.Cb)({types:h.LB})],$.prototype,"vertexSymbol",void 0),(0,d._)([(0,Z.Cb)({value:null})],$.prototype,"view",null),$=(0,d._)([(0,w.j)("esri.widgets.Sketch.SketchViewModel")],$);var ee="sketch:missing-property",te=function(e){return"Property '".concat(e,"' is missing on SketchViewModel.")};function ne(e){return"polygon"===e||"rectangle"===e||"circle"===e}function re(e,t){ae("undo",e.history.undo,e.history.redo,t)}function oe(e,t){ae("redo",e.history.redo,e.history.undo,t)}function ae(e,t,n,r){var o=t.pop();if(o){var a=o.updates,i=[];r.forEach((function(t,n){var r=a[n];null!=r&&("geometry"in r&&(0,_.pC)(r.geometry)&&(i.push({geometry:t.geometry}),t.geometry=r.geometry),"symbol"in r&&(0,_.pC)(r.symbol)&&(i.push({symbol:t.symbol}),t.symbol=r.symbol),"undo"in r&&(i.push(r),r[e](t)))})),n.push({updates:i})}}function ie(e){return{updates:e.map((function(e){return{geometry:e.geometry}}))}}function se(e){return"requireError"in e&&"aborted"===e.requireError}var ue=$}}]);
//# sourceMappingURL=39047.42733cd4.chunk.js.map