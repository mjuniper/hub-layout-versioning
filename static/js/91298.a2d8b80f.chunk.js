/*! For license information please see 91298.a2d8b80f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[91298],{29398:function(t,e,n){n.d(e,{O:function(){return l}});var i=n(43144),r=n(15671),o=n(97326),c=n(60136),a=n(92572),s=n(28664),u=n(19420),l=function(t){(0,c.Z)(n,t);var e=(0,a.Z)(n);function n(t,i,c){var a;return(0,r.Z)(this,n),i=i||"UNKNOWN_ERROR",c=(0,u.g)(c,"rootCause",c),(a=e.call(this,i)).operation=t,a.name="OperationError",a.rootCause=c,Object.setPrototypeOf((0,o.Z)(a),n.prototype),a.stack=(0,u.g)(c,"stack",(new Error).stack),a}return(0,i.Z)(n)}((0,s.Z)(Error))},1319:function(t,e,n){n.d(e,{a:function(){return r}});var i=n(67450);function r(t,e,n){var r=(0,i._)((0,i._)({params:{}},n),t);return r.params=e.reduce((function(e,n){return(t[n]||"boolean"===typeof t[n])&&(e[n]=t[n]),e}),r.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(t,e){return r[e]&&(t[e]=r[e]),t}),{})}},91298:function(t,e,n){n.r(e),n.d(e,{arcgis_hub_new_content:function(){return f}});var i=n(74165),r=n(15861),o=n(15671),c=n(43144),a=n(5692),s=n(54825),u=n(13129),l=n(4541),d=n(12969),h=n(58669),p=n(67908),f=(n(7597),n(95101),n(67450),n(48103),n(25212),n(17684),n(1319),n(72528),n(35137),n(29398),n(54805),n(27529),function(){function t(e){(0,o.Z)(this,t),(0,a.r)(this,e),this.arcgisHubNewContentSuccess=(0,a.c)(this,"arcgisHubNewContentSuccess",7),this.hubTelemetry=(0,a.c)(this,"hubTelemetry",7),this.entities=[],this.resourceLinks=[],this.renderAsDropdown=!1,this.isMobile=!1,this.isLoading=!1,this.isFormOpen=!1,this.isMobileDropdownOpen=!1,(0,s.b)(this,"onOpenFormButtonClick","toggleForm","getDynamicProjectConfig","createProject","onOpenMobileDropdownButtonClick","onCloseMobileDropdownButttonClick","handleDropdownSelect","handleResourceLinkClick","handleCalciteDropdownRef")}return(0,c.Z)(t,[{key:"handleArcgisHubNewContentModalClosed",value:function(){this.toggleForm(!1),this.selectedEntityIdx=null}},{key:"handleArcgisHubNewContentModalSaved",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.isLoading=!0,t.t0=this.entityFunctions,!t.t0){t.next=7;break}return t.next=6,this.entityFunctions.create(e.detail);case 6:t.t0=t.sent;case 7:n=t.t0,this.isFormOpen=!1,this.arcgisHubNewContentSuccess.emit(n),this.hubTelemetry.emit(Object.assign(Object.assign({},l.d.dictionary.category.content.action.create),{response:l.d.constants.response.SUCCESS,id:n.id,type:n.type})),t.next=17;break;case 13:t.prev=13,t.t1=t.catch(0),this.error=t.t1.toString(),this.hubTelemetry.emit(Object.assign(Object.assign({},l.d.dictionary.category.content.action.create),{response:l.d.constants.response.FAILURE}));case 17:return t.prev=17,this.isLoading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[0,13,17,20]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isSingleEntity",get:function(){return 1===this.entities.length}},{key:"selectedEntity",get:function(){return this.isSingleEntity?this.entities[0]:this.entities[this.selectedEntityIdx]}},{key:"entityKey",get:function(){var t;return null===(t=this.selectedEntity)||void 0===t?void 0:t.key}},{key:"entityFunctions",get:function(){var t;return{project:{create:this.createProject,getEditorConfig:p.g,getDynamicEditorConfig:this.getDynamicProjectConfig}}[null===(t=this.selectedEntity)||void 0===t?void 0:t.key]}},{key:"hasResourceLinks",get:function(){return!!this.resourceLinks.length}},{key:"componentWillLoad",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.i.loadIntlForComponent(this.element);case 2:this.intl=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleDropdownSelect",value:function(t){var e=t.currentTarget;this.selectedEntityIdx=e.getAttribute("data-index"),this.handleSelectedEntity(this.selectedEntity)}},{key:"handleResourceLinkClick",value:function(t){var e=t.currentTarget.getAttribute("data-value"),n=l.d.dictionary.category.navigation.action.new.label.content.details[e];n&&this.hubTelemetry.emit(n)}},{key:"handleSelectedEntity",value:function(t){t.href?l.d.dictionary.category.navigation.action.new.label.content.details[t.key]?this.hubTelemetry.emit(l.d.dictionary.category.navigation.action.new.label.content.details[t.key]):this.hubTelemetry.emit(l.d.dictionary.category.navigation.action.new.label.content):this.toggleForm(!0)}},{key:"handleCalciteDropdownRef",value:function(t){if(t.shadowRoot&&!t.shadowRoot.querySelector("style[data-hub]")){var e=document.createElement("style");e.dataset.hub="",e.innerHTML=".calcite-dropdown-content { max-block-size: max-content !important; }",t.shadowRoot.appendChild(e)}}},{key:"toggleForm",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isMobileDropdownOpen=!1,this.isFormOpen=e,!e){t.next=17;break}return t.prev=3,this.isLoading=!0,t.next=7,this.loadForm();case 7:this.form=t.sent,this.selectedEntity&&this.hubTelemetry.emit(e?l.d.dictionary.category.interaction.action.open.label.modal.details["create".concat((0,d.d)(this.selectedEntity.key))]:l.d.dictionary.category.interaction.action.close.label.modal.details["create".concat((0,d.d)(this.selectedEntity.key))]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.error=t.t0.toString();case 14:return t.prev=14,this.isLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[3,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"loadForm",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var e,n,r,o,c,a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.entityFunctions,!t.t0){t.next=5;break}return t.next=4,this.entityFunctions.getDynamicEditorConfig();case 4:t.t0=t.sent;case 5:if(r=t.t0,o=r.defaults,c=r.options,t.t1=this.entityFunctions,!t.t1){t.next=13;break}return t.next=12,this.entityFunctions.getEditorConfig(this.entityKey,"create",c);case 12:t.t1=t.sent;case 13:return a=t.t1,s={project:Object.assign({title:null===(e=this.intl)||void 0===e?void 0:e.t("project.form.title"),description:null===(n=this.intl)||void 0===n?void 0:n.t("project.form.description"),icon:"projects",values:Object.assign({},o)},a)},t.abrupt("return",s[this.entityKey]);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getDynamicProjectConfig",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.context,!t.t0){t.next=5;break}return t.next=4,(0,h.c)(this.context.hubRequestOptions);case 4:t.t0=t.sent;case 5:return e=t.t0,t.abrupt("return",{defaults:{extent:e},options:[{scope:"/properties/extent",options:{sources:[{value:"none"},{selected:!0,value:"item",label:"Organizations Extent",graphic:{geometry:Object.assign({type:"extent"},e)}}]}}]});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onOpenFormButtonClick",value:function(){this.toggleForm(!0)}},{key:"onOpenMobileDropdownButtonClick",value:function(){this.isMobileDropdownOpen=!0}},{key:"onCloseMobileDropdownButttonClick",value:function(){this.isMobileDropdownOpen=!1}},{key:"createProject",value:function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.extent,e.orgUrlKey=this.context.portal.urlKey,e.extent=n&&(0,h.a)(n),t.abrupt("return",(0,p.c)(e,this.context.userRequestOptions));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"renderButton",value:function(t,e){return this.isMobile?(0,a.h)("calcite-button",{appearance:this.buttonAppearance,color:this.buttonColor,onClick:this.onOpenMobileDropdownButtonClick,scale:this.buttonScale},(0,a.h)("calcite-icon",{icon:"plus",scale:this.buttonScale})):this.isSingleEntity&&!this.renderAsDropdown?(0,a.h)("calcite-button",{appearance:this.buttonAppearance,color:this.buttonColor,href:t[0].href,onClick:this.onOpenFormButtonClick,scale:this.buttonScale},t[0].label):this.renderDropdown(t,e)}},{key:"renderDropdown",value:function(t,e){return(0,a.h)("calcite-dropdown",{ref:this.handleCalciteDropdownRef},(0,a.h)("calcite-button",{appearance:this.buttonAppearance,color:this.buttonColor,"icon-end":"caret-down",scale:this.buttonScale,slot:"dropdown-trigger"},this.intl.t("new")),this.renderDropdownContent(t,e))}},{key:"renderDropdownContent",value:function(t,e){return(0,a.h)(a.F,null,this.renderEntityItems(t),this.hasResourceLinks&&this.renderResourceLinks(e))}},{key:"renderEntityItems",value:function(t){var e=this;return(0,a.h)("calcite-dropdown-group",{class:{"hub-new-content_dropdown-group":!0,mobile:this.isMobile},"selection-mode":"none"},t.map((function(t,n){return e.renderEntityItem(t,n)})))}},{key:"renderEntityItem",value:function(t,e){return(0,a.h)("calcite-dropdown-item",{active:t.key===this.entityKey,"data-index":e,"data-value":t.key,href:t.href,key:t.key,onClick:this.handleDropdownSelect},(0,a.h)("div",{class:"hub-new-content_dropdown-item"},(0,a.h)("div",{class:"hub-new-content_dropdown-item--left"},(0,a.h)("div",{class:"hub-new-content_dropdown-item-icon"},(0,a.h)("calcite-icon",{icon:t.icon,scale:"l"})),(0,a.h)("div",{class:"hub-new-content_dropdown-item-content"},(0,a.h)("div",{class:"hub-new-content_dropdown-item-title"},t.label),(0,a.h)("div",{class:"hub-new-content_dropdown-item-description"},t.description)))))}},{key:"renderResourceLinks",value:function(t){var e=this;return(0,a.h)("calcite-dropdown-group",{class:{"hub-new-content_dropdown-group":!0,mobile:this.isMobile},"selection-mode":"none"},t.map((function(t){return e.renderResourceLink(t)})))}},{key:"renderResourceLink",value:function(t){return(0,a.h)("calcite-dropdown-item",{"data-value":t.key,href:t.href,key:t.label,onClick:this.handleResourceLinkClick},(0,a.h)("calcite-link",null,t.label))}},{key:"renderNewContentModal",value:function(){return(0,a.h)("arcgis-wormhole",null,(0,a.h)("arcgis-hub-new-content-modal",{error:this.error,form:this.form,isLoading:this.isLoading,isOpen:this.isFormOpen}))}},{key:"renderMobileModal",value:function(t,e){return(0,a.h)("calcite-modal",{onCalciteModalClose:this.onCloseMobileDropdownButttonClick,open:this.isMobileDropdownOpen},(0,a.h)("div",{slot:"header"},this.intl.t("new")),(0,a.h)("div",{slot:"content"},this.renderDropdownContent(t,e)))}},{key:"render",value:function(){var t=this.isSingleEntity?this.entities[0]:this.selectedEntity;return(0,a.h)(a.H,{"data-element":"new-content"},!!this.entities.length&&this.renderButton(this.entities,this.resourceLinks),t&&this.renderNewContentModal(),this.isMobile&&this.renderMobileModal(this.entities,this.resourceLinks))}},{key:"element",get:function(){return(0,a.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}}]),t}());f.style=".sc-arcgis-hub-new-content-h{display:block}.sc-arcgis-hub-new-content-h:not([unthemed]) calcite-dropdown.sc-arcgis-hub-new-content{--calcite-ui-background:#f8f8f8;--calcite-ui-foreground-1:#ffffff;--calcite-ui-foreground-2:#f3f3f3}.sc-arcgis-hub-new-content-h:not([unthemed]) .hub-new-content_dropdown-group.sc-arcgis-hub-new-content{--calcite-ui-brand:var(--calcite-ui-border-1);--calcite-ui-text-1:#151515;--calcite-ui-text-2:#4a4a4a;--calcite-ui-text-3:#6a6a6a;--calcite-ui-border-1:#cacaca;--calcite-ui-border-3:#dfdfdf;--calcite-ui-text-link:#151515;--calcite-link-blue-underline:#151515}.hub-new-content_dropdown-group.sc-arcgis-hub-new-content:not(.mobile){max-width:20rem}.hub-new-content_dropdown-item.sc-arcgis-hub-new-content{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-top:0.25rem;padding-bottom:0.25rem}.hub-new-content_dropdown-item--left.sc-arcgis-hub-new-content{display:flex}.hub-new-content_dropdown-item-content.sc-arcgis-hub-new-content{display:flex;flex-direction:column}.hub-new-content_dropdown-item-icon.sc-arcgis-hub-new-content{height:70px;width:70px;margin-right:0.75rem;display:flex;align-items:center;background-color:var(--calcite-ui-background)}.hub-new-content_dropdown-item-icon.sc-arcgis-hub-new-content calcite-icon.sc-arcgis-hub-new-content{width:70px}.hub-new-content_dropdown-item-title.sc-arcgis-hub-new-content,.hub-new-content_dropdown-item-description.sc-arcgis-hub-new-content,calcite-dropdown-item.sc-arcgis-hub-new-content calcite-link.sc-arcgis-hub-new-content{font-family:var(--calcite-sans-family);font-weight:var(--calcite-font-weight-normal);font-size:var(--calcite-font-size--1);line-height:1.375rem;white-space:normal;overflow-wrap:break-word}.hub-new-content_dropdown-item-title.sc-arcgis-hub-new-content{margin-bottom:0.25rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.hub-new-content_dropdown-item-description.sc-arcgis-hub-new-content{color:var(--calcite-ui-text-2)}"},35137:function(t,e,n){n.d(e,{a:function(){return w},b:function(){return l},c:function(){return f},d:function(){return s},e:function(){return b},f:function(){return g},g:function(){return h},h:function(){return m},i:function(){return u},j:function(){return y},s:function(){return a}});var i=n(29847),r=n(46356),o=n(67450),c=n(1319);function a(t){var e=JSON.parse(JSON.stringify(t));return e.data&&("undefined"!==typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?e.file=t.data:e.text=t.data,delete e.data),e}function s(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function u(t){return Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[1])}function l(t){return t.join(",")}var d=/[\x00-\x1F\x7F-\x9F\xA0]/g;function h(t,e){var n=p(t,e),r=(0,i._)({httpMethod:"GET"},e);return(0,o.r)(n,r)}var p=function(t,e){return("string"===typeof e?e:(0,r.g)(e))+"/content/items/"+t};function f(t,e){var n=p(t,e)+"/data",r=(0,i._)({httpMethod:"GET",params:{}},e);return r.file&&(r.params.f=null),(0,o.r)(n,r).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function g(t,e){var n=p(t,e)+"/resources",r=(0,i._)({},e);return r.params=(0,i._)({num:1e3},r.params),(0,o.r)(n,r)}function m(t,e){var n=e.readAs||"blob";return v(t,"/resources/"+e.fileName,n,e)}function w(t,e){var n=p(t,e)+"/groups";return(0,o.r)(n,e)}function y(t){return s(t).then((function(e){var n=(0,r.g)(t)+"/content/users/"+e+"/items/"+t.id+"/status",a=(0,c.a)(t,["jobId","jobType"],{params:(0,i._)({},t.params)});return(0,o.r)(n,a)}))}function b(t,e){return function(t,e){var n=e||{},r=n.fileName,o=void 0===r?"iteminfo.xml":r,c=n.readAs;return v(t,"/info/"+o,void 0===c?"text":c,(0,i._)({httpMethod:"GET"},e))}(t,(0,i._)((0,i._)({},e),{fileName:"metadata/metadata.xml"}))}function v(t,e,n,r){var c=""+p(t,r)+e,a=(0,i._)({params:{}},r),s=a.rawResponse;return a.rawResponse=!0,a.params.f=null,(0,o.r)(c,a).then((function(t){return s?t:"json"!==n?t[n]():t.text().then((function(t){return JSON.parse(t.replace(d,""))}))}))}},19420:function(t,e,n){n.d(e,{g:function(){return r}});var i=n(13115);function r(t,e,n){var r=(0,i.g)(t,e);return void 0!==r?r:n}},29847:function(t,e,n){n.d(e,{_:function(){return i},a:function(){return r}});var i=function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],c=0,a=o.length;c<a;c++,r++)i[r]=o[c];return i}}}]);
//# sourceMappingURL=91298.a2d8b80f.chunk.js.map