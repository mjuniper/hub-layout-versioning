/*! For license information please see 17055.ac02d5f2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[17055],{19337:function(t,n,e){e.r(n),e.d(n,{arcgis_app_identity:function(){return h}});var r=e(74165),i=e(15861),o=e(15671),c=e(43144),a=e(72585),u=e(36106),s=e(85015);e(77843),e(9882),e(41016),e(41817);function l(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;n.localStorage&&n.localStorage.removeItem("__CONTEXT_".concat(t))}function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,e=null;if(n.localStorage){var r=n.localStorage.getItem("__CONTEXT_".concat(t));r&&(e=u.U.deserialize(r))}return e}function p(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;e.localStorage&&e.localStorage.setItem("__CONTEXT_".concat(t),n.serialize())}var h=function(){function t(n){(0,o.Z)(this,t),(0,a.r)(this,n),this.signInCompleted=(0,a.c)(this,"arcgisAppIdentitySignedIn",7),this.signOutCompleted=(0,a.c)(this,"arcgisAppIdentitySignedOut",7),this.popup=!0,this.persist=!0,this.portal="https://www.arcgis.com",this.mode="html"}return(0,c.Z)(t,[{key:"sharingApiUrl",get:function(){return"".concat(this.portal,"/sharing/rest")}},{key:"onSignInHandler",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.info("app-identity: Caught start signin event. Using ".concat(this.portal,", ").concat(this.clientId),n),t.next=3,u.U.beginOAuth2({clientId:this.clientId,redirectUri:this.redirectUri,portal:this.sharingApiUrl});case 3:return e=t.sent,t.next=6,s.A.create({portalUrl:this.portal,authentication:e});case 6:if(this.contextManager=t.sent,!this.persist){t.next=10;break}return t.next=10,p("__CONTEXT_".concat(this.clientId),this.contextManager.context.session);case 10:console.info("app-identity: sign-in complete: emitting ArcGISContext ".concat(this.contextManager.id)),this.signInCompleted.emit(this.contextManager.context);case 12:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"onSignOutHandler",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.info("app-identity: sign-out for ".concat(this.contextManager.id)),this.contextManager.clearAuthentication(),l("__CONTEXT_".concat(this.clientId)),console.info("app-identity: sign-out complete. ".concat(this.contextManager.id," isAuthenticated? ").concat(this.contextManager.context.isAuthenticated)),this.signOutCompleted.emit(this.contextManager.context);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillLoad",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var n,e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("app-identity: componentWillLoad"),"html"!==this.mode||this.contextManager){t.next=10;break}return console.info("app-identity: creating ArcGISContext based on attrs..."),this.persist&&(n=f("__CONTEXT_".concat(this.clientId))),e={portalUrl:this.portal},n&&(e.authentication=n),t.next=8,s.A.create(e);case 8:this.contextManager=t.sent,console.info("app-identity: created.");case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillRender",value:function(){console.info("app-identity: componentWillRender"),this.contextManager.context.isAuthenticated&&"html"===this.mode&&(console.info("app-identity: rendered, emitting signInCompleted w ArcGISContext"),this.signInCompleted.emit(this.contextManager.context))}},{key:"componentDidRender",value:function(){console.info("app-identity: componentDidRender"),this.contextManager.context.isAuthenticated&&"html"===this.mode&&(console.info("app-identity: rendered, emitting signInCompleted w ArcGISContext"),this.signInCompleted.emit(this.contextManager.context))}},{key:"render",value:function(){return(0,a.h)(a.H,null,(0,a.h)("slot",null))}}]),t}();h.style=":host{display:block}"},30678:function(t,n,e){function r(t){return"string"!==typeof t||"/"===(t=t.trim())[t.length-1]&&(t=t.slice(0,-1)),t}e.d(n,{c:function(){return r}})},41817:function(t,n,e){e.d(n,{a:function(){return a},g:function(){return c}});var r=e(63613),i=e(98825),o=e(77843);function c(t){return a(null,t)}function a(t,n){var e=t||"self",c=(0,i.g)(n)+"/portals/"+e,a=(0,r._)({httpMethod:"GET"},n);return(0,o.r)(c,a)}},98825:function(t,n,e){e.d(n,{g:function(){return i}});var r=e(30678);function i(t){return void 0===t&&(t={}),t.portal?(0,r.c)(t.portal):t.authentication?t.authentication.portal:"https://www.arcgis.com/sharing/rest"}},62254:function(t,n,e){function r(t,n){return n.split(".").reduce((function(t,n){return t?t[n]:void 0}),t)}e.d(n,{g:function(){return r}})},20399:function(t,n,e){e.d(n,{g:function(){return i}});var r=e(62254);function i(t,n,e){var i=(0,r.g)(t,n);return void 0!==i?i:e}},9882:function(t,n,e){e.d(n,{a:function(){return c},g:function(){return a}});var r=e(63613),i=e(98825),o=e(77843);function c(t){var n,e={httpMethod:"GET"};if("string"===typeof t)n="https://www.arcgis.com/sharing/rest/community/users/"+t;else{var c=t.username||t.authentication.username;n=(0,i.g)(t)+"/community/users/"+encodeURIComponent(c),e=(0,r._)((0,r._)({},t),e)}return(0,o.r)(n,e)}function a(t){var n=t;return t.match(/(qaext|\.mapsqa)\.arcgis.com/)?n="https://qaext.arcgis.com":t.match(/(devext|\.mapsdevext)\.arcgis.com/)?n="https://devext.arcgis.com":t.match(/(www|\.maps)\.arcgis.com/)&&(n="https://www.arcgis.com"),n}},63613:function(t,n,e){e.d(n,{_:function(){return r},a:function(){return i}});var r=function(){return r=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},r.apply(this,arguments)};function i(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],c=0,a=o.length;c<a;c++,i++)r[i]=o[c];return r}},25434:function(t,n,e){e.d(n,{a:function(){return a},b:function(){return l},c:function(){return i},d:function(){return s},e:function(){return h},f:function(){return d},g:function(){return o},i:function(){return p},m:function(){return u},u:function(){return f},w:function(){return c}});var r=e(62254);function i(t){var n={};if(Array.isArray(t))n=t.map(i);else if("object"===typeof t){for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];null!=r&&"object"===typeof r?r instanceof Date?n[e]=new Date(r.getTime()):"undefined"!==typeof Blob&&r instanceof Blob?n[e]=new Blob([r],{type:r.type}):n[e]=i(r):n[e]=r}}else n=t;return n}function o(t,n,e){return t?t.reduce((function(t,i){return(0,r.g)(i,n)===e&&(t=i),t}),null):null}function c(t,n){return t.filter((function(t){return t!==n}))}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(t).concat(Math.random().toString(36).substr(2,8))}function u(t,n,e){return null!==n&&void 0!==n&&((e=i(e))[t]=n),e}function s(t,n){return null!==t&&void 0!==t&&(n=i(n)).push(t),n}function l(t){return(t=(t=t.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(t,n,e){return e?e.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(t,n,e){return t.toLowerCase()}))}function f(t,n,e){return e.indexOf(t)===n}var p=function(t){return null==t},h=function(t){var n=Array.from(t);return n[0]=n[0].toUpperCase(),n.join("")};function d(t){return t.reduce((function(t,n){return t.concat(n)}),[])}}}]);
//# sourceMappingURL=17055.ac02d5f2.chunk.js.map