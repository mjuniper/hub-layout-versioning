/*! For license information please see 3045.7754943b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[3045],{3045:function(e,t,i){i.r(t),i.d(t,{arcgis_telemetry_configuration:function(){return L}});var n=i(4942),r=i(74165),o=i(15861),a=i(15671),l=i(43144),s=i(5692),c=i(13129),u=i(54825),d=i(12969);i(7597);function g(e){var t=e.toString();return/^G-[A-Z0-9]{1,}$/gi.test(t)}function h(e){return g(e)||function(e){var t=e.toString();return/^ua-\d{4,9}-\d{1,4}$/i.test(t)}(e)}function v(e){return(null===e||void 0===e?void 0:e.length)>0}var f,p="disabled",m="measurementId",b="trackingServer",S="trackingServerSSL",_="reportSuite",y="code",k="text",C="https://doc.arcgis.com/en/arcgis-online/get-started/create-account.htm#ESRI_SECTION1_24871ED982AC41ED86FF1937E7604CDE",A="https://doc.arcgis.com/en/arcgis-online/reference/faq.htm#ESRI_QUESTIONANSWER_AED97F28DCD84F7682623C2FA9E5CE49",I="https://help.siteimprove.com/support/solutions/articles/80000448448-adding-siteimprove-analytics-javascript-to-your-website";!function(e){e.Google="google",e.Adobe="adobe",e.SiteImprove="siteImprove",e.ConsentMessage="consentMessage"}(f||(f={}));var L=function(){function e(t){var i,n,r,o,l,c;(0,a.Z)(this,e),(0,s.r)(this,t),this.arcgisTelemetryConfigurationChange=(0,s.c)(this,"arcgisTelemetryConfigurationChange",7),this.configuration={plugins:{}},this.allowGA3=!1,this.ui="accordion",this.isUpdatingObj={},this.isListenerSetup={},this.isConsentMessageValid=!0,this._tempConsentMessageValue=null===(i=this.consentMessage)||void 0===i?void 0:i.text,this.isGAValid=null,this._googleAnalyticsKeyValueTemp=null===(n=this.googleConfig)||void 0===n?void 0:n.measurementId,this.isAdobeTrackingServerValid=null,this.isAdobeTrackingServerSSLValid=null,this.isALReportSuiteValid=null,this._adobeTrackingServerValueTemp=null===(r=this.adobeConfig)||void 0===r?void 0:r.trackingServer,this._adobeTrackingServerSSLValueTemp=null===(o=this.adobeConfig)||void 0===o?void 0:o.trackingServerSSL,this._adobeLReportSuiteValueTemp=null===(l=this.adobeConfig)||void 0===l?void 0:l.reportSuite,this.isSIValid=null,this._siCodeValueTemp=null===(c=this.siteImproveConfig)||void 0===c?void 0:c.code,(0,u.b)(this,"_assignConsentListener","_saveGoogleKey","_saveAdobeTrackingServer","_saveAdobeTrackingServerSSL","_saveAdobeReportSuite","_saveSiteCode","_validateGMeasurementID","_validateAdobeTrackingServer","_validateAdobeSSLTrackingServer","_validateAdobeReportSuite","_validateSICode","_validateConsentMessage")}return(0,l.Z)(e,[{key:"numberOfProviders",get:function(){return[this.googleConfig,this.adobeConfig,this.siteImproveConfig].filter((function(e){return e&&!(null===e||void 0===e?void 0:e.disabled)})).length}},{key:"_getConsentConfiguredMsg",get:function(){var e;return(null===(e=this.consentMessage)||void 0===e?void 0:e.disabled)?this.intl.t("notConfigured"):this.intl.t("configured")}},{key:"googleConfig",get:function(){var e,t,i,n,r=null!==(n=null!==(t=null===(e=this.configurationState)||void 0===e?void 0:e.plugins)&&void 0!==t?t:null===(i=this.configuration)||void 0===i?void 0:i.plugins)&&void 0!==n?n:{},o=null===r||void 0===r?void 0:r[f.Google];if(o)return{disabled:Boolean(null===o||void 0===o?void 0:o[p]),measurementId:null===o||void 0===o?void 0:o[m]}}},{key:"adobeConfig",get:function(){var e,t,i,n,r=null!==(n=null!==(t=null===(e=this.configurationState)||void 0===e?void 0:e.plugins)&&void 0!==t?t:null===(i=this.configuration)||void 0===i?void 0:i.plugins)&&void 0!==n?n:{},o=null===r||void 0===r?void 0:r[f.Adobe];if(o)return{disabled:Boolean(null===o||void 0===o?void 0:o[p]),trackingServer:null===o||void 0===o?void 0:o[b],trackingServerSSL:null===o||void 0===o?void 0:o[S],reportSuite:null===o||void 0===o?void 0:o[_]}}},{key:"siteImproveConfig",get:function(){var e,t,i,n,r=null!==(n=null!==(t=null===(e=this.configurationState)||void 0===e?void 0:e.plugins)&&void 0!==t?t:null===(i=this.configuration)||void 0===i?void 0:i.plugins)&&void 0!==n?n:{},o=null===r||void 0===r?void 0:r[f.SiteImprove];if(o)return{disabled:Boolean(null===o||void 0===o?void 0:o[p]),code:null===o||void 0===o?void 0:o[y]}}},{key:"consentMessage",get:function(){var e,t,i=null!==(t=null!==(e=this.configurationState)&&void 0!==e?e:this.configuration)&&void 0!==t?t:{},n=null===i||void 0===i?void 0:i[f.ConsentMessage];if(n)return{disabled:Boolean(null===n||void 0===n?void 0:n[p]),text:null===n||void 0===n?void 0:n[k]}}},{key:"isUpdating",get:function(){return Object.values(this.isUpdatingObj).reduce((function(e,t){return e||t}),!1)}},{key:"componentWillLoad",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.i.loadIntlForComponent(this.element);case 2:this.intl=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidLoad",value:function(){this.googleConfig&&this._validateGMeasurementID(),this.adobeConfig&&(this._validateAdobeTrackingServer(),this._validateAdobeReportSuite()),this.siteImproveConfig&&this._validateSICode(),this.consentMessage&&this._validateConsentMessage()}},{key:"_assignConsentListener",value:function(e){var t=this;this._tempConsentMessageValue=this._tempConsentMessageValue,e.addEventListener("arcgisHubRichTextChange",(function(e){var i,n=null===(i=null===e||void 0===e?void 0:e.path)||void 0===i?void 0:i[0].value;t._tempConsentMessageValue=n})),e.addEventListener("focusout",(function(e){t._validateConsentMessage(e)}))}},{key:"_addSwitchListener",value:function(e,t){var i=this;null==this.isListenerSetup[e]&&(this.isListenerSetup[e]=!0,t.addEventListener("calciteSwitchChange",(function(t){var n,r=!(null===(n=null===t||void 0===t?void 0:t.detail)||void 0===n?void 0:n.switched);i._updateOutput(e,p,r)})))}},{key:"render",value:function(){return"accordion"===this.ui?this._renderAccordionUI():this._renderFlatUI()}},{key:"_renderAccordionUI",value:function(){return(0,s.h)("calcite-accordion",{"selection-mode":"single"},(0,s.h)("calcite-accordion-item",{icon:"configure-popup","item-subtitle":this.intl.t("enabled",{numberOfProviders:this.numberOfProviders}),"item-title":this.intl.t("accordionHeader1")},this._renderProviderForms()),this.consentMessage&&(0,s.h)("calcite-accordion-item",{icon:"edit-attributes","item-subtitle":this._getConsentConfiguredMsg,"item-title":this.intl.t("accordionHeader2")},this._renderConsentForm()))}},{key:"_renderFlatUI",value:function(){return(0,s.h)(s.F,null,this._renderProviderForms(),this.consentMessage&&this._renderConsentForm())}},{key:"_renderProviderForms",value:function(){return[this.googleConfig&&this._renderGoogleAnalyticsForm(),this.adobeConfig&&this._renderAdobeForm(),this.siteImproveConfig&&this._renderSiteImproveForm(),this.showArcgisOnlineDisclosure&&this._renderInfoMsg()]}},{key:"_renderConsentForm",value:function(){return this._renderProvider(this.intl.t("consentMessage"),this.consentMessage,f.ConsentMessage,(0,s.h)(s.F,null,(0,s.h)("div",null,(0,s.h)("strong",null,this.intl.t("consentMessageLabel"))),(0,s.h)("arcgis-hub-rich-text",{disabled:this.isUpdating,ref:this._assignConsentListener,toolbar:"link",value:this.consentMessage.text})),(0,s.h)("div",{class:"consent-message-info"},(0,s.h)("p",null,this.intl.t("consentMessageInfo")),(0,s.h)("p",null,(0,s.h)("strong",null,this.intl.t("consentGuidance")),"\xa0",(0,s.h)("calcite-link",{href:"https://iapp.org/",target:"_blank"},this.intl.t("learnMore")))))}},{key:"_renderProvider",value:function(e,t,i,n,r){var o=t.disabled;return(0,s.h)("div",{class:"provider"},(0,s.h)("div",{class:"provider-header"},(0,s.h)("header",null,e),(0,s.h)("div",{class:"provider-header__right-container"},1==this.isUpdatingObj[i]?this._renderLoader():null,(0,s.h)("calcite-switch",{checked:!o,disabled:this.isUpdating,ref:this._addSwitchListener.bind(this,i)}))),r,(0,s.h)("div",{class:o?"no-show":"internal-form"},n))}},{key:"_renderLoader",value:function(){return(0,s.h)("calcite-loader",{active:!0,label:this.intl.t("updating"),"no-padding":!0,scale:"s",type:"indeterminate"})}},{key:"_updateOutput",value:function(e,t,i){var r,o,a=(0,d.c)(null!==(r=this.configurationState)&&void 0!==r?r:this.configuration);a=e===f.ConsentMessage?Object.assign(Object.assign({},a),{consentMessage:Object.assign(Object.assign({},a.consentMessage),(0,n.Z)({},t,i))}):Object.assign(Object.assign({},a),{plugins:Object.assign(Object.assign({},null===a||void 0===a?void 0:a.plugins),(0,n.Z)({},e,Object.assign(Object.assign({},null===(o=null===a||void 0===a?void 0:a.plugins)||void 0===o?void 0:o[e]),(0,n.Z)({},t,i))))}),this.configurationState=a,this.arcgisTelemetryConfigurationChange.emit(a)}},{key:"_renderInfoMsg",value:function(){return(0,s.h)("div",{class:"provider-subtext"},this.intl.t("providerInfo",{accountsLink:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.h)("p",null,(0,s.h)("calcite-link",{href:C,target:"_blank"},t))},dataCollectionLink:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.h)("p",null,(0,s.h)("calcite-link",{href:A,target:"_blank"},t))}}))}},{key:"_renderGoogleAnalyticsForm",value:function(){var e="Google Analytics";return this.allowGA3||(e="".concat(e," (GA4)")),this._renderProvider(e,this.googleConfig,f.Google,(0,s.h)(s.F,null,(0,s.h)("calcite-label",{class:"form-input"},this.intl.t("measurementId"),(0,s.h)("calcite-input",{disabled:this.isUpdating,maxLength:30,onBlur:this._validateGMeasurementID,onCalciteInputInput:this._saveGoogleKey,placeholder:"G-XXXXXXXXXX",status:this._calcStatus(this.isGAValid),value:this.googleConfig.measurementId}),(0,s.h)("calcite-input-message",{active:null!=this.isGAValid&&!this.isGAValid,icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("googleInvalidForm"))),(0,s.h)("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},(0,s.h)("ul",null,(0,s.h)("li",null,this.intl.t("gaInfo1")),(0,s.h)("li",null,this.intl.t("gaInfo2")),(0,s.h)("li",null,this.intl.t("gaInfo3"))))))}},{key:"_renderAdobeForm",value:function(){return this._renderProvider("Adobe Analytics",this.adobeConfig,f.Adobe,(0,s.h)(s.F,null,(0,s.h)("calcite-label",{class:"form-input"},this.intl.t("trackingServer"),(0,s.h)("calcite-input",{disabled:this.isUpdating,maxLength:256,onBlur:this._validateAdobeTrackingServer,onCalciteInputInput:this._saveAdobeTrackingServer,onLoad:this._validateAdobeTrackingServer,placeholder:"".concat(this.intl.t("example"),": jimsbrims.sc.omtrdc.net"),status:this._calcStatus(this.isAdobeTrackingServerValid),value:this.adobeConfig.trackingServer}),(0,s.h)("calcite-input-message",{active:null!=this.isAdobeTrackingServerValid&&!this.isAdobeTrackingServerValid,icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),(0,s.h)("calcite-label",{class:"form-input"},this.intl.t("trackingServerSSL")," (",this.intl.t("optional"),")",(0,s.h)("calcite-input",{disabled:this.isUpdating,id:"tracking-server-ssl-input",maxLength:256,onBlur:this._validateAdobeSSLTrackingServer,onCalciteInputInput:this._saveAdobeTrackingServerSSL,placeholder:"".concat(this.intl.t("example"),": data.example.com"),status:this._calcStatus(this.isAdobeTrackingServerSSLValid),value:this.adobeConfig.trackingServerSSL})),(0,s.h)("calcite-label",{class:"form-input"},this.intl.t("reportSuiteId"),(0,s.h)("calcite-input",{disabled:this.isUpdating,maxLength:256,onBlur:this._validateAdobeReportSuite,onCalciteInputInput:this._saveAdobeReportSuite,placeholder:"mySuiteID",status:this._calcStatus(this.isALReportSuiteValid),value:this.adobeConfig.reportSuite}),(0,s.h)("calcite-input-message",{active:null!=this.isALReportSuiteValid&&!this.isALReportSuiteValid,icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),(0,s.h)("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},(0,s.h)("ul",null,(0,s.h)("li",null,this.intl.t("readAbout")," ",(0,s.h)("calcite-link",{href:"".concat("https://experienceleague.adobe.com/docs/analytics/implementation/vars/config-vars/trackingserver.html","?lang=").concat(this.intl.locale),target:"_blank"},this.intl.t("trackingServer"))),(0,s.h)("li",null,this.intl.t("readAbout")," ",(0,s.h)("calcite-link",{href:"".concat("https://experienceleague.adobe.com/docs/analytics/implementation/vars/config-vars/trackingserversecure.html","?lang=").concat(this.intl.locale),target:"_blank"},this.intl.t("trackingServerSSL"))),(0,s.h)("li",null,this.intl.t("readAbout")," ",(0,s.h)("calcite-link",{href:"".concat("https://experienceleague.adobe.com/docs/analytics/admin/manage-report-suites/new-report-suite/t-create-a-report-suite.html","?lang=").concat(this.intl.locale),target:"_blank"},this.intl.t("reportSuiteId")))))))}},{key:"_renderSiteImproveForm",value:function(){return this._renderProvider("Siteimprove",this.siteImproveConfig,f.SiteImprove,(0,s.h)(s.F,null,(0,s.h)("calcite-label",{class:"form-input"},this.intl.t("siteImproveCode"),(0,s.h)("calcite-input",{disabled:this.isUpdating,maxLength:30,onBlur:this._validateSICode,onCalciteInputInput:this._saveSiteCode,placeholder:"ABC1234",status:this._calcStatus(this.isSIValid),value:this.siteImproveConfig.code}),(0,s.h)("calcite-input-message",{active:null!=this.isSIValid&&!this.isSIValid,icon:"exclamation-mark-triangle",status:"invalid"},this.intl.t("fieldCannotBeEmpty"))),(0,s.h)("calcite-block",{collapsible:!0,heading:this.intl.t("additionalInfo")},(0,s.h)("ul",null,(0,s.h)("li",null,this.intl.t("siteImproveInfo",{providerName:"Siteimprove Code",codeExample:'"XXXXX"',calciteLink:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.h)("calcite-link",{href:I,target:"_blank"},t)}}))))))}},{key:"_calcStatus",value:function(e){return null==e?null:e?"valid":"invalid"}},{key:"_saveGoogleKey",value:function(e){this._googleAnalyticsKeyValueTemp=e.detail.value}},{key:"_saveAdobeTrackingServer",value:function(e){this._adobeTrackingServerValueTemp=e.detail.value}},{key:"_saveAdobeTrackingServerSSL",value:function(e){this._adobeTrackingServerSSLValueTemp=e.detail.value}},{key:"_saveAdobeReportSuite",value:function(e){this._adobeLReportSuiteValueTemp=e.detail.value}},{key:"_saveSiteCode",value:function(e){this._siCodeValueTemp=e.detail.value}},{key:"_validateGMeasurementID",value:function(e){var t=this.allowGA3?h:g;this._validateForm("_googleAnalyticsKeyValueTemp",t,"isGAValid",m,f.Google,m,e)}},{key:"_validateAdobeTrackingServer",value:function(e){this._validateForm("_adobeTrackingServerValueTemp",v,"isAdobeTrackingServerValid",b,f.Adobe,b,e)}},{key:"_validateAdobeSSLTrackingServer",value:function(e){this._validateForm("_adobeTrackingServerSSLValueTemp",(function(){return!0}),"isAdobeTrackingServerSSLValid",S,f.Adobe,S,e)}},{key:"_validateAdobeReportSuite",value:function(e){this._validateForm("_adobeLReportSuiteValueTemp",v,"isALReportSuiteValid",_,f.Adobe,_,e)}},{key:"_validateSICode",value:function(e){this._validateForm("_siCodeValueTemp",v,"isSIValid",y,f.SiteImprove,y,e)}},{key:"_validateConsentMessage",value:function(e){this._validateForm("_tempConsentMessageValue",(function(){return!0}),"isConsentMessageValid",k,f.ConsentMessage,k,e)}},{key:"_validateForm",value:function(e,t,i,n,r,o,a){var l,s,c,u,d,g=null!==(d=null!==(l=this[e])&&void 0!==l?l:null===(u=null===(c=null===(s=a)||void 0===s?void 0:s.path)||void 0===c?void 0:c[0])||void 0===u?void 0:u.value)&&void 0!==d?d:"";g=null===g||void 0===g?void 0:g.trim(),this[i]=t(g),this[i]&&this[n]!=g&&(this[n]=g,this._updateOutput(r,o,g))}},{key:"element",get:function(){return(0,s.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}}]),e}();L.style='.sc-arcgis-telemetry-configuration-h{display:block}.consent-message-info.sc-arcgis-telemetry-configuration{font-size:var(--calcite-font-size--2);line-height:1rem}.provider-subtext.sc-arcgis-telemetry-configuration{padding:0.625rem;padding-top:0px;font-size:var(--calcite-font-size--2);line-height:1rem}.provider.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-bottom:0.625rem;border-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);padding:0.625rem}.provider.sc-arcgis-telemetry-configuration header.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-bottom:0.625rem;font-weight:var(--calcite-font-weight-bold)}.provider-header.sc-arcgis-telemetry-configuration{display:flex;align-items:center;justify-content:space-between}.provider-header__right-container.sc-arcgis-telemetry-configuration{display:flex;width:33.333333%;align-items:center;justify-content:flex-end}.no-show.sc-arcgis-telemetry-configuration{display:none}.provider.sc-arcgis-telemetry-configuration .internal-form.sc-arcgis-telemetry-configuration{margin-top:0.625rem;margin-right:0.625rem;margin-left:0.625rem}.form-input.sc-arcgis-telemetry-configuration calcite-input.sc-arcgis-telemetry-configuration,.form-input.sc-arcgis-telemetry-configuration calcite-input-message.sc-arcgis-telemetry-configuration{margin-left:0.5rem}#tracking-server-ssl-input.sc-arcgis-telemetry-configuration{margin-bottom:0.5rem}[ui="flat"].sc-arcgis-telemetry-configuration-h .provider.sc-arcgis-telemetry-configuration{border-width:0px;padding:0px}[ui="flat"].sc-arcgis-telemetry-configuration-h .provider.sc-arcgis-telemetry-configuration .internal-form.sc-arcgis-telemetry-configuration{margin-left:0px;margin-right:0px}[ui="flat"].sc-arcgis-telemetry-configuration-h .form-input.sc-arcgis-telemetry-configuration calcite-input.sc-arcgis-telemetry-configuration,[ui="flat"].sc-arcgis-telemetry-configuration-h .form-input.sc-arcgis-telemetry-configuration calcite-input-message.sc-arcgis-telemetry-configuration{margin-left:0px}'},54825:function(e,t,i){i.d(t,{b:function(){return n}});var n=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach((function(t){if("function"!==typeof e[t])throw new Error("Cannot bind context. ".concat(t," must be a function"));e[t]=e[t].bind(e)}))}},13115:function(e,t,i){function n(e,t){return t.split(".").reduce((function(e,t){return e?e[t]:void 0}),e)}i.d(t,{g:function(){return n}})},12969:function(e,t,i){i.d(t,{a:function(){return l},b:function(){return u},c:function(){return r},d:function(){return h},e:function(){return s},f:function(){return v},g:function(){return o},i:function(){return g},m:function(){return c},u:function(){return d},w:function(){return a}});var n=i(13115);function r(e){var t={};if(Array.isArray(e))t=e.map(r);else if("object"===typeof e){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];null!=n&&"object"===typeof n?n instanceof Date?t[i]=new Date(n.getTime()):"undefined"!==typeof Blob&&n instanceof Blob?t[i]=new Blob([n],{type:n.type}):t[i]=r(n):t[i]=n}}else t=e;return t}function o(e,t,i){return e?e.reduce((function(e,r){return(0,n.g)(r,t)===i&&(e=r),e}),null):null}function a(e,t){return e.filter((function(e){return e!==t}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(e).concat(Math.random().toString(36).substr(2,8))}function s(e,t,i){return null!==t&&void 0!==t&&((i=r(i))[e]=t),i}function c(e,t){return null!==e&&void 0!==e&&(t=r(t)).push(e),t}function u(e){return(e=(e=e.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(e,t,i){return i?i.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(e,t,i){return e.toLowerCase()}))}function d(e,t,i){return i.indexOf(e)===t}var g=function(e){return null==e},h=function(e){var t=Array.from(e);return t[0]=t[0].toUpperCase(),t.join("")};function v(e){return e.reduce((function(e,t){return e.concat(t)}),[])}}}]);
//# sourceMappingURL=3045.7754943b.chunk.js.map