{"version":3,"file":"static/js/37791.fa7ce25c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js","../node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../core/Accessor.js\";import{PositionHint as r,indexOf as i}from\"../../../../core/arrayUtils.js\";import s from\"../../../../core/Logger.js\";import{clamp as o}from\"../../../../core/mathUtils.js\";import{isNone as n,isSome as a,unwrap as c}from\"../../../../core/maybe.js\";import{unwrapUpdating as l,updating as p,isUpdating as u}from\"../../../../core/maybeUpdating.js\";import{whenOnce as g}from\"../../../../core/reactiveUtils.js\";import{getUnitString as m}from\"../../../../core/unitUtils.js\";import{property as f}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{t as y,a as h,s as j}from\"../../../../chunks/vec3.js\";import{WhereClause as S}from\"../../../../core/sql/WhereClause.js\";import{projectBoundingSphere as w,load as R,project as E,projectVectorToVector as b}from\"../../../../geometry/projection.js\";import{create as v}from\"../../../../geometry/support/aaBoundingBox.js\";import{fromValues as F,expandWithNestedArray as _,expand as k}from\"../../../../geometry/support/aaBoundingRect.js\";import{earth as I}from\"../../../../geometry/support/Ellipsoid.js\";import{isWGS84 as M,isWebMercator as D}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{project as T}from\"../../../../geometry/support/webMercatorUtils.js\";import G from\"../../../../layers/support/FeatureFilter.js\";import{objectIdFilter as C,filterInPlace as A}from\"./I3SUtil.js\";import{doubleArrayFrom as x}from\"../../webgl-engine/lib/DoubleArray.js\";import O from\"../../../../geometry/SpatialReference.js\";const B=\"esri.views.3d.layers.i3s.I3SMeshViewFilter\",L=s.getLogger(B);let P=class extends t{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){g((()=>c(this.viewFilter)?.geometry||a(this.layerFilter))).then((()=>this.loadAsyncModule(import(\"../../../../geometry/geometryEngine.js\").then((e=>{this.destroyed||(this._geometryEngine=e)})))))}get sortedObjectIds(){if(n(this.viewFilter)||n(this.viewFilter.objectIds))return null;const e=x(this.viewFilter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=a(this.viewFilter)?this.viewFilter.where:null;if(n(e)||!e)return null;try{return S.create(e,this.layerFieldsIndex)}catch(t){L.error(`Failed to parse filter where clause: ${t}`)}return null}addFilters(e,t,r,i){const s=this.sortedObjectIds;a(s)&&e.push((e=>C(s,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const o=l(this._layerMaskGeometries),n=this._geometryEngine;if(a(o)&&a(this.layerFilter)&&a(n)){const s=this.layerFilter.spatialRelationship;e.push(((e,a)=>N(n,e,a,i,t,r,o,s)))}const c=l(this._viewMaskGeometries);if(a(c)&&a(this.viewFilter)&&a(n)){const s=this.viewFilter.spatialRelationship;e.push(((e,o)=>N(n,e,o,i,t,r,c,s)))}}isMBSGeometryVisible(e,t,r){const i=l(this._layerMaskGeometries),s=this._geometryEngine;if(a(i)&&a(this.layerFilter)&&a(s)){const o=this.layerFilter.spatialRelationship,n=i[0].spatialReference||t;if(!w(e,r,$,n))return L.warnOnce(\"SceneLayer.mask geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return q(s,$,i,n,o)}const o=l(this._viewMaskGeometries);if(a(o)&&a(this.viewFilter)&&a(s)){const i=this.viewFilter.spatialRelationship,n=o[0].spatialReference||t;if(!w(e,r,$,n))return L.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS\"),!0;return q(s,$,o,n,i)}return!0}get parsedGeometry(){const e=l(this._viewMaskGeometries),t=l(this._layerMaskGeometries);return n(e)||n(t)?e||t:t.concat(e)}get _layerMaskGeometries(){const e=this.layerFilter;return n(e)?null:n(this._geometryEngine)?p:\"disjoint\"===e.spatialRelationship?e.geometries.map((e=>({type:\"polygon\",rings:e.rings,spatialReference:e.spatialReference,cache:{}}))):[e.geometries.reduce(((e,t)=>(e.rings=[...e.rings,...t.rings],e)),{type:\"polygon\",rings:[],spatialReference:e.geometries[0].spatialReference,cache:{}})]}get _viewMaskGeometries(){if(n(this.viewFilter))return null;const{geometry:e}=this.viewFilter;if(n(e))return null;if(n(this.viewFilter)||n(this._geometryEngine))return p;const{distance:t,units:r}=this.viewFilter,i=this.viewFilter.spatialRelationship,s=\"mesh\"===e.type?e.extent:e;if(n(t)||0===t)return V(this._geometryEngine,s,i);const o=r||m(s.spatialReference);if(s.spatialReference.isWGS84){const e=this._geometryEngine.geodesicBuffer(s,t,o);return V(this._geometryEngine,e,i)}const c=T(s,O.WGS84);if(a(c)){const e=T(this._geometryEngine.geodesicBuffer(c,t,o),s.spatialReference);return V(this._geometryEngine,e,i)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule(R().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let l=null;try{l=E(s,O.WGS84)}catch(u){}if(l)try{l=E(this._geometryEngine.geodesicBuffer(l,t,o),s.spatialReference)}catch(u){l=null}return l||L.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${s.spatialReference.wkid}) to WGS84.`),V(this._geometryEngine,l,i)}get updating(){return u(this._layerMaskGeometries)||u(this._viewMaskGeometries)}static checkSupport(e){return!n(e)&&(e.timeExtent?(L.warn(\"Filters with a timeExtent are not supported for mesh scene layers\"),!1):!!U(e.spatialRelationship)||(L.warn(`Filters with spatialRelationship other than ${K.join(\", \")} are not supported for mesh scene layers`),!1))}};e([f()],P.prototype,\"layerFilter\",void 0),e([f({type:G})],P.prototype,\"viewFilter\",void 0),e([f()],P.prototype,\"layerFieldsIndex\",void 0),e([f()],P.prototype,\"loadAsyncModule\",void 0),e([f()],P.prototype,\"addSqlFilter\",void 0),e([f({readOnly:!0})],P.prototype,\"sortedObjectIds\",null),e([f({readOnly:!0})],P.prototype,\"parsedWhereClause\",null),e([f({readOnly:!0})],P.prototype,\"parsedGeometry\",null),e([f({readOnly:!0})],P.prototype,\"_layerMaskGeometries\",null),e([f({readOnly:!0})],P.prototype,\"_viewMaskGeometries\",null),e([f()],P.prototype,\"updating\",null),e([f()],P.prototype,\"_projectionEngineLoaded\",void 0),e([f()],P.prototype,\"_geometryEngine\",void 0),P=e([d(B)],P);const K=(e=>e)([\"contains\",\"intersects\",\"disjoint\"]);function U(e){return null!=e&&K.includes(e)}var W;function V(e,t,s){if(n(t))return null;if(\"disjoint\"===s&&\"polygon\"===t.type){const s=t.rings.length,o=t.spatialReference,n=new Array(s);for(let e=0;e<s;++e){const r=F(1/0,1/0,-1/0,-1/0);_(r,t.rings[e]),n[e]={type:\"polygon\",rings:[t.rings[e]],spatialReference:o,cache:{},aabr:r}}n.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const a=new Set,c=new r;for(let t=0;t<n.length;++t){const r=n[t],s=r.aabr[0];a.forEach((t=>{if(s>=t.aabr[2])return void a.delete(t);if(r.aabr[1]>t.aabr[3]||r.aabr[3]<t.aabr[1]||!e.intersects(r,t))return;r.rings=r.rings.concat(t.rings),k(r.aabr,t.aabr,r.aabr),r.cache={},a.delete(t);const o=i(n,t,n.length,c);n.splice(o,1)})),a.add(r)}for(const e of n)e.aabr=void 0;return n}return[t]}function q(e,t,r,i,s){const o=H(e,t,i);return r.every((t=>Z(e,t,o,s)!==W.DISCARD))}function N(e,t,r,i,s,o,n,a){const c=n[0].spatialReference||s.spatialReference;if(!w(r.node.mbs,o,$,c))return void L.warnOnce(\"SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter\");const l=H(e,$,c),p=z(a,s,c,i,r.objectHandle);for(const u of n){if(0===t.length)return;switch(Z(e,u,l,a)){case W.DISCARD:return void(t.length=0);case W.KEEP:continue}A(t,r.featureIds,(t=>X(e,u,t,p)))}}!function(e){e[e.KEEP=0]=\"KEEP\",e[e.DISCARD=1]=\"DISCARD\",e[e.TEST=2]=\"TEST\"}(W||(W={}));const $=[0,0,0,0];function z(e,t,r,i,s){const o=t.renderSpatialReference,n=new Map,a={type:\"polygon\",rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],spatialReference:r};a.rings[0][3]=a.rings[0][0];const c={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let l,p;switch(e){case\"intersects\":l=(e,t,r)=>e.intersects(t,r)?W.KEEP:W.TEST,p=J;break;case\"contains\":l=(e,t,r)=>e.contains(t,r)?W.TEST:W.DISCARD,p=J;break;default:l=(e,t,r)=>e.disjoint(t,r)?W.TEST:W.DISCARD,p=Q}return{collection:i,object:s,type:e,maskSR:r,renderSR:o,aabbCache:n,triangle:a,positions:c,triangleTest:l,geometryTest:p}}function H(e,t,r){const i={type:\"point\",x:t[0],y:t[1],hasZ:!1,hasM:!1,spatialReference:r},s=!M(r)&&!D(r),n=Number.isNaN(t[3])?0:o(t[3],0,2*I.radius),a=s?e.buffer(i,n,1):e.geodesicBuffer(i,n,1);return a.type=\"polygon\",a}function Z(e,t,r,i){switch(i){case\"intersects\":case\"contains\":return J(e,t,r);case\"disjoint\":return Q(e,t,r)}}function J(e,t,r){return e.intersects(t,r)?e.contains(t,r)?W.KEEP:W.TEST:W.DISCARD}function Q(e,t,r){return e.intersects(t,r)?e.contains(t,r)?W.DISCARD:W.TEST:W.KEEP}function X(e,t,r,i){const{collection:s,object:o,renderSR:n,maskSR:a,geometryTest:c,aabbCache:l}=i;let p=l.get(r);if(!p){const e=s.getObjectTransform(o);s.getComponentAabb(o,r,Y);const t=[[Y[0],Y[1],0],[Y[0],Y[4],0],[Y[3],Y[4],0],[Y[3],Y[1],0]];for(let r=0;r<4;++r)y(t[r],t[r],e.rotationScale),h(t[r],t[r],e.position),b(t[r],n,t[r],a);p={type:\"polygon\",rings:[t],spatialReference:a,cache:{}},p.rings[0][4]=p.rings[0][0],l.set(r,p)}switch(c(e,t,p)){case W.DISCARD:return!1;case W.KEEP:return!0}const{triangle:u,triangleTest:g,positions:m}=i,f=u.rings[0][0],d=u.rings[0][1],S=u.rings[0][2],w=s.getObjectTransform(o);s.getComponentPositions(o,r,m);const{indices:R,data:E,stride:v,startIndex:F,endIndex:_}=m;for(let k=F;k<_;k+=3){const r=v*R[k+0],i=v*R[k+1],s=v*R[k+2];switch(j(f,E[r+0],E[r+1],E[r+2]),j(d,E[i+0],E[i+1],E[i+2]),j(S,E[s+0],E[s+1],E[s+2]),y(f,f,w.rotationScale),y(d,d,w.rotationScale),y(S,S,w.rotationScale),h(f,f,w.position),h(d,d,w.position),h(S,S,w.position),b(f,n,f,a),b(d,n,d,a),b(S,n,S,a),g(e,t,u)){case W.DISCARD:return!1;case W.KEEP:return!0}}return\"intersects\"!==i.type}const Y=v();export{P as I3SMeshViewFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import t from\"../../../../core/Error.js\";import s from\"../../../../core/Handles.js\";import{destroyMaybe as n,isNone as o}from\"../../../../core/maybe.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import u from\"../../../../geometry/Extent.js\";import{fallbackObjectIDAttribute as y}from\"../../../../layers/LayerConstants.js\";import{QueryEngine as c}from\"../../../../layers/graphics/data/QueryEngine.js\";import l from\"../../../../rest/support/FeatureSet.js\";import p from\"../../../../rest/support/Query.js\";const d=c;let h=class extends r{get spatialReference(){return this.layerView.view.spatialReference}get layer(){return this.layerView.i3slayer}get defaultQueryJSON(){return new p({outSpatialReference:this.spatialReference}).toJSON()}get _dataQueryEngine(){return this._ensureDataQueryEngine()}constructor(e){super(e),this._handles=new s}initialize(){this._handles.add(this.layerView.on(\"visible-geometry-changed\",(()=>this.spatialIndex.events.emit(\"changed\"))))}destroy(){this._dataQueryEngineInstance=n(this._dataQueryEngineInstance),this._handles=n(this._handles),this._set(\"layerView\",null)}async executeQueryForCount(e,r){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:u.fromJSON(s)}}async executeQueryForIds(e,r){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new t(\"feature-store:unsupported-query\",\"returnGeometry is not yet supported for mesh scene layer queries\");if(s.returnCentroid)throw new t(\"feature-store:unsupported-query\",\"returnCentroid is not yet supported for mesh scene layer queries\");const n=await this._dataQueryEngine.executeQuery(s,r),o=l.fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){return o(e)?this.defaultQueryJSON:e.toJSON()}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||y,r=\"esriGeometryPolygon\",t=this.layer.fields?.map((e=>e.toJSON()))??[],s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,i=this.spatialIndex;return this._dataQueryEngineInstance=new d({hasZ:!0,hasM:!1,geometryType:r,fields:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:i,scheduler:s,priority:o}),this._dataQueryEngineInstance}};e([i({constructOnly:!0})],h.prototype,\"layerView\",void 0),e([i({constructOnly:!0})],h.prototype,\"priority\",void 0),e([i({constructOnly:!0})],h.prototype,\"spatialIndex\",void 0),e([i()],h.prototype,\"spatialReference\",null),e([i()],h.prototype,\"layer\",null),e([i()],h.prototype,\"defaultQueryJSON\",null),h=e([a(\"esri.views.3d.layers.i3s.I3SQueryEngine\")],h);export{h as I3SQueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import{create as e}from\"../../../../geometry/support/aaBoundingBox.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../layers/graphics/centroid.js\";import o from\"../../../../layers/graphics/OptimizedGeometry.js\";import{getCachedAttributeValue as i}from\"./I3SUtil.js\";class n{constructor(t){this._objectIdField=t.objectIdField,this._getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(e){const{meta:r,index:o}=e,n={};this._objectIdField&&(n[this._objectIdField]=e.id);const s=t(r.attributeInfo)&&r.attributeInfo.attributeData;if(t(s))for(const t of Object.keys(s))n[t]=i(s[t],o);return n}getAttribute(e,r){if(r===this._objectIdField)return e.id;const{meta:o,index:n}=e,s=t(o.attributeInfo)&&o.attributeInfo.attributeData;return t(s)?i(s[r],n):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,r,i,n,a]=this._getFeatureExtent(t,s);return new o([5],[e,r,i,n,r,i,n,a,i,e,a,i,e,r,i])}getCentroid(t,e){if(t.geometry)return r(new o,t.geometry,e.hasZ,e.hasM);const[i,n,a,m,u,d]=this._getFeatureExtent(t,s);return new o([0],[(i+m)/2,(n+u)/2,(a+d)/2])}cloneWithGeometry(t,e){const{id:r,index:o,meta:i}=t;return{id:r,index:o,meta:i,geometry:e}}}const s=e();export{n as I3SQueryFeatureAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import r from\"../../../../core/Evented.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{c}from\"../../../../chunks/vec4f64.js\";import{projectBoundingSphere as n}from\"../../../../geometry/projection.js\";import{create as a,toRect as p}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as i,intersects as u}from\"../../../../geometry/support/aaBoundingRect.js\";import{ForAllFeaturesReturnType as m}from\"../II3SMeshView3D.js\";const f=a();let l=class extends e{constructor(t){super(t),this.events=new r}forEach(t){this.forAllFeatures((e=>(t(e),m.CONTINUE)))}forEachBounds(t,e){const r=this.getFeatureExtent;for(const o of t)e(r(o,f))}forEachInBounds(t,e){this.forAllFeatures((r=>{const o=this.getFeatureExtent(r,h);return u(t,p(o,d))&&e(r),m.CONTINUE}),(e=>{if(n(e.node.mbs,this.sourceSpatialReference,y,this.viewSpatialReference),y[0]>=t[0]&&y[2]<=t[2]&&y[1]>=t[1]&&y[3]<=t[3])return m.CONTINUE;const r=Math.max(t[0],Math.min(y[0],t[2])),o=Math.max(t[1],Math.min(y[1],t[3])),s=y[0]-r,c=y[1]-o;return s*s+c*c<=y[3]*y[3]?m.CONTINUE:m.SKIP}))}};t([o({constructOnly:!0})],l.prototype,\"featureAdapter\",void 0),t([o({constructOnly:!0})],l.prototype,\"forAllFeatures\",void 0),t([o({constructOnly:!0})],l.prototype,\"getFeatureExtent\",void 0),t([o({constructOnly:!0})],l.prototype,\"sourceSpatialReference\",void 0),t([o({constructOnly:!0})],l.prototype,\"viewSpatialReference\",void 0),l=t([s(\"esri.views.3d.layers.i3s.I3SQueryFeatureStore\")],l);const y=c(),h=a(),d=i();export{l as I3SQueryFeatureStore};\n"],"names":["B","L","s","P","e","_projectionEngineLoaded","g","c","viewFilter","geometry","a","layerFilter","then","loadAsyncModule","destroyed","_geometryEngine","get","n","this","objectIds","x","sort","where","S","layerFieldsIndex","t","error","r","i","sortedObjectIds","push","C","addSqlFilter","parsedWhereClause","o","l","_layerMaskGeometries","spatialRelationship","N","_viewMaskGeometries","spatialReference","w","$","q","warnOnce","concat","p","geometries","map","type","rings","cache","reduce","distance","units","extent","V","m","isWGS84","geodesicBuffer","T","O","R","E","u","wkid","timeExtent","warn","K","includes","U","join","f","prototype","G","readOnly","d","W","length","Array","F","_","aabr","Set","forEach","delete","intersects","k","splice","add","H","every","Z","DISCARD","node","mbs","renderSpatialReference","Map","indices","data","stride","startIndex","endIndex","KEEP","TEST","J","contains","disjoint","Q","collection","object","maskSR","renderSR","aabbCache","triangle","positions","triangleTest","geometryTest","z","objectHandle","A","featureIds","getObjectTransform","getComponentAabb","Y","y","rotationScale","h","position","b","set","getComponentPositions","v","j","X","hasZ","hasM","M","D","Number","isNaN","I","buffer","_handles","layerView","view","i3slayer","outSpatialReference","toJSON","_ensureDataQueryEngine","on","spatialIndex","events","emit","_dataQueryEngineInstance","_set","_dataQueryEngine","executeQueryForCount","_ensureQueryJSON","executeQueryForExtent","count","executeQueryForIds","returnGeometry","returnCentroid","executeQuery","features","defaultQueryJSON","layer","objectIdField","fields","resourceController","scheduler","priority","geometryType","timeInfo","featureStore","constructOnly","_objectIdField","_getFeatureExtent","getFeatureExtent","id","meta","index","attributeInfo","attributeData","Object","keys","forAllFeatures","sourceSpatialReference","viewSpatialReference","Math","max","min"],"sourceRoot":""}