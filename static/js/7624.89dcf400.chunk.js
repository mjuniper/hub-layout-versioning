"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[7624],{7624:function(e,t,n){n.r(t),n.d(t,{arcgis_hub_attributes_list:function(){return v}});var i,a=n(93433),l=n(4942),r=n(74165),o=n(15861),c=n(15671),s=n(43144),d=n(5692),h=n(13129),u=n(54825),b=n(4541),p=(n(7597),n(95101),"string"),m="number",y="fingerprint",f="calendar",g={nameOrTitle:{icon:"title",text:"nameTitle"},description:{icon:p,text:"description"},typeOrCategory:{icon:"label",text:"category"},countOrAmount:{icon:m,text:"amount"},percentageOrRatio:{icon:"percent",text:"percentage"},measurement:{icon:"measure",text:"measurement"},currency:{icon:"credits",text:"currency"},uniqueIdentifier:{icon:y,text:"identifier"},phoneNumber:{icon:"phone",text:"phone"},emailAddress:{icon:"email-address",text:"email"},orderedOrRanked:{icon:"switch",text:"ordered"},binary:{icon:"toggle",text:"binary"},locationOrPlaceName:{icon:"pin",text:"placename"},coordinate:{icon:"point",text:"coordinate"},dateAndTime:{icon:f,text:"datetime"},esriFieldTypeSmallInteger:{icon:m,text:"shortInt"},esriFieldTypeInteger:{icon:m,text:"longInt"},esriFieldTypeSingle:{icon:m,text:"singleNum"},esriFieldTypeDouble:{icon:m,text:"doubleNum"},esriFieldTypeString:{icon:p,text:"charString"},esriFieldTypeDate:{icon:f,text:"date"},esriFieldTypeOID:{icon:y,text:"idInteger"},esriFieldTypeGeometry:{icon:"vertex-check",text:"geometry"},esriFieldTypeBlob:{icon:"file-text",text:"blobObject"},esriFieldTypeRaster:{icon:p,text:"raster"},esriFieldTypeGUID:{icon:y,text:"guid"},esriFieldTypeGlobalID:{icon:y,text:"esriId"},esriFieldTypeXML:{icon:p,text:"xml"}};!function(e){e.Chart="Chart",e.Table="Table"}(i||(i={}));var v=function(){function e(t){(0,c.Z)(this,e),(0,d.r)(this,t),this.hubTelemetry=(0,d.c)(this,"hubTelemetry",7),this.arcgisHubAttributesListAccordionChange=(0,d.c)(this,"arcgisHubAttributesListAccordionChange",7),this.fieldTabStates={},this.defaultFieldTab=i.Chart,this.maxFields=10,this.parsedFields=[],(0,u.b)(this,"handleLearnMoreClick","handleLoadMoreClick","handleTabChange","renderChartSlot","renderTableSlot","renderAccordionItem")}return(0,s.Z)(e,[{key:"handleContentUpdated",value:function(e){this.parseFields(e,this.fields)}},{key:"handleFieldsUpdated",value:function(e){this.parseFields(this.content,e)}},{key:"componentWillLoad",value:function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.parseFields(this.content,this.fields),e.next=3,h.i.loadIntlForComponent(this.element);case 3:this.intl=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleLearnMoreClick",value:function(e){e.preventDefault();var t=e.target.href;this.hubTelemetry.emit(Object.assign(Object.assign({},b.d.dictionary.category.navigation.action.external.label.webHelp),{details:t})),setTimeout((function(){globalThis.location.href=t}),100)}},{key:"handleLoadMoreClick",value:function(e){e.preventDefault(),this.hubTelemetry.emit(b.d.dictionary.category.interaction.action.search.label.loadMore.details.attributes),this.maxFields=this.parsedFields.length}},{key:"handleAccordionChange",value:function(e){var t=e.detail.requestedAccordionItem,n=t.expanded,i=t.dataset.fieldName,a=n?b.d.dictionary.category.interaction.action.close.label.accordion.details.attribute:b.d.dictionary.category.interaction.action.open.label.accordion.details.attribute;this.arcgisHubAttributesListAccordionChange.emit({fieldName:i,expanded:!n}),this.hubTelemetry.emit(a)}},{key:"parseFields",value:function(e,t){if(e&&t){var n=function(e){if(e){var t=e.trim();return"/"===t?"":t}};this.parsedFields=t.map((function(t){var i,a=e.layer.fields.find((function(e){return e.name===t.name}));try{var l=JSON.parse(a.description);i={value:n(l.value),fieldValueType:n(l.fieldValueType)}}catch(r){i=null}return{alias:n(t.alias),type:t.type,description:i,name:t.name,chartable:t.chartable}}))}else this.parsedFields=[]}},{key:"handleTabChange",value:function(e){var t=e.detail.tab,n=e.target,i=this.fieldTabStates[n.dataset.fieldName];if((void 0===i?this.defaultFieldTab:i)!==t){this.fieldTabStates=Object.assign(Object.assign({},this.fieldTabStates),(0,l.Z)({},n.dataset.fieldName,t));var a=this.tabs.find((function(e){return e.type===t})).telemetry;this.hubTelemetry.emit(a)}}},{key:"fieldsToRender",get:function(){var e=this.maxFields;return this.parsedFields.reduce((function(t,n,i){return i<e?[].concat((0,a.Z)(t),[n]):t}),[])}},{key:"shouldRenderLoadMore",get:function(){return this.parsedFields.length>this.maxFields}},{key:"tabs",get:function(){return[{type:i.Chart,title:"firstTab",telemetry:b.d.dictionary.category.navigation.action.onPage.label.chart,renderSlot:this.renderChartSlot},{type:i.Table,title:"secTab",telemetry:b.d.dictionary.category.navigation.action.onPage.label.table,renderSlot:this.renderTableSlot}]}},{key:"renderHeader",value:function(){return(0,d.h)("div",{class:"header"},(0,d.h)("header",null,this.intl.t("header")),(0,d.h)("calcite-link",{href:"https://doc.arcgis.com/en/hub/content/explore-content.htm","icon-end":"launch",onClick:this.handleLearnMoreClick},this.intl.t("learn")))}},{key:"renderAccordion",value:function(){return(0,d.h)("calcite-accordion",{appearance:"transparent",scale:"l"},this.fieldsToRender.map(this.renderAccordionItem))}},{key:"renderAccordionItem",value:function(e){var t,n,i,a;return(0,d.h)("calcite-accordion-item",{"data-field-name":e.name,description:null===(t=e.description)||void 0===t?void 0:t.value,heading:e.alias||e.name,"icon-end":e.chartable&&"graph-bar","icon-start":g[(null===(n=e.description)||void 0===n?void 0:n.fieldValueType)||e.type].icon,key:e.name},Boolean(e.alias)&&e.alias!==e.name&&(0,d.h)("calcite-label",null,(0,d.h)("span",null,this.intl.t("aliasLabel")),(0,d.h)("div",null,e.alias)),(0,d.h)("calcite-label",null,(0,d.h)("span",null,this.intl.t("nameLabel")),(0,d.h)("div",null,e.name)),Boolean(null===(i=e.description)||void 0===i?void 0:i.value)&&(0,d.h)("calcite-label",null,(0,d.h)("span",null,this.intl.t("descriptionLabel")),(0,d.h)("div",null,e.description.value)),Boolean(null===(a=e.description)||void 0===a?void 0:a.fieldValueType)&&(0,d.h)("calcite-label",null,(0,d.h)("span",null,this.intl.t("fieldTypeLabel")),(0,d.h)("div",null,this.intl.t(g[e.description.fieldValueType].text))),(0,d.h)("calcite-label",null,(0,d.h)("span",null,this.intl.t("typeLabel")),(0,d.h)("div",null,this.intl.t(g[e.type].text))),e.chartable&&this.renderTabs(e))}},{key:"renderTabs",value:function(e){var t=this;return(0,d.h)("calcite-tabs",null,(0,d.h)("calcite-tab-nav",{"data-field-name":e.name,onCalciteTabChange:this.handleTabChange,slot:"tab-nav"},this.tabs.map((function(e){var n=e.type,i=e.title;return(0,d.h)("calcite-tab-title",{key:n,tab:n},t.intl.t(i))}))),this.tabs.map((function(n){var i=n.type,a=n.renderSlot;return(0,d.h)("calcite-tab",{key:i,selected:i===t.defaultFieldTab,tab:i},a(e))})))}},{key:"renderChartSlot",value:function(e){return(0,d.h)("slot",{name:"".concat(e.name,"-chart")})}},{key:"renderTableSlot",value:function(e){return(0,d.h)("slot",{name:"".concat(e.name,"-table")})}},{key:"render",value:function(){return(0,d.h)(d.H,{"data-element":"attributes-list"},this.renderHeader(),this.renderAccordion(),this.shouldRenderLoadMore&&(0,d.h)("calcite-link",{"icon-end":"chevron-down",onClick:this.handleLoadMoreClick},this.intl.t("loadMore")))}},{key:"element",get:function(){return(0,d.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{content:["handleContentUpdated"],fields:["handleFieldsUpdated"]}}}]),e}();v.style=":host {\n  display: block;\n  container-type: inline-size\n}\n\n.header {\n  margin-bottom: 1rem;\n  display: flex;\n  justify-content: space-between\n}\n\n@container (width < 500px) {\n  .header {\n    flex-direction: column\n  }\n}\n\n.header header {\n  font-size: var(--calcite-font-size-1);\n  line-height: 1.5rem;\n  font-weight: var(--calcite-font-weight-bold)\n}\n\ncalcite-label {\n  margin-top: 0.25rem;\n  display: block\n}\n\ncalcite-label:first-child {\n  margin-top: 0.75rem\n}\n\ncalcite-label span {\n  font-weight: var(--calcite-font-weight-bold)\n}\n\ncalcite-label div {\n  line-height: 1.375\n}\n\ncalcite-tabs {\n  margin-top: 0.25rem\n}\n\ncalcite-accordion + calcite-link {\n  margin-top: 0.5rem;\n  display: inline-block\n}"}}]);
//# sourceMappingURL=7624.89dcf400.chunk.js.map