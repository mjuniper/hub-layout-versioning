"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[38856],{87888:function(e,t,n){n.d(t,{c:function(){return i},j:function(){return r}});var r={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},i={toggle:"Control"}},61394:function(e,t,n){n.d(t,{U:function(){return j}});var r=n(74165),i=n(15861),a=n(29439),o=n(37762),s=n(15671),u=n(43144),l=n(60136),c=n(92572),d=n(27366),h=n(41691),p=n(100),f=n(77427),v=n(92026),y=n(66978),g=n(94172),_=n(49861),S=(n(25243),n(63780),n(69912)),Z=n(88396),E=n(11186),w=n(71353),m=n(26277),k=n(92536),b=n(74509),x=n(95122),C=n(80371),L=n(1700),T=n(64674),P=n(97760),R=n(95905),N=n(75691),V=n(19824),F=n(11208),j=function(e){(0,l.Z)(d,e);var t=(0,c.Z)(d);function d(e){var n;return(0,s.Z)(this,d),(n=t.call(this,e)).options=null,n._domain=C.B.FEATURE,n._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}},n}return(0,u.Z)(d,[{key:"updating",get:function(){return(0,f.oE)(this.snappingSources,(function(e){return e.snappingSource.updating}))||this.updatingHandles.updating}},{key:"snappingSources",get:function(){var e=this._get("snappingSources")||new Map,t=new Map;if((0,v.pC)(this.options)&&(0,v.pC)(this.options.featureSources)){var n,r=(0,o.Z)(this.options.featureSources.items);try{for(r.s();!(n=r.n()).done;){var i=n.value,s=i.layer.uid,u=e.get(s);if(u)e.delete(s),t.set(s,u);else if(i.layer.loaded){var l=this._createSourceInfo(i);(0,v.pC)(l)&&t.set(s,l)}else this.updatingHandles.addPromise(i.layer.load())}}catch(h){r.e(h)}finally{r.f()}}var c,d=(0,o.Z)(e);try{for(d.s();!(c=d.n()).done;){(0,a.Z)(c.value,2)[1].destroy()}}catch(h){d.e(h)}finally{d.f()}return t}},{key:"initialize",value:function(){var e=this;this.updatingHandles.add((function(){return e.snappingSources}),(function(){return e.notifyChange("updating")}),g.Z_),(0,v.pC)(this.view)&&this.handles.add([this.view.on("layerview-create",(function(t){return e._updateLayerView(t.layer,t.layerView)})),this.view.on("layerview-destroy",(function(t){return e._updateLayerView(t.layer,null)}))])}},{key:"_updateLayerView",value:function(e,t){var n,r=(0,o.Z)(this.snappingSources);try{for(r.s();!(n=r.n()).done;){var i=(0,a.Z)(n.value,2)[1];i.snappingSource.layerSource.layer===e&&(i.layerView=t)}}catch(s){r.e(s)}finally{r.f()}}},{key:"destroy",value:function(){this._set("options",null);var e,t=(0,o.Z)(this.snappingSources);try{for(t.s();!(e=t.n()).done;){(0,a.Z)(e.value,2)[1].destroy()}}catch(n){t.e(n)}finally{t.f()}}},{key:"fetchCandidates",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,s){var u,l,c,d,h,p,f,g,_,S=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&this._domain&&!(0,v.Wi)(this.options)&&this.options.effectiveFeatureEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:c=[],d=this._computeScreenSizeDistanceParameters(t,i),h={distance:d,mode:null!==(u=null===(l=(0,v.Wg)(this.view))||void 0===l?void 0:l.type)&&void 0!==u?u:"2d",point:t,coordinateHelper:i.coordinateHelper,types:this._types},p=(0,o.Z)(this.snappingSources);try{for(g=function(){var e=(0,a.Z)(f.value,2)[1],t=e.snappingSource,n=e.layerView;!t.layerSource.enabled||(0,v.pC)(n)&&n.suspended||c.push(t.fetchCandidates(h,s).then((function(e){return e.filter((function(e){return!S._candidateIsExcluded(t,e,i.excludeFeature)}))})))},p.s();!(f=p.n()).done;)g()}catch(r){p.e(r)}finally{p.f()}return e.next=7,(0,y.WW)(c);case 7:return _=e.sent.flat(),e.abrupt("return",(this._addRightAngleCandidates(_,t,d,i),(0,y.k_)(s),(0,T.lQ)(t,_),_));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_addRightAngleCandidates",value:function(e,t,n,r){for(var i,a,o,s,u,l,c,d,h=(0,v.pC)(r.vertexHandle)?null===(i=r.vertexHandle.rightEdge)||void 0===i||null===(a=i.rightVertex)||void 0===a?void 0:a.pos:(0,v.pC)(r.editGeometryOperations)&&"polygon"===r.editGeometryOperations.data.type?null===(o=(0,v.Wg)(null===(s=r.editGeometryOperations.data.components[0])||void 0===s?void 0:s.getFirstVertex()))||void 0===o?void 0:o.pos:null,p=(0,v.pC)(r.vertexHandle)?null===(u=r.vertexHandle.leftEdge)||void 0===u||null===(l=u.leftVertex)||void 0===l?void 0:l.pos:(0,v.pC)(r.editGeometryOperations)?null===(c=(0,v.Wg)(null===(d=r.editGeometryOperations.data.components[0])||void 0===d?void 0:d.getLastVertex()))||void 0===c?void 0:c.pos:null,f=this.view,y=(0,L.$D)(h,f,r),g=(0,L.$D)(p,f,r),_=e.length,S=0;S<_;S++)this._addRightAngleCandidate(e[S],g,t,n,e),this._addRightAngleCandidate(e[S],y,t,n,e)}},{key:"_addRightAngleCandidate",value:function(e,t,n,r,i){if(!(0,v.Wi)(t)&&function(e){return(e instanceof R.L||e instanceof P.k)&&!function(e){var t=e.constraint,n=t.start,r=t.end,i=(0,E.d)(n,r),a=(0,Z.k)(n,r);return i<(0,m.g)()||a/i<O}(e)}(e)){var a=e.constraint.closestTo(t),o=(a[0]-n[0])/r.x,s=(a[1]-n[1])/r.y,u=e.constraint,l=u.start,c=u.end;if(o*o+s*s<=1){var d=new V.A({targetPoint:a,otherVertex:t,otherVertexType:V.Y.NEXT,previousVertex:(0,Z.k)(a,l)>(0,Z.k)(a,c)?l:c,constraint:new x.aU(t,a),objectId:e.objectId,isDraped:e.isDraped});i.push(d)}}}},{key:"_computeScreenSizeDistanceParameters",value:function(e,t){var n=(0,v.pC)(this.options)?this.options.distance*("touch"===t.pointer?this.options.touchSensitivityMultiplier:1):0;return(0,v.Wi)(this.view)?{x:n,y:n,z:n,distance:n}:"2d"===this.view.type?{x:n*=this.view.resolution,y:n,z:n,distance:n}:this._computeScreenSizeDistanceParameters3D(e,n,this.view,t)}},{key:"_computeScreenSizeDistanceParameters3D",value:function(e,t,n,r){var i=r.spatialReference;n.renderCoordsHelper.toRenderCoords(e,i,I);var a=n.state.camera.computeScreenPixelSizeAt(I),o=a*n.renderCoordsHelper.unitInMeters/n.mapCoordsHelper.unitInMeters,s=t*o,u=(0,F.Rs)(e,i,b.jG,n),l=u?D(u,e,o,0,0,n,r):0,c=u?D(u,e,0,o,0,n,r):0,d=u?D(u,e,0,0,o,n,r):0;return{x:0===l?0:s/l,y:0===c?0:s/c,z:0===d?0:s/d,distance:a*t}}},{key:"_types",get:function(){return k.r.EDGE|k.r.VERTEX}},{key:"_candidateIsExcluded",value:function(e,t,n){if((0,v.Wi)(n))return!1;var r=this._getCandidateObjectId(t);if((0,v.Wi)(r))return!1;var i=e.layerSource.layer;return"graphics"===i.type?n.uid===r:n.sourceLayer===i&&!(!n.attributes||!("objectIdField"in i))&&n.attributes[i.objectIdField]===r}},{key:"_getCandidateObjectId",value:function(e){return e instanceof N.a?e.objectId:null}},{key:"_createSourceInfo",value:function(e){var t=this,n=this._createFeatureSnappingSourceType(e);if((0,v.Wi)(n))return null;if("loading"in n)return this.updatingHandles.addPromise(n.loading.then((function(){t.destroyed||t.notifyChange("snappingSources")}))),null;var r=(0,v.pC)(this.view)?this.view.allLayerViews.find((function(t){return t.layer===e.layer})):null;return new A(n.source,r)}},{key:"_createFeatureSnappingSourceType",value:function(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}},{key:"_createFeatureSnappingSourceSceneLayer",value:function(e){var t=this.view;if((0,v.Wi)(t)||"3d"!==t.type)return null;var n=this._getSourceModule("scene");return(0,v.pC)(n.module)?{source:new n.module.SceneLayerSnappingSource({layerSource:e,view:t})}:{loading:n.loader}}},{key:"_createFeatureSnappingSourceFeatureLayer",value:function(e){var t;switch(null===(t=e.layer.source)||void 0===t?void 0:t.type){case"feature-layer":case"oriented-imagery":var n=this._getSourceModule("featureService");return(0,v.pC)(n.module)?{source:new n.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:n.loader};case"memory":case"csv":case"geojson":case"wfs":if("mesh"===e.layer.geometryType)return null;var r=this._getSourceModule("featureCollection");return(0,v.pC)(r.module)?{source:new r.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:r.loader}}return null}},{key:"_createFeatureSnappingSourceGraphicsLayer",value:function(e){var t=this._getSourceModule("graphics");return(0,v.pC)(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:function(){return[e.layer]},spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}},{key:"_createFeatureSnappingSourceMapNotesLayer",value:function(e){var t=this._getSourceModule("notes");return(0,v.pC)(t.module)?{source:new t.module.GraphicsSnappingSource({getGraphicsLayers:function(){return(0,v.pC)(e.layer.sublayers)?e.layer.sublayers.toArray():[]},spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:t.loader}}},{key:"_getSourceModule",value:function(e){var t=this._sourceModules[e];if((0,v.Wi)(t.loader)){var n=this._loadSourceModule(e).then((function(e){t.module=e}));return t.loader=n,{module:t.module,loader:n}}return{module:t.module,loader:t.loader}}},{key:"_loadSourceModule",value:function(e){var t=this.updatingHandles;switch(e){case"featureService":return t.addPromise(Promise.all([n.e(31009),n.e(55652),n.e(5532)]).then(n.bind(n,5532)));case"featureCollection":return t.addPromise(Promise.all([n.e(98441),n.e(26823)]).then(n.bind(n,26823)));case"graphics":case"notes":return t.addPromise(Promise.all([n.e(50739),n.e(68928),n.e(93463),n.e(49729),n.e(98441),n.e(18586)]).then(n.bind(n,33518)));case"scene":return t.addPromise(Promise.all([n.e(31009),n.e(25158),n.e(79762),n.e(74820)]).then(n.bind(n,92767)))}}}]),d}(h.r);(0,d._)([(0,_.Cb)({constructOnly:!0})],j.prototype,"spatialReference",void 0),(0,d._)([(0,_.Cb)({constructOnly:!0})],j.prototype,"view",void 0),(0,d._)([(0,_.Cb)()],j.prototype,"options",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],j.prototype,"updating",null),(0,d._)([(0,_.Cb)({readOnly:!0})],j.prototype,"snappingSources",null),j=(0,d._)([(0,S.j)("esri.views.interactive.snapping.FeatureSnappingEngine")],j);var A=function(){function e(t,n){(0,s.Z)(this,e),this.snappingSource=t,this.layerView=n,this.handles=new p.Z;var r=this.snappingSource.layerSource.layer;if("refresh"in r){var i=r;this.handles.add(i.on("refresh",(function(){return t.refresh()})))}this.handles.add([(0,g.YP)((function(){return t.updating}),(function(e){return t.layerSource.updating=e}),g.tX),(0,g.YP)((function(){return t.availability}),(function(e){return t.layerSource.availability=e}),g.tX)])}return(0,u.Z)(e,[{key:"destroy",value:function(){this.snappingSource.destroy(),this.handles.destroy()}}]),e}();function D(e,t,n,r,i,a,o){var s=o.spatialReference,u=(0,E.c)(M,t);u[0]+=n,u[1]+=r,u[2]+=i;var l=(0,F.Rs)(u,s,b.jG,a);return l?(0,T.fG)(l,e):1/0}var I=(0,w.c)(),M=(0,w.c)(),O=1e-4},22006:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(43144),i=n(15671),a=n(60136),o=n(92572),s=n(27366),u=n(31319),l=n(49861),c=(n(25243),n(63780),n(69912)),d=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).layer=null,r.enabled=!0,r.updating=!1,r.availability=1,r}return(0,r.Z)(n)}(u.Z);(0,s._)([(0,l.Cb)({constructOnly:!0})],d.prototype,"layer",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"enabled",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"updating",void 0),(0,s._)([(0,l.Cb)()],d.prototype,"availability",void 0);var h=d=(0,s._)([(0,c.j)("esri.views.interactive.snapping.FeatureSnappingLayerSource")],d)},76014:function(e,t,n){n.d(t,{c:function(){return f}});var r=n(43144),i=n(15671),a=n(60136),o=n(92572),s=n(27366),u=n(51995),l=n(46784),c=n(49861),d=n(69912),h=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).enabled=!0,e}return(0,r.Z)(n)}(l.wq);(0,s._)([(0,c.Cb)({type:Boolean})],h.prototype,"enabled",void 0),h=(0,s._)([(0,d.j)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],h);var p=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).lineSnapper=new h,r.parallelLineSnapper=new h,r.rightAngleSnapper=new h,r.rightAngleTriangleSnapper=new h,r.shortLineThreshold=15,r.distance=5,r.pointThreshold=1e-6,r.intersectionParallelLineThreshold=1e-6,r.parallelLineThreshold=1e-6,r.verticalLineThreshold=.1,r.touchSensitivityMultiplier=1.5,r.pointOnLineThreshold=1e-6,r.orange=new u.Z([255,127,0]),r.orangeTransparent=new u.Z([255,127,0,.5]),r.lineHintWidthReference=3,r.lineHintWidthTarget=3,r.lineHintFadedExtensions=.3,r.parallelLineHintWidth=2,r.parallelLineHintLength=24,r.parallelLineHintOffset=1.5,r.rightAngleHintSize=24,r.rightAngleHintOutlineSize=1.5,r.satisfiesConstraintScreenThreshold=1,r}return(0,r.Z)(n)}(l.wq);(0,s._)([(0,c.Cb)({type:h,constructOnly:!0,nonNullable:!0,json:{write:!0}})],p.prototype,"lineSnapper",void 0),(0,s._)([(0,c.Cb)({type:h,constructOnly:!0,nonNullable:!0,json:{write:!0}})],p.prototype,"parallelLineSnapper",void 0),(0,s._)([(0,c.Cb)({type:h,constructOnly:!0,nonNullable:!0,json:{write:!0}})],p.prototype,"rightAngleSnapper",void 0),(0,s._)([(0,c.Cb)({type:h,constructOnly:!0,nonNullable:!0,json:{write:!0}})],p.prototype,"rightAngleTriangleSnapper",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],p.prototype,"shortLineThreshold",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],p.prototype,"distance",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],p.prototype,"pointThreshold",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],p.prototype,"intersectionParallelLineThreshold",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],p.prototype,"parallelLineThreshold",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,"verticalLineThreshold",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],p.prototype,"touchSensitivityMultiplier",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],p.prototype,"pointOnLineThreshold",void 0),(0,s._)([(0,c.Cb)({type:u.Z,nonNullable:!0})],p.prototype,"orange",void 0),(0,s._)([(0,c.Cb)({type:u.Z,nonNullable:!0})],p.prototype,"orangeTransparent",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],p.prototype,"lineHintWidthReference",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],p.prototype,"lineHintWidthTarget",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,"lineHintFadedExtensions",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],p.prototype,"parallelLineHintWidth",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],p.prototype,"parallelLineHintLength",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],p.prototype,"parallelLineHintOffset",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],p.prototype,"rightAngleHintSize",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],p.prototype,"rightAngleHintOutlineSize",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],p.prototype,"satisfiesConstraintScreenThreshold",void 0);var f=new(p=(0,s._)([(0,d.j)("esri.views.interactive.snapping.Settings.Defaults")],p))},95122:function(e,t,n){n.d(t,{Bq:function(){return E},Hk:function(){return _},M8:function(){return C},aU:function(){return b},jg:function(){return x},kt:function(){return m},ku:function(){return Z}});var r=n(29439),i=n(37762),a=n(60136),o=n(92572),s=n(15671),u=n(43144),l=n(92026),c=n(88396),d=n(6394),h=n(11186),p=n(71353),f=n(1700),v=n(55793),y=n(94163),g=function(){function e(){(0,s.Z)(this,e)}return(0,u.Z)(e,[{key:"intersect",value:function(e){return function(e,t){var n=[];if(T(e)){var r=e.point;P(t)?n=(0,v.pk)(t.lineLike,r):R(t)?n=(0,v.Xi)(t.center,t.radius,r):N(t)?n=(0,v.hm)(t.planeLike,r):V(t)&&(n=L(t,e))}else if(P(e)){var i=e.lineLike;T(t)?n=(0,v.pk)(i,t.point):P(t)?n=(0,v.Lh)(i,t.lineLike):R(t)?n=(0,v.CJ)(i,t.center,t.radius):N(t)?n=(0,v.fK)(t.planeLike,i):V(t)&&(n=L(t,e))}else if(R(e)){var a=e.center,o=e.radius;if(P(t))n=(0,v.CJ)(t.lineLike,a,o);else if(T(t))n=(0,v.Xi)(a,o,t.point);else{if(N(t))return(0,v.SD)(t.planeLike,a,o).map((function(n){return new w(n,e,t)}));V(t)&&(n=L(t,e))}}else if(N(e)){var s=e.planeLike;if(N(t))return(0,v.qi)(s,t.planeLike).map((function(n){return new w(n,e,t)}));if(T(t))n=(0,v.hm)(s,t.point);else if(P(t))n=(0,v.fK)(s,t.lineLike);else{if(R(t))return(0,v.SD)(s,t.center,t.radius).map((function(n){return new w(n,e,t)}));V(t)&&(n=L(t,e))}}else V(e)&&(n=L(e,t));return function(e,t,n){return e.map((function(e){return new E((0,f.uc)(e),t,n)}))}(n,e,t)}(this,e)}}]),e}(),_=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this)).point=e,r}return(0,u.Z)(n,[{key:"equals",value:function(e){return T(e)&&(0,h.k)(this.point,e.point)}},{key:"closestTo",value:function(){return(0,f.bQ)(this.point)}}]),n}(g),S=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).start=e,a.end=r,a.type=i,a.lineLike={start:a.start,end:a.end,type:a.type},a}return(0,u.Z)(n,[{key:"equals",value:function(e){return P(e)&&this.type===e.type&&(0,h.k)(this.start,e.start)&&(0,h.k)(this.end,e.end)}},{key:"closestTo",value:function(e){var t=(0,v.ZE)(e,this.lineLike);return(0,f.uc)(t)}}]),n}(g),Z=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,r,y.SP.LINE)}return(0,u.Z)(n)}(S),E=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).intersection=e,a.first=r,a.second=i,a}return(0,u.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&this.first.equals(e.first)&&this.second.equals(e.second)}},{key:"closestTo",value:function(){return(0,f.bQ)(this.intersection)}}]),n}(g),w=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).basePoint=e,a.first=r,a.second=i,a}return(0,u.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&this.first.equals(e.first)&&this.second.equals(e.second)}},{key:"closestTo",value:function(e){var t=this.basePoint;return(0,f.uc)((0,p.f)(t[0],t[1],e[2]))}}]),n}(g),m=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var i;return(0,s.Z)(this,n),(i=t.call(this)).center=e,i.radius=r,i}return(0,u.Z)(n,[{key:"equals",value:function(e){return R(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}},{key:"closestTo",value:function(e){var t=(0,v.sc)(e,this.center,this.radius);return(0,f.uc)(t)}}]),n}(g),k=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).start=e,a.end=r,a.type=i,a.planeLike={start:e,end:r,type:i},a}return(0,u.Z)(n,[{key:"equals",value:function(e){return N(e)&&this.type===e.type&&(0,h.k)(this.start,e.start)&&(0,h.k)(this.end,e.end)}},{key:"closestTo",value:function(e){return(0,f.uc)((0,v.z9)(e,this.planeLike))}},{key:"closestEndTo",value:function(e){var t=this.start,n=this.end;return Math.sign((0,c.h)((0,c.a)(F,n,t),(0,c.a)(j,e,t)))>0?n:t}}]),n}(g),b=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,r,v.Jk.HALF_PLANE)}return(0,u.Z)(n)}(k),x=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){return(0,s.Z)(this,n),t.call(this,e,r,v.Jk.PLANE)}return(0,u.Z)(n)}(k),C=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,r,i){var a;return(0,s.Z)(this,n),(a=t.call(this)).start=e,a.end=r,a.getZ=i,a.planeLike={start:e,end:r,type:v.Jk.HALF_PLANE},a}return(0,u.Z)(n,[{key:"equals",value:function(e){return V(e)&&(0,h.k)(this.start,e.start)&&(0,h.k)(this.end,e.end)&&this.getZ===e.getZ}},{key:"closestTo",value:function(e){return function(e,t){var n,r=(0,v.z9)(t,e.planeLike);return r[2]=null!==(n=(0,l.WG)(e.getZ(t[0],t[1],t[2])))&&void 0!==n?n:A,(0,f.uc)(r)}(this,e)}},{key:"addIfOnTheGround",value:function(e,t){var n,r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=(0,l.Pt)(this.getZ(a[0],a[1],a[2]),0);Math.abs(a[2]-o)<v.Ho&&(a[2]=o,e.push(a))}}catch(s){r.e(s)}finally{r.f()}}}]),n}(g);function L(e,t){var n=e.planeLike,a=e.getZ,o=[];if(T(t))e.addIfOnTheGround(o,(0,v.hm)(n,t.point));else if(P(t))e.addIfOnTheGround(o,(0,v.fK)(n,t.lineLike));else if(R(t)){var s,u=(0,i.Z)((0,v.SD)(n,t.center,t.radius));try{for(u.s();!(s=u.n()).done;){var c=(0,r.Z)(s.value,2),d=c[0],h=c[1],f=a(d,h,0);(0,l.pC)(f)&&o.push((0,p.f)(d,h,f))}}catch(m){u.e(m)}finally{u.f()}}else if(N(t)||V(t)){var y,g=(0,i.Z)((0,v.qi)(n,t.planeLike));try{for(g.s();!(y=g.n()).done;){var _,S=(0,r.Z)(y.value,2),Z=S[0],E=S[1],w=null!==(_=(0,l.WG)(a(Z,E,0)))&&void 0!==_?_:A;o.push((0,p.f)(Z,E,w))}}catch(m){g.e(m)}finally{g.f()}}return o}function T(e){return e instanceof _}function P(e){return e instanceof S}function R(e){return e instanceof m}function N(e){return e instanceof k}function V(e){return e instanceof C}var F=(0,d.a)(),j=(0,d.a)(),A=0},80371:function(e,t,n){var r;n.d(t,{B:function(){return r}}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(r||(r={}))},38856:function(e,t,n){n.d(t,{N:function(){return oe}});var r=n(93433),i=n(74165),a=n(15861),o=n(37762),s=n(15671),u=n(43144),l=n(60136),c=n(92572),d=n(27366),h=n(91505),p=n(41691),f=n(92026),v=n(66978),y=n(94172),g=n(49861),_=(n(25243),n(63780),n(69912)),S=n(79803),Z=n(74509),E=n(76014),w=n(80371),m=n(61394),k=n(31319),b=n(80987),x=n(88396),C=n(1700),L=n(64674),T=n(11208),P=function(){function e(t,n){(0,s.Z)(this,e),this.view=t,this.options=n,this.squaredShortLineThreshold=E.c.shortLineThreshold*E.c.shortLineThreshold}return(0,u.Z)(e,[{key:"snap",value:function(e,t){return(0,f.pC)(t.vertexHandle)?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}},{key:"edgeExceedsShortLineThreshold",value:function(e,t){return this.exceedsShortLineThreshold((0,C.$D)(e.leftVertex.pos,this.view,t),(0,C.$D)(e.rightVertex.pos,this.view,t),t)}},{key:"exceedsShortLineThreshold",value:function(e,t,n){var r=n.spatialReference;return 0===this.squaredShortLineThreshold||(0,L.Bb)((0,T.Rs)(t,r,Z.jG,this.view),(0,T.Rs)(e,r,Z.jG,this.view))>this.squaredShortLineThreshold}},{key:"isVertical",value:function(e,t){return(0,x.k)(e,t)<E.c.verticalLineThreshold}},{key:"squaredProximityThreshold",value:function(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}},{key:"_squaredMouseProximityThreshold",get:function(){return this.options.distance*this.options.distance}},{key:"_squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}}]),e}(),R=n(95122),N=n(92605),V=n(53397),F=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r,i=e.lineStart,a=e.lineEnd,o=e.targetPoint,u=e.isDraped;return(0,s.Z)(this,n),(r=t.call(this,o,new R.jg(i,a),u,w.B.SELF))._referenceLineHint=new V.w(L.ze.REFERENCE_EXTENSION,i,a,u,r.domain),r}return(0,u.Z)(n,[{key:"hints",get:function(){return[this._referenceLineHint,new V.w(L.ze.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}},{key:"_lineEndClosestToTarget",value:function(){return this.constraint.closestEndTo(this.targetPoint)}}]),n}(N.j),j=n(55793),A=n(94163),D=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.editGeometryOperations.data.components[0],r=n.edges.length,i=[];if(r<1)return i;var a=t.spatialReference,o=(0,T.Rs)(e,a,Z.jG,this.view),s=this.view,u=n.edges[r-1],l=u;do{if(this.edgeExceedsShortLineThreshold(l,t)){var c=(0,L._j)(l,s,t);this._processCandidateProposal(c.left,c.right,e,o,t,i)}l=l.leftVertex.leftEdge}while(l&&l!==u);return i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=(0,f.Wg)(t.vertexHandle),i=r.component;if(i.edges.length<2)return n;var a=this.view,o=t.spatialReference,s=(0,T.Rs)(e,o,Z.jG,a),u=r.leftEdge,l=r.rightEdge;u&&l&&this.edgeExceedsShortLineThreshold(u,t)&&this.edgeExceedsShortLineThreshold(l,t)&&this._processCandidateProposal((0,C.$D)(u.leftVertex.pos,a,t),(0,C.$D)(l.rightVertex.pos,a,t),e,s,t,n);var c=i.edges[0],d=c;do{if(d!==r.leftEdge&&d!==r.rightEdge&&this.edgeExceedsShortLineThreshold(d,t)){var h=(0,L._j)(d,a,t);this._processCandidateProposal(h.left,h.right,e,s,t,n)}d=d.rightVertex.rightEdge}while(d&&d!==c);return n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i,a){var o,s=i.spatialReference,u=i.pointer,l=(0,C.uc)((0,j.ZE)(n,{start:e,end:t,type:A.SP.LINE}));(0,L.Bb)(r,(0,T.Rs)(l,s,Z.jG,this.view))<this.squaredProximityThreshold(u)&&a.push(new F({lineStart:e,lineEnd:t,targetPoint:l,isDraped:"on-the-ground"===(null===(o=i.elevationInfo)||void 0===o?void 0:o.mode)}))}}]),n}(P),I=n(6394),M=n(71353),O=n(11186),H=n(5916),q=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r,i=e.referenceLine,a=e.lineStart,o=e.targetPoint,u=e.isDraped;(0,s.Z)(this,n);var l=(0,M.a)(a),c=i.left,d=i.right;return(0,O.b)(l,(0,O.a)(l,l,d),c),(r=t.call(this,o,new R.jg(a,(0,C.uc)(l)),u,w.B.SELF))._referenceLines=[{edge:i,fadeLeft:!0,fadeRight:!0}],r}return(0,u.Z)(n,[{key:"hints",get:function(){var e=this;return[new V.w(L.ze.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new H.L(this.constraint.start,this.targetPoint,this.isDraped,this.domain)].concat((0,r.Z)(this._referenceLines.map((function(t){return new V.w(L.ze.REFERENCE,t.edge.left,t.edge.right,e.isDraped,e.domain,t.fadeLeft,t.fadeRight)}))))}},{key:"addReferenceLine",value:function(e){var t={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((function(n){(0,O.k)(e.right,n.edge.left)&&(n.fadeLeft=!1,t.fadeRight=!1),(0,O.k)(e.right,n.edge.right)&&(n.fadeRight=!1,t.fadeRight=!1),(0,O.k)(e.left,n.edge.right)&&(n.fadeRight=!1,t.fadeLeft=!1),(0,O.k)(e.left,n.edge.left)&&(n.fadeLeft=!1,t.fadeLeft=!1)})),this._referenceLines.push(t)}}]),n}(N.j),z=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.editGeometryOperations.data.components[0],r=n.edges.length,i=n.vertices.length,a=[];if(r<2)return a;var o=this.view,s=(0,T.Rs)(e,t.spatialReference,Z.jG,o),u=(0,C.$D)(n.vertices[i-1].pos,o,t),l=(0,C.$D)(n.vertices[0].pos,o,t),c=n.edges[r-1],d=c;do{if(this.edgeExceedsShortLineThreshold(d,t)){var h=(0,L._j)(d,o,t);this._checkEdgeForParallelLines(h,u,e,s,t,a),this._checkEdgeForParallelLines(h,l,e,s,t,a)}d=d.leftVertex.leftEdge}while(d&&d!==c);return a}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=(0,f.Wg)(t.vertexHandle),i=r.component;if(i.edges.length<3)return n;var a=this.view,o=(0,T.Rs)(e,t.spatialReference,Z.jG,a),s=r.leftEdge,u=r.rightEdge,l=i.vertices[0],c=(0,C.$D)(l.pos,a,t),d=i.vertices.length,h=i.vertices[d-1],p=(0,C.$D)(h.pos,a,t),v=i.edges[0],y=v;do{if(y!==s&&y!==u&&this.edgeExceedsShortLineThreshold(y,t)){var g=(0,L._j)(y,a,t);s&&this._checkEdgeForParallelLines(g,(0,C.$D)(s.leftVertex.pos,a,t),e,o,t,n),u&&this._checkEdgeForParallelLines(g,(0,C.$D)(u.rightVertex.pos,a,t),e,o,t,n),r===l?this._checkEdgeForParallelLines(g,p,e,o,t,n):r===h&&this._checkEdgeForParallelLines(g,c,e,o,t,n)}y=y.rightVertex.rightEdge}while(y&&y!==v);return n}},{key:"_checkEdgeForParallelLines",value:function(e,t,n,r,i,a){var o=e.left,s=e.right;if((0,A.k0)(G,t,o,s),!((0,x.k)(G,t)<E.c.parallelLineThreshold)){(0,A.k0)(G,n,o,s,t);var u=i.spatialReference,l=i.pointer,c=(0,C.uc)((0,M.f)(G[0],G[1],n[2]));if((0,L.Bb)(r,(0,T.Rs)(c,u,Z.jG,this.view))<this.squaredProximityThreshold(l)){var d;if(this.isVertical(c,t)||this.isVertical(o,s))return;if(this._parallelToPreviousCandidate(e,a))return;a.push(new q({referenceLine:e,lineStart:t,targetPoint:c,isDraped:"on-the-ground"===(null===(d=i.elevationInfo)||void 0===d?void 0:d.mode)}))}}}},{key:"_parallelToPreviousCandidate",value:function(e,t){var n,r=e.left,i=e.right,a=(0,o.Z)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if((0,A.k0)(G,i,s.constraint.start,s.constraint.end,r),(0,x.k)(G,i)<E.c.parallelLineThreshold)return s.addReferenceLine(e),!0}}catch(u){a.e(u)}finally{a.f()}return!1}}]),n}(P),G=(0,I.a)(),W=n(19824),B=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.editGeometryOperations.data.components[0],r=n.vertices.length,i=[];if(r<2)return i;var a=this.view,o=(0,T.Rs)(e,t.spatialReference,Z.jG,a),s=n.vertices[r-1];if(this.edgeExceedsShortLineThreshold(s.leftEdge,t)){var u=(0,C.$D)(s.pos,a,t),l=(0,C.$D)(s.leftEdge.leftVertex.pos,a,t);this._checkForSnappingCandidate(i,l,u,e,o,t)}var c=n.vertices[0];if(this.edgeExceedsShortLineThreshold(c.rightEdge,t)){var d=(0,C.$D)(c.pos,a,t),h=(0,C.$D)(c.rightEdge.rightVertex.pos,a,t);this._checkForSnappingCandidate(i,h,d,e,o,t)}return i}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=(0,f.Wg)(t.vertexHandle);if(r.component.vertices.length<3)return n;var i=this.view,a=(0,T.Rs)(e,t.spatialReference,Z.jG,i),o=r.leftEdge,s=r.rightEdge;if(o&&o.leftVertex.leftEdge){var u=o.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(u,t)){var l=(0,C.$D)(u.rightVertex.pos,i,t),c=(0,C.$D)(u.leftVertex.pos,i,t);this._checkForSnappingCandidate(n,c,l,e,a,t)}}if(s&&s.rightVertex.rightEdge){var d=s.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(d,t)){var h=(0,C.$D)(d.leftVertex.pos,i,t),p=(0,C.$D)(d.rightVertex.pos,i,t);this._checkForSnappingCandidate(n,p,h,e,a,t)}}return n}},{key:"_checkForSnappingCandidate",value:function(e,t,n,r,i,a){var o=a.spatialReference,s=a.pointer;(0,x.a)($,n,t);var u=(0,O.s)(Y,$[1],-$[0],0),l=(0,x.h)(u,(0,x.a)($,r,n))/(0,x.v)(u),c=(0,C.uc)((0,x.w)((0,M.a)(r),n,u,l));if((0,L.Bb)(i,(0,T.Rs)(c,o,Z.jG,this.view))<this.squaredProximityThreshold(s)){var d;if(this.isVertical(c,n)||this.isVertical(n,t))return;var h=(0,O.z)((0,M.c)(),n,u,Math.sign(l));e.push(new W.A({targetPoint:c,constraint:new R.aU(n,(0,C.uc)(h)),previousVertex:t,otherVertex:n,otherVertexType:W.Y.CENTER,isDraped:"on-the-ground"===(null===(d=a.elevationInfo)||void 0===d?void 0:d.mode)}))}}}]),n}(P),$=(0,I.a)(),Y=(0,M.c)(),X=n(41216),U=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r,i=e.targetPoint,a=e.point1,o=e.point2,u=e.isDraped;return(0,s.Z)(this,n),(r=t.call(this,i,new R.kt((0,C.uc)((0,O.h)((0,M.c)(),a,o,.5)),.5*(0,x.d)(a,o)),u,w.B.SELF))._p1=a,r._p2=o,r}return(0,u.Z)(n,[{key:"hints",get:function(){return[new V.w(L.ze.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new V.w(L.ze.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new X.y(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}]),n}(N.j),Q=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n,[{key:"snapNewVertex",value:function(e,t){var n=t.editGeometryOperations.data.components[0],r=[],i=n.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||i<2)return r;var a=this.view,o=n.vertices[0],s=n.vertices[i-1],u=(0,C.$D)(o.pos,a,t),l=(0,C.$D)(s.pos,a,t);return this._processCandidateProposal(u,l,e,t,r),r}},{key:"snapExistingVertex",value:function(e,t){var n=[],r=(0,f.Wg)(t.vertexHandle),i=r.component;if(i.edges.length<2)return n;if("polyline"===t.editGeometryOperations.data.type&&(0===r.index||r.index===i.vertices.length-1))return n;var a=this.view,o=(0,C.$D)(r.leftEdge.leftVertex.pos,a,t),s=(0,C.$D)(r.rightEdge.rightVertex.pos,a,t);return this._processCandidateProposal(o,s,e,t,n),n}},{key:"_processCandidateProposal",value:function(e,t,n,r,i){if(this.exceedsShortLineThreshold(e,t,r)){var a=(0,x.l)(J,e,t,.5),o=.5*(0,x.d)(e,t),s=(0,M.c)();(0,A.xO)(s,n,a,o),s[2]=n[2];var u=(0,C.uc)(s),l=r.spatialReference,c=r.pointer,d=(0,T.Rs)(n,l,Z.jG,this.view);if((0,L.Bb)(d,(0,T.Rs)(u,l,Z.jG,this.view))<this.squaredProximityThreshold(c)){var h;if(this.isVertical(e,u)||this.isVertical(u,t))return;i.push(new U({targetPoint:u,point1:e,point2:t,isDraped:"on-the-ground"===(null===(h=r.elevationInfo)||void 0===h?void 0:h.mode)}))}}}}]),n}(P),J=(0,I.a)(),K=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).updating=!1,r._snappers=new b.Z,r._domain=w.B.SELF,r}return(0,u.Z)(n,[{key:"initialize",value:function(){this._snappers.push(new z(this.view,this.options),new D(this.view,this.options),new B(this.view,this.options),new Q(this.view,this.options))}},{key:"options",set:function(e){this._set("options",e);var t,n=(0,o.Z)(this._snappers);try{for(n.s();!(t=n.n()).done;){t.value.options=e}}catch(r){n.e(r)}finally{n.f()}}},{key:"fetchCandidates",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r){var a,s,u,l,c,d,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&this._domain&&this.options.effectiveSelfEnabled){e.next=2;break}return e.abrupt("return",[]);case 2:a=[],s=(0,o.Z)(this._snappers.items);try{for(s.s();!(u=s.n()).done;){l=u.value,c=(0,o.Z)(l.snap(t,r));try{for(c.s();!(d=c.n()).done;)h=d.value,a.push(h)}catch(i){c.e(i)}finally{c.f()}}}catch(i){s.e(i)}finally{s.f()}return e.abrupt("return",((0,L.lQ)(t,a),a));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(k.Z);function ee(e,t){return[new K({view:e,options:t}),new m.U({view:e,options:t,spatialReference:e.spatialReference})]}(0,d._)([(0,g.Cb)({readOnly:!0})],K.prototype,"updating",void 0),(0,d._)([(0,g.Cb)({constructOnly:!0})],K.prototype,"view",void 0),(0,d._)([(0,g.Cb)()],K.prototype,"options",null),K=(0,d._)([(0,_.j)("esri.views.interactive.snapping.SelfSnappingEngine")],K);var te,ne,re=n(98173),ie=n(90609),ae=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,r,i,a){var o;return(0,s.Z)(this,n),(o=t.call(this,e,new R.Bq(e,r.constraint,i.constraint),a,w.B.ALL)).first=r,o.second=i,o}return(0,u.Z)(n,[{key:"hints",get:function(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[].concat((0,r.Z)(this.first.hints),(0,r.Z)(this.second.hints),[new ie.w(this.targetPoint,this.isDraped,this.domain)])}}]),n}(N.j),oe=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).options=new re.Z,r.snappingEnginesFactory=ee,r._engines=[],r._currentMainCandidate=null,r._currentOtherActiveCandidates=[],r._currentSnappedType=te.MAIN,r}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.handles.add([(0,y.YP)((function(){var t=e.options;return{effectiveFeatureEnabled:t.effectiveFeatureEnabled,effectiveSelfEnabled:t.effectiveSelfEnabled,touchSensitivityMultiplier:t.touchSensitivityMultiplier,distance:t.distance}}),(function(){e.doneSnapping(),e.emit("changed")}),y.Z_),(0,y.YP)((function(){return e.options}),(function(t){var n,r=(0,o.Z)(e._engines);try{for(r.s();!(n=r.n()).done;){n.value.options=t}}catch(i){r.e(i)}finally{r.f()}}),y.Z_),(0,y.YP)((function(){return{viewReady:e.view.ready,viewSpatialReference:e.view.spatialReference,snappingEnginesFactory:e.snappingEnginesFactory}}),(function(t){var n=t.viewReady,r=t.snappingEnginesFactory;return e._recreateEngines(n,r)}),y.tX)])}},{key:"destroy",value:function(){this._destroyEngines()}},{key:"updating",get:function(){return this._engines.some((function(e){return e.updating}))}},{key:"_recreateEngines",value:function(e,t){if(this._destroyEngines(),e){var n=this.view,r=this.options;this._engines=t(n,r)}}},{key:"_destroyEngines",value:function(){var e,t=(0,o.Z)(this._engines);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this._engines=[]}},{key:"_squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"_squaredTouchProximityThreshold",get:function(){var e=this.options,t=e.distance*e.touchSensitivityMultiplier;return t*t}},{key:"_squaredSatisfiesConstraintThreshold",get:function(){return E.c.satisfiesConstraintScreenThreshold*E.c.satisfiesConstraintScreenThreshold}},{key:"snap",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ue(t)?this._snapMultiPoint(t):this._snapSinglePoint(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=e.point,n=e.context;this._removeVisualization();var i=this._currentMainCandidate;if((0,f.Wi)(i))return t;var a=this._selectUpdateInput(e);if((0,f.Wi)(a))return t;var s=n.spatialReference,u=(0,S.iV)(a,s);if((0,f.Wi)(u))return t;var l=this.view,c=n.elevationInfo,d=n.visualizer,h=[],p=(0,C.dF)(u,l,n),v=i.constraint.closestTo(p);if(!this._arePointsWithinScreenThreshold(p,v,n))return this._resetSnappingState(),t;i.targetPoint=v,h.push.apply(h,(0,r.Z)(i.hints));var y,g=(0,o.Z)(this._currentOtherActiveCandidates);try{for(g.s();!(y=g.n()).done;){var _=y.value;_.targetPoint=v,h.push.apply(h,(0,r.Z)(_.hints))}}catch(Z){g.e(Z)}finally{g.f()}return(0,f.pC)(d)&&this.handles.add(d.draw(h,{spatialReference:s,elevationInfo:le(n),view:l,selfSnappingZ:n.selfSnappingZ}),se),(0,C.Gs)(v,l,{z:t.z,m:t.m,spatialReference:t.spatialReference,elevationInfo:c})}},{key:"doneSnapping",value:function(){this._removeVisualization(),this._resetSnappingState()}},{key:"_selectUpdateInput",value:function(e){var t=e.point,n=e.scenePoint;switch(this._currentSnappedType){case te.MAIN:return t;case te.SCENE:return n}}},{key:"_resetSnappingState",value:function(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=te.MAIN}},{key:"_removeVisualization",value:function(){this.handles.remove(se)}},{key:"_snapSinglePoint",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.point,r=t.context,a=t.signal,o=this.view,s=(0,C.dF)(n,o,r),e.next=5,this._fetchCandidates(s,w.B.ALL,r,a);case 5:return u=e.sent,e.abrupt("return",this._createSnapResult(s,te.MAIN,u,o,r,{z:n.z,m:n.m,spatialReference:n.spatialReference,elevationInfo:r.elevationInfo},a));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_snapMultiPoint",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,o,s,u,l,c,d,h,p,f,v,y,g,_;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.point,s=t.scenePoint,u=t.context,l=t.signal,c=this.view,d=u.coordinateHelper,h=u.spatialReference,e.next=4,(0,S.iQ)(s.spatialReference,h);case 4:return p=(0,S.iV)(s,h),f=(0,C.dF)(p,c,u),e.next=8,this._fetchCandidates(f,w.B.FEATURE,u,l);case 8:if(!((v=e.sent).length>0)){e.next=14;break}return e.next=12,this._fetchCandidates(f,w.B.SELF,u,l);case 12:return y=e.sent,e.abrupt("return",this._createSnapResult(f,te.SCENE,[].concat((0,r.Z)(v),(0,r.Z)(y)),c,u,{z:p.z,m:p.m,spatialReference:p.spatialReference,elevationInfo:u.elevationInfo},l));case 14:return g=(0,C.dF)(o,c,u),e.next=17,this._fetchCandidates(g,w.B.SELF,u,l);case 17:return _=e.sent,e.abrupt("return",this._createSnapResult(g,te.MAIN,_,c,u,{z:d.hasZ()&&o.hasZ?null!==(n=o.z)&&void 0!==n?n:0:void 0,m:d.hasM()&&o.hasM?null!==(a=o.m)&&void 0!==a?a:0:void 0,spatialReference:o.spatialReference,elevationInfo:u.elevationInfo},l));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchCandidates",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n,r,a){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this._engines.map((function(e){return e.fetchCandidates(t,n,r,a)})));case 2:return e.abrupt("return",e.sent.flat());case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_createSnapResult",value:function(e,t,n,r,i,a,o){var s=this;return{get valid(){return!(0,v.Hc)(o)},apply:function(){var o=i.spatialReference,u=s._processCandidates(e,t,n,i),l=u.snappedPoint,c=u.hints;return s._removeVisualization(),(0,f.pC)(i.visualizer)&&s.handles.add(i.visualizer.draw(c,{spatialReference:o,elevationInfo:Z.jG,view:r,selfSnappingZ:i.selfSnappingZ}),se),(0,C.Gs)(l,r,a)}}}},{key:"_processCandidates",value:function(e,t,n,r){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),(0,L.lQ)(e,n);var i=this._currentMainCandidate;if((0,f.pC)(i)){var a=this._findOldConstraintInNewCandidates(i,n);if(a>=0){if(!(n[a]instanceof ae))return this._intersectWithOtherCandidates(a,n,e,t,r);if(this._arePointsWithinScreenThreshold(e,i.targetPoint,r))return this._updateSnappingCandidate(i,t,n,r)}}return this._intersectWithOtherCandidates(0,n,e,t,r)}},{key:"_findOldConstraintInNewCandidates",value:function(e,t){return e instanceof ae?this._findOldCandidateIndex(t,e.first)>=0&&this._findOldCandidateIndex(t,e.second)>=0?0:-1:this._findOldCandidateIndex(t,e)}},{key:"_intersectWithOtherCandidates",value:function(e,t,n,r,i){for(var a=i.coordinateHelper,s=t[e],u=[],l=0;l<t.length;++l)if(l!==e){var c,d=t[l],h=(0,o.Z)(s.constraint.intersect(d.constraint));try{for(h.s();!(c=h.n()).done;){var p=c.value.closestTo(s.targetPoint);u.push([new ae(p,s,d,d.isDraped),this._squaredScreenDistance(n,p,a)])}}catch(f){h.e(f)}finally{h.f()}}return u.length>0&&(u.sort((function(e,t){return e[1]-t[1]})),u[0][1]<this._squaredPointProximityThreshold(i.pointer))?this._updateSnappingCandidate(u[0][0],r,t,i):this._updateSnappingCandidate(s,r,t,i)}},{key:"_updateSnappingCandidate",value:function(e,t,n,i){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;var a=this._currentMainCandidate.targetPoint,s=[];s.push.apply(s,(0,r.Z)(e.hints));var u,l=(0,o.Z)(n);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(e instanceof ae){if(c.constraint.equals(e.first.constraint)||c.constraint.equals(e.second.constraint))continue}else if(c.constraint.equals(e.constraint))continue;var d=c.constraint.closestTo(a);this._squaredScreenDistance(d,a,i.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(c.targetPoint=a,this._currentOtherActiveCandidates.push(c),s.push.apply(s,(0,r.Z)(c.hints)))}}catch(h){l.e(h)}finally{l.f()}return{snappedPoint:a,hints:s}}},{key:"_squaredPointProximityThreshold",value:function(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}},{key:"_arePointsWithinScreenThreshold",value:function(e,t,n){return this._squaredScreenDistance(e,t,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}},{key:"_squaredScreenDistance",value:function(e,t,n){return(0,L.Bb)(this._toScreen(e,n),this._toScreen(t,n))}},{key:"_toScreen",value:function(e,t){return(0,T.Rs)(e,t.spatialReference,Z.jG,this.view)}},{key:"_findOldCandidateIndex",value:function(e,t){for(var n=-1,r=0;r<e.length;++r)if(t.constraint.equals(e[r].constraint)){n=r;break}return n}},{key:"test",get:function(){return{visualizationsActive:this.handles.has(se),engines:this._engines}}}]),n}(h.Z.EventedMixin(p.r));(0,d._)([(0,g.Cb)({constructOnly:!0})],oe.prototype,"view",void 0),(0,d._)([(0,g.Cb)()],oe.prototype,"options",void 0),(0,d._)([(0,g.Cb)({readOnly:!0})],oe.prototype,"updating",null),(0,d._)([(0,g.Cb)()],oe.prototype,"snappingEnginesFactory",void 0),(0,d._)([(0,g.Cb)()],oe.prototype,"_engines",void 0),(0,d._)([(0,g.Cb)()],oe.prototype,"_squaredMouseProximityTreshold",null),(0,d._)([(0,g.Cb)()],oe.prototype,"_squaredTouchProximityThreshold",null),(0,d._)([(0,g.Cb)()],oe.prototype,"_squaredSatisfiesConstraintThreshold",null),oe=(0,d._)([(0,_.j)("esri.views.interactive.snapping.SnappingManager")],oe),(ne=te||(te={}))[ne.MAIN=0]="MAIN",ne[ne.SCENE=1]="SCENE";var se="visualization-handle";function ue(e){return(0,f.pC)(e.scenePoint)}function le(e){var t=e.coordinateHelper,n=e.elevationInfo;return t.hasZ()?Z.jG:n}},98173:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(15671),i=n(43144),a=n(60136),o=n(92572),s=n(27366),u=n(31319),l=n(80987),c=n(49861),d=(n(25243),n(63780),n(69912)),h=n(22006),p=n(76014),f=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).enabled=!1,i.enabledToggled=!1,i.selfEnabled=!0,i.featureEnabled=!0,i.featureSources=new l.Z,i.distance=p.c.distance,i.touchSensitivityMultiplier=p.c.touchSensitivityMultiplier,i}return(0,i.Z)(n,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]),n}(u.Z);(0,s._)([(0,c.Cb)()],f.prototype,"enabled",void 0),(0,s._)([(0,c.Cb)()],f.prototype,"enabledToggled",void 0),(0,s._)([(0,c.Cb)()],f.prototype,"selfEnabled",void 0),(0,s._)([(0,c.Cb)()],f.prototype,"featureEnabled",void 0),(0,s._)([(0,c.Cb)({type:l.Z.ofType(h.Z)})],f.prototype,"featureSources",void 0),(0,s._)([(0,c.Cb)()],f.prototype,"distance",void 0),(0,s._)([(0,c.Cb)()],f.prototype,"touchSensitivityMultiplier",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],f.prototype,"effectiveEnabled",null),(0,s._)([(0,c.Cb)({readOnly:!0})],f.prototype,"effectiveSelfEnabled",null),(0,s._)([(0,c.Cb)({readOnly:!0})],f.prototype,"effectiveFeatureEnabled",null);var v=f=(0,s._)([(0,d.j)("esri.views.interactive.snapping.SnappingOptions")],f)},1700:function(e,t,n){n.d(t,{$D:function(){return c},$G:function(){return l},Gs:function(){return h},SH:function(){return p},bQ:function(){return u},dF:function(){return d},uc:function(){return s}});var r=n(92026),i=n(71353),a=n(65618),o=n(74509);function s(e){return e}function u(e){return(0,i.a)(e)}function l(e,t,n){return(0,i.f)(e,t,n)}function c(e,t,n){return(0,r.Wi)(e)?null:d(n.coordinateHelper.vectorToDehydratedPoint(e,f),t,n)}function d(e,t,n){var a,s;if((0,r.Wi)(e))return null;if((0,r.Wi)(t))return(0,i.f)(e.x,e.y,null!==(a=e.z)&&void 0!==a?a:0);if("2d"===t.type)return(0,i.f)(e.x,e.y,0);var u=n.elevationInfo,l=null!==(s=(0,o.vQ)(t,e,u,o.jG))&&void 0!==s?s:0;return(0,i.f)(e.x,e.y,l)}function h(e,t,n){var i,s=n.z,u=n.m,l=n.spatialReference,c=n.elevationInfo;if(null==s&&null==u){var d=(0,a.Tx)(e[0],e[1],void 0,l);return null!=u&&(d.m=u,d.hasM=!0),d}if((0,r.Wi)(t)||"2d"===t.type){var h=(0,a.Tx)(e[0],e[1],s,l);return null!=u&&(h.m=u,h.hasM=!0),h}var p=null!==(i=(0,o.zx)(t,e,l,o.jG,c))&&void 0!==i?i:0,f=(0,a.Tx)(e[0],e[1],p,l);return null!=u&&(f.m=u,f.hasM=!0),f}function p(e,t){return(0,a.Tx)(e[0],e[1],e[2],t)}var f=(0,a.Tx)(0,0,0,null)},97760:function(e,t,n){n.d(t,{k:function(){return h}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),s=n(92572),u=n(95122),l=n(64674),c=n(75691),d=n(53397),h=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),{},{isDraped:!0,constraint:new u.M8(e.edgeStart,e.edgeEnd,e.getGroundElevation)}))}return(0,a.Z)(n,[{key:"hints",get:function(){return[new d.w(l.ze.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}]),n}(c.a)},95905:function(e,t,n){n.d(t,{L:function(){return h}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),s=n(92572),u=n(95122),l=n(64674),c=n(75691),d=n(53397),h=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),{},{constraint:new u.ku(e.edgeStart,e.edgeEnd)}))}return(0,a.Z)(n,[{key:"hints",get:function(){return[new d.w(l.ze.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}]),n}(c.a)},75691:function(e,t,n){n.d(t,{a:function(){return u}});var r=n(43144),i=n(15671),a=n(60136),o=n(92572),s=n(80371),u=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r,a=e.targetPoint,o=e.objectId,u=e.constraint,l=e.isDraped;return(0,i.Z)(this,n),(r=t.call(this,a,u,l,s.B.FEATURE)).objectId=o,r}return(0,r.Z)(n)}(n(92605).j)},19824:function(e,t,n){n.d(t,{A:function(){return p},Y:function(){return r}});var r,i=n(15671),a=n(43144),o=n(60136),s=n(92572),u=n(80371),l=n(64674),c=n(92605),d=n(53397),h=n(41216),p=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r,a=e.targetPoint,o=e.constraint,s=e.previousVertex,l=e.otherVertex,c=e.otherVertexType,d=e.objectId,h=e.isDraped;return(0,i.Z)(this,n),(r=t.call(this,a,o,h,u.B.SELF)).previousVertex=s,r.otherVertex=l,r.otherVertexType=c,r.objectId=d,r}return(0,a.Z)(n,[{key:"hints",get:function(){var e=this.previousVertex,t=this.otherVertexType===r.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===r.CENTER?this.targetPoint:this.otherVertex;return[new d.w(l.ze.TARGET,t,n,this.isDraped,this.domain),new d.w(l.ze.REFERENCE,e,t,this.isDraped,this.domain),new h.y(this.previousVertex,t,n,this.isDraped,this.domain)]}}]),n}(c.j);!function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"}(r||(r={}))},92605:function(e,t,n){n.d(t,{j:function(){return a}});var r=n(43144),i=n(15671),a=(0,r.Z)((function e(t,n,r,a){(0,i.Z)(this,e),this.targetPoint=t,this.constraint=n,this.isDraped=r,this.domain=a}))},90609:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(15671),i=n(43144),a=n(60136),o=n(92572),s=n(11186),u=n(80371),l=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.B.ALL;return(0,r.Z)(this,n),(a=t.call(this,i,o)).intersectionPoint=e,a}return(0,i.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&(0,s.k)(this.intersectionPoint,e.intersectionPoint)}}]),n}(n(55054).r)},53397:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(15671),i=n(43144),a=n(60136),o=n(92572),s=(n(93169),n(32718),n(11186)),u=n(80371),l=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,a,o){var s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.B.ALL,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,r.Z)(this,n),(s=t.call(this,o,l)).type=e,s.lineStart=i,s.lineEnd=a,s.fadeLeft=c,s.fadeRight=d,s}return(0,i.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&this.type===e.type&&(0,s.k)(this.lineStart,e.lineStart)&&(0,s.k)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}},{key:"length",get:function(){return(0,s.i)(this.lineStart,this.lineEnd)}}]),n}(n(55054).r)},5916:function(e,t,n){n.d(t,{L:function(){return l}});var r=n(15671),i=n(43144),a=n(60136),o=n(92572),s=(n(93169),n(32718),n(11186)),u=n(80371),l=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.B.ALL;return(0,r.Z)(this,n),(o=t.call(this,a,s)).lineStart=e,o.lineEnd=i,o}return(0,i.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&(0,s.k)(this.lineStart,e.lineStart)&&(0,s.k)(this.lineEnd,e.lineEnd)}}]),n}(n(55054).r)},41216:function(e,t,n){n.d(t,{y:function(){return l}});var r=n(15671),i=n(43144),a=n(60136),o=n(92572),s=(n(93169),n(32718),n(11186)),u=n(80371),l=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e,i,a,o){var s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.B.ALL;return(0,r.Z)(this,n),(s=t.call(this,o,l)).previousVertex=e,s.centerVertex=i,s.nextVertex=a,s}return(0,i.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&(0,s.k)(this.previousVertex,e.previousVertex)&&(0,s.k)(this.centerVertex,e.centerVertex)&&(0,s.k)(this.nextVertex,e.nextVertex)}}]),n}(n(55054).r)},55054:function(e,t,n){n.d(t,{r:function(){return a}});var r=n(43144),i=n(15671),a=(0,r.Z)((function e(t,n){(0,i.Z)(this,e),this.isDraped=t,this.domain=n}))},64674:function(e,t,n){n.d(t,{Bb:function(){return h},ML:function(){return g},Ob:function(){return _},_j:function(){return y},fG:function(){return p},lQ:function(){return f},rh:function(){return v},ze:function(){return r}});var r,i,a=n(92026),o=n(94172),s=n(11186),u=n(65618),l=n(1614),c=n(87888),d=n(1700);function h(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function p(e,t){return Math.sqrt(h(e,t))}function f(e,t){t.sort((function(t,n){return(0,s.d)(t.targetPoint,e)-(0,s.d)(n.targetPoint,e)}))}function v(e,t,n){var r=e.point,i=e.distance,o=e.types,s=e.coordinateHelper.spatialReference;return{point:(0,u.Tx)(r[0],r[1],r[2],s.toJSON()),mode:t,distance:i,types:o,query:(0,a.pC)(n)?n.toJSON():{where:"1=1"}}}function y(e,t,n){return{left:(0,d.$D)(e.leftVertex.pos,t,n),right:(0,d.$D)(e.rightVertex.pos,t,n)}}function g(e){return e.createQuery()}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=(0,o.YP)((function(){return{view:e.view,snappingOptions:e.snappingOptions}}),(function(n){var r=n.view,i=n.snappingOptions,o="snapping-toggle",s=l.f.TOOL;if(e.removeHandles(o),r&&(0,a.pC)(i)){var u=[r.on("key-down",(function(e){e.key!==c.c.toggle||e.repeat||(i.enabledToggled=!0,t())}),s),r.on("key-up",(function(e){e.key===c.c.toggle&&(i.enabledToggled=!1,t())}),s),r.on("pointer-move",(function(e){var n=e.native.ctrlKey;i.enabledToggled!==n&&(i.enabledToggled=n,t())}),s)];e.addHandles(u,o)}}),o.tX);e.addHandles(n)}(i=r||(r={}))[i.TARGET=0]="TARGET",i[i.REFERENCE=1]="REFERENCE",i[i.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"},94163:function(e,t,n){n.d(t,{SP:function(){return r},dU:function(){return c},k0:function(){return u},xO:function(){return l}});n(16889);var r,i=n(88396),a=n(6394);function o(e,t){return e[0]*t[1]-e[1]*t[0]}function s(e,t,n){var r=(0,i.h)(n,t)/(0,i.v)(n);return(0,i.b)(e,n,r)}function u(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return(0,i.a)(h,r,n),(0,i.a)(f,t,a),s(v,f,h),(0,i.j)(e,a,v)}function l(e,t,n,r){(0,i.a)(h,t,n);var a=r/(0,i.i)(h);return(0,i.w)(e,n,h,a)}function c(e,t){var n=e.start,a=e.end,s=t.start,u=t.end,l=(0,i.a)(h,a,n),c=(0,i.a)(p,u,s),y=o(l,c);if(Math.abs(y)<=d)return[];var g=(0,i.a)(f,n,s),_=o(c,g)/y,S=o(l,g)/y;if(_>=0){if(S>=0||t.type===r.LINE)return[(0,i.w)(v,n,l,_)]}else if(e.type===r.LINE&&(S>=0||t.type===r.LINE))return[(0,i.w)(v,n,l,_)];return[]}!function(e){e[e.RAY=0]="RAY",e[e.LINE=1]="LINE"}(r||(r={}));var d=1e-6,h=(0,a.a)(),p=(0,a.a)(),f=(0,a.a)(),v=(0,a.a)()},55793:function(e,t,n){n.d(t,{CJ:function(){return Z},Ho:function(){return x},Jk:function(){return i},Lh:function(){return E},SD:function(){return p},Xi:function(){return m},ZE:function(){return S},fK:function(){return f},hm:function(){return v},pk:function(){return w},qi:function(){return y},sc:function(){return _},z9:function(){return g}});var r,i,a=n(4942),o=n(37762),s=n(16889),u=n(88396),l=n(6394),c=n(11186),d=n(71353),h=n(94163);function p(e,t,n){var r=e.start,a=e.end,o=e.type,s=[],c=(0,u.a)(C,a,r),d=(0,u.a)(L,r,t),h=(0,u.v)(c),p=2*(0,u.h)(c,d),f=p*p-4*h*((0,u.v)(d)-n*n);if(0===f){var v=-p/(2*h);(o===i.PLANE||v>=0)&&s.push((0,u.w)((0,l.a)(),r,c,v))}else if(f>0){var y=Math.sqrt(f),g=(-p+y)/(2*h);(o===i.PLANE||g>=0)&&s.push((0,u.w)((0,l.a)(),r,c,g));var _=(-p-y)/(2*h);(o===i.PLANE||_>=0)&&s.push((0,u.w)((0,l.a)(),r,c,_))}return s}function f(e,t){var n=e.start,r=e.end,a=(0,u.a)(C,r,n),o=(0,c.s)(L,-a[1],a[0],0),s=t.start,l=t.end,p=(0,c.w)(T,l,s),f=(0,c.e)(p,o),v=(0,c.s)(P,n[0],n[1],0),y=(0,c.w)(R,v,s),g=(0,c.e)(y,o);if(Math.abs(f)<x)return Math.abs(g),[];var _=(0,c.z)(N,s,p,g/f);if(t.type===h.SP.RAY){var S=(0,c.w)(V,_,s);if((0,c.e)(S,p)<-x)return[]}if(e.type===i.HALF_PLANE){var Z=(0,u.e)(V,_,n);if((0,u.h)(Z,a)<-x)return[]}return[(0,d.a)(_)]}function v(e,t){return w(k(F,t[2],e),t)}function y(e,t){var n,r=E(k(F,0,e),k(j,0,t)),i=[],a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.push((0,l.d)(s))}}catch(u){a.e(u)}finally{a.f()}return i}function g(e,t){return S(e,k(F,e[2],t))}function _(e,t,n){var r=(0,u.a)(C,e,t),i=n/(0,u.i)(r),a=(0,u.w)((0,d.c)(),t,r,i);return a[2]=e[2],a}function S(e,t){var n=t.start,r=t.end,i=t.type,a=(0,c.w)(C,e,n),o=(0,c.w)(L,r,n),s=(0,c.e)(a,o)/(0,c.e)(o,o);return(0,c.z)((0,d.c)(),n,o,i===h.SP.RAY?Math.max(s,0):s)}function Z(e,t,n){var r=e.start,i=e.end,a=e.type,o=[],s=(0,c.b)(C,i,r),l=(0,u.a)(L,r,t),p=(0,u.v)(s),f=2*(0,u.h)(s,l),v=f*f-4*p*((0,u.v)(l)-n*n);if(0===v){var y=-f/(2*p);(a===h.SP.LINE||y>=0)&&o.push((0,c.z)((0,d.c)(),r,s,y))}else if(v>0){var g=Math.sqrt(v),_=(-f+g)/(2*p);(a===h.SP.LINE||_>=0)&&o.push((0,c.z)((0,d.c)(),r,s,_));var S=(-f-g)/(2*p);(a===h.SP.LINE||S>=0)&&o.push((0,c.z)((0,d.c)(),r,s,S))}return o}function E(e,t){var n=e.start,r=e.end,i=t.start,a=t.end,o=(0,c.w)(C,r,n),u=(0,c.w)(L,a,i),l=(0,c.w)(T,i,n),p=(0,c.f)(P,o,u),f=(0,c.e)(l,p);if(!(0,s.W8)(f,0,x))return[];var v=(0,c.D)(p);if((0,s.W8)(v,0,x))return[];var y=(0,c.f)(R,l,u),g=(0,c.e)(y,p)/v,_=(0,c.z)(N,n,o,g);if(e.type===h.SP.RAY){var S=(0,c.w)(V,_,n);if((0,c.e)(o,S)<-x)return[]}if(t.type===h.SP.RAY){var Z=(0,c.w)(V,_,i);if((0,c.e)(u,Z)<-x)return[]}return[(0,d.a)(_)]}function w(e,t){var n=e.start,r=e.end,i=e.type,a=(0,c.w)(C,t,n),o=(0,c.w)(L,r,n),s=(0,c.f)(T,o,a);if((0,c.D)(s)/(0,c.D)(o)<x)switch(i){case h.SP.LINE:return[(0,d.a)(t)];case h.SP.RAY:return(0,c.e)(o,a)<-x?[]:[(0,d.a)(t)]}return[]}function m(e,t,n){return(0,s.W8)((0,u.k)(n,e),t*t,x)?[(0,d.a)(n)]:[]}function k(e,t,n){var r=n.start,i=n.end,a=n.type;return(0,c.s)(e.start,r[0],r[1],t),(0,c.s)(e.end,i[0],i[1],t),e.type=b[a],e}!function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"}(i||(i={}));var b=(r={},(0,a.Z)(r,i.PLANE,h.SP.LINE),(0,a.Z)(r,i.HALF_PLANE,h.SP.RAY),r),x=1e-6,C=(0,d.c)(),L=(0,d.c)(),T=(0,d.c)(),P=(0,d.c)(),R=(0,d.c)(),N=(0,d.c)(),V=(0,d.c)(),F={start:(0,d.c)(),end:(0,d.c)(),type:h.SP.LINE},j={start:(0,d.c)(),end:(0,d.c)(),type:h.SP.LINE}}}]);
//# sourceMappingURL=38856.d34e07b3.chunk.js.map