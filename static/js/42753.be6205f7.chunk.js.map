{"version":3,"file":"static/js/42753.be6205f7.chunk.js","mappings":"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","sources":["../node_modules/@esri/hub-components/dist/esm/facet-utils-004fb231.js","../node_modules/@esri/hub-components/dist/esm/arcgis-hub-date-range-facet_13.entry.js","../node_modules/@esri/hub-components/dist/esm/conditionalSlot-747e9e93.js","../node_modules/@esri/hub-components/dist/esm/debounce-e9be81f1.js","../node_modules/@esri/hub-components/dist/esm/dom-c989b427.js","../node_modules/@esri/hub-components/dist/esm/guid-ddc4f6da.js","../node_modules/@esri/hub-components/dist/esm/interactive-d9ac4e8f.js","../node_modules/@esri/hub-components/dist/esm/interfaces-ce953c34.js","../node_modules/@esri/hub-components/dist/esm/observers-2b214c17.js","../node_modules/@esri/hub-components/dist/esm/resize-observer-dc6e269e.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/get.js"],"sourcesContent":["/**\n * Create Facets from Aggregations\n *\n * @param aggregations\n * @param operation\n * @returns\n */\nfunction createFacetsFromAggregations(aggregations, operation = 'OR') {\n  // TODO: move into portalSearchItems\n  const result = [];\n  if (aggregations.length) {\n    aggregations.forEach(entry => {\n      // create a facet for each IHubAggregation entry\n      const facet = {\n        label: entry.field,\n        key: entry.field,\n        field: entry.field,\n        display: 'multi-select',\n      };\n      // Create options for each value\n      const options = [];\n      // Some organizations have bypassed AGO and created empty string values \n      // that show up in aggregations (i.e., tags: ['']). As this is invalid,\n      // remove those empty string values here\n      const filterValues = entry.values.filter(fv => !!fv);\n      filterValues.forEach(fv => {\n        const predicate = {};\n        // construct the filter based on the operation\n        const matchKey = operation === 'OR' ? 'any' : 'all';\n        const filterMatchOption = {};\n        filterMatchOption[matchKey] = [fv.value];\n        predicate[entry.field] = filterMatchOption;\n        // construct the FacetOption\n        const fo = {\n          label: fv.value,\n          key: fv.value,\n          count: fv.count,\n          selected: false,\n          predicates: [predicate],\n        };\n        options.push(fo);\n      });\n      facet.options = options;\n      result.push(facet);\n    });\n  }\n  return result;\n}\n\nexport { createFacetsFromAggregations as c };\n","import { r as registerInstance, c as createEvent, h, H as Host, g as getElement, F as Fragment } from './index-0d95d9d4.js';\nimport { d as capitalize, c as cloneObject, e as maybeAdd, f as flattenArray, w as without } from './util-3c40fe6c.js';\nimport { b as bind } from './context-7d8f7366.js';\nimport { g as getProp } from './get-prop-d82e4fa6.js';\nimport { i as intlManager } from './intl-manager-821aea3b.js';\nimport { d as dist } from './index-910a8794.js';\nimport { e as isSiteType } from './compose-bfd77ec4.js';\nimport { I as IMAGE_TYPES, C as CORNERS } from './interfaces-ce953c34.js';\nimport { R as ResizeObserverManager } from './resize-observer-dc6e269e.js';\nimport { c as createFacetsFromAggregations } from './facet-utils-004fb231.js';\nimport { D as DebounceDecoratorFactory } from './debounce-e9be81f1.js';\nimport { A as ArcGISContextManager } from './ArcGISContextManager-4351a238.js';\nimport { h as hubSearch } from './HubGroups-2b55773b.js';\nimport { g as getElementProp, b as getSlotted, a as getElementDir, t as toAriaBoolean, f as focusElement, n as nodeListToArray, j as getRootNode, k as filterDirectChildren } from './dom-c989b427.js';\nimport { c as connectConditionalSlotComponent, d as disconnectConditionalSlotComponent } from './conditionalSlot-747e9e93.js';\nimport { C as CSS_UTILITY } from './resources-919972af.js';\nimport { u as updateHostInteraction } from './interactive-d9ac4e8f.js';\nimport './index-4e91769f.js';\nimport './_commonjsHelpers-11ca3be1.js';\nimport './api-196fe0e3.js';\nimport './get-portal-api-url-ccd8fd10.js';\nimport './get-portal-url-423a76f5.js';\nimport './clean-url-be7c0879.js';\nimport './_internal-89d3dc92.js';\nimport './extent-0f42acfc.js';\nimport './request-c15cc2af.js';\nimport './helpers-a80c0291.js';\nimport './get-structured-license-d1e63636.js';\nimport './get-item-thumbnail-url-7e5ae2fd.js';\nimport './get-item-home-url-9ff2898b.js';\nimport './get-with-default-6db049d8.js';\nimport './getPortalBaseFromOrgUrl-6a5781aa.js';\nimport './tslib.es6-3669ad41.js';\nimport './logger-0c7a68de.js';\nimport './get-portal-06f7947b.js';\nimport './getPropertyMap-598a7bb8.js';\nimport './search-3af9e278.js';\nimport './generic-search-069e22da.js';\nimport './append-custom-params-fd9b7e72.js';\nimport './create-7cf3c372.js';\nimport './get-f2cd18e7.js';\nimport './OperationError-85fd80c7.js';\nimport './update-fec93fc5.js';\nimport './fail-safe-1c23dad8.js';\nimport './set-prop-91329c47.js';\nimport './ProjectBusinessRules-bb655b17.js';\nimport './utils-b3c19803.js';\nimport './UserSession-d3a97494.js';\nimport './_enrichments-7716cdcc.js';\nimport './getService-49b539e3.js';\nimport './tslib.es6-b2e8cdb8.js';\nimport './HubSites-95889869.js';\nimport './is-guid-8127621d.js';\nimport './SiteBusinessRules-05d0a02f.js';\nimport './fetch-a8e38b36.js';\nimport './search-users-5cfad933.js';\nimport './request-f9ca03b5.js';\nimport './get-859a2960.js';\nimport './guid-ddc4f6da.js';\nimport './observers-2b214c17.js';\n\n/**\n * Remove empty properties from an object graph\n * @param {Object} obj Object to remove empty/null properties from\n */\nfunction removeEmptyProps(obj) {\n    // http://stackoverflow.com/questions/286141/remove-blank-attributes-from-an-object-in-javascript\n    Object.keys(obj).forEach(key => {\n        if (obj[key] && typeof obj[key] === \"object\") {\n            removeEmptyProps(obj[key]);\n        }\n        else if (obj[key] == null) {\n            delete obj[key];\n        }\n    });\n    return obj;\n}\n\n/**\n * Capitalize every word in a sentence\n * @param {string} value\n * @returns {string} a sentence with every word being capitalized\n */\nfunction titleize$1(value) {\n    return value\n        .replace(/\\s\\s+/g, \" \")\n        .split(\" \")\n        .map((k) => capitalize(k))\n        .join(\" \");\n}\n\n/**\n * Searches an array of IFacets and creates a new array of only IListFacets\n *\n * @param facets array of facets to search\n * @returns all list facets within the array\n */\nfunction getListFacets(facets = []) {\n  const listFacets = facets.filter(isListFacet);\n  return listFacets;\n}\n/**\n * Returns whether or not a facet is of subtype IListFacet\n * @param facet\n */\nfunction isListFacet(facet) {\n  return facet.display === 'multi-select' || facet.display === 'single-select';\n}\n/**\n * Searches an array of IFacets and creates a new array of only IDateRangeFacets\n *\n * @param facets array of facets to search\n * @returns all date-range facets within the array\n */\nfunction getDateRangeFacets(facets = []) {\n  const dateRangeFacets = facets.filter(isDateRangeFacet);\n  return dateRangeFacets;\n}\n/**\n * Returns whether or not a facet is of subtype IDateRangeFacet\n * @param facet\n */\nfunction isDateRangeFacet(facet) {\n  return facet.display === 'date-range';\n}\n/**\n * Searches an array of IFacets and creates a new array of only ITreeFacets\n *\n * @param facets array of facets to search\n * @returns all date-range facets within the array\n */\nfunction getTreeFacets(facets = []) {\n  const treeFacets = facets.filter(isTreeFacet);\n  return treeFacets;\n}\n/**\n * Returns whether or not a facet is of subtype ITreeFacet\n * @param facet\n */\nfunction isTreeFacet(facet) {\n  return facet.display === 'tree';\n}\n/**\n * Searches an array of IFacets and creates a new array of only IOptionsBasedFacets\n * (i.e, single-select, multi-select, tree, etc.)\n *\n * @param facets array of facets to search\n * @returns all options-based facets within the array\n */\nfunction getOptionsBasedFacets(facets = []) {\n  const optionsBasedFacets = facets.filter(isOptionsBasedFacet);\n  return optionsBasedFacets;\n}\n/**\n * Returns whether or not a facet is of subtype IOptionsBasedFacet\n * (i.e, single-select, multi-select, tree, etc.)\n *\n * @param facet\n */\nfunction isOptionsBasedFacet(facet) {\n  return isListFacet(facet) || isTreeFacet(facet);\n}\n/**\n * Apply IGalleryState to an ICollection\n *\n * Typically used in a Gallery or Catalog component to\n * set the inital state, based on values deserialized\n * from a query string\n * @param collection\n * @param state\n * @returns\n */\nfunction applyGalleryState(state, serializedState) {\n  const updated = cloneObject(state);\n  // Apply default query\n  if (serializedState.query) {\n    updated.query = serializedState.query;\n  }\n  else if (serializedState.query === null) {\n    // Null indicates the absence of a query.\n    // Set to empty string for easier management.\n    updated.query = '';\n  }\n  // Apply Sort State\n  updated.sort = applySortState(updated.sort, serializedState.sort);\n  // Look for state props for the facets and apply them\n  updated.facets = updated.facets.map(facet => {\n    // see if there is a value for this facet on the state\n    if (serializedState[facet.key]) {\n      const facetState = {};\n      facetState[facet.key] = serializedState[facet.key];\n      return applyFacetState(facet, facetState);\n    }\n    else {\n      // Ensure all options are not selected because\n      // no value for the facet was included in the state\n      return resetFacet(facet);\n    }\n  });\n  // TODO: See if we can push this logic deeper\n  // Now things get interesting...\n  // For dyanmic facets, the state may contain values not in the\n  // current set of facet options (i.e. when the component first loads, and\n  // the dynamic facet has no options). Thus, we need to locate these \"missing\"\n  // entries and add them to the facets.\n  Object.keys(serializedState).forEach(key => {\n    var _a;\n    // skip non-facet keys query, sort\n    if (!['query', 'sort'].includes(key)) {\n      // see if there is a facet for the key\n      const facet = updated.facets.find(f => f.key === key);\n      switch (facet.display) {\n        case 'single-select':\n        case 'multi-select':\n          // see if there are selected options for the all the values\n          const optionKeys = ((_a = state[key]) === null || _a === void 0 ? void 0 : _a.split(',')) || [];\n          optionKeys.forEach(optionKey => {\n            // see if it exists\n            const option = facet.options.find(o => o.key === optionKey);\n            if (!option) {\n              // add one. See large comment above\n              const opt = {\n                key: optionKey,\n                label: optionKey,\n                selected: true,\n                predicates: [],\n              };\n              const p = {};\n              p[key] = optionKey;\n              opt.predicates.push(p);\n              facet.options.push(opt);\n            }\n          });\n          break;\n      }\n    }\n  });\n  return updated;\n}\n/**\n * Resets a facet to its default (valueless) state\n * @param facet facet to reset\n * @returns a resetted copy of the facet\n */\nfunction resetFacet(facet) {\n  let resetted = cloneObject(facet);\n  switch (facet.display) {\n    case 'single-select':\n    case 'multi-select':\n      resetted = resetListFacet(facet);\n      break;\n    case 'date-range':\n      resetted = resetDateRangeFacet(facet);\n  }\n  return resetted;\n}\n/**\n * unchecks all the options of a list facet\n * @param facet list facet to reset\n * @returns a resetted copy of the facet\n */\nfunction resetListFacet(facet) {\n  const resetted = cloneObject(facet);\n  resetted.options.forEach(opt => {\n    opt.selected = false;\n  });\n  return resetted;\n}\n/**\n * clears the date values of a date-range facet\n * @param facet date-range facet to reset\n * @returns a resetted copy of the facet\n */\nfunction resetDateRangeFacet(facet) {\n  const resetted = cloneObject(facet);\n  resetted.value = { from: null, to: null };\n  return resetted;\n}\n/**\n * Serialize the current state of a collection into a hash that\n * can be converted into a query string\n * @param collection\n * @returns\n */\nfunction serializeGalleryState(state) {\n  var _a;\n  const serializedState = {};\n  if (state.query) {\n    serializedState.query = state.query;\n  }\n  if ((_a = state.sort) === null || _a === void 0 ? void 0 : _a.attribute) {\n    serializedState.sort = serializeSortState(state.sort);\n  }\n  if (state.layout) {\n    serializedState.layout = state.layout;\n  }\n  const facetState = (state.facets || []).reduce((s, facet) => {\n    return Object.assign(Object.assign({}, s), serializeFacetState(facet));\n  }, {});\n  return Object.assign(Object.assign({}, serializedState), facetState);\n}\n/**\n * TODO: Move to hub.js (and maybe make more generic to objects in general)\n *\n * Converts a serialized gallery state object into a query string.\n * Returns empty string if the object is empty.\n *\n * @param serializedState\n * @returns query string\n */\nfunction convertToQueryString(serializedState) {\n  const queryString = Object.entries(serializedState)\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n  return queryString && `?${queryString}`;\n}\n/**\n * Apply the sortState to SortOptions\n *\n * @param sortOptions\n * @param sortState\n * @returns\n */\nfunction applySortState(sortOptions, sortState) {\n  const updated = cloneObject(sortOptions);\n  if (sortState) {\n    const [label, attribute, order] = sortState.split('|');\n    updated.label = label;\n    updated.attribute = attribute;\n    updated.order = order;\n  }\n  else if (sortState === null) {\n    updated.attribute = null;\n    updated.order = null;\n  }\n  return updated;\n}\n/**\n * Apply FacetState to a Facet\n * @param facet\n * @param state\n * @returns\n */\nfunction applyFacetState(facet, state) {\n  let updated = cloneObject(facet);\n  switch (facet.display) {\n    case 'single-select':\n    case 'multi-select':\n      updated = applyListFacetState(facet, state);\n      break;\n    case 'tree':\n      updated = applyTreeFacetState(facet, state);\n      break;\n    case 'date-range':\n      updated = applyDateRangeFacetState(facet, state);\n  }\n  return updated;\n}\n/**\n * Apply the Facet State onto a list facet (i.e., single-select, multi-select)\n *\n * @private\n * @param facet\n * @param state\n * @returns\n */\nfunction applyListFacetState(facet, state) {\n  const updated = cloneObject(facet);\n  const stateEntry = state[facet.key] || '';\n  // If single select, assume the entire state entry is a single key\n  const selectedKeys = facet.display === 'single-select' ? [stateEntry] : stateEntry.split(',');\n  updated.options = updated.options.map(o => {\n    o.selected = selectedKeys.includes(o.key);\n    return o;\n  });\n  return updated;\n}\n/**\n * Apply the Facet State onto a tree facet\n *\n * @private\n * @param facet\n * @param state\n * @returns\n */\nfunction applyTreeFacetState(facet, state) {\n  const updated = cloneObject(facet);\n  const stateEntry = state[facet.key] || '';\n  // New gallery experiences refer to a category by a fully qualified path (e.g., `/categories/parent/child`).\n  // However, legacy code often refers to a category by the last segment of a path (e.g., `child`).\n  // To maintain backwards compatibility, we assume the keys selected are partial keys that refer to \n  // the end of a path\n  const selectedPartialKeys = stateEntry.split(',');\n  // As legacy code did not differenciate between nested categories that ended\n  // in the same value, mark _all_ matching categories as selected.\n  //\n  // Example:\n  // partialKey is 'transportation'\n  // options are '/categories/planning/transportation' and '/categories/city/transportation'\n  // As a result, _both_ options would be selected\n  updated.options = updated.options.map(o => {\n    o.selected = !!selectedPartialKeys.find((pk) => o.key.endsWith(pk));\n    return o;\n  });\n  return updated;\n}\n/**\n * Serialize options-based facet (i.e. multi-select, tree, etc.) into IFacetState\n *\n * @private\n * @param facet\n * @returns\n */\nfunction serializeOptionsBasedFacetState(facet) {\n  const state = {};\n  const selected = facet.options.filter(o => o.selected).map(o => o.key);\n  // If single select, only serialize first selected key\n  const value = facet.display === 'single-select' ? selected[0] : selected.join(',');\n  if (value) {\n    state[facet.key] = value;\n  }\n  else {\n    state[facet.key] = null;\n  }\n  return state;\n}\nfunction isValidDateRange(range) {\n  const from = Date.parse(range.from);\n  const to = Date.parse(range.to);\n  // will return false if either are NaN\n  return from < to;\n}\nfunction applyDateRangeFacetState(facet, state) {\n  var _a;\n  const updated = cloneObject(facet);\n  const [from, to] = ((_a = state[facet.key]) === null || _a === void 0 ? void 0 : _a.split('|')) || [];\n  const range = { from, to };\n  if (isValidDateRange(range)) {\n    updated.value = range;\n  }\n  return updated;\n}\nfunction serializeDateRangeFacetState(facet) {\n  var _a, _b;\n  const state = {};\n  const startDate = (_a = facet.value) === null || _a === void 0 ? void 0 : _a.from;\n  const endDate = (_b = facet.value) === null || _b === void 0 ? void 0 : _b.to;\n  if (startDate && endDate) {\n    state[facet.key] = `${startDate}|${endDate}`;\n  }\n  else {\n    state[facet.key] = null;\n  }\n  return state;\n}\n/**\n * Serialize the state of the SortOption into a key/value pair\n *\n * Called from the Sort component\n * @param sort\n * @returns\n */\nfunction serializeSortState(sort) {\n  return `${sort.label}|${sort.attribute}|${sort.order}`;\n}\n/**\n * Serialize the state of a facet into a key/value pair\n *\n * Called from the various facet components\n * @param facet\n * @returns\n */\nfunction serializeFacetState(facet) {\n  let state = {};\n  switch (facet.display) {\n    case 'single-select':\n    case 'multi-select':\n    case 'tree':\n      state = serializeOptionsBasedFacetState(facet);\n      break;\n    case 'date-range':\n      state = serializeDateRangeFacetState(facet);\n  }\n  return state;\n}\n/**\n * Converts a string to titlecase\n * (i.e., only first letters of words are capitalized)\n *\n * TODO: Move to Hub.js\n */\nfunction titleize(phrase) {\n  return phrase\n    .toLowerCase()\n    .split(' ')\n    .map(word => capitalize(word))\n    .join(' ');\n}\n/**\n * Remove (:count) in a label, regardless of language direction\n */\nfunction removeCountLabel(label) {\n  return label\n    .replace(/\\(\\d+\\)/, '')\n    .replace(`\\u200E`, '') // special character for RTL languages\n    .trim();\n}\n/**\n * Adds (:count) to a label while accounting for language direction\n */\nfunction addCountToLabel(label, count, intl) {\n  return count == null\n    ? label\n    : intl.direction === 'rtl'\n      // If we don't append \\u200E, (:count) will still appear AFTER the title\n      // Looks like the browser doesn't like sentences starting with \"(\" in RTL \n      ? `\\u200E(${count}) ${label}`\n      : `${label} (${count})`;\n}\n/**\n * Formats the option labels for certain common dynamic facets. For example:\n *\n * - Some options are titlecased\n * - Some options are uppercased\n * - Some options are formally translated\n * - (:count) is appended or prepended to options (depending on the language)\n *\n * @param facet dynamic list facet (generated from aggregations)\n * @param intl the intl service for the component\n * @returns a copy of formatted options for the given facet\n */\nfunction formatCommonDynamicOptions(facet, intl) {\n  let formattedOptions = cloneObject(facet.options);\n  switch (facet.field) {\n    case 'type':\n      formattedOptions = formattedOptions.map(opt => {\n        const allCapsTypes = ['csv', 'pdf', 'kml', 'wfs', 'wms'];\n        const formattedLabel = allCapsTypes.includes(opt.key) ? opt.key.toUpperCase() : titleize(opt.key);\n        opt.label = formattedLabel;\n        return opt;\n      });\n      break;\n    case 'access':\n      formattedOptions = formattedOptions.map(opt => {\n        const translationKey = removeCountLabel(opt.label).toLowerCase();\n        opt.label = intl.t(`facets.access.${translationKey}`);\n        return opt;\n      });\n    case 'categories':\n      formattedOptions = formattedOptions.map(opt => {\n        const pathSegments = opt.label.split('/');\n        opt.label = pathSegments[pathSegments.length - 1];\n        return opt;\n      });\n      break;\n  }\n  // Append or Prepend (:count) to the label\n  formattedOptions = formattedOptions.map(opt => {\n    opt.label = addCountToLabel(opt.label, opt.count, intl);\n    return opt;\n  });\n  return formattedOptions;\n}\n\nconst arcgisHubDateRangeFacetCss = \":host{display:block}\";\n\nconst ArcgisHubDateRangeFacet = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubDateRangeFacetChange = createEvent(this, \"arcgisHubDateRangeFacetChange\", 7);\n    bind('handleCalciteInputDatePickerRef');\n  }\n  handleDateRangeChange(event) {\n    event.preventDefault();\n    const startDate = getProp(event, 'detail.startDate');\n    const endDate = getProp(event, 'detail.endDate');\n    // TODO: Remove once the date picker defaults \n    // the endDate's time to the end of the day, \n    // _not_ the beginning of the day\n    endDate === null || endDate === void 0 ? void 0 : endDate.setHours(23, 59, 59, 999);\n    const range = {\n      from: startDate === null || startDate === void 0 ? void 0 : startDate.toISOString(),\n      to: endDate === null || endDate === void 0 ? void 0 : endDate.toISOString()\n    };\n    // range has been selected\n    if (isValidDateRange(range)) {\n      this.arcgisHubDateRangeFacetChange.emit({\n        key: this.facet.key,\n        value: range,\n      });\n    }\n    // range has been cleared\n    else if (!startDate && !endDate) {\n      this.arcgisHubDateRangeFacetChange.emit({\n        key: this.facet.key,\n        value: {\n          from: null,\n          to: null,\n        }\n      });\n    }\n  }\n  // workaround for pointer-events issue introduced by calcite-components v1.0.0-beta.98\n  // TODO: try removing next time we bump calcite-components\n  handleCalciteInputDatePickerRef(inputDatePicker) {\n    if (inputDatePicker.shadowRoot && !inputDatePicker.shadowRoot.querySelector('style[data-hub]')) {\n      const style = document.createElement(\"style\");\n      style.dataset.hub = \"\";\n      style.innerHTML = \".menu-container { pointer-events: auto !important; }\";\n      inputDatePicker.shadowRoot.appendChild(style);\n    }\n  }\n  render() {\n    const startDate = getProp(this.facet, 'value.from') || null;\n    const endDate = getProp(this.facet, 'value.to') || null;\n    const maxDate = new Date();\n    return (h(Host, { \"data-element\": \"date-range-facet\" }, h(\"calcite-input-date-picker\", { layout: \"horizontal\", max: maxDate.toISOString(), range: true, ref: this.handleCalciteInputDatePickerRef, value: [startDate, endDate] })));\n  }\n};\nArcgisHubDateRangeFacet.style = arcgisHubDateRangeFacetCss;\n\nconst arcgisHubEmptyStateCss = \":host{display:flex;flex-direction:column;align-items:center;gap:2rem}calcite-icon{width:auto;height:16rem}\";\n\nconst ArcgisHubEmptyState = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.message = \"No results found.\";\n  }\n  render() {\n    return (h(Host, null, h(\"calcite-icon\", { icon: 'file-magnifying-glass' }), h(\"h3\", null, this.message)));\n  }\n};\nArcgisHubEmptyState.style = arcgisHubEmptyStateCss;\n\n/**\n * Converts an array of facet options into a tree.\n *\n * Implementation notes:\n * 1) The function assumes that all option keys are prefixed with a `/` (e.g. `/categories/business`)\n * 2) If the final tree's root only has one child, then the child is returned instead\n * 3) Due to limitations of the calcite-tree component, parent nodes cannot be selected\n *    without selecting all their children. To cirumvent this, we add a copy of the node\n *    to the parent's child list and remove the option from the parent node.\n *\n * @param options flat array of options to covert\n * @returns a tree representation of the options\n */\nconst createTree = (options) => {\n  const rawTree = createRawTree(options);\n  // If the tree only has 1 child, make the child the new top-level node\n  const children = getChildren(rawTree);\n  const resultTree = children.length === 1 ? children[0] : rawTree;\n  // Workaround for allowing top-level to be selected without selecting all other children\n  return addParentSelfNodes(resultTree);\n};\nconst createRawTree = (options) => {\n  const parentTree = { label: 'root', children: {} };\n  options.forEach(opt => {\n    const path = opt.key.slice(1).split('/');\n    addTreeBranches(parentTree, opt, path);\n  });\n  return parentTree;\n};\n/**\n * Akin to mkdir -p, this function recursively traverses\n * a tree path and creates the final indicated node. Also\n * creates intermediary nodes if they do not exist.\n *\n * @param subtree the current root node\n * @param facetOption the facet option to be added to the final node\n * @param path the remaining path to the final node\n */\nconst addTreeBranches = (subtree, facetOption, path) => {\n  if (!path.length) {\n    subtree.label = facetOption.label;\n    subtree.option = facetOption;\n  }\n  else {\n    const nextPath = path.shift();\n    const nextSubTree = subtree.children[nextPath] || { label: nextPath, children: {} };\n    subtree.children[nextPath] = nextSubTree;\n    addTreeBranches(nextSubTree, facetOption, path);\n  }\n};\n/**\n * Returns whether a tree has any child nodes\n */\nconst hasChildren = (tree) => !!getChildren(tree).length;\n/**\n * Returns an array of child nodes\n */\nconst getChildren = (tree) => Object.values(tree.children);\n/**\n * Returns the parent-self child of a tree (if exists)\n */\nconst getParentSelfChild = (tree) => {\n  return getChildren(tree).find(child => child.isParentSelf);\n};\n/**\n * Returns whether an entire tree has been selected\n */\nconst isTreeSelected = (tree) => {\n  var _a;\n  return (hasChildren(tree))\n    // Parent node, verify that all children are selected\n    ? getChildren(tree).every(isTreeSelected)\n    // Leaf node, return whether individual option is selected\n    : !!((_a = tree.option) === null || _a === void 0 ? void 0 : _a.selected);\n};\n/**\n * Due to limitations of the calcite-tree component, parent nodes cannot be selected\n * without selecting all their children. To cirumvent the issue, this function traverses\n * a tree and for every parent node, appends a copy of the node to the parent's\n * child list and REMOVES the attached option from the parent. The copy becomes a\n * standalone selectable option.\n *\n * Note: the topmost root node is assumed to be solely an entrypoint into the tree\n * and will not have a parent-self copy added\n *\n * @param rootTree the topmost root of the tree\n * @returns the tree with parent-self nodes attached;\n */\nconst addParentSelfNodes = (rootTree) => {\n  // We don't want to append a parent self node to the topmost \n  // root of the tree, as it's mainly just an entrypoint. Actually\n  // add parent-self nodes to the children instead.\n  getChildren(rootTree).forEach(child => {\n    addParentSelfNodesToSubtree(child);\n  });\n  return rootTree;\n};\n/**\n * Traverses a tree and adds parent-self nodes. See `addParentSelfNodes`\n * for a description of why this this is needed.\n *\n * @param tree current root node\n */\nconst addParentSelfNodesToSubtree = (tree) => {\n  if (hasChildren(tree)) {\n    // Process other children BEFORE adding self node\n    getChildren(tree).forEach(child => {\n      addParentSelfNodesToSubtree(child);\n    });\n    // Add the self node. Note that creating a new object \n    // will make the self node the first child in the list\n    tree.children = Object.assign({ [tree.label]: {\n        label: tree.label,\n        children: {},\n        option: tree.option,\n        isParentSelf: true\n      } }, tree.children);\n    // Delete the option from parent node (prevents duplicate selection)\n    delete tree.option;\n  }\n};\n/**\n * Recursively generates the jsx for displaying an IFacetOptionTree\n *\n * TODO: If this function starts creating performance problems, consider rendering\n * the tree from the leaves upward instead of from the root downward.\n *\n * @param subtree current subtree node\n * @returns a fully rendered subtree\n */\nconst renderSubtree = (subtree, topLevelIndex) => {\n  const { option } = subtree;\n  const key = option === null || option === void 0 ? void 0 : option.key;\n  const selected = option\n    ? option.selected\n    /**\n     * _Sigh_ All this to get around a rendering bug. If this branch is\n     * hit, we assume that the subtree is a top-level node. If this is _not_\n     * the first time the tree has been rendered and any children have changed,\n     * the top-level node's render function WILL NOT RE-RUN. As a consequence,\n     * the selected state of the top level gets out of sync with it's children\n     * and we need to manually re-sync the selected state.\n     *\n     * NOTE: This will not cause the node to re-render if it was previously in\n     * an indeterminate state. This is a bug within calcite and unfortunately\n     * there is no good workaround. See this comment:\n     * https://devtopia.esri.com/dc/hub/issues/5374#issuecomment-3928936\n     */\n    : isTreeSelected(subtree);\n  // Set the telemetry index for the option (if available)\n  option && (option._telemetryIndex = topLevelIndex);\n  return h(\"calcite-tree-item\", { \"data-key\": key, selected: selected },\n    h(\"div\", { class: \"option-label\" }, subtree.label),\n    hasChildren(subtree) &&\n      h(\"calcite-tree\", { slot: \"children\" }, getChildren(subtree).map(childTree => renderSubtree(childTree, topLevelIndex))));\n};\nconst getSelectionDifference = (oldKeys, newKeys) => {\n  const removedKeys = oldKeys.filter(o => !newKeys.includes(o));\n  const addedKeys = newKeys.filter(n => !oldKeys.includes(n));\n  let result = null;\n  if (removedKeys.length) {\n    result = { operation: 'removed', keys: removedKeys };\n  }\n  else if (addedKeys.length) {\n    result = { operation: 'added', keys: addedKeys };\n  }\n  return result;\n};\nconst getTreeOptionLabel = (key) => {\n  const segments = key.split('/');\n  return segments[segments.length - 1];\n};\n\n/**\n * Traverses each facet and calculates the filter chip models based on current facet values\n *\n * @param facets array of facets to compute chips from\n * @returns a flat array of all active chips\n */\nconst getActiveChips = (facets) => {\n  return facets.reduce((allChips, facet) => {\n    let facetChips = [];\n    switch (facet.display) {\n      case 'multi-select':\n        facetChips = getMultiSelectFacetChips(facet);\n        break;\n      case 'tree':\n        facetChips = getTreeFacetChips(facet);\n        break;\n    }\n    return [...allChips, ...facetChips];\n  }, []);\n};\n/**\n * Returns filter chips based on the facet's currently selected options\n *\n * @param facet\n * @returns an array of active chips for the facet\n */\nconst getMultiSelectFacetChips = (facet) => {\n  return facet.options\n    .filter(o => o.selected)\n    .map(opt => {\n    const optionLabel = removeCountLabel(opt.label);\n    return {\n      key: facet.key,\n      label: facet.label,\n      optionKey: opt.key,\n      optionLabel\n    };\n  });\n};\n/**\n * Returns filtered chips for a tree facet based on selected options.\n * The following rules determine whether an option is turned into a chip:\n * - If all subcategories of a parent category are selected, ONLY return a chip for the parent category\n * - Else, return a chip for each selected subcategory\n *\n * @param facet\n * @returns an array of active chips for the facet\n */\nconst getTreeFacetChips = (facet) => {\n  const tree = createTree(facet.options);\n  return getSubtreeChips(facet, tree);\n};\n/**\n * Recursive helper that gets all chips for a sub tree. See `getTreeFacetChips` for an\n * explanation of the business logic\n *\n * @param facet\n * @param tree current subtree\n * @returns all chips for the current subtree\n */\nfunction getSubtreeChips(facet, tree) {\n  const parentSelf = getParentSelfChild(tree);\n  const chipOption = (parentSelf === null || parentSelf === void 0 ? void 0 : parentSelf.option) || tree.option;\n  return isTreeSelected(tree) && chipOption\n    ? [{\n        key: facet.key,\n        label: facet.label,\n        optionKey: chipOption.key,\n        optionLabel: removeCountLabel(chipOption.label)\n      }]\n    : getChildren(tree).map((child) => getSubtreeChips(facet, child)).flat();\n}\n/**\n * Creates a copy of the facet and deselects options / values that correspond to the chip.\n * Also returns the keys of dismissed options\n *\n * @param facet\n * @param chip option to deselect\n * @returns a modified and cloned facet\n */\nconst dismissFacetChip = (facet, chip) => {\n  let response;\n  switch (facet.display) {\n    case 'multi-select':\n      response = dismissMultiSelectChip(facet, chip);\n      break;\n    case 'tree':\n      response = dismissTreeChip(facet, chip);\n      break;\n  }\n  return response;\n};\n/**\n * De-selects the facet option corresponding to the provided filter chip\n * and returns the keys of dismissed options\n * @param facet\n * @param chip option to de-select\n * @returns the cloned, modified facet\n */\nconst dismissMultiSelectChip = (facet, chip) => {\n  const updated = cloneObject(facet);\n  updated.options.forEach((option) => {\n    if (option.key === chip.optionKey) {\n      option.selected = false;\n    }\n  });\n  return {\n    updatedFacet: updated,\n    dismissedKeys: [chip.optionKey]\n  };\n};\n/**\n * De-selects facet options corresponding to the provided filter chip and returns the keys of dismissed options\n * The following rules determine which options will be de-selected with the chip:\n * - If the chip corresponds to a parent category AND all subcategories are selected,\n * de-select the parent category and all subcategories\n * - Else if the chip corresponds to a parent category but not all subcategories are\n * selected, ONLY deselect the parent category\n * - Else deselect the subcategory\n *\n * @param facet\n * @param chip reference option for the de-selection process\n * @returns the cloned, modified facet\n */\nconst dismissTreeChip = (facet, chip) => {\n  const updatedFacet = cloneObject(facet);\n  const option = updatedFacet.options.find(opt => opt.key === chip.optionKey);\n  const optionChildren = updatedFacet.options.filter(opt => opt.key !== chip.optionKey && opt.key.includes(chip.optionKey));\n  const allChildrenSelected = !!optionChildren.length && optionChildren.every(child => child.selected);\n  const dismissedKeys = [];\n  // Unselect parent option, if exists\n  if (option) {\n    option.selected = false;\n    dismissedKeys.push(option.key);\n  }\n  // If all children were previously selected, unselect them\n  if (allChildrenSelected) {\n    optionChildren.forEach(child => {\n      child.selected = false;\n      dismissedKeys.push(child.key);\n    });\n  }\n  return { updatedFacet, dismissedKeys };\n};\nconst formatDismissedKeys = (facet, keys) => {\n  const formatted = isTreeFacet(facet) ? keys.map(getTreeOptionLabel) : keys;\n  return formatted.join(', ');\n};\n\nconst arcgisHubFacetListCss = \":host{display:block}.header-container{display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between}.header-container calcite-button{font-size:1rem}calcite-accordion{border-width:0px;border-top-width:1px;border-style:solid;border-color:var(--calcite-ui-border-2)}calcite-chip{margin-bottom:0.5rem;max-width:100%}calcite-chip:nth-last-of-type(1){margin-bottom:1.25rem}.reset-facets-button{--calcite-font-size--1:var(--hub-gallery-font-size-large)}.additional-facet-container{--calcite-font-size--1:var(--calcite-font-size-0)}\";\n\nconst ArcgisHubFacetList = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubFacetListChange = createEvent(this, \"arcgisHubFacetListChange\", 7);\n    this.arcgisHubFacetListReset = createEvent(this, \"arcgisHubFacetListReset\", 7);\n    this.hubTelemetry = createEvent(this, \"hubTelemetry\", 7);\n    /**\n     * Show/hide the filter chips\n     */\n    this.showChips = false;\n    /**\n     * Facets to render\n     */\n    this.facets = [];\n    /**\n     * Whether or not to emit telemetry\n     */\n    this.disableTelemetry = false;\n    bind(this, 'resetFacets');\n  }\n  async componentWillLoad() {\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n  }\n  /**\n   * Wrapper for emiting telemetry\n   */\n  maybeSendTelemetry(data) {\n    if (!this.disableTelemetry) {\n      this.hubTelemetry.emit(data);\n    }\n  }\n  // TODO: Add other listeners for different types of Facets (map, dates etc)\n  /**\n   * Handles changes in the child facets\n   * The events flow up from the child components, and this function applies\n   * the changes to the facets, and updates the _chips array. Resulting changes\n   * then flow back down to the Facets.\n   * @param evt\n   */\n  onListFacetChange(evt) {\n    evt.preventDefault();\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.filter), { details: evt.detail.checked\n        ? `${evt.detail.key}: ${evt.detail.optionKey}`\n        : `${evt.detail.key}: Removed ${evt.detail.optionKey}`, element: evt.detail.key, position: evt.detail.optionIndex }));\n    // update the facets\n    // find and clone the facet that we're updating...\n    const facet = getListFacets(this.facets).find(f => f.key === evt.detail.key);\n    // update the state of the option\n    facet.options = facet.options.map((fo) => {\n      if (fo.key === evt.detail.optionKey) {\n        fo.selected = evt.detail.checked;\n      }\n      else {\n        // For single-select, we must set all the other options to \n        // selected: false\n        if (facet.display === \"single-select\") {\n          fo.selected = false;\n        }\n      }\n      return fo;\n    });\n    this.arcgisHubFacetListChange.emit(facet);\n  }\n  onTreeFacetChange(evt) {\n    const facet = getTreeFacets(this.facets).find(f => f.key === evt.detail.key);\n    // Send Telemetry\n    const { optionKeys } = evt.detail;\n    const formattedOptionKeys = optionKeys.map(getTreeOptionLabel).join(', ');\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.filter), { details: evt.detail.selected\n        ? `${evt.detail.key}: ${formattedOptionKeys}`\n        : `${evt.detail.key}: Removed ${formattedOptionKeys}`, element: evt.detail.key, position: evt.detail.topLevelIndex }));\n    // Update the state of the options\n    facet.options = facet.options.map((fo) => {\n      if (optionKeys.includes(fo.key)) {\n        fo.selected = evt.detail.selected;\n      }\n      return fo;\n    });\n    this.arcgisHubFacetListChange.emit(facet);\n  }\n  onDateRangeFacetChange(event) {\n    const { detail: { key, value } } = event;\n    const facet = getDateRangeFacets(this.facets).find((f) => f.key === key);\n    // send telemetry\n    if (isValidDateRange(value)) {\n      this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n        .category.interaction\n        .action.search\n        .label.filter), { details: dist.constants.details.DATE_UPDATED, element: facet.key }));\n    }\n    // update state of the option\n    facet.value = value;\n    this.arcgisHubFacetListChange.emit(facet);\n  }\n  /**\n   * Handles the removal of a chip.\n   * It resets the selected state of the corresponding facet option, and updates the\n   * chips array.\n   * @param evt\n   */\n  onChipDismiss(evt) {\n    evt.preventDefault();\n    const chip = evt.detail['data-chip'];\n    const index = this.facets.findIndex(f => f.key === chip.key);\n    const { updatedFacet, dismissedKeys } = dismissFacetChip(this.facets[index], chip);\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.filter), { details: `${updatedFacet.key}: Removed ${formatDismissedKeys(updatedFacet, dismissedKeys)}`, element: dist.constants.element.CHIPS }));\n    this.facets[index] = updatedFacet;\n    this.arcgisHubFacetListChange.emit(updatedFacet);\n  }\n  /**\n   * Reset the facets to the original state\n   */\n  resetFacets() {\n    // Problem: We can't send updates state on this b/c we are not resetting\n    // the facets in this component - we do that from the Gallery\n    // but the Gallery does not know how to update the state on it's own\n    this.arcgisHubFacetListReset.emit();\n  }\n  /**\n   * Get the chips to display, based on the facet state\n   */\n  get chips() {\n    return getActiveChips(this.facets);\n  }\n  /**\n   * Render the Facets\n   * @returns\n   */\n  renderFacets() {\n    return this.facets.map(facet => {\n      // Don't render the facet accordion if it's options based facet with 1 or no options\n      const shouldRenderFacet = !isOptionsBasedFacet(facet) || facet.options.length > 1;\n      return shouldRenderFacet\n        ? h(\"calcite-accordion-item\", { active: facet.state !== \"closed\", \"item-title\": facet.label, key: facet.key }, this.renderFacetComponent(facet))\n        : null;\n    });\n  }\n  renderFacetComponent(facet) {\n    switch (facet.display) {\n      case 'single-select':\n      case 'multi-select':\n        return h(\"arcgis-hub-facet-options\", { facet: facet });\n      case 'date-range':\n        return h(\"arcgis-hub-date-range-facet\", { facet: facet });\n      case 'tree':\n        return h(\"arcgis-hub-tree-facet\", { facet: facet });\n    }\n  }\n  /**\n   * Render the Chips\n   * @returns\n   */\n  renderChips() {\n    return this.chips.map((chip) => {\n      const label = `${chip.label}: ${chip.optionLabel}`;\n      return h(\"calcite-chip\", { \"data-chip\": chip, dismissible: true, key: chip.optionKey, scale: \"m\", value: label }, label);\n    });\n  }\n  /**\n   * Main render\n   * @returns\n   */\n  render() {\n    // render nothing if there are no facets\n    if (this.facets.length) {\n      return (h(Host, null, h(\"div\", { class: \"header-container\", id: \"filters-header\" }, h(\"calcite-button\", { appearance: \"transparent\", \"aria-labelledby\": \"filters-header\", class: \"reset-facets-button\", color: \"blue\", onClick: this.resetFacets }, this.intl.t('reset')), h(\"slot\", { name: \"header\" })), this.showChips ? this.renderChips() : \"\", h(\"calcite-accordion\", { appearance: \"minimal\", scale: 'l' }, h(\"div\", { class: \"additional-facet-container\" }, h(\"slot\", { name: \"additional-facet\" })), this.renderFacets())));\n    }\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n};\nArcgisHubFacetList.style = arcgisHubFacetListCss;\n\nconst arcgisHubFacetOptionsCss = \":host{display:block}calcite-input{--calcite-ui-foreground-1:var(--hub-gallery-input-background);--calcite-ui-text-1:var(--hub-gallery-input-text)}.option-search-bar{margin-bottom:0.75rem}.option{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:normal}calcite-radio-button-group>calcite-label{--calcite-font-size--1:var(--calcite-font-size-0)}@media (max-width: 576px){calcite-label{padding-top:0.5rem}calcite-label{padding-bottom:0.5rem}}.more-or-less-container{width:100%;display:flex;flex-direction:row-reverse}\";\n\nconst ArcgisHubFacetOptions = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubFacetOptionsChange = createEvent(this, \"arcgisHubFacetOptionsChange\", 7);\n    this.arcgisHubFacetMoreLessClicked = createEvent(this, \"arcgisHubFacetMoreLessClicked\", 7);\n    this.showLimitedOptions = false;\n    this.query = '';\n    /**\n     * Number of facet options to show, default is 5\n     */\n    this.pageSize = 5;\n    bind(this, 'handleCalciteRadioButtonChangeEvent', 'handleCalciteCheckboxChangeEvent', 'toggleMoreOrLessButton', 'handleCalciteInputInput', 'setPageSeparator');\n  }\n  async componentWillLoad() {\n    // Reset page size if it's passed in\n    if (this.facet.optionLimit) {\n      this.pageSize = this.facet.optionLimit;\n    }\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n    // If there is a default page size and the number of facet options is more than that\n    // we display the limited amount of options and the Show More button\n    if (this.facet.options.length > this.pageSize) {\n      this.showLimitedOptions = true;\n    }\n  }\n  handleCalciteInputInput(event) {\n    this.query = event.detail.value;\n  }\n  /**\n   * Event that's fired when a radio button is clicked(single mode)\n   * Not using @Listen because the event's target is this component NOT\n   * the calcite-radio. We are unclear if this is an issue with nested\n   * shadowdom or something calcite specific\n   */\n  handleCalciteRadioButtonChangeEvent(evt) {\n    this.onFacetChanged(evt.target.id, evt.target.checked);\n  }\n  /**\n   * Event that's fired when a checkbox is checked/unchecked(multi mode)\n   * Not using @Listen because the event's target is this component NOT\n   * the calcite-checkbox. We are unclear if this is an issue with nested\n   * shadowdom or something calcite specific\n   */\n  handleCalciteCheckboxChangeEvent(checkboxIndex, evt) {\n    this.onFacetChanged(evt.target.id, evt.target.checked, checkboxIndex);\n  }\n  /**\n   * Emit the arcgisHubFacetOptionsChange event\n   * @param key\n   * @param checked\n   */\n  onFacetChanged(key, checked, optionIndex) {\n    this.arcgisHubFacetOptionsChange.emit({\n      key: this.facet.key,\n      optionKey: key,\n      checked,\n      optionIndex\n    });\n  }\n  /**\n   * filtered multi-select options based on user query\n   */\n  get filteredOptions() {\n    return this.facet.options.filter(({ label }) => label.toLowerCase().includes(this.query.toLowerCase()));\n  }\n  /**\n   * ordered multi-select options based on facet setting\n   */\n  get orderedOptions() {\n    return this.facet.orderBy === 'label'\n      ? this.filteredOptions.sort((a, b) => a.label.localeCompare(b.label))\n      : this.filteredOptions.sort((a, b) => { var _a, _b; return ((_a = b.count) !== null && _a !== void 0 ? _a : 0) - ((_b = a.count) !== null && _b !== void 0 ? _b : 0); });\n  }\n  setPageSeparator(el) {\n    this.pageSeparator = el;\n  }\n  /**\n   * Render the facet with checkboxes.\n   */\n  renderCheckboxes() {\n    const allOptions = this.orderedOptions.map((option, i) => {\n      // key needs to include the count or the facetOption won't be updated when count changes\n      const key = option.count ? `${option.key}:${option.count}` : option.key;\n      const checkboxChangeHandler = this.handleCalciteCheckboxChangeEvent.bind(this, i);\n      return h(\"calcite-label\", { key: key, layout: \"inline\" }, h(\"calcite-checkbox\", { checked: option.selected, id: option.key, name: option.label, onCalciteCheckboxChange: checkboxChangeHandler }), h(\"span\", { class: \"option\" }, option.label));\n    });\n    // This may look odd, but it's needed for accessibility requirements.\n    // When a user clicks the more button, the user's next tab press should\n    // navigate to the first checkbox of the NEWLY loaded page. \n    //\n    // Focusing on an invisible span _in between_ the two pages is the easiest\n    // way to achieve the desired behavior since the span is always present\n    // and doesn't show a visual cue when we programmatically focus it.\n    const firstOptionsPage = allOptions.slice(0, this.pageSize);\n    const remainingOptions = this.showLimitedOptions ? [] : allOptions.slice(this.pageSize);\n    const result = [\n      ...firstOptionsPage,\n      h(\"span\", { key: \"page-separator\", ref: this.setPageSeparator, tabIndex: -1 }),\n      ...remainingOptions\n    ];\n    return result;\n  }\n  toggleMoreOrLessButton() {\n    // Emit event to notify consumers\n    this.arcgisHubFacetMoreLessClicked.emit({\n      facet: this.facet,\n      isMore: this.showLimitedOptions\n    });\n    this.showLimitedOptions = !this.showLimitedOptions;\n    this.renderCheckboxes();\n    // By focusing on the separator span now, the user's next tab press \n    // will navigate to the first checkbox of the next option page\n    this.pageSeparator.focus();\n  }\n  /**\n   * Number of options to display after the default page size.\n   * Base off filtered options in case a query has been applied.\n   */\n  get optionsLeftToDisplay() {\n    return this.filteredOptions.length - this.pageSize;\n  }\n  /**\n   * Icon next to the \"Show More\" or \"Show Less\" button\n   */\n  get moreOrLessButtonIconEnd() {\n    return this.showLimitedOptions ? \"chevron-down\" : \"chevron-up\";\n  }\n  /**\n   * Show {num} More or Show Less label\n   */\n  get moreOrLessButtonLabel() {\n    return this.showLimitedOptions\n      ? this.intl.t('showMore', { num: this.optionsLeftToDisplay })\n      : this.intl.t('showLess');\n  }\n  /**\n   * Only show More/Less button for checkboxes AND when the filtered options are more than page size\n   * when page size is not defined or the filtered options are less than page size\n   * we don't want to show any buttons\n   */\n  renderMoreOrLessButton() {\n    if (this.facet.display === 'multi-select' && this.filteredOptions.length > this.pageSize) {\n      return (h(\"div\", { class: \"more-or-less-container\" }, h(\"calcite-button\", { appearance: \"transparent\", color: \"blue\", \"icon-end\": this.moreOrLessButtonIconEnd, onClick: this.toggleMoreOrLessButton }, this.moreOrLessButtonLabel)));\n    }\n  }\n  /**\n   * Render the facet with radio buttons\n   */\n  renderRadioButtons() {\n    return this.facet.options.map(option => {\n      return h(\"calcite-label\", { key: option.key, layout: \"inline\" }, h(\"calcite-radio-button\", { checked: option.selected, id: option.key, name: option.label, onCalciteRadioButtonChange: this.handleCalciteRadioButtonChangeEvent, value: option.key }), h(\"span\", { class: \"option\" }, option.label));\n    });\n  }\n  renderNoMatchesNotice() {\n    return this.facet.display === 'multi-select' &&\n      !this.filteredOptions.length &&\n      h(\"calcite-notice\", { active: true, id: \"no-match-notice\", width: \"full\" }, h(\"div\", { slot: \"message\" }, this.intl.t('noMatchesNotice')));\n  }\n  /**\n   * Main Render\n   */\n  render() {\n    const isMultiSelect = this.facet.display === 'multi-select';\n    return (h(Host, { \"data-element\": \"facet-options\" }, isMultiSelect &&\n      h(\"calcite-input\", { \"aria-label\": this.intl.t('inputAriaLabel'), \"aria-labelledby\": \"no-match-notice\", class: \"option-search-bar\", clearable: true, placeholder: this.intl.t('inputPlaceholder') }), h(\"calcite-radio-button-group\", { layout: \"vertical\", name: \"facet-group\" }, isMultiSelect ? this.renderCheckboxes() : this.renderRadioButtons()), this.renderMoreOrLessButton(), this.renderNoMatchesNotice()));\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n};\nArcgisHubFacetOptions.style = arcgisHubFacetOptionsCss;\n\n/**\n * Defines an enum SortDirection\n */\nvar SortDirection;\n(function (SortDirection) {\n  SortDirection[\"asc\"] = \"asc\";\n  SortDirection[\"desc\"] = \"desc\";\n})(SortDirection || (SortDirection = {}));\n/**\n * Convert an `IHubSearchResult` into an `IHubCardViewModel`\n * @param result\n * @returns\n */\nfunction searchResultToCardViewModel(result) {\n  // Indirection to allow delegation to specific functions\n  // based on any future criteria, such as type etc\n  let fn;\n  switch (result.type) {\n    default:\n      fn = searchResultCardViewModelFactory;\n  }\n  return fn(result);\n}\n/**\n * Factory that converts `IHubSearchResult` into `IHubCardViewModel`\n * This is the default implementation, which further delegates to\n * some entity-specific functions to handle the additional info\n * @param input\n * @returns\n */\nfunction searchResultCardViewModelFactory(input) {\n  var _a, _b, _c;\n  const { type, typeKeywords } = input;\n  let result = {\n    access: input.access,\n    id: input.id,\n    title: input.name,\n    source: input.owner,\n    summary: input.summary,\n    family: input.family,\n    type: type,\n    additionalInfo: [],\n    actionLinks: [],\n    badges: [],\n  };\n  result = maybeAdd('thumbnailUrl', (_a = input.links) === null || _a === void 0 ? void 0 : _a.thumbnail, result);\n  // Default to self, but override with custom if present\n  result = maybeAdd('titleUrl', (_b = input.links) === null || _b === void 0 ? void 0 : _b.self, result);\n  result = maybeAdd('titleUrl', (_c = input.links) === null || _c === void 0 ? void 0 : _c.custom, result);\n  result = maybeAdd('source', input.orgName, result);\n  // This is where we can add per-type customization\n  // via delegation to other functions\n  if (type === \"User\") {\n    result = userAdditionalInfo(input, result);\n  }\n  else if (type === \"Group\") {\n    result = groupAdditionalInfo(input, result);\n  }\n  else if (isSiteType(type, typeKeywords)) {\n    result = siteAdditionalInfo(input, result);\n  }\n  else {\n    result = standardAdditionalInfo(input, result);\n  }\n  return result;\n}\n/**\n * Compute the additional info array for Users\n * @param _input\n * @param result\n * @returns\n */\nfunction userAdditionalInfo(_input, result) {\n  // at this time we are not showing any additional information for users\n  return result;\n}\n/**\n * Compute the additional info array for Groups\n * @param input\n * @param result\n * @returns\n */\nfunction groupAdditionalInfo(input, result) {\n  // Group Specific Stuff\n  if (input.isSharedUpdate) {\n    result.badges.push({\n      i18nKey: 'sharedEdit',\n      color: 'grey',\n      icon: 'pencil-square',\n    });\n  }\n  if (input.isOpenData) {\n    result.badges.push({\n      i18nKey: 'opendata',\n      color: 'grey',\n      icon: 'star-circle',\n    });\n  }\n  if (input.hasOwnProperty('membershipSummary')) {\n    result.additionalInfo.push({\n      i18nKey: 'members',\n      value: input.membershipSummary.total,\n    });\n  }\n  if (input.hasOwnProperty('contentCount')) {\n    result.additionalInfo.push({\n      i18nKey: 'content',\n      value: input.contentCount,\n    });\n  }\n  return result;\n}\n/**\n * Compute the additional info array for Sites\n * @param input\n * @param result\n * @returns\n */\nfunction siteAdditionalInfo(input, result) {\n  var _a;\n  result = maybeAdd('titleUrl', (_a = input.links) === null || _a === void 0 ? void 0 : _a.self, result);\n  // site types get both site and standard additional info\n  result = standardAdditionalInfo(input, result);\n  return result;\n}\n/**\n * Compute the additional info array for Items\n * @param input\n * @param result\n * @returns\n */\nfunction standardAdditionalInfo(input, result) {\n  var _a, _b;\n  if (input.type) {\n    result.additionalInfo.push({\n      i18nKey: 'type',\n      value: input.type,\n    });\n  }\n  if (input.updatedDate) {\n    result.additionalInfo.push({\n      i18nKey: 'dateUpdated',\n      value: input.updatedDate.toLocaleDateString(),\n    });\n  }\n  if ((_a = input.tags) === null || _a === void 0 ? void 0 : _a.length) {\n    result.additionalInfo.push({\n      i18nKey: 'tags',\n      value: input.tags.join(', '),\n    });\n  }\n  if ((_b = input.categories) === null || _b === void 0 ? void 0 : _b.length) {\n    // Only display the last section of the category path \n    // Example: `/categories/parent/child` becomes `child`\n    const shortenedCategories = input.categories.map(c => {\n      const segments = c.split('/');\n      return segments[segments.length - 1];\n    });\n    result.additionalInfo.push({\n      i18nKey: 'categories',\n      value: shortenedCategories.join(', '),\n    });\n  }\n  if (input.hasOwnProperty('layerCount')) {\n    result.additionalInfo.push({\n      i18nKey: 'layers',\n      value: input.layerCount,\n    });\n  }\n  if (input.hasOwnProperty('pageCount')) {\n    result.additionalInfo.push({\n      i18nKey: 'pages',\n      value: input.pageCount,\n    });\n  }\n  if (input.createdDate) {\n    result.additionalInfo.push({\n      i18nKey: 'dateCreated',\n      value: input.createdDate.toLocaleDateString(),\n    });\n  }\n  return result;\n}\n\nconst arcgisHubGalleryCss = \":host{display:flex;flex-direction:column;gap:1.25rem;--columns:4;--hub-gallery-input-background:#fff;--hub-gallery-input-text:#151515;--hub-gallery-font-size-large:var(--calcite-font-size-1)}h1,h2,h3,h4,h5,h6{font-family:var(--hub-heading-family, inherit)}arcgis-hub-facet-list{flex:0 0 25%;max-width:25%}.gallery-main{display:flex;flex-direction:row;align-items:flex-start;-moz-column-gap:1.25rem;column-gap:1.25rem}.gallery-list{display:flex;width:100%;flex-direction:column;gap:1.25rem}.gallery-list-footer{display:flex;justify-content:space-between}.gallery-list-header{display:grid;grid-template-areas:'resultsCount sortAndLayout';grid-template-columns:1fr 1fr}.results-count-container{grid-area:resultsCount}.sort-and-layout-container{display:flex;justify-content:flex-end;gap:0.5rem;grid-area:sortAndLayout}.layout-option{height:100%}.gallery-list>.results-count{margin-top:1.25rem}.no-results-action-container{display:grid;justify-content:center}.search-bar{margin-bottom:0px}.search-sort{margin-bottom:0px}.results-count{display:flex;align-items:center;font-size:var(--calcite-font-size-1);line-height:1.5rem;font-weight:var(--calcite-font-weight-normal)}:host([layout=\\\"list\\\"]) .card-container,:host([layout=\\\"grid\\\"]) .card-container,:host([layout=\\\"grid-filled\\\"]) .card-container{display:grid;gap:1.5rem}:host([layout=\\\"grid\\\"]) .card-container{grid-template-columns:repeat(auto-fill, minmax(max(240px, (100% - (4 - 1) * 24px) / 4), 1fr))}:host([layout=\\\"grid-filled\\\"]) .card-container{grid-template-columns:repeat(12, 1fr)}:host([layout=\\\"grid-filled\\\"]) .card-container>*{grid-column:span calc(12 / var(--columns))}:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+1):last-of-type,:host([layout=\\\"grid-filled\\\"]) .card-container.cols-3>*:nth-of-type(3n+1):last-of-type,:host([layout=\\\"grid-filled\\\"]) .card-container.cols-2>*:nth-of-type(2n+1):last-of-type{grid-column:span 12 / span 12}:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+1):nth-last-of-type(2),:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+2):last-of-type,:host([layout=\\\"grid-filled\\\"]) .card-container.cols-3>*:nth-of-type(3n+1):nth-last-of-type(2),:host([layout=\\\"grid-filled\\\"]) .card-container.cols-3>*:nth-of-type(3n+2):last-of-type{grid-column:span 6 / span 6}:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+1):nth-last-of-type(3),:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+2):nth-last-of-type(2),:host([layout=\\\"grid-filled\\\"]) .card-container.cols-4>*:nth-of-type(4n+3):last-of-type{grid-column:span 4 / span 4}[slot=\\\"header\\\"]{font-size:var(--calcite-font-size-1);line-height:1.5rem;font-weight:var(--calcite-font-weight-normal)}.loading-link-button{position:relative}.loading-link-button:after{content:'';position:absolute;top:0;right:0;bottom:0;left:0}@-webkit-keyframes shimmer{0%{background-size:200% 100%;background-position:100% 0}100%{background-size:200% 100%;background-position:-100% 0}}@keyframes shimmer{0%{background-size:200% 100%;background-position:100% 0}100%{background-size:200% 100%;background-position:-100% 0}}.loading-link-button:after{-webkit-animation:shimmer 2s cubic-bezier(0.4, 0, 0.2, 0.8) infinite;animation:shimmer 2s cubic-bezier(0.4, 0, 0.2, 0.8) infinite;background-image:linear-gradient(90deg, rgba(255, 255, 255, 0) 0, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.6) 50%, rgba(255, 255, 255, 0) 60%, rgba(255, 255, 255, 0) 100%);background-color:var(--calcite-ui-foreground-3)}.loading-link-button{margin-top:1rem;height:2rem}.result-top{position:absolute}.layout-switcher-container{display:flex;align-items:center}\";\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst ArcgisHubGallery = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.hubTelemetry = createEvent(this, \"hubTelemetry\", 7);\n    this.arcgisHubGallerySelect = createEvent(this, \"arcgisHubGallerySelect\", 7);\n    this.arcgisHubGalleryQueryChange = createEvent(this, \"arcgisHubGalleryQueryChange\", 7);\n    this.arcgisHubGalleryStateChange = createEvent(this, \"arcgisHubGalleryStateChange\", 7);\n    this.arcgisHubGalleryResultsChange = createEvent(this, \"arcgisHubGalleryResultsChange\", 7);\n    this.arcgisHubGalleryAction = createEvent(this, \"arcgisHubGalleryAction\", 7);\n    this.arcgisHubContentGalleryFacetModalClose = createEvent(this, \"arcgisHubContentGalleryFacetModalClose\", 7);\n    // -------------------------------------------------------\n    // TODO: Rework how we pass in the api information\n    // Requirements:\n    //  - option to use portal, even if hub is available\n    //  - option to specify enterprise portal url\n    /**\n     * [Syntactic Sugar Property, used to create a pseudo-context if a real context is not passed in]\n     * Url of the API to use\n     */\n    this.portal = \"https://www.arcgis.com\";\n    /**\n     * Type of API to expect at the end-point\n     */\n    this.apiType = \"arcgis\";\n    /**\n     * Default number of results to show\n     */\n    this.limit = 10;\n    /**\n     * Default sort field. Null indicates that no sorting should be applied to the initial search requests.\n     */\n    this.sortField = null;\n    /**\n     * Default sort order. Null indicates that the backing api's default sort direction should be used in\n     * the initial search requests.\n     */\n    this.sortOrder = null;\n    /**\n     * List layout: list, grid, or grid-filled default is list\n     */\n    this.layout = 'list';\n    /**\n     * Show/hide the thumbnail image on individual cards\n     */\n    this.showThumbnail = true;\n    /**\n     * The type of image that individual cards will display.\n     * Either thumbnail or icon, defaults to thumbnail.\n     */\n    this.imageType = IMAGE_TYPES.thumbnail;\n    /**\n     * Indicates if the thumbnail on individual cards should lazy load\n     */\n    this.lazy = false;\n    /**\n     * Show/hide the sort ui\n     */\n    this.showSort = false;\n    /**\n     * Show/hide search input\n     */\n    this.showSearch = false;\n    /**\n     * Show/hide facet chips. Must be used in conjuntion with `showFacets`\n     */\n    this.showChips = false;\n    /**\n     * Show/hide facets\n     */\n    this.showFacets = false;\n    /**\n     * Whether the target url for individual cards should open up in a new tab\n     */\n    this.newTab = false;\n    /**\n     * Whether individual cards are selectable via a checkbox\n     */\n    this.selectable = false;\n    /**\n     * Whether to show \"More Results\" button on bottom of the gallery\n     */\n    this.showMoreResultsBtn = false;\n    /**\n     * Whether to show results count on the top and bottom of the gallery\n     */\n    this.showResultsCount = false;\n    /**\n     * Whether to show the Back to Top button at the bottom of the gallery\n     */\n    this.showBackToTopBtn = false;\n    /**\n     * If sent in, do not issue search requests; just render the list in the order provided\n     */\n    this.viewModels = [];\n    /**\n     * [Syntactic Sugar Property, used to create a pseudo-collection if a real collection is not passed in]\n     *\n     * Specify the include parameter sent in the request.\n     * sent as | delimited strings\n     * e.g. `\"server.layers.length as layerCount | group.memberCount as members\"`\n     *\n     * Note: Specifying this parameter will override the `include` array\n     * specified in the `Collection`\n     */\n    this.include = '';\n    /**\n     * Serialized Gallery State\n     * When passed into the component, it is applied to the\n     * collection before it is passed to child components.\n     * This is used to restore a previous state, i.e. when a\n     * user returns to a bookmarked page\n     */\n    this.state = {};\n    /**\n     * Defines how the corners of each card are styled.\n     */\n    this.corners = CORNERS.square;\n    /**\n     * Whether individual cards should display additional info (metadata) about their view models\n     */\n    this.showAdditionalInfo = true;\n    /**\n     * Whether the gallery should show special empty state when the current search has returned no results\n     */\n    this.showEmptyState = true;\n    /**\n     * Whether telemetry events in the gallery should be disabled\n     */\n    this.disableTelemetry = false;\n    /**\n     * Whether the individual cards should add a link button (as opposed to relying on\n     * the link in the card's title). Must be used in conjunction with `linkButtonText`.\n     */\n    this.showLinkButton = false;\n    /**\n     * Whether the gallery is being rendered on a mobile device. When set to true, facets will move\n     * from the side of the gallery into a toggleable modal (controlled via `showFacetModal`)\n     */\n    this.mobileView = false;\n    /**\n     * Controls the visibility of the facets modal. Must be used in conjunction with `mobileView`.\n     */\n    this.showFacetModal = false;\n    /**\n     * Show/hide available badges on each card. Badges are defined in the view model of each card.\n     */\n    this.showBadges = true;\n    /**\n     * Show/hide the view model's family name and icon on each card\n     */\n    this.showType = true;\n    /**\n     * Show/hide the view model's source information on each card\n     */\n    this.showOwner = true;\n    /**\n     * Show/hide the layout switcher UI.\n     * Is not respected when mobile-view is true.\n     */\n    this.showLayoutSwitcher = false;\n    /**\n     * Whether the entire result card becomes a clickable target for the view model's target url\n     * (as opposed to just the card title or link button being clickable).\n     */\n    this.clickableCards = false;\n    /**\n     * Whether to show the pre-selected cards\n     */\n    this.showSelection = false;\n    /**\n     * Boolean to pass down to the child component\n     * True when entities are being fetched\n     */\n    this.loading = true;\n    /**\n     * Holds the passed in slots\n    */\n    this.actions = [];\n    /**\n     * Models that are rendered in the list\n     */\n    this.models = [];\n    /**\n     * Was the gallery passed a static list of view models?\n     * If true, the component will not make search requests,\n     * but instead will just render the passed in list\n     */\n    this._isStaticList = false;\n    /**\n     * List of sort options to pass to `arcgis-hub-search-sort`\n     * defaultOrder is the default sort order and order is the current order\n     * label is unused but is here because it is required in ISortOption\n     *\n     * Note that 'relevance' has null attributes. That is because selecting 'relevance'\n     * is meant to remove any explicit sort field on our end and rely instead on the backing\n     * API's ranking algorithm. In other words, it's actually the _absence_ of a sort field.\n     */\n    this.sortOptions = [\n      { attribute: null, label: 'Relevance', defaultOrder: null, order: null },\n      { attribute: 'title', label: 'Title', defaultOrder: 'asc', order: 'asc' },\n      { attribute: 'created', label: 'Date Created', defaultOrder: 'desc', order: 'desc' },\n      { attribute: 'modified', label: 'Date Updated', defaultOrder: 'desc', order: 'desc' }\n    ];\n    this.gridColumns = 4;\n    this.getCardLayout = (layout, idx, count) => {\n      // if it is 'grid' or 'grid-filled', we set it to 'card'; if it is 'list', we set it to 'row'\n      let result = layout === 'list' ? 'row' : 'card';\n      if (layout === 'grid-filled') {\n        // if the last row contains fewer than the number of columns, return 'row' for the ones in the last row\n        const numInLastRow = count % this.gridColumns;\n        const isInLastRow = idx >= (count - numInLastRow);\n        if (numInLastRow < 2 && isInLastRow) {\n          // if there are fewer than 2 in the last row and this one is in the last row\n          result = 'row';\n        }\n      }\n      return result;\n    };\n    bind(this, 'changeSortField', 'fetchMore', 'actionHandler', 'handleResize', 'forceModalClose', 'onFacetModalClose', 'onFacetChange', 'resetFacets', 'backToTop', 'setResultTopSpan');\n  }\n  /**\n   * The currently active SortOption\n   */\n  get _activeSortOption() {\n    const sortAttr = this.sortField;\n    const option = this.sortOptions.find(option => option.attribute === sortAttr);\n    return option && Object.assign(Object.assign({}, option), { order: this.sortOrder });\n  }\n  async handleResize() {\n    const width = this.element.clientWidth;\n    let gridColumns = 1;\n    // NOTE: these are the breakpoints in use in od-ui - there's no reason we have to stick with this but starting here for now\n    if (width > 1090) {\n      gridColumns = 4;\n    }\n    else if (width > 810) {\n      gridColumns = 3;\n    }\n    else if (width > 530) {\n      gridColumns = 2;\n    }\n    // set the css custom prop\n    this.element.style.setProperty('--columns', `${gridColumns}`);\n    // set state so it can be used to calculate whether an individual card should get card or row layout\n    this.gridColumns = gridColumns;\n  }\n  async componentWillLoad() {\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n    // If passed in immediately, set the flag\n    if (this.viewModels.length) {\n      this._isStaticList = true;\n    }\n    // -----------------------------------------------------------------\n    // Actions via Slot disabled for now - may revisit\n    // -----------------------------------------------------------------\n    // Currently handled via slot, which allows customization of the UX\n    // I think we'd be better served using tuples of well-known actions\n    // NOTE: querySelector('slot') is almost always null, unless it's a \n    // reload spawned from a rebuild\n    // const slot = this.element.shadowRoot.querySelector('slot') as HTMLSlotElement;\n    // this.actions = slot.assignedElements();\n    // This works consistently vs getting slot from shadowRoot\n    // this.actions =  Array.from(this.element.querySelectorAll(\"[action]\"));\n    // -----------------------------------------------------------------\n    // Set the gallery context to the value passed in from the user,\n    // or to a default context derived from `this.portal`\n    this._context = this.context;\n    if (!this._context && this.portal) {\n      const ctx = await ArcGISContextManager.create({ portalUrl: this.portal });\n      this._context = ctx.context;\n    }\n    // If component was not passed a Collection, construct it from the other passed in props\n    if (!this.collection) {\n      this.collection = {\n        label: \"Default\",\n        key: \"default\",\n        include: [],\n        targetEntity: this.galleryType || 'item',\n        scope: {\n          targetEntity: this.galleryType || 'item',\n          filters: [\n            {\n              predicates: [\n                {\n                  term: this.query\n                }\n              ]\n            }\n          ]\n        }\n      };\n    }\n    else {\n      // Ensure collection has some baseline stuff\n      if (!this.collection.include) {\n        this.collection.include = [];\n      }\n      // we have been passed a collection, but we apply some props as overrides\n      if (this.include) {\n        this.collection.include = this.include.split(\"|\");\n      }\n    }\n    if (this.facets) {\n      // pre-fetch dynamic facet options\n      await this.fetchDynamicFacetOptions();\n    }\n    // run initial state setup (and select dynamic facet values)\n    if (Object.keys(this.state).length > 0) {\n      this.applySerializedState(this.state);\n    }\n    // hold a copy of the facets so they can be reset\n    this._facetsCopy = cloneObject(this.facets);\n    // send the current state of the gallery so hosts can serialize to url\n    this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n    // If a gallerySelection is not passed in, construct it\n    if (!this.gallerySelection || !Object.entries(this.gallerySelection).length) {\n      this.gallerySelection = {\n        item: [],\n        group: [],\n        user: [],\n        groupMember: [],\n        event: []\n      };\n    }\n    // Include the existing selection in the selection copy that we want to return back\n    // to the consuming app\n    // Assign a gallerySelection clone otherwise updating _gallerySelection will\n    // also update gallerySelection\n    this._gallerySelection = cloneObject(this.gallerySelection);\n    // ...and on to search we go!!\n    this.prepareAndExecuteSearch();\n  }\n  connectedCallback() {\n    if (this.layout === 'grid-filled') {\n      ResizeObserverManager.addHandler(this.element, this.handleResize);\n    }\n  }\n  disconnectedCallback() {\n    ResizeObserverManager.unobserve(this.element);\n  }\n  async handleContextChange() {\n    this._context = this.context;\n    if (this.facets) {\n      await this.fetchDynamicFacetOptions();\n    }\n    this.prepareAndExecuteSearch();\n  }\n  async fetchFacetsAndSearch() {\n    if (this.facets) {\n      await this.fetchDynamicFacetOptions();\n      // Clear all the facets to an empty state and notify consumers\n      // NOTE: We cannot use resetFacets() as it resets the facets to their original state, not an empty state\n      this.applySerializedState({});\n      this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n    }\n    this.prepareAndExecuteSearch();\n  }\n  /**\n   * Build the search options and filters then excute the search\n   */\n  prepareAndExecuteSearch() {\n    this.search(this.activeQuery, this._searchOptions);\n  }\n  onViewModelsChanged() {\n    this._isStaticList = !!this.viewModels.length;\n    this.prepareAndExecuteSearch();\n  }\n  onStateChanged() {\n    this.applySerializedState(this.state);\n    this.prepareAndExecuteSearch();\n  }\n  setResultTopSpan(el) {\n    this.resultTopSpan = el;\n  }\n  /**\n   * Apply serialize state to the Gallery\n   * @param state\n   */\n  applySerializedState(state) {\n    const updatedState = applyGalleryState(this.galleryState, state);\n    // now apply the state into the gallery properties\n    if (updatedState.query !== this.query) {\n      this.query = updatedState.query;\n    }\n    if (updatedState.sort) {\n      this.sortField = updatedState.sort.attribute;\n      this.sortOrder = updatedState.sort.order;\n    }\n    if (updatedState.facets) {\n      this.facets = updatedState.facets;\n    }\n  }\n  /**\n   * Batches of fields that need aggregations fetched from the API\n   * Note: Because the portal API can only handle 3 aggregation fields at a time,\n   * each batch has a max size of 3\n   */\n  get _aggFieldBatches() {\n    const fields = getOptionsBasedFacets(this.facets).reduce((acc, facet) => {\n      if (facet.field) {\n        acc.push(facet.field);\n      }\n      return acc;\n    }, []);\n    const batches = [];\n    const batchSize = 3;\n    for (let i = 0; i < fields.length; i += batchSize) {\n      batches.push(fields.slice(i, i + batchSize));\n    }\n    return batches;\n  }\n  /**\n  * The max number of aggregations to get from the API\n  * For the portal API the max is 200, and regardless of how many\n  * fields are requested, the same number is applied to all.\n  */\n  get _aggLimit() {\n    // Find the largest aggLimit, or use 10 as the default\n    return getOptionsBasedFacets(this.facets).reduce((acc, facet) => {\n      if (facet.aggLimit && facet.aggLimit > acc) {\n        acc = facet.aggLimit;\n      }\n      return acc;\n    }, 10);\n  }\n  get hasSearchResults() {\n    return this.lastSearchResponse && !!this.models.length;\n  }\n  /**\n   * return array of `IFilter`'s which represent the selected/active\n   * facets options\n   */\n  get activeFacetFilters() {\n    const filters = [];\n    getOptionsBasedFacets(this.facets).forEach((facet) => {\n      const selectedPredicates = facet.options.reduce((acc, opt) => {\n        if (opt.selected) {\n          acc = [...acc, ...opt.predicates];\n        }\n        return acc;\n      }, []);\n      // if there are any selectedPredicates, construct a filter for the facet\n      if (selectedPredicates.length) {\n        const filter = {\n          operation: facet.operation,\n          predicates: selectedPredicates\n        };\n        filters.push(filter);\n      }\n    });\n    return filters;\n  }\n  get activeDateRangeFilters() {\n    const filters = [];\n    const dateRangeFacets = getDateRangeFacets(this.facets || []);\n    dateRangeFacets.forEach((facet) => {\n      if (facet.value && isValidDateRange(facet.value)) {\n        const fieldRange = {\n          from: Date.parse(facet.value.from),\n          to: Date.parse(facet.value.to)\n        };\n        const filter = {\n          operation: 'OR',\n          predicates: [{\n              [facet.field]: fieldRange\n            }]\n        };\n        filters.push(filter);\n      }\n    });\n    return filters;\n  }\n  async fetchDynamicFacetOptions() {\n    if (this._aggSearchOptionBatches.length) {\n      try {\n        const searchPromises = this._aggSearchOptionBatches.map((batchOptions) => hubSearch(this.collection.scope, batchOptions));\n        const aggregationBatches = await Promise.all(searchPromises);\n        const aggregationFacets = aggregationBatches.reduce((facets, { aggregations }) => {\n          if (aggregations) {\n            const batchFacets = createFacetsFromAggregations(aggregations);\n            facets = facets.concat(batchFacets);\n          }\n          return facets;\n        }, []);\n        // now, set the options of each corresponding facet\n        aggregationFacets.forEach((aggFacet) => {\n          const existingFacet = getOptionsBasedFacets(this.facets).find(f => f.field === aggFacet.field);\n          if (existingFacet) {\n            existingFacet.options = formatCommonDynamicOptions(aggFacet, this.intl);\n          }\n        });\n        // clone facets to trigger re-render\n        this.facets = this.facets.map(f => cloneObject(f));\n      }\n      catch (ex) {\n        throw new Error(`Error loading facet options: ${ex}`);\n      }\n    }\n  }\n  /**\n   * 'Execute' the hubSearch fn and assign state variables based on the response\n   * @param query IQuery\n   * @param options IHubSearchOptions\n   */\n  async search(query, options) {\n    // if component was passed models when it booted, then it should not execute searches\n    if (this._isStaticList) {\n      this.models = cloneObject(this.viewModels);\n      this.loading = false;\n    }\n    else {\n      // we only want to show the skeleton loader the first time the component loads, not on subsequent searches\n      if (!this.lastSearchResponse) {\n        this.loading = true;\n      }\n      try {\n        const response = await hubSearch(query, options);\n        this.loading = false;\n        this.lastSearchResponse = response;\n        // We emit the IHubSearchResults because those objects have more info than the ViewModels\n        this.arcgisHubGalleryResultsChange.emit(response.results);\n        const resultsWithLinks = response.results.map(r => {\n          r.links.custom = this.applyTitleLinkCallback(r);\n          return r;\n        });\n        const { sortByIds } = this;\n        let sortedResults = resultsWithLinks;\n        if (sortByIds && sortByIds.length) {\n          sortedResults = resultsWithLinks.slice().sort((a, b) => {\n            // sort according to the ids array\n            // but if it is not in the array, put it at the end\n            const aIdx = sortByIds.includes(a.id) ? sortByIds.indexOf(a.id) : Infinity;\n            const bIdx = sortByIds.includes(b.id) ? sortByIds.indexOf(b.id) : Infinity;\n            return aIdx - bIdx;\n          });\n        }\n        // Convert the results into IHubCardViewModel's\n        let models = sortedResults.map(searchResultToCardViewModel);\n        // we might have been asked to show link buttons on each card\n        // but the card is basically data-driven, so we need to munge the models\n        // AND we may need to remove the buttons, so we cache the models before adding the button stuff\n        this._cachedModels = models;\n        models = this.maybeShowButtons(models);\n        this.models = models;\n      }\n      catch (ex) {\n        this.loading = false;\n        throw new Error(`Error loading results: ${ex}`);\n      }\n    }\n  }\n  onLinkButtonPropsChange() {\n    this.models = this.maybeShowButtons(this._cachedModels);\n  }\n  maybeShowButtons(models) {\n    if (this.showLinkButton) {\n      // if showLinkButton is true we want to show a link button at the bottom that links to the same place as the title link\n      // to do that we leverage actionLinks - this is primarily to support the gallery layout card use case\n      models = models.map(model => {\n        model = Object.assign({}, model);\n        if (model.titleUrl) {\n          model.actionLinks = [{ label: this.linkButtonText, href: model.titleUrl, buttonStyle: this.linkButtonStyle }, ...model.actionLinks];\n        }\n        return model;\n      });\n    }\n    return models;\n  }\n  /**\n   * Fired when \"Load More\" button is clicked\n   */\n  async fetchMore() {\n    const currentPageNumber = Math.ceil(this.viewModels.length / this.limit);\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.loadMore), { search: convertToQueryString(this.serializedGalleryState), element: dist.constants.element.RESULTS_LIST, position: currentPageNumber, count: this.lastSearchResponse.total }));\n    try {\n      this.lastSearchResponse = await this.lastSearchResponse.next();\n      let models = this.lastSearchResponse.results.reduce((acc, r) => {\n        r.links.custom = this.applyTitleLinkCallback(r);\n        const model = searchResultToCardViewModel(r);\n        acc.push(model);\n        return acc;\n      }, [...this._cachedModels]);\n      this._cachedModels = models;\n      // this means a second loop over them but that is not a huge deal - future opportunity for optimization\n      models = this.maybeShowButtons(models);\n      this.models = models;\n    }\n    catch (e) {\n      console.error(`Unable to fetch more results: ${e}`);\n    }\n  }\n  backToTop() {\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.backToTop), { element: dist.constants.element.BACK_TO_TOP }));\n    // Focus for accessibility requirements. Next tab should place the user into the results list.\n    this.resultTopSpan.focus({ preventScroll: true });\n    // When used on Hub, the global navbar is \"covering\" some portion of the gallery, so when\n    // scroll to top, we need to scroll to the top of the parent element to show the entire gallery.\n    // In other cases, e.g. the catalog component, we only need to scroll to the top of\n    // the gallery (element.parenetElement is null)\n    this.element.parentElement\n      ? this.element.parentElement.scrollIntoView({ behavior: 'smooth' })\n      : this.element.scrollIntoView({ behavior: 'smooth' });\n  }\n  /**\n   * If `computeUrlCallback` is set, use it, otherwise\n   * return a default value for the href used in the\n   * child view\n   * @param result\n   * @returns\n   */\n  applyTitleLinkCallback(result) {\n    let href = result.links.self;\n    /**\n     * Note: this.baseUrl can (rightfully) be an empty string\n     * In this case, we still may want to do\n     * `${this.baseUrl}${result.links.siteRelative}`.\n     * This is why we check if this.baseUrl is a string\n     * and do not check length.\n     */\n    if (this.computeUrlCallback && typeof this.computeUrlCallback === 'function') {\n      href = this.computeUrlCallback(result);\n    }\n    else if (typeof this.baseUrl === 'string') {\n      href = `${this.baseUrl}${result.links.siteRelative}`;\n    }\n    return href;\n  }\n  /**\n   * Compute the `IQuery`  based on the current state of the component\n   */\n  get activeQuery() {\n    // start with the scope from the collection, and add additional filters\n    const qry = cloneObject(this.collection.scope);\n    // if we have a query, add a filter for it\n    if (this.query) {\n      qry.filters.push({\n        predicates: [\n          {\n            term: this.query\n          }\n        ]\n      });\n    }\n    // append list filters\n    if (this.activeFacetFilters.length) {\n      qry.filters = [...qry.filters, ...this.activeFacetFilters];\n    }\n    // append date range filters\n    if (this.activeDateRangeFilters.length) {\n      qry.filters = [...qry.filters, ...this.activeDateRangeFilters];\n    }\n    // if we have no blocks, and this is a user search, we need to add in an empty term query\n    // as the user search api actually supports this. We can't push this down to `hubSearch`\n    // unless we also send the `FilterType`\n    if (!qry.filters.length && this.collection.targetEntity === \"user\") {\n      qry.filters.push({\n        predicates: [\n          {\n            term: \"\"\n          }\n        ]\n      });\n    }\n    // If there are pre-selected cards and we choose to not show them, exclude their IDs from the query\n    if (!this.showSelection && this.gallerySelection && flattenArray(Object.values(this.gallerySelection)).length) {\n      // If there is an entry for the gallery selection for the type of the current query\n      // add it to the exclude ID list\n      for (const [type, ids] of Object.entries(this.gallerySelection)) {\n        if (type === qry.targetEntity) {\n          qry.filters.push({\n            predicates: [\n              {\n                id: {\n                  not: [...ids]\n                }\n              }\n            ]\n          });\n        }\n      }\n    }\n    return qry;\n  }\n  // The api url to hit, based on the type, via the context\n  get _apiUrl() {\n    var _a, _b;\n    return this.apiType === \"arcgis-hub\" ? (_a = this._context) === null || _a === void 0 ? void 0 : _a.hubUrl : (_b = this._context) === null || _b === void 0 ? void 0 : _b.portalUrl;\n  }\n  /**\n   * Construct an `IHubSearchOptions` based on the current state of the component\n   */\n  get _searchOptions() {\n    var _a;\n    const opts = {\n      num: this.limit,\n      // Don't use _activeSortOption, as we want sortField and sortOrder to be pass-throughs to the api\n      sortField: this.sortField,\n      sortOrder: SortDirection[this.sortOrder],\n      api: {\n        type: this.apiType,\n        url: this._apiUrl\n      },\n      include: [...this.collection.include],\n      requestOptions: (_a = this._context) === null || _a === void 0 ? void 0 : _a.hubRequestOptions\n    };\n    return opts;\n  }\n  /**\n   * Construct batches of `IHubSearchOptions` for aggregations based on the current state of the component.\n   * We have to batch the requests due to the Portal API's limit of 3 aggregation fields per request.\n   */\n  get _aggSearchOptionBatches() {\n    var _a;\n    const baseBatchOptions = {\n      num: 1,\n      api: {\n        type: this.apiType,\n        url: this._apiUrl\n      },\n      include: [],\n      requestOptions: (_a = this._context) === null || _a === void 0 ? void 0 : _a.hubRequestOptions,\n      aggLimit: this._aggLimit,\n    };\n    const searchOptionBatches = [];\n    this._aggFieldBatches.forEach((fieldBatch) => {\n      searchOptionBatches.push(Object.assign(Object.assign({}, baseBatchOptions), { aggFields: fieldBatch }));\n    });\n    return searchOptionBatches;\n  }\n  /**\n   * Return a single structure that represents the current state of the gallery\n   */\n  get galleryState() {\n    return {\n      query: this.query,\n      sort: this._activeSortOption,\n      collection: this.collection,\n      facets: this.facets,\n      layout: this.layout\n    };\n  }\n  /**\n   * Return the serialized state of the gallery\n   */\n  get serializedGalleryState() {\n    return removeEmptyProps(serializeGalleryState(this.galleryState));\n  }\n  handleLayoutSelect(event) {\n    var _a;\n    this.layout = event.detail;\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.view), { element: dist.constants.element.VIEW_BUTTON, details: `${titleize$1(this.layout)} View`, search: convertToQueryString(this.serializedGalleryState), count: ((_a = this.lastSearchResponse) === null || _a === void 0 ? void 0 : _a.total) || 0 }));\n    this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n  }\n  sendCardTitleClickTelemetry(event) {\n    var _a;\n    const { model } = event.detail;\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.click), { type: model.type, search: convertToQueryString(this.serializedGalleryState), element: dist.constants.element.RESULTS_LIST, position: model.index, count: (_a = this.lastSearchResponse) === null || _a === void 0 ? void 0 : _a.total }));\n  }\n  sendMoreLessClickTelemetry(event) {\n    const { facet, isMore } = event.detail;\n    this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.filter), { details: isMore\n        ? dist.constants.details.MORE\n        : dist.constants.details.LESS, search: convertToQueryString(this.serializedGalleryState), element: facet.key, count: this.lastSearchResponse.total }));\n  }\n  /**\n   * Listen for changes on the search input\n   * @param event\n   */\n  handleSearchChange(event) {\n    event.stopPropagation();\n    // We have this guard so that the blur on the calcite input\n    // does not re-fire the search\n    if (this.query !== event.detail) {\n      // changing the query will execute the search\n      this.query = event.detail;\n      this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n      this.maybeSendTelemetry(Object.assign(Object.assign({}, dist.dictionary\n        .category.interaction\n        .action.search\n        .label.query), { search: convertToQueryString(this.serializedGalleryState), element: dist.constants.element.ON_PAGE }));\n    }\n  }\n  /**\n  * Handle changes in the facets\n  * @param event\n  */\n  onFacetChange(event) {\n    event.stopPropagation();\n    const updatedFacet = event.detail;\n    // based on the payload, update the state of the collection.facet\n    const updatedFacets = this.facets.map((facet) => {\n      return facet.key === updatedFacet.key ? cloneObject(updatedFacet) : facet;\n    });\n    this.facets = updatedFacets;\n    this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n    this.prepareAndExecuteSearch();\n  }\n  /**\n   * Add/remove a card ID from the `gallerySelection` list when it is selected/deselected\n   * It emits the `arcgisHubGallerySelect` event that's being listened by the consumer component\n   * @param event\n   */\n  cardSelect(event) {\n    event.stopPropagation();\n    const id = event.detail.id;\n    const selection = this._gallerySelection[this.collection.targetEntity];\n    if (selection.includes(id)) {\n      this._gallerySelection[this.collection.targetEntity] = without(selection, event.detail.id);\n    }\n    else {\n      this._gallerySelection[this.collection.targetEntity] = [...selection, event.detail.id];\n    }\n    this.arcgisHubGallerySelect.emit(this._gallerySelection);\n  }\n  /**\n   * Reset the facets to the original state\n   */\n  resetFacets() {\n    var _a;\n    this.hubTelemetry.emit(Object.assign(Object.assign({}, dist.dictionary\n      .category.interaction\n      .action.search\n      .label.filter), { details: dist.constants.details.RESET, search: convertToQueryString(this.serializedGalleryState), element: dist.constants.element.RESET_FILTERS, count: (_a = this.lastSearchResponse) === null || _a === void 0 ? void 0 : _a.total }));\n    this.facets = cloneObject(this._facetsCopy);\n    this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n    // update state based on the collection\n    this.prepareAndExecuteSearch();\n  }\n  /**\n   * Wrapper for emiting telemetry\n   */\n  maybeSendTelemetry(data) {\n    if (!this.disableTelemetry) {\n      this.hubTelemetry.emit(data);\n    }\n  }\n  /**\n   * Triggered every time sort field has changed\n   * @param event\n   */\n  changeSortField(event) {\n    this.sortField = event.detail.attribute;\n    this.sortOrder = event.detail.order;\n    this.arcgisHubGalleryStateChange.emit(this.serializedGalleryState);\n    this.prepareAndExecuteSearch();\n  }\n  /**\n   * Render the search input\n   * @returns\n   */\n  renderSearch() {\n    if (this.showSearch) {\n      return h(\"arcgis-hub-search-input\", { class: \"search-bar\", placeholder: this.intl.t('search'), scale: \"l\", text: this.intl.t('search'), value: this.query });\n    }\n  }\n  renderLayoutSwitcher() {\n    if (this.showLayoutSwitcher && !this.mobileView) {\n      const layoutOptions = [\n        {\n          tooltip: this.intl.t('layoutOptions.grid'),\n          layout: 'grid',\n          icon: 'grid',\n        },\n        {\n          tooltip: this.intl.t('layoutOptions.list'),\n          layout: 'list',\n          icon: 'list',\n        },\n      ];\n      return h(\"div\", { class: \"layout-switcher-container\" }, layoutOptions.map((opt) => (h(\"arcgis-hub-layout-button\", { class: \"layout-option\", icon: opt.icon, key: opt.layout, layout: opt.layout, selected: this.layout === opt.layout, tooltip: opt.tooltip }))));\n    }\n  }\n  /**\n   * Render the More Results button\n   * @returns\n   */\n  renderMoreResultsBtn() {\n    var _a;\n    if (this.showMoreResultsBtn && ((_a = this.lastSearchResponse) === null || _a === void 0 ? void 0 : _a.hasNext)) {\n      return (h(\"calcite-button\", { onClick: this.fetchMore }, this.intl.t('moreResults')));\n    }\n  }\n  renderBackToTopBtn() {\n    if (this.showBackToTopBtn && this.hasSearchResults) {\n      return (h(\"calcite-button\", { appearance: \"outline\", class: 'back-to-top-btn', onClick: this.backToTop }, this.intl.t('backToTop')));\n    }\n  }\n  /**\n * Only render sort when set to do so\n * @returns the -search-sort component\n */\n  renderSort() {\n    if (this.showSort && this.hasSearchResults) {\n      return h(\"arcgis-hub-search-sort\", { activeSortOption: this._activeSortOption, class: \"search-sort\", onHubSearchSortChange: this.changeSortField, sortOptions: this.sortOptions });\n    }\n  }\n  /**\n   * Forces the calcite-modal component to fire the calciteModalClose\n   * event when the \"View Results\" button is clicked.\n   */\n  async forceModalClose() {\n    this.showFacetModal = false;\n  }\n  /**\n   * arcgis-wormhole prevents targeting of the underlying `calciteModalClose` event,\n   * so binding this callback and firing a new custom event guarantees that consumers can\n   * be notified that the modal is closed.\n   *\n   * @param event\n   */\n  onFacetModalClose(event) {\n    event.stopPropagation();\n    this.arcgisHubContentGalleryFacetModalClose.emit();\n  }\n  renderFacets() {\n    if (this.showFacets) {\n      return this.mobileView ? this.renderMobileFacets() : this.renderDesktopFacets(this.facets);\n    }\n  }\n  renderDesktopFacets(facets) {\n    return h(\"arcgis-hub-facet-list\", { disableTelemetry: this.disableTelemetry, facets: facets, onArcgisHubFacetListChange: this.onFacetChange, onArcgisHubFacetListReset: this.resetFacets, showChips: this.showChips }, h(\"div\", { slot: 'additional-facet' }, this.additionalFacet), this.mobileView ? '' : h(\"h2\", { class: \"facet-list-header\", slot: \"header\" }, this.intl.t('filter')));\n  }\n  renderMobileFacets() {\n    var _a;\n    // Set accordions open by default on mobile\n    const facets = this.facets.map((facet) => cloneObject(Object.assign(Object.assign({}, facet), { accordionClosed: false })));\n    return h(\"arcgis-wormhole\", null, h(\"calcite-modal\", { active: this.showFacetModal, onCalciteModalClose: this.onFacetModalClose }, h(\"span\", { slot: \"header\" }, this.intl.t('filter')), h(\"div\", { slot: \"content\" }, this.renderDesktopFacets(facets)), h(\"calcite-button\", { onClick: this.forceModalClose, slot: \"primary\", width: \"full\" }, this.intl.t('viewResults', { numResults: (_a = this.lastSearchResponse) === null || _a === void 0 ? void 0 : _a.total }))));\n  }\n  getCardComponentName(result) {\n    let component = `arcgis-hub-card`;\n    // This is placeholder code where we _could_ opt into\n    // another card based on the result\n    switch (result.type) {\n      case \"Web Map\":\n        component = `arcgis-hub-card`;\n    }\n    return component;\n  }\n  actionHandler(action, model) {\n    console.log(\"arcgisHubGalleryAction\", [action, model]);\n    this.arcgisHubGalleryAction.emit({ action, model });\n  }\n  renderSkeletons() {\n    let headingRows = 1;\n    this.showType || this.showOwner && headingRows++;\n    this.layout !== 'list' && headingRows++;\n    const skeletons = [...Array(this.limit).keys()].map((idx) => {\n      return h(\"arcgis-skeleton-loader\", { active: true, headingRows: headingRows, key: idx, rows: 3, showHeading: true, showThumbnail: this.layout !== \"list\" }, this.showLinkButton && h(\"div\", { class: \"loading-link-button\" }));\n    });\n    return h(Fragment, null, skeletons);\n  }\n  renderList(models) {\n    let results;\n    const className = [`card-container`, `cols-${this.gridColumns}`].join(' ');\n    // eslint-disable-next-line unicorn/prefer-ternary\n    if (!!models.length) {\n      const components = models.map((model, idx) => {\n        // Mark all pre-selected cards as selected in current list\n        const selected = this.gallerySelection[this.collection.targetEntity].includes(model.id);\n        // Record index for telemetry purposes\n        model.index = idx;\n        const Component = this.getCardComponentName(model);\n        // Build the Action buttons, using the `action=` attribute\n        // const actionButtons = this.actions.map(child => { \n        //   const actionName = child.getAttribute('action');\n        //   return <span innerHTML={child.outerHTML} key={actionName} onClick={() => this.actionHandler(actionName, model)} /> \n        // })\n        return h(Component, { clickable: this.clickableCards, context: this._context, corners: this.corners, imageType: this.imageType, key: model.id, layout: this.getCardLayout(this.layout, idx, models.length), lazy: this.lazy, model: model, newTab: this.newTab, selectable: this.selectable, selected: selected, shadow: this.shadow, showAdditionalInfo: this.showAdditionalInfo, showBadges: this.showBadges, showOwner: this.showOwner, showThumbnail: this.showThumbnail, showType: this.showType, titleTag: this.cardTitleTag });\n      });\n      results = h(Fragment, null, h(\"div\", { class: className }, components), this.renderResultsCount(), this.renderListFooter());\n    }\n    else if (this.loading) {\n      results = h(\"div\", { class: className }, this.renderSkeletons());\n    }\n    else if (this.showEmptyState) {\n      results = h(Fragment, null, h(\"arcgis-hub-empty-state\", null), h(\"div\", { class: \"no-results-action-container\" }, h(\"slot\", { name: \"no-results-action\" })));\n    }\n    else {\n      results = null;\n    }\n    return h(\"div\", { class: \"gallery-list\" }, this.renderListHeader(), h(\"span\", { class: \"result-top\", ref: this.setResultTopSpan, tabIndex: -1 }), results);\n  }\n  renderListHeader() {\n    const showResultsCount = this.renderResultsCount();\n    const showSortOrLayoutControls = this.renderSort() || this.renderLayoutSwitcher();\n    if (showResultsCount || showSortOrLayoutControls) {\n      return (h(\"div\", { class: \"gallery-list-header\" }, showResultsCount &&\n        h(\"div\", { class: \"results-count-container\" }, this.renderResultsCount()), showSortOrLayoutControls &&\n        h(\"div\", { class: \"sort-and-layout-container\" }, this.renderSort(), this.renderLayoutSwitcher())));\n    }\n  }\n  renderListFooter() {\n    if (this.renderMoreResultsBtn() || this.renderBackToTopBtn()) {\n      return (h(\"div\", { class: 'gallery-list-footer' }, h(\"div\", null, this.renderMoreResultsBtn()), h(\"div\", null, this.renderBackToTopBtn())));\n    }\n  }\n  renderResultsCount() {\n    if (this.showResultsCount && this.hasSearchResults) {\n      return h(\"h2\", { class: 'results-count' }, this.intl.t('resultsCount', { pageTotal: this.models.length, searchTotal: this.lastSearchResponse.total }));\n    }\n  }\n  /**\n   * Main Render\n   * @returns\n   */\n  render() {\n    return (h(Host, null, this.renderSearch(), h(\"slot\", { name: \"collection-select\" }), h(\"div\", { class: \"gallery-main\" }, this.renderFacets(), this.renderList(this.models)), h(\"slot\", { name: \"click-actions\" })));\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n  static get watchers() { return {\n    \"context\": [\"handleContextChange\"],\n    \"collection\": [\"fetchFacetsAndSearch\"],\n    \"apiType\": [\"fetchFacetsAndSearch\"],\n    \"layout\": [\"prepareAndExecuteSearch\"],\n    \"query\": [\"prepareAndExecuteSearch\"],\n    \"limit\": [\"prepareAndExecuteSearch\"],\n    \"viewModels\": [\"onViewModelsChanged\"],\n    \"state\": [\"onStateChanged\"],\n    \"showLinkButton\": [\"onLinkButtonPropsChange\"],\n    \"linkButtonText\": [\"onLinkButtonPropsChange\"],\n    \"linkButtonStyle\": [\"onLinkButtonPropsChange\"]\n  }; }\n};\n__decorate([\n  DebounceDecoratorFactory({ timeout: 100 })\n], ArcgisHubGallery.prototype, \"prepareAndExecuteSearch\", null);\nArcgisHubGallery.style = arcgisHubGalleryCss;\n\nconst arcgisHubLayoutButtonCss = \".popover-content{margin:0.75rem}#toggle-button{height:100%}#toggle-button[color=\\\"neutral\\\"]{--calcite-ui-icon-color:#151515}#toggle-button[color=\\\"neutral\\\"]:hover,#toggle-button[color=\\\"neutral\\\"]:focus{--calcite-ui-icon-color:var(--calcite-ui-brand)}\";\n\nconst ArcgisHubLayoutButton = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubLayoutButtonSelect = createEvent(this, \"arcgisHubLayoutButtonSelect\", 7);\n    bind(this, 'selectLayout', 'setPopoverElement', 'maybeOpenPopover', 'maybeClosePopover');\n  }\n  get color() {\n    return this.selected ? 'neutral' : 'blue';\n  }\n  get appearance() {\n    return this.selected ? 'solid' : 'transparent';\n  }\n  setPopoverElement(el) {\n    this.popoverElement = el;\n  }\n  maybeOpenPopover() {\n    this.tooltip && this.popoverElement.toggle(true);\n  }\n  maybeClosePopover() {\n    this.tooltip && this.popoverElement.toggle(false);\n  }\n  selectLayout() {\n    this.arcgisHubLayoutButtonSelect.emit(this.layout);\n  }\n  render() {\n    return h(Host, { onMouseEnter: this.maybeOpenPopover, onMouseLeave: this.maybeClosePopover }, h(\"calcite-button\", { appearance: this.appearance, \"aria-current\": this.selected, color: this.color, id: \"toggle-button\", onClick: this.selectLayout, scale: \"l\" }, h(\"calcite-icon\", { icon: this.icon })), this.tooltip &&\n      h(\"calcite-popover\", { label: this.tooltip, placement: \"bottom-trailing\", ref: this.setPopoverElement, referenceElement: \"toggle-button\" }, h(\"div\", { class: \"popover-content\" }, this.tooltip)));\n  }\n};\nArcgisHubLayoutButton.style = arcgisHubLayoutButtonCss;\n\nconst arcgisHubSearchInputCss = \":host{margin-bottom:1.5rem;display:block}calcite-input{--calcite-ui-foreground-1:var(--hub-gallery-input-background);--calcite-ui-text-1:var(--hub-gallery-input-text)}\";\n\nconst ArcgisHubSearchInput = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.inputChange = createEvent(this, \"hubSearchInputChange\", 7);\n    /**\n     * Placeholder message\n     * Consumers should pass in translated string\n     */\n    this.placeholder = \"Enter search term...\";\n    /**\n     * Button Text\n     * Consumers should pass in translated string\n     */\n    this.text = \"Search\";\n  }\n  /**\n   * This event fires each time a new value is typed and committed\n   * Which means it fires\n   * - when the user presses enter\n   * - when the user tabs out of the input\n   * - when the clear button is clicked\n   * - when the action button is clicked\n   */\n  handleInputChange() {\n    this.inputChange.emit(this.value);\n  }\n  /**\n   * Keep the internal value syncronized with the calcite-input\n   * @param ev\n   */\n  handleInput(ev) {\n    this.value = ev.detail.value;\n  }\n  render() {\n    return (h(Host, null, h(\"calcite-input\", { clearable: true, placeholder: this.placeholder, scale: this.scale, value: this.value }, h(\"calcite-button\", { scale: this.scale, slot: \"action\" }, this.text))));\n  }\n};\nArcgisHubSearchInput.style = arcgisHubSearchInputCss;\n\nconst arcgisHubSearchSortCss = \":host{margin-bottom:1.25rem;display:flex;flex-direction:row;justify-content:flex-end;--calcite-font-size--1:var(--hub-gallery-font-size-large)}.sort-order{--calcite-font-size-0:var(--hub-gallery-font-size-large)}\";\n\nconst ArcgisHubSearchSort = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.hubSearchSortChange = createEvent(this, \"hubSearchSortChange\", 7);\n    this.sortOptions = [];\n    bind(this, 'setDropdownEl', 'handleOrderChange');\n  }\n  async componentWillLoad() {\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n  }\n  componentWillRender() {\n    this.sortOrderIcon = this.activeSortOption.order === 'asc' ? \"sort-ascending-arrow\" : \"sort-descending-arrow\";\n  }\n  /**\n   * Listen to the sort field dropdown change and fire the sort change fn with new activeSortOption\n   */\n  handleFieldChangeEvent() {\n    const selectedItems = this.dropdownEl.selectedItems;\n    if (selectedItems.length) {\n      // Component is set to single-select mode, so there should only ever be one\n      const selectedValue = selectedItems[0].dataset.value || null;\n      this.activeSortOption = this.sortOptions.find(e => e.attribute === selectedValue);\n      // Because we can only send one argument to hubSearchSortChange event,\n      // we have to alternate the sort order in activeSortOption while keeping\n      // the default orders there. So when sort field is changed,\n      // we will reset the sort order to the default order here\n      this.activeSortOption.order = SortDirection[this.activeSortOption.defaultOrder];\n      this.hubSearchSortChange.emit(this.activeSortOption);\n    }\n  }\n  setDropdownEl(el) {\n    this.dropdownEl = el;\n  }\n  /**\n   * Whenever sort order button is clicked, change the sort order and its icon, then\n   * Fire the sort change fn with new activeSortOption\n   */\n  handleOrderChange() {\n    this.activeSortOption.order = this.activeSortOption.order === \"asc\" ? \"desc\" : \"asc\";\n    this.sortOrderIcon = this.activeSortOption.order === 'asc' ? \"sort-ascending-arrow\" : \"sort-descending-arrow\";\n    this.hubSearchSortChange.emit(this.activeSortOption);\n  }\n  render() {\n    var _a, _b;\n    return (h(Host, null, h(\"calcite-dropdown\", { ref: this.setDropdownEl }, h(\"calcite-button\", { appearance: \"transparent\", color: \"blue\", \"icon-end\": \"caret-down\", slot: \"dropdown-trigger\" }, h(\"span\", { title: this.intl.t((_a = this.activeSortOption.attribute) !== null && _a !== void 0 ? _a : 'relevance') }, this.intl.t((_b = this.activeSortOption.attribute) !== null && _b !== void 0 ? _b : 'relevance'))), h(\"calcite-dropdown-group\", { \"selection-mode\": \"single\" }, this.sortOptions.map(option => {\n      var _a, _b;\n      return h(\"calcite-dropdown-item\", { active: this.activeSortOption.attribute === option.attribute, \"data-value\": option.attribute, key: option.attribute, title: this.intl.t((_a = option.attribute) !== null && _a !== void 0 ? _a : 'relevance') }, this.intl.t((_b = option.attribute) !== null && _b !== void 0 ? _b : 'relevance'));\n    }))), this.activeSortOption.order &&\n      h(\"calcite-button\", { appearance: \"transparent\", class: \"sort-order\", color: \"blue\", \"icon-end\": this.sortOrderIcon, onClick: this.handleOrderChange, title: this.intl.t(this.activeSortOption.order) })));\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n};\nArcgisHubSearchSort.style = arcgisHubSearchSortCss;\n\nconst arcgisHubTreeFacetCss = \":host{display:block}calcite-tree-item{--calcite-font-size--1:16px;--calcite-ui-text-3:var(--calcite-ui-text-1)}.option-label{overflow-wrap:anywhere}.more-or-less-container{width:100%;display:flex;flex-direction:row-reverse;margin-top:0.5rem}\";\n\nconst ArcgisHubTreeFacet = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubTreeFacetChange = createEvent(this, \"arcgisHubTreeFacetChange\", 7);\n    this.arcgisHubFacetMoreLessClicked = createEvent(this, \"arcgisHubFacetMoreLessClicked\", 7);\n    this.showLimitedOptions = true;\n    this.topLevelPageSize = 5;\n    bind(this, 'toggleMoreOrLessButton', 'setPageSeparator');\n  }\n  handleTreeSelect(event) {\n    event.stopPropagation();\n    // `event.detail` gives us the set of ALL selected elements in the tree, meaning\n    // we have to do some juggling to figure out which elements were selected (or\n    // unselected) as part of this interaction\n    const newSelectedKeys = event.detail.selected.filter(e => !!e.dataset.key).map(e => e.dataset.key);\n    const oldSelectedKeys = this.facet.options.filter(o => o.selected).map(o => o.key);\n    const difference = getSelectionDifference(oldSelectedKeys, newSelectedKeys);\n    // Product created the concept of a \"Top-level Index\" for telemetry purposes. Each \n    // top-level option of the facet is assigned an index, and each descendant of that \n    // option gets the same index. These indices are assigned at runtime and are appended\n    // onto the option model.\n    //\n    // We assume that all changed options have the same top-level index, so we just\n    // grab the value of the first one we can find. We're confident in this approach\n    // since the only way to change multiple options at once is by clicking the checkbox\n    // for a parent option, which selects the parent AND all its descendants\n    const changedOption = this.facet.options.find(o => difference.keys.includes(o.key));\n    const topLevelIndex = changedOption._telemetryIndex;\n    this.arcgisHubTreeFacetChange.emit({\n      key: this.facet.key,\n      optionKeys: difference.keys,\n      selected: difference.operation === 'added',\n      topLevelIndex,\n    });\n  }\n  async componentWillLoad() {\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n  }\n  get optionsAsTree() {\n    return createTree(this.facet.options);\n  }\n  get numTopLevelOptions() {\n    return getChildren(this.optionsAsTree).length;\n  }\n  get optionsLeftToDisplay() {\n    return this.numTopLevelOptions - this.topLevelPageSize;\n  }\n  get moreOrLessButtonIconEnd() {\n    return this.showLimitedOptions ? \"chevron-down\" : \"chevron-up\";\n  }\n  get moreOrLessButtonLabel() {\n    return this.showLimitedOptions\n      ? this.intl.t('showMore', { num: this.optionsLeftToDisplay })\n      : this.intl.t('showLess');\n  }\n  setPageSeparator(el) {\n    this.pageSeparator = el;\n  }\n  toggleMoreOrLessButton() {\n    // Emit event to notify consumers\n    this.arcgisHubFacetMoreLessClicked.emit({\n      facet: this.facet,\n      isMore: this.showLimitedOptions\n    });\n    this.showLimitedOptions = !this.showLimitedOptions;\n    // By focusing on the separator span now, the user's next tab press \n    // will navigate to the first checkbox of the next option page\n    this.pageSeparator.focus();\n  }\n  renderTopLevelOptions() {\n    const allTopLevelOptions = getChildren(this.optionsAsTree).map((child, i) => renderSubtree(child, i));\n    const firstTopLevelOptionsPage = allTopLevelOptions.slice(0, this.topLevelPageSize);\n    const remainingOptions = this.showLimitedOptions ? [] : allTopLevelOptions.slice(this.topLevelPageSize);\n    const result = [\n      ...firstTopLevelOptionsPage,\n      h(\"span\", { key: \"page-separator\", ref: this.setPageSeparator, tabIndex: -1 }),\n      ...remainingOptions\n    ];\n    return result;\n  }\n  renderMoreLessButton() {\n    if (this.numTopLevelOptions > this.topLevelPageSize) {\n      return h(\"div\", { class: \"more-or-less-container\" }, h(\"calcite-button\", { appearance: \"transparent\", color: \"blue\", \"icon-end\": this.moreOrLessButtonIconEnd, onClick: this.toggleMoreOrLessButton }, this.moreOrLessButtonLabel));\n    }\n  }\n  render() {\n    return (h(Host, { \"data-element\": \"tree-facet\" }, h(\"div\", null, h(\"calcite-tree\", { \"selection-mode\": \"ancestors\" }, this.renderTopLevelOptions()), this.renderMoreLessButton())));\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n};\nArcgisHubTreeFacet.style = arcgisHubTreeFacetCss;\n\nconst accordionCss = \"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([scale=s]){--calcite-accordion-item-spacing-unit:0.25rem;--calcite-accordion-icon-margin:0.5rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-accordion-item-spacing-unit:0.5rem;--calcite-accordion-icon-margin:0.75rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-accordion-item-spacing-unit:0.75rem;--calcite-accordion-icon-margin:1rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:block;max-inline-size:100%;line-height:1.5rem;--calcite-accordion-item-border:var(--calcite-ui-border-2);--calcite-accordion-item-background:var(--calcite-ui-foreground-1)}.accordion--transparent{--calcite-accordion-item-border:transparent;--calcite-accordion-item-background:transparent}.accordion--minimal{--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0}.accordion{border-width:1px;border-block-end-width:0px;border-style:solid;border-color:var(--calcite-ui-border-2)}\";\n\nconst Accordion = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.calciteInternalAccordionChange = createEvent(this, \"calciteInternalAccordionChange\", 6);\n    //--------------------------------------------------------------------------\n    //\n    //  Public Properties\n    //\n    //--------------------------------------------------------------------------\n    /** Specifies the appearance of the component. */\n    this.appearance = \"solid\";\n    /** Specifies the placement of the icon in the header. */\n    this.iconPosition = \"end\";\n    /** Specifies the type of the icon in the header. */\n    this.iconType = \"chevron\";\n    /** Specifies the size of the component. */\n    this.scale = \"m\";\n    /**\n     * Specifies the selection mode - \"multiple\" (allow any number of open items), \"single\" (allow one open item),\n     * or \"single-persist\" (allow and require one open item).\n     */\n    this.selectionMode = \"multi\";\n    //--------------------------------------------------------------------------\n    //\n    //  Private State/Props\n    //\n    //--------------------------------------------------------------------------\n    /** created list of Accordion items */\n    this.items = [];\n    /** keep track of whether the items have been sorted so we don't re-sort */\n    this.sorted = false;\n    this.sortItems = (items) => items.sort((a, b) => a.position - b.position).map((a) => a.item);\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n  componentDidLoad() {\n    if (!this.sorted) {\n      this.items = this.sortItems(this.items);\n      this.sorted = true;\n    }\n  }\n  render() {\n    const transparent = this.appearance === \"transparent\";\n    const minimal = this.appearance === \"minimal\";\n    return (h(\"div\", { class: {\n        \"accordion--transparent\": transparent,\n        \"accordion--minimal\": minimal,\n        accordion: !transparent && !minimal\n      } }, h(\"slot\", null)));\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n  calciteInternalAccordionItemKeyEvent(event) {\n    const item = event.detail.item;\n    const parent = event.detail.parent;\n    if (this.el === parent) {\n      const { key } = item;\n      const itemToFocus = event.target;\n      const isFirstItem = this.itemIndex(itemToFocus) === 0;\n      const isLastItem = this.itemIndex(itemToFocus) === this.items.length - 1;\n      switch (key) {\n        case \"ArrowDown\":\n          if (isLastItem) {\n            this.focusFirstItem();\n          }\n          else {\n            this.focusNextItem(itemToFocus);\n          }\n          break;\n        case \"ArrowUp\":\n          if (isFirstItem) {\n            this.focusLastItem();\n          }\n          else {\n            this.focusPrevItem(itemToFocus);\n          }\n          break;\n        case \"Home\":\n          this.focusFirstItem();\n          break;\n        case \"End\":\n          this.focusLastItem();\n          break;\n      }\n    }\n    event.stopPropagation();\n  }\n  registerCalciteAccordionItem(event) {\n    const item = {\n      item: event.target,\n      parent: event.detail.parent,\n      position: event.detail.position\n    };\n    if (this.el === item.parent) {\n      this.items.push(item);\n    }\n    event.stopPropagation();\n  }\n  updateActiveItemOnChange(event) {\n    this.requestedAccordionItem = event.detail.requestedAccordionItem;\n    this.calciteInternalAccordionChange.emit({\n      requestedAccordionItem: this.requestedAccordionItem\n    });\n    event.stopPropagation();\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n  focusFirstItem() {\n    const firstItem = this.items[0];\n    this.focusElement(firstItem);\n  }\n  focusLastItem() {\n    const lastItem = this.items[this.items.length - 1];\n    this.focusElement(lastItem);\n  }\n  focusNextItem(el) {\n    const index = this.itemIndex(el);\n    const nextItem = this.items[index + 1] || this.items[0];\n    this.focusElement(nextItem);\n  }\n  focusPrevItem(el) {\n    const index = this.itemIndex(el);\n    const prevItem = this.items[index - 1] || this.items[this.items.length - 1];\n    this.focusElement(prevItem);\n  }\n  itemIndex(el) {\n    return this.items.indexOf(el);\n  }\n  focusElement(item) {\n    const target = item;\n    target === null || target === void 0 ? void 0 : target.focus();\n  }\n  get el() { return getElement(this); }\n};\nAccordion.style = accordionCss;\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nconst SLOTS$1 = {\n  actionsStart: \"actions-start\",\n  actionsEnd: \"actions-end\"\n};\nconst CSS$1 = {\n  icon: \"icon\",\n  header: \"header\",\n  headerContent: \"header-content\",\n  actionsStart: \"actions-start\",\n  actionsEnd: \"actions-end\",\n  headerText: \"header-text\",\n  heading: \"heading\",\n  description: \"description\",\n  expandIcon: \"expand-icon\",\n  content: \"content\",\n  iconStart: \"icon--start\",\n  iconEnd: \"icon--end\",\n  headerContainer: \"header-container\"\n};\n\nconst accordionItemCss = \"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}.icon-position--end,.icon-position--start{--calcite-accordion-item-icon-rotation:calc(90deg * -1);--calcite-accordion-item-active-icon-rotation:0deg;--calcite-accordion-item-icon-rotation-rtl:90deg;--calcite-accordion-item-active-icon-rotation-rtl:0deg}.icon-position--start{--calcite-accordion-item-flex-direction:row-reverse;--calcite-accordion-item-icon-spacing-start:0;--calcite-accordion-item-icon-spacing-end:var(--calcite-accordion-icon-margin)}.icon-position--end{--calcite-accordion-item-flex-direction:row;--calcite-accordion-item-icon-spacing-start:var(--calcite-accordion-icon-margin);--calcite-accordion-item-icon-spacing-end:0}.icon-position--end:not(.icon-type--plus-minus){--calcite-accordion-item-icon-rotation:0deg;--calcite-accordion-item-active-icon-rotation:180deg;--calcite-accordion-item-icon-rotation-rtl:0deg;--calcite-accordion-item-active-icon-rotation-rtl:calc(180deg * -1)}:host{position:relative;display:flex;flex-direction:column;color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;background-color:var(--calcite-accordion-item-background, var(--calcite-ui-foreground-1))}:host .header-content{outline-color:transparent}:host(:focus) .header-content{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host([expanded]){color:var(--calcite-ui-text-1)}:host([expanded]) .content{display:block;color:var(--calcite-ui-text-1)}:host([expanded]) .header{border-block-end-color:transparent}:host .header{display:flex;align-items:stretch}:host .icon{position:relative;margin:0px;display:inline-flex;color:var(--calcite-ui-text-3);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-margin-end:var(--calcite-accordion-item-icon-spacing-start);margin-inline-end:var(--calcite-accordion-item-icon-spacing-start);-webkit-margin-start:var(--calcite-accordion-item-icon-spacing-end);margin-inline-start:var(--calcite-accordion-item-icon-spacing-end)}.icon--start{display:flex;align-items:center;-webkit-margin-end:var(--calcite-accordion-icon-margin);margin-inline-end:var(--calcite-accordion-icon-margin)}.icon--end{display:flex;align-items:center;-webkit-margin-end:var(--calcite-accordion-icon-margin);margin-inline-end:var(--calcite-accordion-icon-margin);-webkit-margin-start:var(--calcite-accordion-icon-margin);margin-inline-start:var(--calcite-accordion-icon-margin)}.header-container{inline-size:100%}.content{padding:var(--calcite-accordion-item-padding)}:host .content,:host .header{-webkit-border-after:1px solid var(--calcite-accordion-item-border, var(--calcite-ui-border-2));border-block-end:1px solid var(--calcite-accordion-item-border, var(--calcite-ui-border-2))}:host .header *{display:inline-flex;align-items:center;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .content{display:none;-webkit-padding-before:0px;padding-block-start:0px;color:var(--calcite-ui-text-3);text-align:initial}:host .expand-icon{color:var(--calcite-ui-text-3);-webkit-margin-start:var(--calcite-accordion-item-icon-spacing-start);margin-inline-start:var(--calcite-accordion-item-icon-spacing-start);-webkit-margin-end:var(--calcite-accordion-item-icon-spacing-end);margin-inline-end:var(--calcite-accordion-item-icon-spacing-end);transform:rotate(var(--calcite-accordion-item-icon-rotation))}.calcite--rtl .expand-icon{transform:rotate(var(--calcite-accordion-item-icon-rotation-rtl))}:host([expanded]) .expand-icon{color:var(--calcite-ui-text-1);transform:rotate(var(--calcite-accordion-item-active-icon-rotation))}:host([expanded]) .calcite--rtl .expand-icon{transform:rotate(var(--calcite-accordion-item-active-icon-rotation-rtl))}:host .header-text{margin-block:0px;flex-grow:1;flex-direction:column;padding-block:0px;text-align:initial;-webkit-margin-end:auto;margin-inline-end:auto}:host .heading,:host .description{display:flex;inline-size:100%}:host .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .description{-webkit-margin-before:0.25rem;margin-block-start:0.25rem;color:var(--calcite-ui-text-3)}:host(:focus) .heading,:host(:hover) .heading{color:var(--calcite-ui-text-1)}:host(:focus) .icon,:host(:hover) .icon{color:var(--calcite-ui-text-1)}:host(:focus) .expand-icon,:host(:hover) .expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .description,:host(:hover) .description{color:var(--calcite-ui-text-2)}:host(:focus) .heading,:host(:active) .heading,:host([expanded]) .heading{color:var(--calcite-ui-text-1)}:host(:focus) .icon,:host(:active) .icon,:host([expanded]) .icon{color:var(--calcite-ui-text-1)}:host(:focus) .expand-icon,:host(:active) .expand-icon,:host([expanded]) .expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .description,:host(:active) .description,:host([expanded]) .description{color:var(--calcite-ui-text-2)}.header-content{flex-grow:1;cursor:pointer;padding:var(--calcite-accordion-item-padding);flex-direction:var(--calcite-accordion-item-flex-direction)}.actions-start,.actions-end{display:flex;align-items:center}@media (forced-colors: active){:host([expanded]) .header{-webkit-border-after:none;border-block-end:none}:host([expanded]) .heading{font-weight:bolder}:host(:hover) .heading,:host(:focus) .heading{text-decoration:underline}}\";\n\nconst AccordionItem = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.calciteInternalAccordionItemKeyEvent = createEvent(this, \"calciteInternalAccordionItemKeyEvent\", 6);\n    this.calciteInternalAccordionItemSelect = createEvent(this, \"calciteInternalAccordionItemSelect\", 6);\n    this.calciteInternalAccordionItemClose = createEvent(this, \"calciteInternalAccordionItemClose\", 6);\n    this.calciteInternalAccordionItemRegister = createEvent(this, \"calciteInternalAccordionItemRegister\", 6);\n    //--------------------------------------------------------------------------\n    //\n    //  Public Properties\n    //\n    //--------------------------------------------------------------------------\n    /**\n     * When `true`, the component is active.\n     *\n     * @deprecated use `expanded` instead.\n     */\n    this.active = false;\n    /** When `true`, the component is expanded. */\n    this.expanded = false;\n    /** what icon position does the parent accordion specify */\n    this.iconPosition = \"end\";\n    /** handle clicks on item header */\n    this.itemHeaderClickHandler = () => this.emitRequestedItem();\n  }\n  activeHandler(value) {\n    this.expanded = value;\n  }\n  expandedHandler(value) {\n    this.active = value;\n  }\n  iconHandler(value) {\n    this.iconStart = value;\n  }\n  iconStartHandler(value) {\n    this.icon = value;\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n  connectedCallback() {\n    this.parent = this.el.parentElement;\n    this.selectionMode = getElementProp(this.el, \"selection-mode\", \"multi\");\n    this.iconType = getElementProp(this.el, \"icon-type\", \"chevron\");\n    this.iconPosition = getElementProp(this.el, \"icon-position\", this.iconPosition);\n    const isExpanded = this.active || this.expanded;\n    if (isExpanded) {\n      this.activeHandler(isExpanded);\n      this.expandedHandler(isExpanded);\n    }\n    if (this.iconStart) {\n      this.icon = this.iconStart;\n    }\n    else if (this.icon) {\n      this.iconStart = this.icon;\n    }\n    connectConditionalSlotComponent(this);\n  }\n  componentDidLoad() {\n    this.itemPosition = this.getItemPosition();\n    this.calciteInternalAccordionItemRegister.emit({\n      parent: this.parent,\n      position: this.itemPosition\n    });\n  }\n  disconnectedCallback() {\n    disconnectConditionalSlotComponent(this);\n  }\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n  renderActionsStart() {\n    const { el } = this;\n    return getSlotted(el, SLOTS$1.actionsStart) ? (h(\"div\", { class: CSS$1.actionsStart }, h(\"slot\", { name: SLOTS$1.actionsStart }))) : null;\n  }\n  renderActionsEnd() {\n    const { el } = this;\n    return getSlotted(el, SLOTS$1.actionsEnd) ? (h(\"div\", { class: CSS$1.actionsEnd }, h(\"slot\", { name: SLOTS$1.actionsEnd }))) : null;\n  }\n  render() {\n    const dir = getElementDir(this.el);\n    const iconStartEl = this.iconStart ? (h(\"calcite-icon\", { class: CSS$1.iconStart, icon: this.iconStart, key: \"icon-start\", scale: \"s\" })) : null;\n    const iconEndEl = this.iconEnd ? (h(\"calcite-icon\", { class: CSS$1.iconEnd, icon: this.iconEnd, key: \"icon-end\", scale: \"s\" })) : null;\n    const description = this.description || this.itemSubtitle;\n    return (h(Host, null, h(\"div\", { class: {\n        [`icon-position--${this.iconPosition}`]: true,\n        [`icon-type--${this.iconType}`]: true\n      } }, h(\"div\", { class: { [CSS$1.header]: true, [CSS_UTILITY.rtl]: dir === \"rtl\" } }, this.renderActionsStart(), h(\"div\", { \"aria-expanded\": toAriaBoolean(this.active || this.expanded), class: CSS$1.headerContent, onClick: this.itemHeaderClickHandler, role: \"button\", tabindex: \"0\" }, h(\"div\", { class: CSS$1.headerContainer }, iconStartEl, h(\"div\", { class: CSS$1.headerText }, h(\"span\", { class: CSS$1.heading }, this.heading || this.itemTitle), description ? h(\"span\", { class: CSS$1.description }, description) : null), iconEndEl), h(\"calcite-icon\", { class: CSS$1.expandIcon, icon: this.iconType === \"chevron\"\n        ? \"chevronDown\"\n        : this.iconType === \"caret\"\n          ? \"caretDown\"\n          : this.expanded || this.active\n            ? \"minus\"\n            : \"plus\", scale: \"s\" })), this.renderActionsEnd()), h(\"div\", { class: CSS$1.content }, h(\"slot\", null)))));\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n  keyDownHandler(event) {\n    if (event.target === this.el) {\n      switch (event.key) {\n        case \" \":\n        case \"Enter\":\n          this.emitRequestedItem();\n          event.preventDefault();\n          break;\n        case \"ArrowUp\":\n        case \"ArrowDown\":\n        case \"Home\":\n        case \"End\":\n          this.calciteInternalAccordionItemKeyEvent.emit({\n            parent: this.parent,\n            item: event\n          });\n          event.preventDefault();\n          break;\n      }\n    }\n  }\n  updateActiveItemOnChange(event) {\n    this.requestedAccordionItem = event.detail\n      .requestedAccordionItem;\n    if (this.el.parentNode !== this.requestedAccordionItem.parentNode) {\n      return;\n    }\n    this.determineActiveItem();\n    event.stopPropagation();\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n  determineActiveItem() {\n    switch (this.selectionMode) {\n      case \"multi\":\n      case \"multiple\":\n        if (this.el === this.requestedAccordionItem) {\n          this.expanded = !this.expanded;\n        }\n        break;\n      case \"single\":\n        this.expanded = this.el === this.requestedAccordionItem ? !this.expanded : false;\n        break;\n      case \"single-persist\":\n        this.expanded = this.el === this.requestedAccordionItem;\n        break;\n    }\n  }\n  emitRequestedItem() {\n    this.calciteInternalAccordionItemSelect.emit({\n      requestedAccordionItem: this.el\n    });\n  }\n  getItemPosition() {\n    return Array.prototype.indexOf.call(this.parent.querySelectorAll(\"calcite-accordion-item\"), this.el);\n  }\n  get el() { return getElement(this); }\n  static get watchers() { return {\n    \"active\": [\"activeHandler\"],\n    \"expanded\": [\"expandedHandler\"],\n    \"icon\": [\"iconHandler\"],\n    \"iconStart\": [\"iconStartHandler\"]\n  }; }\n};\nAccordionItem.style = accordionItemCss;\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nvar TreeSelectionMode;\n(function (TreeSelectionMode) {\n  TreeSelectionMode[\"Single\"] = \"single\";\n  TreeSelectionMode[\"Multi\"] = \"multi\";\n  TreeSelectionMode[\"None\"] = \"none\";\n  TreeSelectionMode[\"Children\"] = \"children\";\n  TreeSelectionMode[\"MultiChildren\"] = \"multichildren\";\n  TreeSelectionMode[\"Ancestors\"] = \"ancestors\";\n  TreeSelectionMode[\"Multiple\"] = \"multiple\";\n})(TreeSelectionMode || (TreeSelectionMode = {}));\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nfunction isTreeItem(element) {\n  return element === null || element === void 0 ? void 0 : element.matches(\"calcite-tree-item\");\n}\nfunction getEnabledSiblingItem(el, direction) {\n  const directionProp = direction === \"down\" ? \"nextElementSibling\" : \"previousElementSibling\";\n  let currentEl = el;\n  let enabledEl = null;\n  while (isTreeItem(currentEl)) {\n    if (!currentEl.disabled) {\n      enabledEl = currentEl;\n      break;\n    }\n    currentEl = currentEl[directionProp];\n  }\n  return enabledEl;\n}\n\nconst treeCss = \"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:block}:host(:focus){outline:2px solid transparent;outline-offset:2px}\";\n\nconst Tree = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.calciteTreeSelect = createEvent(this, \"calciteTreeSelect\", 6);\n    //--------------------------------------------------------------------------\n    //\n    //  Properties\n    //\n    //--------------------------------------------------------------------------\n    /** Displays indentation guide lines. */\n    this.lines = false;\n    /**\n     * Display input\n     *\n     * @deprecated Use `selectionMode=\"ancestors\"` for checkbox input.\n     */\n    this.inputEnabled = false;\n    /** Specifies the size of the component. */\n    this.scale = \"m\";\n    /**\n     * Customize how the component's selection works.\n     *\n     * @default \"single\"\n     * @see [TreeSelectionMode](https://github.com/Esri/calcite-components/blob/master/src/components/tree/interfaces.ts#L5)\n     */\n    this.selectionMode = TreeSelectionMode.Single;\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n  componentWillRender() {\n    var _a;\n    const parent = (_a = this.el.parentElement) === null || _a === void 0 ? void 0 : _a.closest(\"calcite-tree\");\n    this.lines = parent ? parent.lines : this.lines;\n    this.scale = parent ? parent.scale : this.scale;\n    this.selectionMode = parent ? parent.selectionMode : this.selectionMode;\n    this.child = !!parent;\n  }\n  render() {\n    return (h(Host, { \"aria-multiselectable\": this.child\n        ? undefined\n        : (this.selectionMode === TreeSelectionMode.Multi ||\n          this.selectionMode === TreeSelectionMode.Multiple ||\n          this.selectionMode === TreeSelectionMode.MultiChildren).toString(), role: !this.child ? \"tree\" : undefined, tabIndex: this.getRootTabIndex() }, h(\"slot\", null)));\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n  onFocus() {\n    if (!this.child) {\n      const focusTarget = this.el.querySelector(\"calcite-tree-item[selected]:not([disabled])\") || this.el.querySelector(\"calcite-tree-item:not([disabled])\");\n      focusElement(focusTarget);\n    }\n  }\n  onFocusIn(event) {\n    const focusedFromRootOrOutsideTree = event.relatedTarget === this.el || !this.el.contains(event.relatedTarget);\n    if (focusedFromRootOrOutsideTree) {\n      // gives user the ability to tab into external elements (modifying tabindex property will not work in firefox)\n      this.el.removeAttribute(\"tabindex\");\n    }\n  }\n  onFocusOut(event) {\n    const willFocusOutsideTree = !this.el.contains(event.relatedTarget);\n    if (willFocusOutsideTree) {\n      this.el.tabIndex = this.getRootTabIndex();\n    }\n  }\n  onClick(event) {\n    const target = event.target;\n    const childItems = nodeListToArray(target.querySelectorAll(\"calcite-tree-item\"));\n    if (this.child) {\n      return;\n    }\n    if (!this.child) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    if (this.selectionMode === TreeSelectionMode.Ancestors && !this.child) {\n      this.updateAncestorTree(event);\n      return;\n    }\n    const isNoneSelectionMode = this.selectionMode === TreeSelectionMode.None;\n    const shouldSelect = this.selectionMode !== null &&\n      (!target.hasChildren ||\n        (target.hasChildren &&\n          (this.selectionMode === TreeSelectionMode.Children ||\n            this.selectionMode === TreeSelectionMode.MultiChildren)));\n    const shouldModifyToCurrentSelection = !isNoneSelectionMode &&\n      event.detail.modifyCurrentSelection &&\n      (this.selectionMode === TreeSelectionMode.Multi ||\n        this.selectionMode === TreeSelectionMode.Multiple ||\n        this.selectionMode === TreeSelectionMode.MultiChildren);\n    const shouldSelectChildren = this.selectionMode === TreeSelectionMode.MultiChildren ||\n      this.selectionMode === TreeSelectionMode.Children;\n    const shouldClearCurrentSelection = !shouldModifyToCurrentSelection &&\n      (((this.selectionMode === TreeSelectionMode.Single ||\n        this.selectionMode === TreeSelectionMode.Multi ||\n        this.selectionMode === TreeSelectionMode.Multiple) &&\n        childItems.length <= 0) ||\n        this.selectionMode === TreeSelectionMode.Children ||\n        this.selectionMode === TreeSelectionMode.MultiChildren);\n    const shouldExpandTarget = this.selectionMode === TreeSelectionMode.Children ||\n      this.selectionMode === TreeSelectionMode.MultiChildren;\n    if (!this.child) {\n      const targetItems = [];\n      if (shouldSelect) {\n        targetItems.push(target);\n      }\n      if (shouldSelectChildren) {\n        childItems.forEach((treeItem) => {\n          targetItems.push(treeItem);\n        });\n      }\n      if (shouldClearCurrentSelection) {\n        const selectedItems = nodeListToArray(this.el.querySelectorAll(\"calcite-tree-item[selected]\"));\n        selectedItems.forEach((treeItem) => {\n          if (!targetItems.includes(treeItem)) {\n            treeItem.selected = false;\n          }\n        });\n      }\n      if (shouldExpandTarget && !event.detail.forceToggle) {\n        target.expanded = true;\n      }\n      if (shouldModifyToCurrentSelection) {\n        window.getSelection().removeAllRanges();\n      }\n      if ((shouldModifyToCurrentSelection && target.selected) ||\n        (shouldSelectChildren && event.detail.forceToggle)) {\n        targetItems.forEach((treeItem) => {\n          if (!treeItem.disabled) {\n            treeItem.selected = false;\n          }\n        });\n      }\n      else if (!isNoneSelectionMode) {\n        targetItems.forEach((treeItem) => {\n          if (!treeItem.disabled) {\n            treeItem.selected = true;\n          }\n        });\n      }\n    }\n    const selected = isNoneSelectionMode\n      ? [target]\n      : nodeListToArray(this.el.querySelectorAll(\"calcite-tree-item\")).filter((i) => i.selected);\n    this.calciteTreeSelect.emit({ selected });\n    event.stopPropagation();\n  }\n  keyDownHandler(event) {\n    var _a;\n    const root = this.el.closest(\"calcite-tree:not([child])\");\n    const target = event.target;\n    if (!(root === this.el && target.tagName === \"CALCITE-TREE-ITEM\" && this.el.contains(target))) {\n      return;\n    }\n    if (event.key === \"ArrowDown\") {\n      const next = getEnabledSiblingItem(target.nextElementSibling, \"down\");\n      if (next) {\n        next.focus();\n        event.preventDefault();\n      }\n      return;\n    }\n    if (event.key === \"ArrowUp\") {\n      const previous = getEnabledSiblingItem(target.previousElementSibling, \"up\");\n      if (previous) {\n        previous.focus();\n        event.preventDefault();\n      }\n    }\n    if (event.key === \"ArrowLeft\" && !target.disabled) {\n      // When focus is on an open node, closes the node.\n      if (target.hasChildren && target.expanded) {\n        target.expanded = false;\n        event.preventDefault();\n        return;\n      }\n      // When focus is on a child node that is also either an end node or a closed node, moves focus to its parent node.\n      const parentItem = target.parentElement.closest(\"calcite-tree-item\");\n      if (parentItem && (!target.hasChildren || target.expanded === false)) {\n        parentItem.focus();\n        event.preventDefault();\n        return;\n      }\n      // When focus is on a root node that is also either an end node or a closed node, does nothing.\n      return;\n    }\n    if (event.key === \"ArrowRight\" && !target.disabled) {\n      if (target.hasChildren) {\n        if (target.expanded && getRootNode(this.el).activeElement === target) {\n          // When focus is on an open node, moves focus to the first child node.\n          (_a = getEnabledSiblingItem(target.querySelector(\"calcite-tree-item\"), \"down\")) === null || _a === void 0 ? void 0 : _a.focus();\n          event.preventDefault();\n        }\n        else {\n          // When focus is on a closed node, opens the node; focus does not move.\n          target.expanded = true;\n          event.preventDefault();\n        }\n      }\n      return;\n    }\n  }\n  updateAncestorTree(event) {\n    const item = event.target;\n    if (item.disabled) {\n      return;\n    }\n    const ancestors = [];\n    let parent = item.parentElement.closest(\"calcite-tree-item\");\n    while (parent) {\n      ancestors.push(parent);\n      parent = parent.parentElement.closest(\"calcite-tree-item\");\n    }\n    const childItems = Array.from(item.querySelectorAll(\"calcite-tree-item:not([disabled])\"));\n    const childItemsWithNoChildren = childItems.filter((child) => !child.hasChildren);\n    const childItemsWithChildren = childItems.filter((child) => child.hasChildren);\n    const futureSelected = item.hasChildren\n      ? !(item.selected || item.indeterminate)\n      : !item.selected;\n    childItemsWithNoChildren.forEach((el) => {\n      el.selected = futureSelected;\n      el.indeterminate = false;\n    });\n    function updateItemState(childItems, item) {\n      const selected = childItems.filter((child) => child.selected);\n      const unselected = childItems.filter((child) => !child.selected);\n      item.selected = selected.length === childItems.length;\n      item.indeterminate = selected.length > 0 && unselected.length > 0;\n    }\n    childItemsWithChildren.forEach((el) => {\n      const directChildItems = Array.from(el.querySelectorAll(\":scope > calcite-tree > calcite-tree-item\"));\n      updateItemState(directChildItems, el);\n    });\n    if (item.hasChildren) {\n      updateItemState(childItems, item);\n    }\n    else {\n      item.selected = futureSelected;\n      item.indeterminate = false;\n    }\n    ancestors.forEach((ancestor) => {\n      const descendants = nodeListToArray(ancestor.querySelectorAll(\"calcite-tree-item\"));\n      const activeDescendants = descendants.filter((el) => el.selected);\n      if (activeDescendants.length === 0) {\n        ancestor.selected = false;\n        ancestor.indeterminate = false;\n        return;\n      }\n      const indeterminate = activeDescendants.length < descendants.length;\n      ancestor.indeterminate = indeterminate;\n      ancestor.selected = !indeterminate;\n    });\n    this.calciteTreeSelect.emit({\n      selected: nodeListToArray(this.el.querySelectorAll(\"calcite-tree-item\")).filter((i) => i.selected)\n    });\n  }\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  //--------------------------------------------------------------------------\n  getRootTabIndex() {\n    return !this.child ? 0 : -1;\n  }\n  get el() { return getElement(this); }\n};\nTree.style = treeCss;\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nconst CSS = {\n  checkboxLabel: \"checkbox-label\",\n  checkbox: \"checkbox\",\n  chevron: \"chevron\",\n  nodeContainer: \"node-container\",\n  childrenContainer: \"children-container\",\n  bulletPointIcon: \"bullet-point\",\n  checkmarkIcon: \"checkmark\"\n};\nconst SLOTS = {\n  children: \"children\"\n};\nconst ICONS = {\n  bulletPoint: \"bullet-point\",\n  checkmark: \"check\",\n  chevronRight: \"chevron-right\",\n  blank: \"blank\"\n};\n\nconst treeItemCss = \"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:block;max-inline-size:100%;cursor:pointer;color:var(--calcite-ui-text-3)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .node-container{--calcite-tree-padding-y:0.25rem}:host([scale=s]) .node-container .checkbox,:host([scale=s]) .node-container .chevron,:host([scale=s]) .node-container .checkmark,:host([scale=s]) .node-container .bullet-point{margin-inline:0.25rem}:host([scale=m]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .node-container{--calcite-tree-padding-y:0.5rem}:host([scale=m]) .node-container .checkbox,:host([scale=m]) .node-container .chevron,:host([scale=m]) .node-container .checkmark,:host([scale=m]) .node-container .bullet-point{margin-inline:0.5rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .node-container{--calcite-tree-padding-y:0.75rem}:host([scale=l]) .node-container .checkbox,:host([scale=l]) .node-container .chevron,:host([scale=l]) .node-container .checkmark,:host([scale=l]) .node-container .bullet-point{margin-inline:0.75rem}:host([lines]) .children-container:after{position:absolute;inset-block-start:0px;z-index:1;inline-size:1px;transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;block-size:96%;content:\\\"\\\";background-color:var(--calcite-ui-border-2)}:host(:not([lines])) .node-container:after{display:none}::slotted(*){min-inline-size:0px;max-inline-size:100%;overflow-wrap:break-word;color:inherit;text-decoration:none !important}::slotted(*):hover{text-decoration:none !important}::slotted(a){inline-size:100%;-webkit-text-decoration-line:none;text-decoration-line:none}:host{outline-color:transparent}:host(:focus:not([disabled])){outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.checkbox{line-height:0}.checkbox-label{pointer-events:none;display:flex;align-items:center}.checkbox:focus{outline:2px solid transparent;outline-offset:2px}.children-container{position:relative;block-size:0px;overflow:hidden;-webkit-margin-start:1.25rem;margin-inline-start:1.25rem;transform:scaleY(0);opacity:0;transition:var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-animation-timing) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out;transform-origin:top}:host([expanded])>.children-container{transform:scaleY(1);opacity:1;block-size:auto}.node-container{position:relative;display:flex;align-items:center;padding-block:var(--calcite-tree-padding-y);padding-inline:0}.node-container .checkmark,.node-container .bullet-point{opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;color:var(--calcite-ui-border-1)}.node-container:hover .checkmark,.node-container:hover .bullet-point,:host([selected]) .node-container:hover .checkmark,:host([selected]) .node-container:hover .bullet-point,:host(:focus:not([disabled])) .node-container .checkmark,:host(:focus:not([disabled])) .node-container .bullet-point{opacity:1}:host([selected])>.node-container,:host([selected])>.node-container:hover{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([selected])>.node-container .bullet-point,:host([selected])>.node-container .checkmark,:host([selected])>.node-container:hover .bullet-point,:host([selected])>.node-container:hover .checkmark{opacity:1;color:var(--calcite-ui-brand)}:host([selection-mode=none]:not([has-children])):host([scale=s])>.node-container{-webkit-padding-start:0.5rem;padding-inline-start:0.5rem}:host([selection-mode=none]:not([has-children])):host([scale=m])>.node-container{-webkit-padding-start:1rem;padding-inline-start:1rem}:host([selection-mode=none]:not([has-children])):host([scale=l])>.node-container{-webkit-padding-start:1.5rem;padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=s])>.node-container[data-selection-mode=ancestors] .checkbox{-webkit-padding-start:1.25rem;padding-inline-start:1.25rem}:host(:not([has-children])):host([scale=m])>.node-container[data-selection-mode=ancestors] .checkbox{-webkit-padding-start:1.5rem;padding-inline-start:1.5rem}:host(:not([has-children])):host([scale=l])>.node-container[data-selection-mode=ancestors] .checkbox{-webkit-padding-start:1.75rem;padding-inline-start:1.75rem}:host([has-children])>.node-container[data-selection-mode=ancestors] .checkbox{-webkit-margin-start:0;margin-inline-start:0}:host([has-children])>.node-container .bullet-point,:host([has-children])>.node-container .checkmark{display:none}:host([has-children][expanded]:not([selected]):not([selection-mode=none]))>.node-container ::slotted(*){font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([has-children][selected])>.node-container[data-selection-mode=children],:host([has-children][selected])>.node-container[data-selection-mode=multichildren]{color:var(--calcite-ui-brand)}.chevron{position:relative;align-self:center;color:var(--calcite-ui-text-3);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;flex:0 0 auto;transform:rotate(0deg)}.calcite--rtl .chevron{transform:rotate(180deg)}:host([expanded])>.node-container>.chevron{transform:rotate(90deg)}:host([selected]) .checkmark,:host([selected]) .bullet-point{color:var(--calcite-ui-brand)}\";\n\nconst TreeItem = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.calciteInternalTreeItemSelect = createEvent(this, \"calciteInternalTreeItemSelect\", 6);\n    //--------------------------------------------------------------------------\n    //\n    //  Properties\n    //\n    //--------------------------------------------------------------------------\n    /**\n     * When `true`, interaction is prevented and the component is displayed with lower opacity.\n     */\n    this.disabled = false;\n    /** When `true`, the component is selected. */\n    this.selected = false;\n    /** When `true`, the component is expanded. */\n    this.expanded = false;\n    /**\n     * @internal\n     */\n    this.parentExpanded = false;\n    /**\n     * @internal\n     */\n    this.depth = -1;\n    /**\n     * @internal\n     */\n    this.hasChildren = null;\n    this.iconClickHandler = (event) => {\n      event.stopPropagation();\n      this.expanded = !this.expanded;\n    };\n    this.childrenClickHandler = (event) => event.stopPropagation();\n    //--------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    //--------------------------------------------------------------------------\n    this.updateParentIsExpanded = (el, expanded) => {\n      const items = getSlotted(el, SLOTS.children, {\n        all: true,\n        selector: \"calcite-tree-item\"\n      });\n      items.forEach((item) => (item.parentExpanded = expanded));\n    };\n    this.updateAncestorTree = () => {\n      var _a;\n      if (this.selected && this.selectionMode === TreeSelectionMode.Ancestors) {\n        const ancestors = [];\n        let parent = this.parentTreeItem;\n        while (parent) {\n          ancestors.push(parent);\n          parent = (_a = parent.parentElement) === null || _a === void 0 ? void 0 : _a.closest(\"calcite-tree-item\");\n        }\n        ancestors.forEach((item) => (item.indeterminate = true));\n        return;\n      }\n    };\n  }\n  expandedHandler(newValue) {\n    this.updateParentIsExpanded(this.el, newValue);\n  }\n  getselectionMode() {\n    this.isSelectionMultiLike =\n      this.selectionMode === TreeSelectionMode.Multiple ||\n        this.selectionMode === TreeSelectionMode.Multi ||\n        this.selectionMode === TreeSelectionMode.MultiChildren;\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  //--------------------------------------------------------------------------\n  connectedCallback() {\n    var _a;\n    this.parentTreeItem = (_a = this.el.parentElement) === null || _a === void 0 ? void 0 : _a.closest(\"calcite-tree-item\");\n    if (this.parentTreeItem) {\n      const { expanded } = this.parentTreeItem;\n      this.updateParentIsExpanded(this.parentTreeItem, expanded);\n    }\n    connectConditionalSlotComponent(this);\n  }\n  disconnectedCallback() {\n    disconnectConditionalSlotComponent(this);\n  }\n  componentWillRender() {\n    var _a;\n    this.hasChildren = !!this.el.querySelector(\"calcite-tree\");\n    this.depth = 0;\n    let parentTree = this.el.closest(\"calcite-tree\");\n    if (!parentTree) {\n      return;\n    }\n    this.selectionMode = parentTree.selectionMode;\n    this.scale = parentTree.scale || \"m\";\n    this.lines = parentTree.lines;\n    let nextParentTree;\n    while (parentTree) {\n      nextParentTree = (_a = parentTree.parentElement) === null || _a === void 0 ? void 0 : _a.closest(\"calcite-tree\");\n      if (nextParentTree === parentTree) {\n        break;\n      }\n      else {\n        parentTree = nextParentTree;\n        this.depth = this.depth + 1;\n      }\n    }\n  }\n  componentDidLoad() {\n    this.updateAncestorTree();\n  }\n  componentDidRender() {\n    updateHostInteraction(this, () => this.parentExpanded || this.depth === 1);\n  }\n  render() {\n    const rtl = getElementDir(this.el) === \"rtl\";\n    const showBulletPoint = this.selectionMode === TreeSelectionMode.Single ||\n      this.selectionMode === TreeSelectionMode.Children;\n    const showCheckmark = this.selectionMode === TreeSelectionMode.Multi ||\n      this.selectionMode === TreeSelectionMode.Multiple ||\n      this.selectionMode === TreeSelectionMode.MultiChildren;\n    const showBlank = this.selectionMode === TreeSelectionMode.None && !this.hasChildren;\n    const chevron = this.hasChildren ? (h(\"calcite-icon\", { class: {\n        [CSS.chevron]: true,\n        [CSS_UTILITY.rtl]: rtl\n      }, \"data-test-id\": \"icon\", icon: ICONS.chevronRight, onClick: this.iconClickHandler, scale: \"s\" })) : null;\n    const defaultSlotNode = h(\"slot\", { key: \"default-slot\" });\n    const checkbox = this.selectionMode === TreeSelectionMode.Ancestors ? (h(\"label\", { class: CSS.checkboxLabel, key: \"checkbox-label\" }, h(\"calcite-checkbox\", { checked: this.selected, class: CSS.checkbox, \"data-test-id\": \"checkbox\", indeterminate: this.hasChildren && this.indeterminate, scale: this.scale, tabIndex: -1 }), defaultSlotNode)) : null;\n    const selectedIcon = showBulletPoint\n      ? ICONS.bulletPoint\n      : showCheckmark\n        ? ICONS.checkmark\n        : showBlank\n          ? ICONS.blank\n          : null;\n    const itemIndicator = selectedIcon ? (h(\"calcite-icon\", { class: {\n        [CSS.bulletPointIcon]: selectedIcon === ICONS.bulletPoint,\n        [CSS.checkmarkIcon]: selectedIcon === ICONS.checkmark,\n        [CSS_UTILITY.rtl]: rtl\n      }, icon: selectedIcon, scale: \"s\" })) : null;\n    const hidden = !(this.parentExpanded || this.depth === 1);\n    return (h(Host, { \"aria-expanded\": this.hasChildren ? toAriaBoolean(this.expanded) : undefined, \"aria-hidden\": toAriaBoolean(hidden), \"aria-selected\": this.selected ? \"true\" : showCheckmark ? \"false\" : undefined, \"calcite-hydrated-hidden\": hidden, role: \"treeitem\" }, h(\"div\", { class: {\n        [CSS.nodeContainer]: true,\n        [CSS_UTILITY.rtl]: rtl\n      }, \"data-selection-mode\": this.selectionMode, ref: (el) => (this.defaultSlotWrapper = el) }, chevron, itemIndicator, checkbox ? checkbox : defaultSlotNode), h(\"div\", { class: {\n        [CSS.childrenContainer]: true,\n        [CSS_UTILITY.rtl]: rtl\n      }, \"data-test-id\": \"calcite-tree-children\", onClick: this.childrenClickHandler, ref: (el) => (this.childrenSlotWrapper = el), role: this.hasChildren ? \"group\" : undefined }, h(\"slot\", { name: SLOTS.children }))));\n  }\n  //--------------------------------------------------------------------------\n  //\n  //  Event Listeners\n  //\n  //--------------------------------------------------------------------------\n  onClick(event) {\n    // Solve for if the item is clicked somewhere outside the slotted anchor.\n    // Anchor is triggered anywhere you click\n    const [link] = filterDirectChildren(this.el, \"a\");\n    if (link && event.composedPath()[0].tagName.toLowerCase() !== \"a\") {\n      const target = link.target === \"\" ? \"_self\" : link.target;\n      window.open(link.href, target);\n    }\n    this.calciteInternalTreeItemSelect.emit({\n      modifyCurrentSelection: this.selectionMode === TreeSelectionMode.Ancestors || this.isSelectionMultiLike,\n      forceToggle: false\n    });\n  }\n  keyDownHandler(event) {\n    let root;\n    switch (event.key) {\n      case \" \":\n        this.calciteInternalTreeItemSelect.emit({\n          modifyCurrentSelection: this.isSelectionMultiLike,\n          forceToggle: false\n        });\n        event.preventDefault();\n        break;\n      case \"Enter\":\n        // activates a node, i.e., performs its default action. For parent nodes, one possible default action is to open or close the node. In single-select trees where selection does not follow focus (see note below), the default action is typically to select the focused node.\n        const link = nodeListToArray(this.el.children).find((el) => el.matches(\"a\"));\n        if (link) {\n          link.click();\n          this.selected = true;\n        }\n        else {\n          this.calciteInternalTreeItemSelect.emit({\n            modifyCurrentSelection: this.isSelectionMultiLike,\n            forceToggle: false\n          });\n        }\n        event.preventDefault();\n        break;\n      case \"Home\":\n        root = this.el.closest(\"calcite-tree:not([child])\");\n        const firstNode = root.querySelector(\"calcite-tree-item\");\n        firstNode === null || firstNode === void 0 ? void 0 : firstNode.focus();\n        break;\n      case \"End\":\n        root = this.el.closest(\"calcite-tree:not([child])\");\n        let currentNode = root.children[root.children.length - 1]; // last child\n        let currentTree = nodeListToArray(currentNode.children).find((el) => el.matches(\"calcite-tree\"));\n        while (currentTree) {\n          currentNode = currentTree.children[root.children.length - 1];\n          currentTree = nodeListToArray(currentNode.children).find((el) => el.matches(\"calcite-tree\"));\n        }\n        currentNode === null || currentNode === void 0 ? void 0 : currentNode.focus();\n        break;\n    }\n  }\n  get el() { return getElement(this); }\n  static get watchers() { return {\n    \"expanded\": [\"expandedHandler\"],\n    \"selectionMode\": [\"getselectionMode\"]\n  }; }\n};\nTreeItem.style = treeItemCss;\n\nexport { ArcgisHubDateRangeFacet as arcgis_hub_date_range_facet, ArcgisHubEmptyState as arcgis_hub_empty_state, ArcgisHubFacetList as arcgis_hub_facet_list, ArcgisHubFacetOptions as arcgis_hub_facet_options, ArcgisHubGallery as arcgis_hub_gallery, ArcgisHubLayoutButton as arcgis_hub_layout_button, ArcgisHubSearchInput as arcgis_hub_search_input, ArcgisHubSearchSort as arcgis_hub_search_sort, ArcgisHubTreeFacet as arcgis_hub_tree_facet, Accordion as calcite_accordion, AccordionItem as calcite_accordion_item, Tree as calcite_tree, TreeItem as calcite_tree_item };\n","import { f as forceUpdate } from './index-0d95d9d4.js';\nimport { c as createObserver } from './observers-2b214c17.js';\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nconst observed = new Set();\nlet mutationObserver;\nconst observerOptions = { childList: true };\n/**\n * Helper to set up a conditional slot component on connectedCallback.\n *\n * @param component\n */\nfunction connectConditionalSlotComponent(component) {\n  if (!mutationObserver) {\n    mutationObserver = createObserver(\"mutation\", processMutations);\n  }\n  mutationObserver.observe(component.el, observerOptions);\n}\n/**\n * Helper to tear down a conditional slot component on disconnectedCallback.\n *\n * @param component\n */\nfunction disconnectConditionalSlotComponent(component) {\n  observed.delete(component.el);\n  // we explicitly process queued mutations and disconnect and reconnect\n  // the observer until MutationObserver gets an `unobserve` method\n  // see https://github.com/whatwg/dom/issues/126\n  processMutations(mutationObserver.takeRecords());\n  mutationObserver.disconnect();\n  for (const [element] of observed.entries()) {\n    mutationObserver.observe(element, observerOptions);\n  }\n}\nfunction processMutations(mutations) {\n  mutations.forEach(({ target }) => {\n    forceUpdate(target);\n  });\n}\n\nexport { connectConditionalSlotComponent as c, disconnectConditionalSlotComponent as d };\n","/**\n * A util to debounce another function. It will return a function\n * that, as long as it continues to be invoked, will not be triggered\n * until the designated timeout has passed.\n */\nfunction debounce(fn, timeout = 300) {\n  let timeoutId;\n  return function (context, ...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(context, args), timeout);\n  };\n}\n\nfunction DebounceDecoratorFactory(params) {\n  function DebounceDecorator(_target, propertyKey, descriptor) {\n    const { value: original } = descriptor;\n    const debouncedKey = `${propertyKey.toString()}Debounced`;\n    const value = function (...args) {\n      if (!this[debouncedKey]) {\n        Object.defineProperty(this, debouncedKey, {\n          value: debounce(original, params.timeout),\n        });\n      }\n      this[debouncedKey](this, ...args);\n    };\n    return Object.assign(Object.assign({}, descriptor), { value });\n  }\n  return DebounceDecorator;\n}\n\nexport { DebounceDecoratorFactory as D };\n","import { C as CSS_UTILITY } from './resources-919972af.js';\nimport { g as guid } from './guid-ddc4f6da.js';\n\n/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\n/**\n * This helper will guarantee an ID on the provided element.\n *\n * If it already has an ID, it will be preserved, otherwise a unique one will be generated and assigned.\n *\n * @param el\n * @returns {string} The element's ID.\n */\nfunction ensureId(el) {\n  if (!el) {\n    return \"\";\n  }\n  return (el.id = el.id || `${el.tagName.toLowerCase()}-${guid()}`);\n}\nfunction nodeListToArray(nodeList) {\n  return Array.isArray(nodeList) ? nodeList : Array.from(nodeList);\n}\nfunction getThemeName(el) {\n  const closestElWithTheme = closestElementCrossShadowBoundary(el, `.${CSS_UTILITY.darkTheme}, .${CSS_UTILITY.lightTheme}`);\n  return (closestElWithTheme === null || closestElWithTheme === void 0 ? void 0 : closestElWithTheme.classList.contains(\"calcite-theme-dark\")) ? \"dark\" : \"light\";\n}\nfunction getElementDir(el) {\n  const prop = \"dir\";\n  const selector = `[${prop}]`;\n  const closest = closestElementCrossShadowBoundary(el, selector);\n  return closest ? closest.getAttribute(prop) : \"ltr\";\n}\nfunction getElementProp(el, prop, fallbackValue) {\n  const selector = `[${prop}]`;\n  const closest = el.closest(selector);\n  return closest ? closest.getAttribute(prop) : fallbackValue;\n}\nfunction getRootNode(el) {\n  return el.getRootNode();\n}\nfunction getHost(root) {\n  return root.host || null;\n}\n/**\n * This helper queries an element's rootNode and any ancestor rootNodes.\n *\n * If both an 'id' and 'selector' are supplied, 'id' will take precedence over 'selector'.\n *\n * @param element\n * @param root0\n * @param root0.selector\n * @param root0.id\n * @returns {Element} The element.\n */\nfunction queryElementRoots(element, { selector, id }) {\n  // Gets the rootNode and any ancestor rootNodes (shadowRoot or document) of an element and queries them for a selector.\n  // Based on: https://stackoverflow.com/q/54520554/194216\n  function queryFrom(el) {\n    if (!el) {\n      return null;\n    }\n    if (el.assignedSlot) {\n      el = el.assignedSlot;\n    }\n    const rootNode = getRootNode(el);\n    const found = id\n      ? \"getElementById\" in rootNode\n        ? /*\n          Check to make sure 'getElementById' exists in cases where element is no longer connected to the DOM and getRootNode() returns the element.\n          https://github.com/Esri/calcite-components/pull/4280\n           */\n          rootNode.getElementById(id)\n        : null\n      : selector\n        ? rootNode.querySelector(selector)\n        : null;\n    const host = getHost(rootNode);\n    return found ? found : host ? queryFrom(host) : null;\n  }\n  return queryFrom(element);\n}\nfunction closestElementCrossShadowBoundary(element, selector) {\n  // based on https://stackoverflow.com/q/54520554/194216\n  function closestFrom(el) {\n    return el ? el.closest(selector) || closestFrom(getHost(getRootNode(el))) : null;\n  }\n  return closestFrom(element);\n}\n/**\n * This utility helps invoke a callback as it traverses a node and its ancestors until reaching the root document.\n *\n * Returning early or undefined in `onVisit` will continue traversing up the DOM tree. Otherwise, traversal will halt with the returned value as the result of the function\n *\n * @param element\n * @param onVisit\n */\nfunction walkUpAncestry(element, onVisit) {\n  return visit(element, onVisit);\n}\nfunction visit(node, onVisit) {\n  if (!node) {\n    return;\n  }\n  const result = onVisit(node);\n  if (result !== undefined) {\n    return result;\n  }\n  const { parentNode } = node;\n  return visit(parentNode instanceof ShadowRoot ? parentNode.host : parentNode, onVisit);\n}\nfunction containsCrossShadowBoundary(element, maybeDescendant) {\n  return !!walkUpAncestry(maybeDescendant, (node) => (node === element ? true : undefined));\n}\nfunction isCalciteFocusable(el) {\n  return typeof (el === null || el === void 0 ? void 0 : el.setFocus) === \"function\";\n}\nasync function focusElement(el) {\n  if (!el) {\n    return;\n  }\n  return isCalciteFocusable(el) ? el.setFocus() : el.focus();\n}\nconst defaultSlotSelector = \":not([slot])\";\nfunction getSlotted(element, slotName, options) {\n  if (slotName && !Array.isArray(slotName) && typeof slotName !== \"string\") {\n    options = slotName;\n    slotName = null;\n  }\n  const slotSelector = slotName\n    ? Array.isArray(slotName)\n      ? slotName.map((name) => `[slot=\"${name}\"]`).join(\",\")\n      : `[slot=\"${slotName}\"]`\n    : defaultSlotSelector;\n  if (options === null || options === void 0 ? void 0 : options.all) {\n    return queryMultiple(element, slotSelector, options);\n  }\n  return querySingle(element, slotSelector, options);\n}\nfunction getDirectChildren(el, selector) {\n  return el ? Array.from(el.children || []).filter((child) => child === null || child === void 0 ? void 0 : child.matches(selector)) : [];\n}\nfunction queryMultiple(element, slotSelector, options) {\n  let matches = slotSelector === defaultSlotSelector\n    ? getDirectChildren(element, defaultSlotSelector)\n    : Array.from(element.querySelectorAll(slotSelector));\n  matches = options && options.direct === false ? matches : matches.filter((el) => el.parentElement === element);\n  matches = (options === null || options === void 0 ? void 0 : options.matches) ? matches.filter((el) => el === null || el === void 0 ? void 0 : el.matches(options.matches)) : matches;\n  const selector = options === null || options === void 0 ? void 0 : options.selector;\n  return selector\n    ? matches\n      .map((item) => Array.from(item.querySelectorAll(selector)))\n      .reduce((previousValue, currentValue) => [...previousValue, ...currentValue], [])\n      .filter((match) => !!match)\n    : matches;\n}\nfunction querySingle(element, slotSelector, options) {\n  let match = slotSelector === defaultSlotSelector\n    ? getDirectChildren(element, defaultSlotSelector)[0] || null\n    : element.querySelector(slotSelector);\n  match = options && options.direct === false ? match : (match === null || match === void 0 ? void 0 : match.parentElement) === element ? match : null;\n  match = (options === null || options === void 0 ? void 0 : options.matches) ? ((match === null || match === void 0 ? void 0 : match.matches(options.matches)) ? match : null) : match;\n  const selector = options === null || options === void 0 ? void 0 : options.selector;\n  return selector ? match === null || match === void 0 ? void 0 : match.querySelector(selector) : match;\n}\nfunction filterDirectChildren(el, selector) {\n  return Array.from(el.children).filter((child) => child.matches(selector));\n}\n// set a default icon from a defined set or allow an override with an icon name string\nfunction setRequestedIcon(iconObject, iconValue, matchedValue) {\n  if (typeof iconValue === \"string\" && iconValue !== \"\") {\n    return iconValue;\n  }\n  else if (iconValue === \"\") {\n    return iconObject[matchedValue];\n  }\n}\nfunction intersects(rect1, rect2) {\n  return !(rect2.left > rect1.right ||\n    rect2.right < rect1.left ||\n    rect2.top > rect1.bottom ||\n    rect2.bottom < rect1.top);\n}\n/**\n * This helper makes sure that boolean aria attributes are properly converted to a string.\n *\n * It should only be used for aria attributes that require a string value of \"true\" or \"false\".\n *\n * @param value\n * @returns {string} The string conversion of a boolean value (\"true\" | \"false\").\n */\nfunction toAriaBoolean(value) {\n  return Boolean(value).toString();\n}\n/**\n * This helper returns true if the pointer event fired from the primary button of the device.\n *\n * See https://www.w3.org/TR/pointerevents/#the-button-property.\n *\n * @param event\n * @returns {boolean}\n */\nfunction isPrimaryPointerButton(event) {\n  return !!(event.isPrimary && event.button === 0);\n}\n\nexport { getElementDir as a, getSlotted as b, closestElementCrossShadowBoundary as c, containsCrossShadowBoundary as d, intersects as e, focusElement as f, getElementProp as g, getThemeName as h, isPrimaryPointerButton as i, getRootNode as j, filterDirectChildren as k, ensureId as l, isCalciteFocusable as m, nodeListToArray as n, queryElementRoots as q, setRequestedIcon as s, toAriaBoolean as t };\n","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nfunction gen(counts) {\n  return counts\n    .map((count) => {\n    let out = \"\";\n    for (let i = 0; i < count; i++) {\n      out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n    }\n    return out;\n  })\n    .join(\"-\");\n}\nconst guid = () => gen([2, 1, 1, 1, 3]);\n\nexport { guid as g };\n","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\nfunction noopClick() {\n  /** noop */\n}\n/**\n * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.\n *\n * This should be used in the `componentDidRender` lifecycle hook.\n *\n * **Notes**\n *\n * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.\n * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error\n *\n * @param component\n * @param hostIsTabbable\n */\nfunction updateHostInteraction(component, hostIsTabbable = false) {\n  if (component.disabled) {\n    component.el.setAttribute(\"tabindex\", \"-1\");\n    component.el.setAttribute(\"aria-disabled\", \"true\");\n    if (component.el.contains(document.activeElement)) {\n      document.activeElement.blur();\n    }\n    component.el.click = noopClick;\n    return;\n  }\n  component.el.click = HTMLElement.prototype.click;\n  if (typeof hostIsTabbable === \"function\") {\n    component.el.setAttribute(\"tabindex\", hostIsTabbable.call(component) ? \"0\" : \"-1\");\n  }\n  else if (hostIsTabbable === true) {\n    component.el.setAttribute(\"tabindex\", \"0\");\n  }\n  else if (hostIsTabbable === false) {\n    component.el.removeAttribute(\"tabindex\");\n  }\n  else ;\n  component.el.removeAttribute(\"aria-disabled\");\n}\n\nexport { updateHostInteraction as u };\n","var ALIGNMENTS;\n(function (ALIGNMENTS) {\n  ALIGNMENTS[\"start\"] = \"start\";\n  ALIGNMENTS[\"center\"] = \"center\";\n  ALIGNMENTS[\"end\"] = \"end\";\n})(ALIGNMENTS || (ALIGNMENTS = {}));\nvar CORNERS;\n(function (CORNERS) {\n  CORNERS[\"square\"] = \"square\";\n  CORNERS[\"round\"] = \"round\";\n})(CORNERS || (CORNERS = {}));\nvar DROP_SHADOWS;\n(function (DROP_SHADOWS) {\n  DROP_SHADOWS[\"none\"] = \"none\";\n  DROP_SHADOWS[\"low\"] = \"low\";\n  DROP_SHADOWS[\"medium\"] = \"medium\";\n  DROP_SHADOWS[\"heavy\"] = \"heavy\";\n})(DROP_SHADOWS || (DROP_SHADOWS = {}));\nvar LAYOUTS;\n(function (LAYOUTS) {\n  LAYOUTS[\"simple\"] = \"simple\";\n  LAYOUTS[\"dataViz\"] = \"dataViz\";\n  LAYOUTS[\"moreInfo\"] = \"moreInfo\";\n})(LAYOUTS || (LAYOUTS = {}));\nvar UNIT_POSITIONS;\n(function (UNIT_POSITIONS) {\n  UNIT_POSITIONS[\"before\"] = \"before\";\n  UNIT_POSITIONS[\"after\"] = \"after\";\n  UNIT_POSITIONS[\"below\"] = \"below\";\n})(UNIT_POSITIONS || (UNIT_POSITIONS = {}));\nvar VISUAL_INTEREST;\n(function (VISUAL_INTEREST) {\n  VISUAL_INTEREST[\"none\"] = \"none\";\n  VISUAL_INTEREST[\"sparkline\"] = \"sparkline\";\n  VISUAL_INTEREST[\"icon\"] = \"icon\";\n  VISUAL_INTEREST[\"logo\"] = \"logo\";\n})(VISUAL_INTEREST || (VISUAL_INTEREST = {}));\nvar IMAGE_TYPES;\n(function (IMAGE_TYPES) {\n  IMAGE_TYPES[\"thumbnail\"] = \"thumbnail\";\n  IMAGE_TYPES[\"icon\"] = \"icon\";\n})(IMAGE_TYPES || (IMAGE_TYPES = {}));\n\nexport { ALIGNMENTS as A, CORNERS as C, DROP_SHADOWS as D, IMAGE_TYPES as I, LAYOUTS as L, UNIT_POSITIONS as U, VISUAL_INTEREST as V };\n","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.\n * v1.0.0-beta.98\n */\n/**\n * This utility ensures observers are created only for browser contexts.\n *\n * @param type - the type of observer to create\n * @param callback - the observer callback\n * @param options - the observer options\n */\nfunction createObserver(type, callback, options) {\n  const Observer = getObserver(type);\n  return new Observer(callback, options);\n}\nfunction getObserver(type) {\n  // based on https://github.com/whatwg/dom/issues/126#issuecomment-1049814948\n  class ExtendedMutationObserver extends window.MutationObserver {\n    constructor(callback) {\n      super(callback);\n      this.observedEntry = [];\n      this.callback = callback;\n    }\n    observe(target, options) {\n      this.observedEntry.push({ target, options });\n      return super.observe(target, options);\n    }\n    unobserve(target) {\n      const newObservedEntries = this.observedEntry.filter((observed) => observed.target !== target);\n      this.observedEntry = [];\n      this.callback(super.takeRecords(), this);\n      this.disconnect();\n      newObservedEntries.forEach((observed) => this.observe(observed.target, observed.options));\n    }\n  }\n  return (function () {\n    return (type === \"intersection\"\n      ? window.IntersectionObserver\n      : type === \"mutation\"\n        ? ExtendedMutationObserver\n        : window.ResizeObserver);\n  })();\n}\n\nexport { createObserver as c };\n","/* Manages a single ResizeObserver to be used by all components\n * usage: ResizeObserverManager.addHandler(this.element, handler);\n *        ResizeObserverManager.removeHandler(this.element, handler); or ResizeObserverManager.unobserve(this.element);\n */\nclass ResizeObserverManager {\n  // protected to allow wrapper class in test file that extends this class\n  constructor() {\n    this.resizeObserver = new ResizeObserver(this.onResize.bind(this));\n    this.handlers = new WeakMap();\n  }\n  /**\n   * Static method to create an instance of ResizeObserverManager\n   */\n  static create() {\n    if (!ResizeObserverManager.instance) {\n      ResizeObserverManager.instance = new ResizeObserverManager();\n    }\n    return ResizeObserverManager.instance;\n  }\n  /**\n   * Static method to add a resize handler for a particular element\n   */\n  static addHandler(element, fn) {\n    this.create();\n    this.instance.addHandler(element, fn);\n  }\n  /**\n   * Static method to remove a particular resize handler for a particular element\n   */\n  static removeHandler(element, fn) {\n    if (this.instance) {\n      this.instance.removeHandler(element, fn);\n    }\n  }\n  /**\n   * Static method to remove all resize handlers for a particular element\n   */\n  static unobserve(element) {\n    if (this.instance) {\n      this.instance.unobserve(element);\n    }\n  }\n  /**\n   * Instance method to add a resize handler for a particular element\n   */\n  addHandler(element, fn) {\n    if (!this.handlers.has(element)) {\n      // if we are not already observing the element, initialize the handlers array and observe the element\n      this.handlers.set(element, []);\n      this.resizeObserver.observe(element);\n    }\n    // push the fn into the handlers array if it is not already there\n    const handlers = this.handlers.get(element);\n    if (!handlers.includes(fn)) {\n      handlers.push(fn);\n    }\n  }\n  /**\n   * Instance method to remove a particular resize handler for a particular element\n   */\n  removeHandler(element, fn) {\n    // conditionally destroy a handler if one exists for the given element and fn\n    if (this.handlers.has(element)) {\n      // if we are observing the element\n      const handlers = this.handlers.get(element);\n      const idx = handlers.indexOf(fn);\n      // filter out the fn\n      const newHandlers = handlers.filter((_, _idx) => _idx !== idx);\n      if (newHandlers.length) {\n        // if it is not the last handler for the element, set the filtered handlers as the new handlers array for the element\n        this.handlers.set(element, newHandlers);\n      }\n      else {\n        // if it is the last handler for the element, remove the handlers array and unobserve the element\n        this.handlers.delete(element);\n        this.resizeObserver.unobserve(element);\n      }\n    }\n  }\n  /**\n   * Instance method to remove all resize handlers for a particular element\n   */\n  unobserve(element) {\n    if (this.handlers.has(element)) {\n      // if we were observing the element, delete its handlers array and unobserve the element\n      this.handlers.delete(element);\n      this.resizeObserver.unobserve(element);\n    }\n  }\n  onResize(entries) {\n    // we wrap the callback in requestanimationframe to prevent an (benign) error related to the observer not being able to deliveer all observations within a single animation frame\n    requestAnimationFrame(_ => {\n      entries.forEach(e => {\n        var _a;\n        const handlers = (_a = this.handlers.get(e.target)) !== null && _a !== void 0 ? _a : [];\n        handlers.forEach(handler => handler());\n      });\n    });\n  }\n}\n\nexport { ResizeObserverManager as R };\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}"],"names":["createFacetsFromAggregations","aggregations","operation","result","length","forEach","entry","facet","label","field","key","display","options","values","filter","fv","predicate","filterMatchOption","value","fo","count","selected","predicates","push","removeEmptyProps","obj","Object","keys","isListFacet","getDateRangeFacets","facets","dateRangeFacets","isDateRangeFacet","isTreeFacet","getOptionsBasedFacets","optionsBasedFacets","isOptionsBasedFacet","applyGalleryState","state","serializedState","updated","cloneObject","query","sort","sortOptions","sortState","split","attribute","order","applySortState","map","facetState","stateEntry","selectedKeys","o","includes","applyListFacetState","selectedPartialKeys","find","pk","endsWith","applyTreeFacetState","_a","from","to","range","isValidDateRange","applyDateRangeFacetState","applyFacetState","resetted","opt","resetListFacet","resetDateRangeFacet","resetFacet","f","optionKey","p","serializeGalleryState","layout","reduce","s","assign","join","serializeOptionsBasedFacetState","_b","startDate","endDate","serializeDateRangeFacetState","serializeFacetState","convertToQueryString","queryString","entries","Date","parse","removeCountLabel","replace","trim","formatCommonDynamicOptions","intl","formattedOptions","formattedLabel","toUpperCase","toLowerCase","word","capitalize","translationKey","t","pathSegments","direction","addCountToLabel","ArcgisHubDateRangeFacet","hostRef","registerInstance","this","arcgisHubDateRangeFacetChange","createEvent","bind","event","preventDefault","getProp","setHours","toISOString","emit","inputDatePicker","shadowRoot","querySelector","style","document","createElement","dataset","hub","innerHTML","appendChild","maxDate","h","Host","max","ref","handleCalciteInputDatePickerRef","ArcgisHubEmptyState","message","icon","createTree","rawTree","createRawTree","children","getChildren","resultTree","addParentSelfNodes","parentTree","path","slice","addTreeBranches","subtree","facetOption","nextPath","shift","nextSubTree","option","hasChildren","tree","isTreeSelected","every","rootTree","child","addParentSelfNodesToSubtree","isParentSelf","renderSubtree","topLevelIndex","_telemetryIndex","class","slot","childTree","getTreeOptionLabel","segments","getMultiSelectFacetChips","optionLabel","getTreeFacetChips","getSubtreeChips","parentSelf","getParentSelfChild","chipOption","flat","dismissMultiSelectChip","chip","updatedFacet","dismissedKeys","dismissTreeChip","optionChildren","allChildrenSelected","ArcgisHubFacetList","arcgisHubFacetListChange","arcgisHubFacetListReset","hubTelemetry","showChips","disableTelemetry","intlManager","element","data","evt","maybeSendTelemetry","dist","details","detail","checked","position","optionIndex","getListFacets","getTreeFacets","optionKeys","formattedOptionKeys","index","findIndex","response","dismissFacetChip","allChips","facetChips","active","renderFacetComponent","chips","dismissible","scale","id","appearance","color","onClick","resetFacets","name","renderChips","renderFacets","getElement","SortDirection","ArcgisHubFacetOptions","arcgisHubFacetOptionsChange","arcgisHubFacetMoreLessClicked","showLimitedOptions","pageSize","optionLimit","onFacetChanged","target","checkboxIndex","orderBy","filteredOptions","a","b","localeCompare","el","pageSeparator","allOptions","orderedOptions","i","checkboxChangeHandler","handleCalciteCheckboxChangeEvent","onCalciteCheckboxChange","firstOptionsPage","remainingOptions","setPageSeparator","tabIndex","isMore","renderCheckboxes","focus","num","optionsLeftToDisplay","moreOrLessButtonIconEnd","toggleMoreOrLessButton","moreOrLessButtonLabel","onCalciteRadioButtonChange","handleCalciteRadioButtonChangeEvent","width","isMultiSelect","clearable","placeholder","renderRadioButtons","renderMoreOrLessButton","renderNoMatchesNotice","searchResultToCardViewModel","type","searchResultCardViewModelFactory","input","_c","typeKeywords","access","title","source","owner","summary","family","additionalInfo","actionLinks","badges","maybeAdd","links","thumbnail","self","custom","orgName","_input","userAdditionalInfo","isSharedUpdate","i18nKey","isOpenData","hasOwnProperty","membershipSummary","total","contentCount","groupAdditionalInfo","isSiteType","standardAdditionalInfo","siteAdditionalInfo","updatedDate","toLocaleDateString","tags","categories","shortenedCategories","c","layerCount","pageCount","createdDate","__decorate","decorators","desc","d","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","ArcgisHubGallery","arcgisHubGallerySelect","arcgisHubGalleryQueryChange","arcgisHubGalleryStateChange","arcgisHubGalleryResultsChange","arcgisHubGalleryAction","arcgisHubContentGalleryFacetModalClose","portal","apiType","limit","sortField","sortOrder","showThumbnail","imageType","IMAGE_TYPES","lazy","showSort","showSearch","showFacets","newTab","selectable","showMoreResultsBtn","showResultsCount","showBackToTopBtn","viewModels","include","corners","CORNERS","showAdditionalInfo","showEmptyState","showLinkButton","mobileView","showFacetModal","showBadges","showType","showOwner","showLayoutSwitcher","clickableCards","showSelection","loading","actions","models","_isStaticList","defaultOrder","gridColumns","getCardLayout","idx","numInLastRow","sortAttr","clientWidth","setProperty","_context","context","ArcGISContextManager","portalUrl","ctx","collection","targetEntity","galleryType","scope","filters","term","fetchDynamicFacetOptions","applySerializedState","_facetsCopy","serializedGalleryState","gallerySelection","item","group","user","groupMember","_gallerySelection","prepareAndExecuteSearch","ResizeObserverManager","handleResize","search","activeQuery","_searchOptions","resultTopSpan","updatedState","galleryState","fields","acc","batches","aggLimit","lastSearchResponse","selectedPredicates","fieldRange","_aggSearchOptionBatches","searchPromises","batchOptions","hubSearch","Promise","all","aggregationBatches","batchFacets","concat","aggFacet","existingFacet","Error","results","resultsWithLinks","applyTitleLinkCallback","sortByIds","sortedResults","indexOf","Infinity","_cachedModels","maybeShowButtons","model","titleUrl","linkButtonText","href","buttonStyle","linkButtonStyle","currentPageNumber","Math","ceil","next","console","error","preventScroll","parentElement","scrollIntoView","behavior","computeUrlCallback","baseUrl","siteRelative","qry","activeFacetFilters","activeDateRangeFilters","flattenArray","ids","not","hubUrl","api","url","_apiUrl","requestOptions","hubRequestOptions","baseBatchOptions","_aggLimit","searchOptionBatches","_aggFieldBatches","fieldBatch","aggFields","_activeSortOption","k","stopPropagation","updatedFacets","selection","without","text","layoutOptions","tooltip","hasNext","fetchMore","hasSearchResults","backToTop","activeSortOption","onHubSearchSortChange","changeSortField","renderMobileFacets","renderDesktopFacets","onArcgisHubFacetListChange","onFacetChange","onArcgisHubFacetListReset","additionalFacet","accordionClosed","onCalciteModalClose","onFacetModalClose","forceModalClose","numResults","component","action","log","headingRows","skeletons","Array","rows","showHeading","Fragment","className","components","Component","getCardComponentName","clickable","shadow","titleTag","cardTitleTag","renderResultsCount","renderListFooter","renderSkeletons","renderListHeader","setResultTopSpan","showSortOrLayoutControls","renderSort","renderLayoutSwitcher","renderMoreResultsBtn","renderBackToTopBtn","pageTotal","searchTotal","renderSearch","renderList","DebounceDecoratorFactory","timeout","prototype","ArcgisHubLayoutButton","arcgisHubLayoutButtonSelect","popoverElement","toggle","onMouseEnter","maybeOpenPopover","onMouseLeave","maybeClosePopover","selectLayout","placement","setPopoverElement","referenceElement","ArcgisHubSearchInput","inputChange","ev","ArcgisHubSearchSort","hubSearchSortChange","sortOrderIcon","selectedItems","dropdownEl","selectedValue","e","setDropdownEl","handleOrderChange","ArcgisHubTreeFacet","arcgisHubTreeFacetChange","topLevelPageSize","newSelectedKeys","difference","oldKeys","newKeys","removedKeys","addedKeys","n","getSelectionDifference","optionsAsTree","numTopLevelOptions","allTopLevelOptions","firstTopLevelOptionsPage","renderTopLevelOptions","renderMoreLessButton","Accordion","calciteInternalAccordionChange","iconPosition","iconType","selectionMode","items","sorted","sortItems","transparent","minimal","accordion","parent","itemToFocus","isFirstItem","itemIndex","isLastItem","focusFirstItem","focusNextItem","focusLastItem","focusPrevItem","requestedAccordionItem","firstItem","focusElement","lastItem","nextItem","prevItem","TreeSelectionMode","SLOTS$1","CSS$1","AccordionItem","calciteInternalAccordionItemKeyEvent","calciteInternalAccordionItemSelect","calciteInternalAccordionItemClose","calciteInternalAccordionItemRegister","expanded","itemHeaderClickHandler","emitRequestedItem","iconStart","getElementProp","isExpanded","activeHandler","expandedHandler","connectConditionalSlotComponent","itemPosition","getItemPosition","disconnectConditionalSlotComponent","getSlotted","dir","getElementDir","iconStartEl","iconEndEl","iconEnd","description","itemSubtitle","CSS_UTILITY","renderActionsStart","toAriaBoolean","role","tabindex","heading","itemTitle","renderActionsEnd","parentNode","determineActiveItem","call","querySelectorAll","getEnabledSiblingItem","directionProp","currentEl","enabledEl","matches","disabled","Tree","calciteTreeSelect","lines","inputEnabled","Single","closest","undefined","Multi","Multiple","MultiChildren","toString","getRootTabIndex","focusTarget","relatedTarget","contains","removeAttribute","childItems","nodeListToArray","Ancestors","isNoneSelectionMode","None","shouldSelect","Children","shouldModifyToCurrentSelection","modifyCurrentSelection","shouldSelectChildren","shouldClearCurrentSelection","shouldExpandTarget","targetItems","treeItem","forceToggle","window","getSelection","removeAllRanges","updateAncestorTree","root","tagName","previous","previousElementSibling","parentItem","getRootNode","activeElement","nextElementSibling","ancestors","childItemsWithNoChildren","childItemsWithChildren","futureSelected","indeterminate","updateItemState","ancestor","descendants","activeDescendants","unselected","CSS","SLOTS","ICONS","TreeItem","calciteInternalTreeItemSelect","parentExpanded","depth","iconClickHandler","childrenClickHandler","updateParentIsExpanded","selector","parentTreeItem","newValue","isSelectionMultiLike","nextParentTree","updateHostInteraction","rtl","showBulletPoint","showCheckmark","showBlank","chevron","defaultSlotNode","checkbox","selectedIcon","itemIndicator","hidden","defaultSlotWrapper","childrenSlotWrapper","filterDirectChildren","link","composedPath","open","click","firstNode","currentNode","currentTree","mutationObserver","observed","Set","observerOptions","childList","createObserver","processMutations","observe","delete","takeRecords","disconnect","mutations","forceUpdate","debounce","fn","timeoutId","args","clearTimeout","setTimeout","apply","params","_target","propertyKey","descriptor","original","debouncedKey","ensureId","guid","nodeList","isArray","getThemeName","closestElWithTheme","closestElementCrossShadowBoundary","classList","getAttribute","prop","fallbackValue","getHost","host","queryElementRoots","queryFrom","assignedSlot","rootNode","found","getElementById","closestFrom","walkUpAncestry","onVisit","visit","node","ShadowRoot","containsCrossShadowBoundary","maybeDescendant","isCalciteFocusable","setFocus","defaultSlotSelector","slotName","slotSelector","getDirectChildren","direct","previousValue","currentValue","match","queryMultiple","querySingle","setRequestedIcon","iconObject","iconValue","matchedValue","intersects","rect1","rect2","left","right","top","bottom","Boolean","isPrimaryPointerButton","isPrimary","button","out","random","substring","noopClick","hostIsTabbable","setAttribute","blur","HTMLElement","ALIGNMENTS","DROP_SHADOWS","LAYOUTS","UNIT_POSITIONS","VISUAL_INTEREST","callback","Observer","ExtendedMutationObserver","observedEntry","newObservedEntries","MutationObserver","IntersectionObserver","ResizeObserver","getObserver","resizeObserver","onResize","handlers","WeakMap","has","set","get","newHandlers","_","_idx","unobserve","requestAnimationFrame","handler","instance","create","addHandler","removeHandler","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","F","done","_e","TypeError","err","normalCompletion","didErr","step","_e2","_superPropBase","object","property","getPrototypeOf","_get","receiver","base"],"sourceRoot":""}