"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[79857],{94931:function(e,t,i){i.d(t,{Z:function(){return D}});var n,r=i(93433),a=i(74165),l=i(1413),s=i(15861),o=i(15671),u=i(43144),c=i(60136),p=i(92572),f=i(27366),d=i(51508),y=i(43404),v=i(84652),h=i(32718),m=i(92026),b=i(49861),g=i(89125),w=i(27135),V=i(38511),_=i(69912),x=i(31201),S=i(25243),k=i(80031),Z=i(49018),C=i(86893),I=i(81451),z=i(17364),j=i(87125),q=i(819),F="percent-of-total",E="field",T=new y.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:F,esriNormalizeByField:E}),O=(0,S.se)(I.Z),U=n=function(e){(0,c.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},n.backgroundFillSymbol=null,n.classBreakInfos=null,n.defaultLabel=null,n.defaultSymbol=null,n.field=null,n.isMaxInclusive=!0,n.legendOptions=null,n.normalizationField=null,n.normalizationTotal=null,n.type="class-breaks",n.valueExpression=null,n.valueExpressionTitle=null,n._set("classBreakInfos",[]),n}return(0,u.Z)(i,[{key:"readClassBreakInfos",value:function(e,t,i){if(Array.isArray(e)){var n=t.minValue;return e.map((function(e){var t=new I.Z;return t.read(e,i),null==t.minValue&&(t.minValue=n),null==t.maxValue&&(t.maxValue=t.minValue),n=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,i,n){var r=e.map((function(e){return e.write({},n)}));this._areClassBreaksConsecutive()&&r.forEach((function(e){return delete e.classMinValue})),t[i]=r}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(h.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,S.Zs)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,i=null!=this.normalizationTotal;return t||i?(e=t&&E||i&&F||null,t&&i&&h.Z.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):e!==E&&e!==F||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,i){var n;n="number"==typeof e?new I.Z({minValue:e,maxValue:t,symbol:(0,d.se)(i)}):O((0,v.d9)(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var i=this.classBreakInfos.length,n=0;n<i;n++){var r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(n,1);break}}}},{key:"getBreakIndex",value:function(e,t){return this.valueExpression&&((0,m.Wi)(t)||(0,m.Wi)(t.arcade))&&h.Z.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,m.Wi)(i)||(0,m.Wi)(i.arcade)),!e.t0){e.next=11;break}return e.t1=l.Z,e.t2=(0,l.Z)({},n),e.t3={},e.next=8,(0,q.LC)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return r=this.getBreakIndex(t,n),e.abrupt("return",-1!==r?this.classBreakInfos[r]:null);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,m.Wi)(t)&&!(0,m.Wi)(t.arcade)){var i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}h.Z.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n,r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,m.Wi)(i)&&!(0,m.Wi)(i.arcade)){e.next=11;break}return e.next=4,(0,q.LC)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,l.Z)((0,l.Z)({},n),{},{arcade:r});case 11:return o=this.getBreakIndex(t,n),e.abrupt("return",o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(i,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new n({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,v.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,v.d9)(this.visualVariables),legendOptions:(0,v.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[].concat((0,r.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,k.io)(t,i,this.valueExpression)]),(0,k.AB)(t,i,this.field),(0,k.AB)(t,i,this.normalizationField),e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getBreakIndexForExpression",value:function(e,t){var i=(0,m.Pt)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,l=i.arcade,s=this.valueExpression,o=this._compiledValueExpression.valueExpression===s?this._compiledValueExpression.compiledFunction:null,u=(0,m.Wg)(l).arcadeUtils;if(!o){var c=u.createSyntaxTree(s);o=u.createFunction(c),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=s;var p=u.executeFunction(o,u.createExecContext(e,u.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos(p)}},{key:"_getBreakIndexForField",value:function(e){var t=this.field,i=e.attributes,n=this.normalizationType,r=parseFloat(i[t]);if(n){var a=this.normalizationTotal,l=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if("log"===n)r=Math.log(r)*Math.LOG10E;else if(n!==F||null==a||isNaN(a)){if(n===E&&!isNaN(l)){if(isNaN(r)||isNaN(l))return-1;r/=l}}else r=r/a*100}return this._getBreakIndexfromInfos(r)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var i=0;i<this.classBreakInfos.length;i++){var n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return i}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}}]),i}((0,C.W)(Z.Z));(0,f._)([(0,b.Cb)(z.KK)],U.prototype,"backgroundFillSymbol",void 0),(0,f._)([(0,b.Cb)({type:[I.Z]})],U.prototype,"classBreakInfos",void 0),(0,f._)([(0,V.r)("classBreakInfos")],U.prototype,"readClassBreakInfos",null),(0,f._)([(0,x.c)("classBreakInfos")],U.prototype,"writeClassBreakInfos",null),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"defaultLabel",void 0),(0,f._)([(0,b.Cb)(z.Gn)],U.prototype,"defaultSymbol",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"field",void 0),(0,f._)([(0,g.p)("field")],U.prototype,"castField",null),(0,f._)([(0,b.Cb)({type:Boolean})],U.prototype,"isMaxInclusive",void 0),(0,f._)([(0,b.Cb)({type:j.I,json:{write:!0}})],U.prototype,"legendOptions",void 0),(0,f._)([(0,b.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],U.prototype,"minValue",null),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"normalizationField",void 0),(0,f._)([(0,b.Cb)({type:Number,cast:function(e){return(0,S.q9)(e)},json:{write:!0}})],U.prototype,"normalizationTotal",void 0),(0,f._)([(0,b.Cb)({type:T.apiValues,value:null,json:{type:T.jsonValues,read:T.read,write:T.write}})],U.prototype,"normalizationType",null),(0,f._)([(0,w.J)({classBreaks:"class-breaks"})],U.prototype,"type",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"valueExpression",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"valueExpressionTitle",void 0);var D=U=n=(0,f._)([(0,_.j)("esri.renderers.ClassBreaksRenderer")],U)},49018:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(74165),r=i(15861),a=i(15671),l=i(43144),s=i(60136),o=i(92572),u=i(27366),c=i(43404),p=i(46784),f=i(49861),d=(i(25243),i(63780),i(69912)),y=i(25472),v=new c.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0}),h=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).authoringInfo=null,n.type=null,n}return(0,l.Z)(i,[{key:"getRequiredFields",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return i=new Set,e.next=5,this.collectRequiredFields(i,t);case 5:return e.abrupt("return",Array.from(i).sort());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),i}(p.wq);(0,u._)([(0,f.Cb)({type:y.Z,json:{write:!0}})],h.prototype,"authoringInfo",void 0),(0,u._)([(0,f.Cb)({type:v.apiValues,readOnly:!0,json:{type:v.jsonValues,read:!1,write:{writer:v.write,ignoreOrigin:!0}}})],h.prototype,"type",void 0);var m=h=(0,u._)([(0,d.j)("esri.renderers.Renderer")],h)},28189:function(e,t,i){i.d(t,{Z:function(){return te}});var n=i(93433),r=i(37762),a=i(74165),l=i(1413),s=i(15861),o=i(15671),u=i(43144),c=i(60136),p=i(92572),f=i(29439),d=i(27366),y=i(51508),v=i(10064),h=i(84652),m=i(32718),b=i(92026),g=i(18202),w=i(94172),V=i(49861),_=i(89125),x=i(27135),S=i(38511),k=i(69912),Z=i(31201),C=i(48732),I=i(25243),z=i(80031),j=i(70032),q=i(49018),F=i(86893),E=i(17364),T=i(87125),O=i(11582),U=i(46784),D=(i(63780),function(e){(0,c.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).value=null,n.value2=null,n.value3=null,n}return(0,u.Z)(i)}((0,O.J)(U.wq)));(0,d._)([(0,V.Cb)(E.GY)],D.prototype,"value",void 0),(0,d._)([(0,V.Cb)(E.GY)],D.prototype,"value2",void 0),(0,d._)([(0,V.Cb)(E.GY)],D.prototype,"value3",void 0);var M=D=(0,d._)([(0,k.j)("esri.renderers.support.UniqueValue")],D),N=function(e){(0,c.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.values=null,n}return(0,u.Z)(i,[{key:"castValues",value:function(e){if(null==e)return null;var t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((function(e){return new M({value:e})})):"object"===t?e[0]instanceof M?e:e.map((function(e){return new M(e)})):null}}]),i}((0,O.J)(U.wq));(0,d._)([(0,V.Cb)({type:String,json:{write:!0}})],N.prototype,"description",void 0),(0,d._)([(0,V.Cb)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,d._)([(0,V.Cb)(E.Gn)],N.prototype,"symbol",void 0),(0,d._)([(0,V.Cb)({type:[M],json:{type:[[String]],read:{reader:function(e){return e?e.map((function(e){return new M({value:e[0],value2:e[1],value3:e[2]})})):null}},write:{writer:function(e,t){var i,n=[],a=(0,r.Z)(e);try{for(a.s();!(i=a.n()).done;){var l=i.value,s=[l.value,l.value2,l.value3].filter(b.pC).map((function(e){return e.toString()}));n.push(s)}}catch(o){a.e(o)}finally{a.f()}t.values=n}}}})],N.prototype,"values",void 0),(0,d._)([(0,_.p)("values")],N.prototype,"castValues",null);var B=N=(0,d._)([(0,k.j)("esri.renderers.support.UniqueValueClass")],N),R=function(e){(0,c.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e)).heading=null,n.classes=null,n}return(0,u.Z)(i)}((0,O.J)(U.wq));(0,d._)([(0,V.Cb)({type:String,json:{write:!0}})],R.prototype,"heading",void 0),(0,d._)([(0,V.Cb)({type:[B],json:{write:!0}})],R.prototype,"classes",void 0);var L,A=R=(0,d._)([(0,k.j)("esri.renderers.support.UniqueValueGroup")],R),G=i(62328),W=i(819),P=i(53283),H=i(38048),J=i(80045),Y="esri.renderers.UniqueValueRenderer",X=m.Z.getLogger(Y),K="uvInfos-watcher",$="uvGroups-watcher",Q=(0,I.se)(G.Z);var ee=L=function(e){(0,c.Z)(i,e);var t=(0,p.Z)(i);function i(e){var n;return(0,o.Z)(this,i),(n=t.call(this,e))._valueInfoMap={},n._isDefaultSymbolDerived=!1,n._isInfosSource=null,n.type="unique-value",n.backgroundFillSymbol=null,n.orderByClassesEnabled=!1,n.valueExpressionTitle=null,n.legendOptions=null,n.defaultLabel=null,n.portal=null,n.styleOrigin=null,n.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var i=!1,n={type:"collection",added:[],removed:[],changed:[],unchanged:[]},r=function(r){var a=e.find((function(e){return e.value===t[r].value}));a?(0,C.Hg)(a,t[r])?(n.changed.push({type:"complete",oldValue:a,newValue:t[r]}),i=!0):n.unchanged.push({oldValue:a,newValue:t[r]}):(n.added.push(t[r]),i=!0)},a=0;a<t.length;a++)r(a);for(var l=function(r){t.find((function(t){return t.value===e[r].value}))||(n.removed.push(e[r]),i=!0)},s=0;s<e.length;s++)l(s);return i?n:void 0}}},n._set("uniqueValueInfos",[]),n._set("uniqueValueGroups",[]),n}return(0,u.Z)(i,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"field",set:function(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:(0,I.Zs)(e)}},{key:"writeField",value:function(e,t,i,n){"string"==typeof e?t[i]=e:n&&n.messages?n.messages.push(new v.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):X.error(".field: cannot write field to JSON since it's not a string value")}},{key:"field2",set:function(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"field3",set:function(e){this._set("field3",e),this._updateUniqueValues()}},{key:"valueExpression",set:function(e){this._set("valueExpression",e),this._updateUniqueValues()}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"fieldDelimiter",set:function(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}},{key:"readPortal",value:function(e,t,i){return i.portal||j.Z.getDefault()}},{key:"readStyleOrigin",value:function(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var n=(0,P.f)(t.styleUrl,i);return Object.freeze({styleUrl:n})}}},{key:"writeStyleOrigin",value:function(e,t,i,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,P.t)(e.styleUrl,n))}},{key:"uniqueValueGroups",set:function(e){this.styleOrigin?X.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?X.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"addUniqueValueInfo",value:function(e,t){var i,n;this.styleOrigin?X.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(n="object"==typeof e?Q(e):new G.Z({value:e,symbol:(0,y.se)(t)}),null!==(i=this.uniqueValueInfos)&&void 0!==i&&i.push(n),this._valueInfoMap[n.value]=n,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)X.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else{var t=this.uniqueValueInfos;if(t)for(var i=0;i<t.length;i++)if(t[i].value===e+""){delete this._valueInfoMap[e],t.splice(i,1);break}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}}},{key:"getUniqueValueInfo",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,e.t0=this.valueExpression&&((0,b.Wi)(i)||(0,b.Wi)(i.arcade)),!e.t0){e.next=11;break}return e.t1=l.Z,e.t2=(0,l.Z)({},n),e.t3={},e.next=8,(0,W.LC)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},n=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||!(0,b.Wi)(t)&&!(0,b.Wi)(t.arcade)){var i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}X.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n,r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i,!this.valueExpression||!(0,b.Wi)(n)&&!(0,b.Wi)(n.arcade)){e.next=11;break}return e.next=4,(0,W.LC)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:n=(0,l.Z)((0,l.Z)({},n),{},{arcade:r});case 11:return o=this._getUniqueValueInfo(t,n),e.abrupt("return",o&&o.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e,t,i=[],n=(0,r.Z)(null!==(e=this.uniqueValueInfos)&&void 0!==e?e:[]);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.symbol&&i.push(a.symbol)}}catch(l){n.e(l)}finally{n.f()}return this.defaultSymbol&&i.push(this.defaultSymbol),i}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e,t=JSON.stringify(this.backgroundFillSymbol),i=JSON.stringify(this.defaultSymbol),n=null===(e=this.uniqueValueInfos)||void 0===e?void 0:e.reduce((function(e,t){return e+t.getMeshHash()}),"");return"".concat(t,".").concat(i,".").concat(n,".","".concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter),".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new L({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,h.d9)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,h.d9)(this.visualVariables),legendOptions:(0,h.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,h.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=(0,h.d9)(this.uniqueValueInfos),i=(0,h.d9)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,h.d9)(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.collectVVRequiredFields(t,i),this.collectSymbolFields(t,i)],e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,i){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat((0,n.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,i)}))),[(0,z.io)(t,i,this.valueExpression)]),(0,z.AB)(t,i,this.field),(0,z.AB)(t,i,this.field2),(0,z.AB)(t,i,this.field3),e.next=6,Promise.all(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"populateFromStyle",value:function(){var e=this;return(0,H.n2)(this.styleOrigin,{portal:this.portal}).then((function(t){var i,n=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(i){var r=new J.Z({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:i.name});e.defaultSymbol||i.name!==t.data.defaultItem||(e.defaultSymbol=r,e._isDefaultSymbolDerived=!0);var a=new G.Z({value:i.name,symbol:r});n.push(a),e._valueInfoMap[i.name]=a})),e._set("uniqueValueInfos",Object.freeze(n)),e._updateGroupsFromInfos(!0),e._isInfosSource=null,e._watchUniqueValueInfos(),!e.defaultSymbol&&null!==(i=e.uniqueValueInfos)&&void 0!==i&&i.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateFieldDelimiter",value:function(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}},{key:"_updateUniqueValues",value:function(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}},{key:"_updateValueInfoMap",value:function(){this._valueInfoMap={};var e=this.uniqueValueInfos;if(e){var t,i=(0,r.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;this._valueInfoMap[n.value+""]=n}}catch(a){i.e(a)}finally{i.f()}}}},{key:"_watchUniqueValueInfosAndGroups",value:function(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}},{key:"_watchUniqueValueInfos",value:function(){var e=this;this.removeHandles(K);var t=this.uniqueValueInfos;if(t){var i,n=[],a=(0,r.Z)(t);try{var l=function(){var t=i.value;n.push((0,w.YP)((function(){return{symbol:t.symbol,value:t.value,label:t.label,description:t.description}}),(function(t,i){t!==i&&(e._updateGroupsFromInfos(),e._isInfosSource=!0)}),{sync:!0}))};for(a.s();!(i=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}this.addHandles(n,K)}}},{key:"_watchUniqueValueGroups",value:function(){var e=this;this.removeHandles($);var t=this.uniqueValueGroups;if(t){var i,n=[],a=(0,r.Z)(t);try{var l=function(){var t,a=i.value;n.push((0,w.YP)((function(){return{classes:a.classes}}),(function(t,i){t!==i&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}));var l,s=(0,r.Z)(null!==(t=a.classes)&&void 0!==t?t:[]);try{var o=function(){var t=l.value;n.push((0,w.YP)((function(){return{symbol:t.symbol,values:t.values,label:t.label,description:t.description}}),(function(t,i){t!==i&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}))};for(s.s();!(l=s.n()).done;)o()}catch(u){s.e(u)}finally{s.f()}};for(a.s();!(i=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}this.addHandles(n,$)}}},{key:"_updateInfosFromGroups",value:function(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var e=[],t=this.field,i=this.field2,n=this.field3,a=this.fieldDelimiter,l=this.uniqueValueGroups,s=this.valueExpression;if(!t&&!s)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var o,u=!(!t||!i),c=(0,r.Z)(l);try{for(c.s();!(o=c.n()).done;){var p,f,d=o.value,y=(0,r.Z)(null!==(p=d.classes)&&void 0!==p?p:[]);try{for(y.s();!(f=y.n()).done;){var v,h=f.value,m=h.symbol,b=h.label,g=h.values,w=h.description,V=(0,r.Z)(null!==g&&void 0!==g?g:[]);try{for(V.s();!(v=V.n()).done;){var _=v.value,x=_.value,S=_.value2,k=_.value3,Z=[x];i&&Z.push(S),n&&Z.push(k);var C=u?Z.join(a||""):Z[0];e.push(new G.Z({symbol:m,label:b,value:C,description:w}))}}catch(I){V.e(I)}finally{V.f()}}}catch(I){y.e(I)}finally{y.f()}}}catch(I){c.e(I)}finally{c.f()}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}},{key:"_updateGroupsFromInfos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();var t=this.field,i=this.field2,n=this.valueExpression,r=this.fieldDelimiter,a=this.uniqueValueInfos;if(!t&&!n||!a.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();var l=!(!t||!i),s=a.map((function(e){var t,i=e.symbol,n=e.label,a=e.value,s=e.description,o=l?(null===a||void 0===a||null===(t=a.toString())||void 0===t?void 0:t.split(r||""))||[]:[a],u=(0,f.Z)(o,3),c=u[0],p=u[1],d=u[2];return new B({symbol:i,label:n,description:s,values:[new M({value:c,value2:p,value3:d})]})})),o=[new A({classes:s})];e&&Object.freeze(o),this._set("uniqueValueGroups",o),this._watchUniqueValueGroups()}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var i=(0,b.Pt)(t,{}),n=i.viewingMode,r=i.scale,a=i.spatialReference,l=i.arcade,s=this._cache.compiledFunc,o=(0,b.Wg)(l).arcadeUtils;if(!s){var u=o.createSyntaxTree(this.valueExpression);s=o.createFunction(u),this._cache.compiledFunc=s}var c=o.executeFunction(s,o.createExecContext(e,o.getViewInfo({viewingMode:n,scale:r,spatialReference:a})));return this._valueInfoMap[c+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,i=this.field,n=e.attributes;if("function"!=typeof i&&this.field2){var r=this.field2,a=this.field3,l=[];i&&l.push(n[i]),r&&l.push(n[r]),a&&l.push(n[a]),t=l.join(this.fieldDelimiter||"")}else"function"==typeof i?t=i(e):i&&(t=n[i]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var i=new L(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||j.Z.getDefault());var n=i.populateFromStyle();return n.catch((function(t){X.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),n}},{key:"fromStyleUrl",value:function(e,t){var i=new L(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));var n=i.populateFromStyle();return n.catch((function(t){X.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),n}}]),i}((0,F.W)(q.Z));(0,d._)([(0,V.Cb)({readOnly:!0})],ee.prototype,"_cache",null),(0,d._)([(0,x.J)({uniqueValue:"unique-value"})],ee.prototype,"type",void 0),(0,d._)([(0,V.Cb)(E.KK)],ee.prototype,"backgroundFillSymbol",void 0),(0,d._)([(0,V.Cb)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ee.prototype,"field",null),(0,d._)([(0,_.p)("field")],ee.prototype,"castField",null),(0,d._)([(0,Z.c)("field")],ee.prototype,"writeField",null),(0,d._)([(0,V.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"field2",null),(0,d._)([(0,V.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"field3",null),(0,d._)([(0,V.Cb)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ee.prototype,"orderByClassesEnabled",void 0),(0,d._)([(0,V.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"valueExpression",null),(0,d._)([(0,V.Cb)({type:String,json:{write:!0}})],ee.prototype,"valueExpressionTitle",void 0),(0,d._)([(0,V.Cb)({type:T.I,json:{write:!0}})],ee.prototype,"legendOptions",void 0),(0,d._)([(0,V.Cb)({type:String,json:{write:!0}})],ee.prototype,"defaultLabel",void 0),(0,d._)([(0,V.Cb)((0,g.RH)((0,l.Z)({},E.Gn),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ee.prototype,"defaultSymbol",null),(0,d._)([(0,V.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"fieldDelimiter",null),(0,d._)([(0,V.Cb)({type:j.Z,readOnly:!0})],ee.prototype,"portal",void 0),(0,d._)([(0,S.r)("portal",["styleName"])],ee.prototype,"readPortal",null),(0,d._)([(0,V.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],ee.prototype,"styleOrigin",void 0),(0,d._)([(0,S.r)("styleOrigin",["styleName","styleUrl"])],ee.prototype,"readStyleOrigin",null),(0,d._)([(0,Z.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ee.prototype,"writeStyleOrigin",null),(0,d._)([(0,V.Cb)({type:[A],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:function(e,t,i){return(t.uniqueValueGroups||function(e){var t=e.field1,i=e.field2,n=e.field3,r=e.fieldDelimiter,a=e.uniqueValueInfos,l=e.valueExpression,s=!(!t||!i);return[{classes:(null!==a&&void 0!==a?a:[]).map((function(e){var a,o=e.symbol,u=e.label,c=e.value,p=e.description,d=s?(null===c||void 0===c||null===(a=c.toString())||void 0===a?void 0:a.split(r||""))||[]:[c],y=(0,f.Z)(d,3),v=y[0],h=y[1],m=y[2],b=[];return(t||l)&&b.push(v),i&&b.push(h),n&&b.push(m),{symbol:o,label:u,values:[b],description:p}}))}]}(t)).map((function(e){return A.fromJSON(e,i)}))}},write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ee.prototype,"uniqueValueGroups",null),(0,d._)([(0,V.Cb)({type:[G.Z],json:{read:!1,write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ee.prototype,"uniqueValueInfos",null);var te=ee=L=(0,d._)([(0,k.j)(Y)],ee)},86893:function(e,t,i){i.d(t,{W:function(){return P}});var n,r=i(74165),a=i(15861),l=i(37762),s=i(15671),o=i(43144),u=i(60136),c=i(92572),p=i(27366),f=i(92026),d=i(49861),y=i(25243),v=(i(63780),i(38511)),h=i(69912),m=i(31201),b=i(80031),g=i(58801),w=i(11752),V=i(61120),_=i(4895),x=i(57203),S=n=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).type="color",n.normalizationField=null,n}return(0,o.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new n({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,w.Z)((0,V.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(_.Z);(0,p._)([(0,d.Cb)({readOnly:!0})],S.prototype,"cache",null),(0,p._)([(0,d.Cb)({type:["color"],json:{type:["colorInfo"]}})],S.prototype,"type",void 0),(0,p._)([(0,d.Cb)({type:String,json:{write:!0}})],S.prototype,"normalizationField",void 0),(0,p._)([(0,d.Cb)({type:[x.Z],json:{write:!0}})],S.prototype,"stops",null);var k,Z=S=n=(0,p._)([(0,h.j)("esri.renderers.visualVariables.ColorVariable")],S),C=i(46784),I=i(81219),z=k=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).label=null,n.opacity=null,n.value=null,n}return(0,o.Z)(i,[{key:"readOpacity",value:function(e,t){return(0,I.b)(t.transparency)}},{key:"writeOpacity",value:function(e,t,i){t[i]=(0,I.a)(e)}},{key:"clone",value:function(){return new k({label:this.label,opacity:this.opacity,value:this.value})}}]),i}(C.wq);(0,p._)([(0,d.Cb)({type:String,json:{write:!0}})],z.prototype,"label",void 0),(0,p._)([(0,d.Cb)({type:Number,json:{type:y.z8,write:{target:"transparency"}}})],z.prototype,"opacity",void 0),(0,p._)([(0,v.r)("opacity",["transparency"])],z.prototype,"readOpacity",null),(0,p._)([(0,m.c)("opacity")],z.prototype,"writeOpacity",null),(0,p._)([(0,d.Cb)({type:Number,json:{write:!0}})],z.prototype,"value",void 0);var j,q=z=k=(0,p._)([(0,h.j)("esri.renderers.visualVariables.support.OpacityStop")],z),F=j=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).type="opacity",n.normalizationField=null,n}return(0,o.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new j({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,w.Z)((0,V.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(_.Z);(0,p._)([(0,d.Cb)({readOnly:!0})],F.prototype,"cache",null),(0,p._)([(0,d.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],F.prototype,"type",void 0),(0,p._)([(0,d.Cb)({type:String,json:{write:!0}})],F.prototype,"normalizationField",void 0),(0,p._)([(0,d.Cb)({type:[q],json:{write:!0}})],F.prototype,"stops",null);var E=F=j=(0,p._)([(0,h.j)("esri.renderers.visualVariables.OpacityVariable")],F),T=i(53015),O=i(245),U=i(31319),D=i(43404),M=i(32718),N=i(51370),B={color:Z,size:O.Z,opacity:E,rotation:T.Z},R=new D.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),L=/^\[([^\]]+)\]$/i,A=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,s.Z)(this,i),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return(0,o.Z)(i,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,i=(0,l.Z)(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}}}catch(a){i.e(a)}finally{i.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,i){var n=this,r=t.rotationExpression,a=t.rotationType,l=r&&r.match(L),s=l&&l[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:a,field:s})),e)return e.map((function(e){var t=R.read(e.type),r=B[t];r||(M.Z.getLogger(n.declaredClass).warn("Unknown variable type: ".concat(t)),i&&i.messages&&i.messages.push(new N.Z("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:i})));var a=new r;return a.read(e,i),a}))}},{key:"writeVariables",value:function(e,t){var i,n=[],r=(0,l.Z)(e);try{for(r.s();!(i=r.n()).done;){var a=i.value.toJSON(t);a&&n.push(a)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),i}(U.Z);(0,p._)([(0,d.Cb)()],A.prototype,"visualVariables",null);var G=A=(0,p._)([(0,h.j)("esri.renderers.visualVariables.VisualVariableFactory")],A),W={base:_.Z,key:"type",typeMap:{opacity:E,color:Z,rotation:T.Z,size:O.Z}},P=function(e){var t=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,s.Z)(this,i),(e=t.apply(this,arguments))._vvFactory=new G,e}return(0,o.Z)(i,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,i){return this._vvFactory.readVariables(e,t,i)}},{key:"writeVisualVariables",value:function(e,t,i,n){t[i]=this._vvFactory.writeVariables(e,n)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=(0,l.Z)(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}},{key:"getVisualVariablesForType",value:function(e,t){var i=this.visualVariables;return i?i.filter((function(i){return i.type===e&&("string"==typeof t?i.target===t:!1!==t||!i.target)})):[]}},{key:"collectVVRequiredFields",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,i){var n,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],this.visualVariables&&(n=n.concat(this.visualVariables)),a=(0,l.Z)(n),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=19;break}if(o=s.value,e.t0=o,!e.t0){e.next=17;break}if(o.field&&(0,b.AB)(t,i,o.field),o.normalizationField&&(0,b.AB)(t,i,o.normalizationField),e.t1=o.valueExpression,!e.t1){e.next=17;break}if(e.t2=H(o.valueExpression,t,i),e.t2){e.next=17;break}return e.next=17,(0,b.io)(t,i,o.valueExpression);case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(3),a.e(e.t3);case 24:return e.prev=24,a.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[3,21,24,27]])})));return function(t,i){return e.apply(this,arguments)}}()}]),i}(e);return(0,p._)([(0,d.Cb)({types:[W],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,p._)([(0,v.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,p._)([(0,m.c)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,p._)([(0,h.j)("esri.renderers.mixins.VisualVariablesMixin")],t)};function H(e,t,i){var n=(0,g.v)(e);return!!(0,f.pC)(n)&&((0,b.AB)(t,i,n),!0)}},25472:function(e,t,i){i.d(t,{Z:function(){return D}});var n,r,a=i(15671),l=i(43144),s=i(60136),o=i(92572),u=i(27366),c=i(43404),p=i(46784),f=i(84652),d=i(49861),y=i(25243),v=i(38511),h=i(69912),m=(i(63780),n=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).minValue=0,n.maxValue=0,n}return(0,l.Z)(i,[{key:"clone",value:function(){return new n({minValue:this.minValue,maxValue:this.maxValue})}}]),i}(p.wq));(0,u._)([(0,d.Cb)({type:Number,json:{write:!0}})],m.prototype,"minValue",void 0),(0,u._)([(0,d.Cb)({type:Number,json:{write:!0}})],m.prototype,"maxValue",void 0),m=n=(0,u._)([(0,h.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],m);var b=r=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).field="",n.normalizationField="",n.label="",n.classBreakInfos=[],n}return(0,l.Z)(i,[{key:"clone",value:function(){return new r({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,f.d9)(this.classBreakInfos)})}}]),i}(p.wq);(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],b.prototype,"field",void 0),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],b.prototype,"label",void 0),(0,u._)([(0,d.Cb)({type:[m],json:{write:!0}})],b.prototype,"classBreakInfos",void 0),b=r=(0,u._)([(0,h.j)("esri.renderers.support.AuthoringInfoFieldInfo")],b);var g,w=i(93433),V=i(89125),_=new c.X({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),x=new c.X({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),S={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},k=["high-to-low","above-and-below","centered-on","extremes"],Z=(0,w.Z)(new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"].concat(["high-to-low","above-and-below","90-10","above","below"]))),C=["seconds","minutes","hours","days","months","years"],I=g=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).endTime=null,n.field=null,n.maxSliderValue=null,n.minSliderValue=null,n.startTime=null,n.type=null,n.units=null,n}return(0,l.Z)(i,[{key:"castEndTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"castStartTime",value:function(e){return"string"==typeof e||"number"==typeof e?e:null}},{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)}},{key:"clone",value:function(){return new g({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}}]),i}(p.wq);(0,u._)([(0,d.Cb)({types:S,json:{write:!0}})],I.prototype,"endTime",void 0),(0,u._)([(0,V.p)("endTime")],I.prototype,"castEndTime",null),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],I.prototype,"field",void 0),(0,u._)([(0,d.Cb)({type:Number,json:{write:!0}})],I.prototype,"maxSliderValue",void 0),(0,u._)([(0,d.Cb)({type:Number,json:{write:!0}})],I.prototype,"minSliderValue",void 0),(0,u._)([(0,d.Cb)({types:S,json:{write:!0}})],I.prototype,"startTime",void 0),(0,u._)([(0,V.p)("startTime")],I.prototype,"castStartTime",null),(0,u._)([(0,d.Cb)({type:_.apiValues,value:null,json:{type:_.jsonValues,read:_.read,write:_.write}})],I.prototype,"style",null),(0,u._)([(0,d.Cb)({type:Z,value:null,json:{type:Z,origins:{"web-scene":{type:k,write:{writer:function(e,t){k.includes(e)&&(t.theme=e)}}}},write:!0}})],I.prototype,"theme",null),(0,u._)([(0,d.Cb)({type:x.apiValues,json:{type:x.jsonValues,read:x.read,write:x.write}})],I.prototype,"type",void 0),(0,u._)([(0,d.Cb)({type:C,json:{type:C,write:!0}})],I.prototype,"units",void 0);var z,j=I=g=(0,u._)([(0,h.j)("esri.renderers.support.AuthoringInfoVisualVariable")],I),q=i(57634),F=new c.X({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),E=new c.X({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),T=new c.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),O=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],U=z=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this,e)).colorRamp=null,n.fadeRatio=null,n.isAutoGenerated=!1,n.lengthUnit=null,n.maxSliderValue=null,n.minSliderValue=null,n.visualVariables=null,n}return(0,l.Z)(i,[{key:"classificationMethod",get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)}},{key:"readColorRamp",value:function(e){return e?(0,q.i)(e):void 0}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)}},{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)}},{key:"flowTheme",get:function(){return"flow"===this.type?this._get("flowTheme"):null},set:function(e){this._set("flowTheme",e)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(e){this._set("statistics",e)}},{key:"standardDeviationInterval",get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)}},{key:"type",get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(e){this._set("univariateSymbolStyle",e)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(e){this._set("univariateTheme",e)}},{key:"clone",value:function(){return new z({classificationMethod:this.classificationMethod,colorRamp:(0,f.d9)(this.colorRamp),fadeRatio:(0,f.d9)(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:(0,f.d9)(this.field1),field2:(0,f.d9)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((function(e){return e.clone()})),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}}]),i}(p.wq);(0,u._)([(0,d.Cb)({type:F.apiValues,value:null,json:{type:F.jsonValues,read:F.read,write:F.write,origins:{"web-document":{default:"manual",type:F.jsonValues,read:F.read,write:F.write}}}})],U.prototype,"classificationMethod",null),(0,u._)([(0,d.Cb)({types:q.V,json:{write:!0}})],U.prototype,"colorRamp",void 0),(0,u._)([(0,v.r)("colorRamp")],U.prototype,"readColorRamp",null),(0,u._)([(0,d.Cb)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],U.prototype,"fadeRatio",void 0),(0,u._)([(0,d.Cb)({type:[String],value:null,json:{write:!0}})],U.prototype,"fields",null),(0,u._)([(0,d.Cb)({type:b,value:null,json:{write:!0}})],U.prototype,"field1",null),(0,u._)([(0,d.Cb)({type:b,value:null,json:{write:!0}})],U.prototype,"field2",null),(0,u._)([(0,d.Cb)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],U.prototype,"flowTheme",null),(0,u._)([(0,d.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],U.prototype,"focus",null),(0,u._)([(0,d.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],U.prototype,"isAutoGenerated",void 0),(0,u._)([(0,d.Cb)({type:Number,value:null,json:{type:y.z8,write:!0}})],U.prototype,"numClasses",null),(0,u._)([(0,d.Cb)({type:O,json:{type:O,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],U.prototype,"lengthUnit",void 0),(0,u._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],U.prototype,"maxSliderValue",void 0),(0,u._)([(0,d.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],U.prototype,"minSliderValue",void 0),(0,u._)([(0,d.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],U.prototype,"statistics",null),(0,u._)([(0,d.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],U.prototype,"standardDeviationInterval",null),(0,u._)([(0,d.Cb)({type:E.apiValues,value:null,json:{type:E.jsonValues,read:E.read,write:E.write,origins:{"web-scene":{type:T.jsonValues,write:{writer:T.write,overridePolicy:function(e){return{enabled:"flow"!==e}}}}}}})],U.prototype,"type",null),(0,u._)([(0,d.Cb)({type:[j],json:{write:!0}})],U.prototype,"visualVariables",void 0),(0,u._)([(0,d.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],U.prototype,"univariateSymbolStyle",null),(0,u._)([(0,d.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],U.prototype,"univariateTheme",null);var D=U=z=(0,u._)([(0,h.j)("esri.renderers.support.AuthoringInfo")],U)},81451:function(e,t,i){i.d(t,{Z:function(){return y}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(46784),c=i(49861),p=(i(25243),i(63780),i(69912)),f=i(17364),d=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.minValue=null,n.maxValue=0,n.symbol=null,n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),i}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0),(0,o._)([(0,c.Cb)(f.Gn)],d.prototype,"symbol",void 0);var y=d=n=(0,o._)([(0,p.j)("esri.renderers.support.ClassBreakInfo")],d)},87125:function(e,t,i){i.d(t,{I:function(){return f}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(46784),c=i(49861),p=(i(25243),i(63780),i(69912)),f=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.apply(this,arguments)).title=null,e}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({title:this.title})}}]),i}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=n=(0,o._)([(0,p.j)("esri.renderers.support.LegendOptions")],f)},62328:function(e,t,i){i.d(t,{Z:function(){return y}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(46784),c=i(49861),p=(i(25243),i(63780),i(69912)),f=i(17364),d=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).description=null,n.label=null,n.symbol=null,n.value=null,n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),i}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,o._)([(0,c.Cb)(f.Gn)],d.prototype,"symbol",void 0),(0,o._)([(0,c.Cb)(f.GY)],d.prototype,"value",void 0);var y=d=n=(0,o._)([(0,p.j)("esri.renderers.support.UniqueValueInfo")],d)},17364:function(e,t,i){i.d(t,{GY:function(){return c},Gn:function(){return o},KK:function(){return u}});var n=i(51508),r=i(47492),a=i(192),l=i(22061),s=i(1030),o={types:n.QT,json:{write:{writer:a.cW},origins:{"web-scene":{types:n.f_,write:{writer:a.cW},read:{reader:(0,r.d)({types:n.f_})}}}}},u={types:{base:l.Z,key:"type",typeMap:{"simple-fill":n.LB.typeMap["simple-fill"],"picture-fill":n.LB.typeMap["picture-fill"],"polygon-3d":n.LB.typeMap["polygon-3d"]}},json:{write:{writer:a.cW},origins:{"web-scene":{type:s.Z,write:{writer:a.cW}}}}},c={cast:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)},json:{type:String,write:{writer:function(e,t){t.value=null===e||void 0===e?void 0:e.toString()}}}}},58801:function(e,t,i){function n(e){var t,i,n;return null!==(t=null===(i=e.match(r))||void 0===i||null===(n=i[1])||void 0===n?void 0:n.replace(/\\'/g,"'"))&&void 0!==t?t:null}i.d(t,{v:function(){return n}});var r=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/},53015:function(e,t,i){i.d(t,{Z:function(){return v}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(10064),c=i(49861),p=(i(25243),i(63780),i(69912)),f=i(31201),d=i(4895),y=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).axis=null,n.type="rotation",n.rotationType="geographic",n.valueExpressionTitle=null,n}return(0,a.Z)(i,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,i,n){if(n&&n.messages){var r="visualVariables[".concat(this.index,"]");n.messages.push(new u.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:n}))}}},{key:"clone",value:function(){return new n({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),i}(d.Z);(0,o._)([(0,c.Cb)({readOnly:!0})],y.prototype,"cache",null),(0,o._)([(0,c.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],y.prototype,"axis",void 0),(0,o._)([(0,c.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],y.prototype,"type",void 0),(0,o._)([(0,c.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],y.prototype,"rotationType",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0),(0,o._)([(0,f.c)("web-scene","valueExpressionTitle")],y.prototype,"writeValueExpressionTitleWebScene",null);var v=y=n=(0,o._)([(0,p.j)("esri.renderers.visualVariables.RotationVariable")],y)},245:function(e,t,i){i.d(t,{Z:function(){return q}});var n,r=i(15671),a=i(43144),l=i(11752),s=i(61120),o=i(60136),u=i(92572),c=i(1413),p=i(27366),f=i(10064),d=i(43404),y=i(32718),v=i(17842),h=i(49861),m=i(89125),b=i(38511),g=i(69912),w=i(31201),V=i(4895),_=i(53896),x=i(12726),S=i(80724),k=i(56011),Z=new d.X({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),C=new d.X({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function I(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,v.t_)(e):"size"===e.type?(0,S.iY)(e)?e:(delete(e=(0,c.Z)({},e)).type,new j(e)):void 0}function z(e,t,i){if("object"!=typeof e)return e;var n=new j;return n.read(e,i),n}var j=n=function(e){(0,o.Z)(i,e);var t=(0,u.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).axis=null,n.legendOptions=null,n.normalizationField=null,n.scaleBy=null,n.target=null,n.type="size",n.useSymbolValue=null,n.valueExpression=null,n.valueRepresentation=null,n.valueUnit=null,n}return(0,a.Z)(i,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&k.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(e){y.Z.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}},{key:"index",set:function(e){(0,S.iY)(this.maxSize)&&(this.maxSize.index="visualVariables[".concat(e,"].maxSize")),(0,S.iY)(this.minSize)&&(this.minSize.index="visualVariables[".concat(e,"].minSize")),this._set("index",e)}},{key:"inputValueType",get:function(){return(0,S.PS)(this)}},{key:"maxDataValue",set:function(e){e&&this.stops&&(y.Z.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}},{key:"maxSize",set:function(e){e&&this.stops&&(y.Z.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}},{key:"castMaxSize",value:function(e){return I(e)}},{key:"readMaxSize",value:function(e,t,i){return z(e,0,i)}},{key:"minDataValue",set:function(e){e&&this.stops&&(y.Z.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}},{key:"minSize",set:function(e){e&&this.stops&&(y.Z.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}},{key:"castMinSize",value:function(e){return I(e)}},{key:"readMinSize",value:function(e,t,i){return z(e,0,i)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})):e&&(y.Z.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}},{key:"transformationType",get:function(){return(0,S.QW)(this,this.inputValueType)}},{key:"readValueExpression",value:function(e,t){return e||t.expression&&"$view.scale"}},{key:"writeValueExpressionWebScene",value:function(e,t,i,n){if("$view.scale"===e){if(n&&n.messages){var r=this.index,a="string"==typeof r?r:"visualVariables[".concat(r,"]");n.messages.push(new f.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:a+".valueExpression",context:n}))}}else t[i]=e}},{key:"readValueUnit",value:function(e){return e?C.read(e):null}},{key:"clone",value:function(){return new n({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,S.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,S.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map((function(e){return e.clone()})),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"flipSizes",value:function(){if(this.transformationType===S.hL.ClampedLinear){var e=this.minSize,t=this.maxSize;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===S.hL.Stops){var i=this.stops;if(!i)return this;for(var n=i.map((function(e){return e.size})).reverse(),r=i.length,a=0;a<r;a++)i[a].size=n[a];return this}return this}},{key:"getAttributeHash",value:function(){return"".concat((0,l.Z)((0,s.Z)(i.prototype),"getAttributeHash",this).call(this),"-").concat(this.target,"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),i}(V.Z);(0,p._)([(0,h.Cb)({readOnly:!0})],j.prototype,"cache",null),(0,p._)([(0,h.Cb)({type:Z.apiValues,json:{type:Z.jsonValues,origins:{"web-map":{read:!1}},read:Z.read,write:Z.write}})],j.prototype,"axis",void 0),(0,p._)([(0,h.Cb)({type:String,value:null,json:{read:!1}})],j.prototype,"expression",null),(0,p._)([(0,h.Cb)()],j.prototype,"index",null),(0,p._)([(0,h.Cb)({type:String,readOnly:!0})],j.prototype,"inputValueType",null),(0,p._)([(0,h.Cb)({type:x.Z,json:{write:!0}})],j.prototype,"legendOptions",void 0),(0,p._)([(0,h.Cb)({type:Number,value:null,json:{write:!0}})],j.prototype,"maxDataValue",null),(0,p._)([(0,h.Cb)({type:Number,value:null,json:{write:!0}})],j.prototype,"maxSize",null),(0,p._)([(0,m.p)("maxSize")],j.prototype,"castMaxSize",null),(0,p._)([(0,b.r)("maxSize")],j.prototype,"readMaxSize",null),(0,p._)([(0,h.Cb)({type:Number,value:null,json:{write:!0}})],j.prototype,"minDataValue",null),(0,p._)([(0,h.Cb)({type:Number,value:null,json:{write:!0}})],j.prototype,"minSize",null),(0,p._)([(0,m.p)("minSize")],j.prototype,"castMinSize",null),(0,p._)([(0,b.r)("minSize")],j.prototype,"readMinSize",null),(0,p._)([(0,h.Cb)({type:String,json:{write:!0}})],j.prototype,"normalizationField",void 0),(0,p._)([(0,h.Cb)({readOnly:!0})],j.prototype,"arcadeRequired",null),(0,p._)([(0,h.Cb)({type:String})],j.prototype,"scaleBy",void 0),(0,p._)([(0,h.Cb)({type:[_.Z],value:null,json:{write:!0}})],j.prototype,"stops",null),(0,p._)([(0,h.Cb)({type:["outline"],json:{write:!0}})],j.prototype,"target",void 0),(0,p._)([(0,h.Cb)({type:String,readOnly:!0})],j.prototype,"transformationType",null),(0,p._)([(0,h.Cb)({type:["size"],json:{type:["sizeInfo"]}})],j.prototype,"type",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],j.prototype,"useSymbolValue",void 0),(0,p._)([(0,h.Cb)({type:String,json:{write:!0}})],j.prototype,"valueExpression",void 0),(0,p._)([(0,b.r)("valueExpression",["valueExpression","expression"])],j.prototype,"readValueExpression",null),(0,p._)([(0,w.c)("web-scene","valueExpression")],j.prototype,"writeValueExpressionWebScene",null),(0,p._)([(0,h.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],j.prototype,"valueRepresentation",void 0),(0,p._)([(0,h.Cb)({type:C.apiValues,json:{write:C.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],j.prototype,"valueUnit",void 0),(0,p._)([(0,b.r)("valueUnit")],j.prototype,"readValueUnit",null);var q=j=n=(0,p._)([(0,g.j)("esri.renderers.visualVariables.SizeVariable")],j)},4895:function(e,t,i){i.d(t,{Z:function(){return b}});var n=i(15671),r=i(43144),a=i(60136),l=i(92572),s=i(27366),o=i(43404),u=i(46784),c=i(32718),p=i(49861),f=i(89125),d=i(69912),y=i(25243),v=i(31920),h=new o.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),m=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).index=null,r.type=null,r.field=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r}return(0,r.Z)(i,[{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(c.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,y.Zs)(e)}},{key:"arcadeRequired",get:function(){return!!this.valueExpression}},{key:"clone",value:function(){}},{key:"getAttributeHash",value:function(){return"".concat(this.type,"-").concat(this.field,"-").concat(this.valueExpression)}}]),i}(u.wq);(0,s._)([(0,p.Cb)()],m.prototype,"index",void 0),(0,s._)([(0,p.Cb)({type:h.apiValues,readOnly:!0,json:{read:h.read,write:h.write}})],m.prototype,"type",void 0),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],m.prototype,"field",void 0),(0,s._)([(0,f.p)("field")],m.prototype,"castField",null),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],m.prototype,"arcadeRequired",null),(0,s._)([(0,p.Cb)({type:v.Z,json:{write:!0}})],m.prototype,"legendOptions",void 0);var b=m=(0,s._)([(0,d.j)("esri.renderers.visualVariables.VisualVariable")],m)},57203:function(e,t,i){i.d(t,{Z:function(){return h}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(51995),c=i(46784),p=i(49861),f=i(25243),d=(i(63780),i(69912)),y=i(31201),v=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).color=null,n.label=null,n.value=null,n}return(0,a.Z)(i,[{key:"writeValue",value:function(e,t,i){t[i]=null!==e&&void 0!==e?e:0}},{key:"clone",value:function(){return new n({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),i}(c.wq);(0,o._)([(0,p.Cb)({type:u.Z,json:{type:[f.z8],write:!0}})],v.prototype,"color",void 0),(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],v.prototype,"label",void 0),(0,o._)([(0,p.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],v.prototype,"value",void 0),(0,o._)([(0,y.c)("value")],v.prototype,"writeValue",null);var h=v=n=(0,o._)([(0,d.j)("esri.renderers.visualVariables.support.ColorStop")],v)},53896:function(e,t,i){i.d(t,{Z:function(){return y}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(46784),c=i(17842),p=i(49861),f=(i(25243),i(63780),i(69912)),d=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).label=null,n.size=null,n.value=null,n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({label:this.label,size:this.size,value:this.value})}}]),i}(u.wq);(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,o._)([(0,p.Cb)({type:Number,cast:c.t_,json:{write:!0}})],d.prototype,"size",void 0),(0,o._)([(0,p.Cb)({type:Number,json:{write:!0}})],d.prototype,"value",void 0);var y=d=n=(0,o._)([(0,f.j)("esri.renderers.visualVariables.support.SizeStop")],d)},12726:function(e,t,i){i.d(t,{Z:function(){return d}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(49861),c=(i(25243),i(63780),i(69912)),p=i(31920),f=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.apply(this,arguments)).customValues=null,e}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}}]),i}(p.Z);(0,o._)([(0,u.Cb)({type:[Number],json:{write:!0}})],f.prototype,"customValues",void 0);var d=f=n=(0,o._)([(0,c.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],f)},31920:function(e,t,i){i.d(t,{Z:function(){return d}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(49861),c=(i(25243),i(63780),i(69912)),p=i(87125),f=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.apply(this,arguments)).showLegend=null,e}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({title:this.title,showLegend:this.showLegend})}}]),i}(p.I);(0,o._)([(0,u.Cb)({type:Boolean,json:{write:!0}})],f.prototype,"showLegend",void 0);var d=f=n=(0,o._)([(0,c.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],f)},56011:function(e,t,i){i.r(t),i.d(t,{getAllSizes:function(){return Z},getColor:function(){return h},getOpacity:function(){return m},getRotationAngle:function(){return b},getSize:function(){return g},getSizeForValue:function(){return _},getSizeFromNumberOrVariable:function(){return w},getSizeRangeAtScale:function(){return x},getVisualVariableValues:function(){return S},viewScaleRE:function(){return v}});var n=i(37762),r=i(29439),a=i(51995),l=i(52639),s=i(41644),o=i(32718),u=i(92026),c=i(49229),p=i(80724),f=o.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),d=new l.Z,y=Math.PI,v=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function h(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"color"===e.type})):e;if(n)if("esri.renderers.visualVariables.ColorVariable"===n.declaredClass){var r="number"==typeof t,l=r?null:t,s=l&&l.attributes,o=r?t:null,c=n.field,p=n.cache,d=p.ipData,y=p.hasExpression,v=n.cache.compiledFunc;if(!c&&!y){var h=n.stops;return h&&h[0]&&h[0].color}if("number"!=typeof o)if(y){if((0,u.Wi)(i)||(0,u.Wi)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,g=b.getViewInfo(m),w=b.createExecContext(l,g);if(!v){var V=b.createSyntaxTree(n.valueExpression);v=b.createFunction(V),n.cache.compiledFunc=v}o=b.executeFunction(v,w)}else s&&(o=s[c]);var _=n.normalizationField,x=null!=s&&null!=_?parseFloat(s[_]):void 0;if(null!=o&&(!_||r||!isNaN(x)&&0!==x)){isNaN(x)||r||(o/=x);var S=k(o,d);if(S){var Z=S[0],C=S[1],I=Z===C?n.stops[Z].color:a.Z.blendColors(n.stops[Z].color,n.stops[C].color,S[2],(0,u.pC)(i)?i.color:void 0);return new a.Z(I)}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable")}function m(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"opacity"===e.type})):e;if(n)if("esri.renderers.visualVariables.OpacityVariable"===n.declaredClass){var r="number"==typeof t,a=r?null:t,l=a&&a.attributes,s=r?t:null,o=n.field,c=n.cache,p=c.ipData,d=c.hasExpression,y=n.cache.compiledFunc;if(!o&&!d){var v=n.stops;return v&&v[0]&&v[0].opacity}if("number"!=typeof s)if(d){if((0,u.Wi)(i)||(0,u.Wi)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},m=i.arcade.arcadeUtils,b=m.getViewInfo(h),g=m.createExecContext(a,b);if(!y){var w=m.createSyntaxTree(n.valueExpression);y=m.createFunction(w),n.cache.compiledFunc=y}s=m.executeFunction(y,g)}else l&&(s=l[o]);var V=n.normalizationField,_=null!=l&&null!=V?parseFloat(l[V]):void 0;if(null!=s&&(!V||r||!isNaN(_)&&0!==_)){isNaN(_)||r||(s/=_);var x=k(s,p);if(x){var S=x[0],Z=x[1];if(S===Z)return n.stops[S].opacity;var C=n.stops[S].opacity;return C+(n.stops[Z].opacity-C)*x[2]}}}else f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable")}function b(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"rotation"===e.type})):e;if(n){if("esri.renderers.visualVariables.RotationVariable"===n.declaredClass){var r=n.axis||"heading",a="heading"===r&&"arithmetic"===n.rotationType?90:0,l="heading"===r&&"arithmetic"===n.rotationType?-1:1,s="number"==typeof t?null:t,o=s&&s.attributes,c=n.field,p=n.cache.hasExpression,d=n.cache.compiledFunc,y=0;if(!c&&!p)return y;if(p){if((0,u.Wi)(i)||(0,u.Wi)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},h=i.arcade.arcadeUtils,m=h.getViewInfo(v),b=h.createExecContext(s,m);if(!d){var g=h.createSyntaxTree(n.valueExpression);d=h.createFunction(g),n.cache.compiledFunc=d}y=h.executeFunction(d,b)}else o&&(y=o[c]||0);return y="number"!=typeof y||isNaN(y)?null:a+l*y}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable")}}function g(e,t,i){var n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((function(e){return"size"===e.type})):e;if(n){if("esri.renderers.visualVariables.SizeVariable"===n.declaredClass){var r=_(function(e,t,i){var n="number"==typeof t,r=n?null:t,a=r&&r.attributes,l=n?t:null,s=e.cache.isScaleDriven,o=e.cache.compiledFunc;if(s){var c=(0,u.pC)(i)?i.scale:void 0,d=(0,u.pC)(i)?i.view:void 0;l=null==c||"3d"===d?function(e){var t=null,i=null,n=e.stops;return n?(t=n[0].value,i=n[n.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}(e):c}else if(!n)switch(e.inputValueType){case p.RY.Expression:if((0,u.Wi)(i)||(0,u.Wi)(i.arcade))return void f.error("Use of arcade expressions requires an arcade context");var y={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,h=v.getViewInfo(y),m=v.createExecContext(r,h);if(!o){var b=v.createSyntaxTree(e.valueExpression);o=v.createFunction(b),e.cache.compiledFunc=o}l=v.executeFunction(o,m);break;case p.RY.Field:a&&(l=a[e.field]);break;case p.RY.Unknown:l=null}if(!(0,p.qh)(l))return null;if(n||!e.normalizationField)return l;var g=a?parseFloat(a[e.normalizationField]):null;return(0,p.qh)(g)&&0!==g?l/g:null}(n,t,i),n,t,i,n.cache.ipData);return null==r||isNaN(r)?0:r}f.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable")}}function w(e,t,i){return null==e?null:(0,p.iY)(e)?g(e,t,i):(0,p.qh)(e)?e:null}function V(e,t,i){return(0,p.qh)(i)&&e>i?i:(0,p.qh)(t)&&e<t?t:e}function _(e,t,i,n,a){switch(t.transformationType){case p.hL.Additive:return function(e,t,i,n){var r;return e+(null!==(r=w(t.minSize,i,n)||t.minDataValue)&&void 0!==r?r:0)}(e,t,i,n);case p.hL.Constant:return function(e,t,i){var n=e.stops,r=n&&n.length&&n[0].size;return null==r&&(r=e.minSize),w(r,t,i)}(t,i,n);case p.hL.ClampedLinear:return function(e,t,i,n){var r=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),a=w(t.minSize,i,n),l=w(t.maxSize,i,n),s=(0,u.pC)(n)?n.shape:void 0;if(e<=t.minDataValue)return a;if(e>=t.maxDataValue)return l;if(null==a||null==l)return null;if("area"===t.scaleBy&&s){var o="circle"===s,c=o?y*Math.pow(a/2,2):a*a,p=c+r*((o?y*Math.pow(l/2,2):l*l)-c);return o?2*Math.sqrt(p/y):Math.sqrt(p)}return a+r*(l-a)}(e,t,i,n);case p.hL.Proportional:return function(e,t,i,n){var r=(0,u.pC)(n)?n.shape:void 0,a=e/t.minDataValue,l=w(t.minSize,i,n),s=w(t.maxSize,i,n);return V("circle"===r?2*Math.sqrt(a*Math.pow(l/2,2)):"square"===r||"diamond"===r||"image"===r?Math.sqrt(a*Math.pow(l,2)):a*l,l,s)}(e,t,i,n);case p.hL.Stops:return function(e,t,i,n,a){var l,s=k(e,a),o=(0,r.Z)(s,3),u=o[0],c=o[1],p=o[2];if(u===c)return w(null===(l=t.stops)||void 0===l?void 0:l[u].size,i,n);var f,d,y=w(null===(f=t.stops)||void 0===f?void 0:f[u].size,i,n);return y+(w(null===(d=t.stops)||void 0===d?void 0:d[c].size,i,n)-y)*p}(e,t,i,n,a);case p.hL.RealWorldSize:return function(e,t,i,n){var r=((0,u.pC)(n)&&n.resolution?n.resolution:1)*c.a[t.valueUnit],a=w(t.minSize,i,n),l=w(t.maxSize,i,n),s=t.valueRepresentation;return V("area"===s?2*Math.sqrt(e/y)/r:"radius"===s||"distance"===s?2*e/r:e/r,a,l)}(e,t,i,n);case p.hL.Identity:return e;case p.hL.Unknown:return null}}function x(e,t,i){if(!(e.cache.isScaleDriven&&"3d"===i||t))return null;var n={scale:t,view:i},r=w(e.minSize,d,n),a=w(e.maxSize,d,n);if(null!=r||null!=a){if(r>a){var l=a;a=r,r=l}return{minSize:r,maxSize:a}}}function S(e,t,i){if(e.visualVariables){var r,a=[],l=[],s=[],o=[],u=[],c=(0,n.Z)(e.visualVariables);try{for(c.s();!(r=c.n()).done;){var p=r.value;switch(p.type){case"color":l.push(p);break;case"opacity":s.push(p);break;case"rotation":u.push(p);break;case"size":o.push(p)}}}catch(f){c.e(f)}finally{c.f()}return l.forEach((function(e){var n=h(e,t,i);a.push({variable:e,value:n})})),s.forEach((function(e){var n=m(e,t,i);a.push({variable:e,value:n})})),u.forEach((function(e){var n=b(e,t,i);a.push({variable:e,value:n})})),o.forEach((function(e){var n=g(e,t,i);a.push({variable:e,value:n})})),a.filter((function(e){return null!=e.value}))}}function k(e,t){if(t){var i=0,n=t.length-1;return t.some((function(t,r){return e<t?(n=r,!0):(i=r,!1)})),[i,n,(e-t[i])/(t[n]-t[i])]}}function Z(e,t,i){var r,a=["proportional","proportional","proportional"],l=(0,n.Z)(e);try{for(l.s();!(r=l.n()).done;){var o=r.value,u=o.useSymbolValue?"symbol-value":g(o,t,i);switch(o.axis){case"width":a[0]=u;break;case"depth":a[1]=u;break;case"height":a[2]=u;break;case"width-and-depth":a[0]=u,a[1]=u;break;case"all":case void 0:case null:a[0]=u,a[1]=u,a[2]=u;break;default:(0,s.Bg)(o.axis)}}}catch(c){l.e(c)}finally{l.f()}return a}},32970:function(e,t,i){i.d(t,{Z:function(){return m}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(51995),c=i(84652),p=i(49861),f=i(25243),d=i(27135),y=i(69912),v=i(55661),h=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).algorithm=null,n.fromColor=null,n.toColor=null,n.type="algorithmic",n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({fromColor:(0,c.d9)(this.fromColor),toColor:(0,c.d9)(this.toColor),algorithm:this.algorithm})}}]),i}(v.Z);(0,o._)([(0,d.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],h.prototype,"algorithm",void 0),(0,o._)([(0,p.Cb)({type:u.Z,json:{type:[f.z8],write:!0}})],h.prototype,"fromColor",void 0),(0,o._)([(0,p.Cb)({type:u.Z,json:{type:[f.z8],write:!0}})],h.prototype,"toColor",void 0),(0,o._)([(0,p.Cb)({type:["algorithmic"]})],h.prototype,"type",void 0);var m=h=n=(0,o._)([(0,y.j)("esri.rest.support.AlgorithmicColorRamp")],h)},55661:function(e,t,i){i.d(t,{Z:function(){return f}});var n=i(43144),r=i(15671),a=i(60136),l=i(92572),s=i(27366),o=i(46784),u=i(49861),c=(i(25243),i(63780),i(69912)),p=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).type=null,n}return(0,n.Z)(i)}(o.wq);(0,s._)([(0,u.Cb)({readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);var f=p=(0,s._)([(0,c.j)("esri.rest.support.ColorRamp")],p)},58169:function(e,t,i){i.d(t,{Z:function(){return v}});var n,r=i(15671),a=i(43144),l=i(60136),s=i(92572),o=i(27366),u=i(84652),c=i(49861),p=(i(25243),i(69912)),f=i(32970),d=i(55661),y=n=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).colorRamps=null,n.type="multipart",n}return(0,a.Z)(i,[{key:"clone",value:function(){return new n({colorRamps:(0,u.d9)(this.colorRamps)})}}]),i}(d.Z);(0,o._)([(0,c.Cb)({type:[f.Z],json:{write:!0}})],y.prototype,"colorRamps",void 0),(0,o._)([(0,c.Cb)({type:["multipart"]})],y.prototype,"type",void 0);var v=y=n=(0,o._)([(0,p.j)("esri.rest.support.MultipartColorRamp")],y)},57634:function(e,t,i){i.d(t,{V:function(){return l},i:function(){return s}});var n=i(32970),r=i(55661),a=i(58169),l={key:"type",base:r.Z,typeMap:{algorithmic:n.Z,multipart:a.Z}};function s(e){return e&&e.type?"algorithmic"===e.type?n.Z.fromJSON(e):"multipart"===e.type?a.Z.fromJSON(e):null:null}},28554:function(e,t,i){i.d(t,{K3:function(){return r},Rx:function(){return l},hq:function(){return a}});var n=i(93169),r=function(){return!!(0,n.Z)("enable-feature:force-wosr")},a=function(){return!!(0,n.Z)("enable-feature:direct-3d-object-feature-layer-display")},l=function(){return!!(0,n.Z)("enable-feature:SceneLayer-editing")}},192:function(e,t,i){i.d(t,{cW:function(){return c},im:function(){return y},vX:function(){return p}});var n=i(51508),r=i(10064),a=i(92026),l=i(37933),s=i(67140),o=i(23707),u=i(80045);function c(e,t,i,n){var r=d(e,{},{context:n,isLabelSymbol:!1});(0,a.pC)(r)&&(t[i]=r)}function p(e,t,i,n){var r=d(e,{},{context:n,isLabelSymbol:!0});(0,a.pC)(r)&&(t[i]=r)}function f(e){return e instanceof s.Z||e instanceof u.Z}function d(e,t,i){if((0,a.Wi)(e))return null;var n=i.context,s=i.isLabelSymbol,u=null===n||void 0===n?void 0:n.origin,c=null===n||void 0===n?void 0:n.messages;if("web-scene"===u&&!f(e)){var p=(0,o.q)(e,{retainCIM:!0,hasLabelingContext:s});return(0,a.pC)(p.symbol)?p.symbol.write(t,n):(null!==c&&void 0!==c&&c.push(new r.Z("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView"),{symbol:e,context:n,error:p.error})),null)}return("web-map"===u||"portal-item"===u&&!(0,l.A2)(null===n||void 0===n?void 0:n.layer))&&f(e)?(null!==c&&void 0!==c&&c.push(new r.Z("symbol:unsupported","Symbols of type '".concat(e.declaredClass,"' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView"),{symbol:e,context:n})),null):e.write(t,n)}function y(e,t){return(0,n.S9)(e,null,t)}},38048:function(e,t,i){i.d(t,{EJ:function(){return V},KV:function(){return g},n2:function(){return b},v9:function(){return w},wm:function(){return S}});var n=i(74165),r=i(1413),a=i(37762),l=i(15861),s=i(76200),o=i(10064),u=i(92026),c=i(66978),p=i(35995),f=i(70032),d=i(65694),y=i(28554),v={};function h(){return(h=(0,l.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(t,i);case 3:return e.t0=e.sent.data,e.t1=(0,p.Yd)(t),e.t2=t,e.abrupt("return",{data:e.t0,baseUrl:e.t1,styleUrl:e.t2});case 9:return e.prev=9,e.t3=e.catch(0),e.abrupt("return",((0,c.r9)(e.t3),null));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function m(e,t,i){var n,r=(0,u.pC)(t.portal)?t.portal:f.Z.getDefault(),l="".concat(r.url," - ").concat(r.user&&r.user.username," - ").concat(e);return v[l]||(v[l]=function(e,t,i){return t.load(i).then((function(){var n=new d.Z({disableExtraQuery:!0,query:"owner:".concat(_," AND type:").concat(x,' AND typekeywords:"').concat(e,'"')});return t.queryItems(n,i)})).then((function(t){var n=t.results,r=null,l=e.toLowerCase();if(n&&Array.isArray(n)){var s,u=(0,a.Z)(n);try{for(u.s();!(s=u.n()).done;){var c,p=s.value,f=null===(c=p.typeKeywords)||void 0===c?void 0:c.some((function(e){return e.toLowerCase()===l}));if(f&&p.type===x&&p.owner===_){r=p;break}}}catch(d){u.e(d)}finally{u.f()}}if(!r)throw new o.Z("symbolstyleutils:style-not-found","The style '".concat(e,"' could not be found"),{styleName:e});return r.load(i)}))}(e,r,i).then((function(e){return n=e,e.fetchData()})).then((function(t){var i;return{data:t,baseUrl:null!==(i=n.itemUrl)&&void 0!==i?i:"",styleName:e}}))),v[l]}function b(e,t,i){return e&&(0,u.pC)(e.styleUrl)?function(e,t){return h.apply(this,arguments)}(e.styleUrl,i):e&&(0,u.pC)(e.styleName)?m(e.styleName,t,i):Promise.reject(new o.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function w(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!(0,y.K3)()){var i,n=(0,a.Z)(e.formatInfos);try{for(n.s();!(i=n.n()).done;){var r=i.value;if("gltf"===r.type)return r.href}}catch(l){n.e(l)}finally{n.f()}}return e.webRef}function V(e,t){var i=(0,r.Z)({responseType:"json",query:{f:"json"}},t);return(0,s.default)((0,p.Fv)(e),i)}var _="esri_en",x="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},23707:function(e,t,i){i.d(t,{K:function(){return h},q:function(){return m}});var n=i(51508),r=i(10064),a=i(80045),l=i(62554),s=i(16851),o=i(31655),u=i(16072),c=i(91946),p=i(61459),f=i(16915),d=i(1030),y=i(58009),v=i(24931),h={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;if(!e)return{symbol:null};var i=t.retainId,m=void 0===i?h.retainId:i,b=t.ignoreDrivers,g=void 0===b?h.ignoreDrivers:b,w=t.hasLabelingContext,V=void 0===w?h.hasLabelingContext:w,_=t.retainCIM,x=void 0===_?h.retainCIM:_,S=null;if((0,n.dU)(e)||e instanceof a.Z)S=e.clone();else if("cim"===e.type){var k,Z,C=null===(k=e.data)||void 0===k||null===(Z=k.symbol)||void 0===Z?void 0:Z.type;if("CIMPointSymbol"!==C)return{error:new r.Z("symbol-conversion:unsupported-cim-symbol","CIM symbol of type '".concat(C||"unknown","' is unsupported in 3D"),{symbol:e})};S=x?e.clone():l.Z.fromCIMSymbol(e)}else if(e instanceof s.Z)S=o.Z.fromSimpleLineSymbol(e);else if(e instanceof u.Z)S=l.Z.fromSimpleMarkerSymbol(e);else if(e instanceof c.Z)S=l.Z.fromPictureMarkerSymbol(e);else if(e instanceof p.Z)S=t.geometryType&&"mesh"===t.geometryType?f.Z.fromSimpleFillSymbol(e):d.Z.fromSimpleFillSymbol(e);else{if(!(e instanceof y.Z))return{error:new r.Z("symbol-conversion:unsupported-2d-symbol","2D symbol of type '".concat(e.type||e.declaredClass,"' is unsupported in 3D"),{symbol:e})};S=V?v.Z.fromTextSymbol(e):l.Z.fromTextSymbol(e)}if(m&&S&&"cim"!==S.type&&(S.id=e.id),g&&(0,n.dU)(S))for(var I=0;I<S.symbolLayers.length;++I)S.symbolLayers.getItemAt(I)._ignoreDrivers=!0;return{symbol:S}}}}]);
//# sourceMappingURL=79857.119e4bc4.chunk.js.map