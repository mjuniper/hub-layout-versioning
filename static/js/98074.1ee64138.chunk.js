"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[98074,22564,33751],{22564:function(e,t,r){r.d(t,{Hy:function(){return b},OF:function(){return x},TD:function(){return g},Tu:function(){return S},VO:function(){return F},aV:function(){return v},kq:function(){return Z},rH:function(){return a}});var n,i,a,s=r(97326),o=r(43144),u=r(15671),l=r(60136),c=r(92572),d=r(28664),f=r(4942);!function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.UnexpectedToken="UnexpectedToken",e.Unrecognised="Unrecognised",e.UnrecognisedType="UnrecognisedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FuncionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference"}(a||(a={}));var h=(n={},(0,f.Z)(n,a.TypeNotAllowedInFeature,"Feature attributes only support dates, numbers, strings, guids."),(0,f.Z)(n,a.LogicError,"Logic error - {reason}"),(0,f.Z)(n,a.NeverReach,"Encountered unreachable logic"),(0,f.Z)(n,a.AsyncNotEnabled,"Async Arcade must be enabled for this script"),(0,f.Z)(n,a.ModuleAccessorMustBeString,"Module accessor must be a string"),(0,f.Z)(n,a.ModuleExportNotFound,"Module has no export with provided identifier"),(0,f.Z)(n,a.ModulesNotSupported,"Current profile does not support modules"),(0,f.Z)(n,a.ArrayAccessorMustBeNumber,"Array accessor must be a number"),(0,f.Z)(n,a.FuncionNotFound,"Function not found"),(0,f.Z)(n,a.FieldNotFound,"Key not found - {key}"),(0,f.Z)(n,a.CircularModules,"Circular module dependencies are not allowed"),(0,f.Z)(n,a.Cancelled,"Execution cancelled"),(0,f.Z)(n,a.UnsupportedHashType,"Type not supported in hash function"),(0,f.Z)(n,a.IllegalResult,"Value is not a supported return type"),(0,f.Z)(n,a.PortalRequired,"Portal is required"),(0,f.Z)(n,a.InvalidParameter,"Invalid parameter"),(0,f.Z)(n,a.WrongNumberOfParameters,"Call with wrong number of parameters"),(0,f.Z)(n,a.Unrecognised,"Unrecognised code structure"),(0,f.Z)(n,a.UnrecognisedType,"Unrecognised type"),(0,f.Z)(n,a.WrongSpatialReference,"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference"),(0,f.Z)(n,a.BooleanConditionRequired,"Conditions must use booleans"),(0,f.Z)(n,a.NoFunctionInDictionary,"Dictionaries cannot contain functions."),(0,f.Z)(n,a.NoFunctionInArray,"Arrays cannot contain functions."),(0,f.Z)(n,a.NoFunctionInTemplateLiteral,"Template Literals do not expect functions by value."),(0,f.Z)(n,a.KeyAccessorMustBeString,"Accessor must be a string"),(0,f.Z)(n,a.KeyMustBeString,"Object keys must be a string"),(0,f.Z)(n,a.Immutable,"Object is immutable"),(0,f.Z)(n,a.InvalidParameter,"Invalid parameter"),(0,f.Z)(n,a.UnexpectedToken,"Unexpected token"),(0,f.Z)(n,a.MemberOfNull,"Cannot access property of null object"),(0,f.Z)(n,a.MaximumCallDepth,"Exceeded maximum function depth"),(0,f.Z)(n,a.OutOfBounds,"Out of bounds"),(0,f.Z)(n,a.InvalidIdentifier,"Identifier not recognised"),(0,f.Z)(n,a.FuncionNotFound,"Function not found"),(0,f.Z)(n,a.CallNonFunction,"Expression is not a function"),(0,f.Z)(n,a.InvalidMemberAccessKey,"Cannot access value using a key of this type"),(0,f.Z)(n,a.AssignModuleFunction,"Cannot assign function to module variable"),(0,f.Z)(n,a.UnsupportedUnaryOperator,"Unsupported unary operator"),(0,f.Z)(n,a.UnsupportedOperator,"Unsupported operator"),(0,f.Z)(n,a.LogicalExpressionOnlyBoolean,"Logical expressions must be boolean"),(0,f.Z)(n,a.LogicExpressionOrAnd,"Logical expression can only be combined with || or &&"),n),p=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){(0,u.Z)(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.call.apply(t,[this].concat(n))}return(0,o.Z)(r)}((0,d.Z)(Error)),m=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n){var i;return(0,u.Z)(this,r),(i=t.call(this,y(n)+e.message,{cause:e})).loc=null,Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(i),r),n&&n.loc&&(i.loc=n.loc),i}return(0,o.Z)(r)}(p),v=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n,i,a){var o;return(0,u.Z)(this,r),(o=t.call(this,"Execution error - "+y(i)+b(h[n],a))).loc=null,o.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(o),r),i&&i.loc&&(o.loc=i.loc),o}return(0,o.Z)(r)}((0,d.Z)(Error));function y(e){var t,r;return e&&e.loc?"Line : ".concat(null===(t=e.loc.start)||void 0===t?void 0:t.line,", ").concat(null===(r=e.loc.start)||void 0===r?void 0:r.column,": "):""}var g,x=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n,i,a){var o;return(0,u.Z)(this,r),(o=t.call(this,"Compilation error - "+y(i)+b(h[n],a))).loc=null,o.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(o),r),i&&i.loc&&(o.loc=i.loc),o}return(0,o.Z)(r)}((0,d.Z)(Error)),Z=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.call(this,"Uncompilable code structures")).declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(e),r),e}return(0,o.Z)(r)}((0,d.Z)(Error));function b(e,t){try{if(!t)return e;for(var r in t){var n=t[r];n||(n=""),e=e.replace("{"+r+"}",t[r])}}catch(p){}return e}function F(e,t,r){return"esri.arcade.arcadeexecutionerror"===r.declaredRootClass||"esri.arcade.arcadecompilationerror"===r.declaredRootClass?null===r.loc&&t&&t.loc?new m(r,{cause:r}):r:("esri.arcade.featureset.support.featureseterror"===r.declaredRootClass||"esri.arcade.featureset.support.sqlerror"===r.declaredRootClass||r.declaredRootClass,t&&t.loc?new m(r,{cause:r}):r)}!function(e){e.UnrecognisedUri="UnrecognisedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"}(g||(g={}));var I=(i={},(0,f.Z)(i,g.UnrecognisedUri,"Unrecognised uri - {uri}"),(0,f.Z)(i,g.UnsupportedUriProtocol,"Unrecognised uri protocol"),i),S=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e,n){var i;return(0,u.Z)(this,r),(i=t.call(this,b(I[e],n))).declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace((0,s.Z)(i),r),i}return(0,o.Z)(r)}((0,d.Z)(Error))},40237:function(e,t,r){r.d(t,{N:function(){return a}});var n=r(43144),i=r(15671),a={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,r){var n=new s(e.getPointX(t),e.getPointY(t),r),i=e.hasZ(t),a=e.hasM(t);return i&&(n.z=e.getPointZ(t)),a&&(n.m=e.getPointM(t)),n},exportPolygon:function(e,t,r){return new o(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new u(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new l(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var n=e.hasZ(t),i=e.hasM(t),a=new c(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){var s=e.getZExtent(t);a.zmin=s.vmin,a.zmax=s.vmax}if(i){var o=e.getMExtent(t);a.mmin=o.vmin,a.mmax=o.vmax}return a}};var s=(0,n.Z)((function e(t,r,n){(0,i.Z)(this,e),this.x=t,this.y=r,this.spatialReference=n,this.z=void 0,this.m=void 0}));var o=(0,n.Z)((function e(t,r,n,a){(0,i.Z)(this,e),this.rings=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)}));var u=(0,n.Z)((function e(t,r,n,a){(0,i.Z)(this,e),this.paths=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)}));var l=(0,n.Z)((function e(t,r,n,a){(0,i.Z)(this,e),this.points=t,this.spatialReference=r,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),a&&(this.hasM=a)}));var c=(0,n.Z)((function e(t,r,n,a,s){(0,i.Z)(this,e),this.xmin=t,this.ymin=r,this.xmax=n,this.ymax=a,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}))},92536:function(e,t,r){r.d(t,{y:function(){return w},r:function(){return n}});var n,i,a=r(93433),s=r(74165),o=r(1413),u=r(15861),l=r(37762),c=r(15671),d=r(43144),f=r(92026),h=r(4954),p=r(94446),m=r(58971),v=r(92975),y=r(33392),g=r(71486),x=function(){function e(t,r,n){var i;(0,c.Z)(this,e),this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=null!==(i=t.returnDistinctValues)&&void 0!==i&&i,this.fieldsIndex=n,this.featureAdapter=r;var a=t.outFields;if(a&&!a.includes("*")){this.outFields=a;var s,o=0,u=(0,l.Z)(a);try{for(u.s();!(s=u.n()).done;){var d=s.value,f=(0,y.hr)(d),h=this.fieldsIndex.get(f),p=h?null:(0,y.Jc)(f,n),m=h?h.name:(0,y.nu)(d)||"FIELD_EXP_"+o++;this._fieldDataCache.set(d,{alias:m,clause:p})}}catch(v){u.e(v)}finally{u.f()}}}return(0,d.Z)(e,[{key:"countDistinctValues",value:function(e){var t=this;return this.returnDistinctValues?(e.forEach((function(e){return t.getAttributes(e)})),this._returnDistinctMap.size):e.length}},{key:"getAttributes",value:function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)}},{key:"getFieldValue",value:function(e,t,r){var n,i,a=r?r.name:t,s=null;return this._fieldDataCache.has(a)?s=null===(n=this._fieldDataCache.get(a))||void 0===n?void 0:n.clause:r||(s=(0,y.Jc)(t,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:s})),r?this.featureAdapter.getAttribute(e,a):null===(i=s)||void 0===i?void 0:i.calculateValue(e,this.featureAdapter)}},{key:"getDataValue",value:function(e,t){var r=t.normalizationType,n=t.normalizationTotal,i=t.field&&this.getFieldValue(e,t.field,this.fieldsIndex.get(t.field));if(t.field2&&(i="".concat((0,g.wk)(i)).concat(t.fieldDelimiter).concat((0,g.wk)(this.getFieldValue(e,t.field2,this.fieldsIndex.get(t.field2)))),t.field3&&(i="".concat(i).concat(t.fieldDelimiter).concat((0,g.wk)(this.getFieldValue(e,t.field3,this.fieldsIndex.get(t.field3)))))),r&&Number.isFinite(i)){var a="field"===r&&t.normalizationField?this.getFieldValue(e,t.normalizationField,this.fieldsIndex.get(t.normalizationField)):null;i=(0,g.fk)(i,r,a,n)}return i}},{key:"getExpressionValue",value:function(e,t,r,n){var i={attributes:this.featureAdapter.getAttributes(e),layer:{fields:this.fieldsIndex.fields}},a=n.createExecContext(i,r);return n.executeFunction(t,a)}},{key:"getExpressionValues",value:function(e,t,r,n){var i=this,a={fields:this.fieldsIndex.fields};return e.map((function(e){var s={attributes:i.featureAdapter.getAttributes(e),layer:a},o=n.createExecContext(s,r);return n.executeFunction(t,o)}))}},{key:"validateItem",value:function(e,t){var r,n,i;return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,y.Jc)(t,this.fieldsIndex)}),null!==(r=null===(n=this._fieldDataCache.get(t))||void 0===n||null===(i=n.clause)||void 0===i?void 0:i.testFeature(e,this.featureAdapter))&&void 0!==r&&r}},{key:"validateItems",value:function(e,t){var r,n,i;return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,y.Jc)(t,this.fieldsIndex)}),null!==(r=null===(n=this._fieldDataCache.get(t))||void 0===n||null===(i=n.clause)||void 0===i?void 0:i.testSet(e,this.featureAdapter))&&void 0!==r&&r}},{key:"_processAttributesForOutFields",value:function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);var r,n={},i=(0,l.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=this._fieldDataCache.get(a),o=s.alias,u=s.clause;n[o]=u?u.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"_processAttributesForDistinctValues",value:function(e){if((0,f.Wi)(e)||!this.returnDistinctValues)return e;var t=this.outFields,r=[];if(t){var n,i=(0,l.Z)(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=this._fieldDataCache.get(a).alias;r.push(e[s])}}catch(d){i.e(d)}finally{i.f()}}else for(var o in e)r.push(e[o]);var u="".concat((t||["*"]).join(","),"=").concat(r.join(",")),c=this._returnDistinctMap.get(u)||0;return this._returnDistinctMap.set(u,++c),c>1?null:e}}]),e}(),Z=r(19995),b=r(34311),F=r(31904),I=r(80031),S=r(819),w=function(){function e(t,r,n){(0,c.Z)(this,e),this.items=t,this.query=r,this.geometryType=n.geometryType,this.hasM=n.hasM,this.hasZ=n.hasZ,this.fieldsIndex=n.fieldsIndex,this.objectIdField=n.objectIdField,this.spatialReference=n.spatialReference,this.featureAdapter=n.featureAdapter}return(0,d.Z)(e,[{key:"size",get:function(){return this.items.length}},{key:"createQueryResponseForCount",value:function(){var e=new x(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);var t=this.query,r=t.groupByFieldsForStatistics,n=t.having,i=t.outStatistics;if(!(null===r||void 0===r?void 0:r.length))return 1;var a,s=new Map,o=new Map,u=new Set,c=(0,l.Z)(i);try{for(c.s();!(a=c.n()).done;){var d=a.value,f="exceedslimit"!==d.statisticType?d.onStatisticField:void 0;if(!o.has(f)){var h,p=[],m=(0,l.Z)(r);try{for(m.s();!(h=m.n()).done;){var v=h.value,y=this._getAttributeValues(e,v,s);p.push(y)}}catch(w){m.e(w)}finally{m.f()}o.set(f,this._calculateUniqueValues(p,e.returnDistinctValues))}var g=o.get(f);for(var Z in g){var b=g[Z],F=b.data,I=b.items,S=F.join(",");n&&!e.validateItems(I,n)||u.add(S)}}}catch(w){c.e(w)}finally{c.f()}return u.size}},{key:"createQueryResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.query.outStatistics){e.next=11;break}if(!this.query.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))){e.next=5;break}e.t0=this._createExceedsLimitQueryResponse(this.query),e.next=8;break;case 5:return e.next=7,this._createStatisticsQueryResponse(this.query);case 7:e.t0=e.sent;case 8:t=e.t0,e.next=12;break;case 11:t=this._createFeatureQueryResponse(this.query);case 12:return this.query.returnQueryGeometry&&(r=this.query.geometry,(0,v.JY)(this.query.outSR)&&!(0,v.fS)(r.spatialReference,this.query.outSR)?t.queryGeometry=(0,F.S2)((0,o.Z)({spatialReference:this.query.outSR},(0,Z.iV)(r,r.spatialReference,this.query.outSR))):t.queryGeometry=(0,F.S2)((0,o.Z)({spatialReference:this.query.outSR},r))),e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createSnappingResponse",value:function(e,t){var r,i=this.featureAdapter,a=T(this.hasZ,this.hasM),s=e.point,o=e.mode,u="number"==typeof e.distance?e.distance:e.distance.x,c="number"==typeof e.distance?e.distance:e.distance.y,d={candidates:[]},h="esriGeometryPolygon"===this.geometryType,p=this._getPointCreator(o,this.spatialReference,t),m=new _(null,0),v=new _(null,0),y={x:0,y:0,z:0},g=(0,l.Z)(this.items);try{for(g.s();!(r=g.n()).done;){var x=r.value,Z=i.getGeometry(x);if(!(0,f.Wi)(Z)){var F=Z.coords,I=Z.lengths;if(m.coords=F,v.coords=F,e.types&n.EDGE)for(var S=0,w=0;w<I.length;w++)for(var M=I[w],A=0;A<M;A++,S+=a){var R=m;if(R.coordsIndex=S,A!==M-1){var N=v;N.coordsIndex=S+a;var E=y;k(y,s,R,N);var V=(s.x-E.x)/u,C=(s.y-E.y)/c,z=V*V+C*C;z<=1&&d.candidates.push((0,b.p)(i.getObjectId(x),p(E),Math.sqrt(z),p(R),p(N)))}}if(e.types&n.VERTEX)for(var D=h?F.length-a:F.length,O=0;O<D;O+=a){var P=m;P.coordsIndex=O;var U=(s.x-P.x)/u,q=(s.y-P.y)/c,G=U*U+q*q;G<=1&&d.candidates.push((0,b.u)(i.getObjectId(x),p(P),Math.sqrt(G)))}}}}catch(B){g.e(B)}finally{g.f()}return d.candidates.sort((function(e,t){return e.distance-t.distance})),d}},{key:"_getPointCreator",value:function(e,t,r){var n=(0,f.pC)(r)&&!(0,v.fS)(t,r)?function(e){return(0,Z.iV)(e,t,r)}:function(e){return e},i=this.hasZ;return"3d"===e?i?function(e){var t=e.x,r=e.y,i=e.z;return n({x:t,y:r,z:i})}:function(e){var t=e.x,r=e.y;return n({x:t,y:r,z:0})}:function(e){var t=e.x,r=e.y;return n({x:t,y:r})}}},{key:"createSummaryStatisticsResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,l,c,d,f,h,p,m,v;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,n=t.valueExpression,i=t.normalizationField,a=t.normalizationType,o=t.normalizationTotal,u=t.minValue,l=t.maxValue,c=t.scale,d=this.fieldsIndex.isDateField(r),e.next=11,this._getDataValues({field:r,valueExpression:n,normalizationField:i,normalizationType:a,normalizationTotal:o,scale:c});case 11:return f=e.sent,h=(0,g.S5)({normalizationType:a,normalizationField:i,minValue:u,maxValue:l}),p=this.fieldsIndex.get(r),m={value:.5,fieldType:null===p||void 0===p?void 0:p.type},v=(0,I.qN)(p)?(0,g.H0)({values:f,supportsNullCount:h,percentileParams:m}):(0,g.i5)({values:f,minValue:u,maxValue:l,useSampleStdDev:!a,supportsNullCount:h,percentileParams:m}),e.abrupt("return",(0,g.F_)(v,d));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createUniqueValuesResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,n=t.valueExpression,i=t.domains,a=t.returnAllCodedValues,o=t.scale,e.next=7,this._getDataValues({field:r,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:n,scale:o});case 7:return u=e.sent,l=(0,g.eT)(u),e.abrupt("return",(0,g.Qm)(l,i,a,t.fieldDelimiter));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createClassBreaksResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,l,c,d,f,h,p,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,n=t.valueExpression,i=t.normalizationField,a=t.normalizationType,o=t.normalizationTotal,u=t.classificationMethod,l=t.standardDeviationInterval,c=t.minValue,d=t.maxValue,f=t.numClasses,h=t.scale,e.next=13,this._getDataValues({field:r,valueExpression:n,normalizationField:i,normalizationType:a,normalizationTotal:o,scale:h});case 13:return p=e.sent,m=(0,g.G2)(p,{field:r,normalizationField:i,normalizationType:a,normalizationTotal:o,classificationMethod:u,standardDeviationInterval:l,minValue:c,maxValue:d,numClasses:f}),e.abrupt("return",(0,g.DL)(m,u));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createHistogramResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,l,c,d,f,h,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,n=t.valueExpression,i=t.normalizationField,a=t.normalizationType,o=t.normalizationTotal,u=t.classificationMethod,l=t.standardDeviationInterval,c=t.minValue,d=t.maxValue,f=t.numBins,h=t.scale,e.next=13,this._getDataValues({field:r,valueExpression:n,normalizationField:i,normalizationType:a,normalizationTotal:o,scale:h});case 13:return p=e.sent,e.abrupt("return",(0,g.oF)(p,{field:r,normalizationField:i,normalizationType:a,normalizationTotal:o,classificationMethod:u,standardDeviationInterval:l,minValue:c,maxValue:d,numBins:f}));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sortFeatures",value:function(e,t,r){var n=this;if(e.length>1&&t&&t.length){var i,a=(0,l.Z)(t.reverse());try{var s=function(){var t=i.value.split(" "),a=t[0],s=n.fieldsIndex.get(a),o=!!t[1]&&"desc"===t[1].toLowerCase(),u=(0,g.Lq)(null===s||void 0===s?void 0:s.type,o);e.sort((function(e,t){var n=r(e,a,s),i=r(t,a,s);return u(n,i)}))};for(a.s();!(i=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}}}},{key:"_createFeatureQueryResponse",value:function(e){var t=this,r=this.items,n=this.geometryType,i=this.hasM,s=this.hasZ,o=this.objectIdField,u=this.spatialReference,l=e.outFields,c=e.outSR,d=e.quantizationParameters,f=e.resultRecordCount,h=e.resultOffset,p=e.returnZ,v=e.returnM,y=null!=f&&r.length>(h||0)+f,g=l&&(l.includes("*")?(0,a.Z)(this.fieldsIndex.fields):l.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:y,features:this._createFeatures(e,r),fields:g,geometryType:n,hasM:i&&v,hasZ:s&&p,objectIdFieldName:o,spatialReference:(0,F.S2)(c||u),transform:d&&(0,m.vY)(d)||null}}},{key:"_createFeatures",value:function(e,t){var r=new x(e,this.featureAdapter,this.fieldsIndex),n=this.hasM,i=this.hasZ,s=e.orderByFields,o=e.quantizationParameters,u=e.returnGeometry,c=e.returnCentroid,d=e.maxAllowableOffset,f=e.resultOffset,h=e.resultRecordCount,p=e.returnZ,v=void 0!==p&&p,y=e.returnM,g=i&&v,Z=n&&(void 0!==y&&y),b=[],I=0,S=(0,a.Z)(t);if(this._sortFeatures(S,s,(function(e,t,n){return r.getFieldValue(e,t,n)})),u||c){var w,k=null!==(w=(0,m.vY)(o))&&void 0!==w?w:void 0;if(u&&!c){var T,_=(0,l.Z)(S);try{for(_.s();!(T=_.n()).done;){var M=T.value;b[I++]={attributes:r.getAttributes(M),geometry:(0,F.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(M),d,k,g,Z)}}}catch(G){_.e(G)}finally{_.f()}}else if(!u&&c){var A,R=(0,l.Z)(S);try{for(R.s();!(A=R.n()).done;){var N=A.value;b[I++]={attributes:r.getAttributes(N),centroid:(0,F.EG)(this,this.featureAdapter.getCentroid(N,this),k)}}}catch(G){R.e(G)}finally{R.f()}}else{var E,V=(0,l.Z)(S);try{for(V.s();!(E=V.n()).done;){var C=E.value;b[I++]={attributes:r.getAttributes(C),centroid:(0,F.EG)(this,this.featureAdapter.getCentroid(C,this),k),geometry:(0,F.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(C),d,k,g,Z)}}}catch(G){V.e(G)}finally{V.f()}}}else{var z,D=(0,l.Z)(S);try{for(D.s();!(z=D.n()).done;){var O=z.value,P=r.getAttributes(O);P&&(b[I++]={attributes:P})}}catch(G){D.e(G)}finally{D.f()}}var U=f||0;if(null!=h){var q=U+h;b=b.slice(U,Math.min(b.length,q))}return b}},{key:"_createExceedsLimitQueryResponse",value:function(e){var t,r,n=!1,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=(0,l.Z)(null!==(t=e.outStatistics)&&void 0!==t?t:[]);try{for(o.s();!(r=o.n()).done;){var u=r.value;if("exceedslimit"===u.statisticType){i=null!=u.maxPointCount?u.maxPointCount:Number.POSITIVE_INFINITY,a=null!=u.maxRecordCount?u.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=u.maxVertexCount?u.maxVertexCount:Number.POSITIVE_INFINITY;break}}}catch(h){o.e(h)}finally{o.f()}if("esriGeometryPoint"===this.geometryType)n=this.items.length>i;else if(this.items.length>a)n=!0;else{var c=T(this.hasZ,this.hasM),d=this.featureAdapter;n=this.items.reduce((function(e,t){var r=d.getGeometry(t);return e+((0,f.pC)(r)&&r.coords.length||0)}),0)/c>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(n)}}]}}},{key:"_createStatisticsQueryResponse",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,c,d,f,h,p,m,v,y,g,Z,b,F,I,S,w,k,T,_,M,A,R,N,E,V,C,z,D,O,P,U,q,G,B=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={attributes:{}},n=[],i=new Map,a=new Map,o=new Map,u=new Map,c=new x(t,this.featureAdapter,this.fieldsIndex),d=t.outStatistics,f=t.groupByFieldsForStatistics,h=t.having,p=t.orderByFields,m=f&&f.length,y=(v=!!m)?f[0]:null,g=v&&!this.fieldsIndex.get(y),Z=(0,l.Z)(null!==d&&void 0!==d?d:[]),e.prev=2,Z.s();case 4:if((b=Z.n()).done){e.next=34;break}if(F=b.value,I=F.outStatisticFieldName,S=F.statisticType,w=F,k="exceedslimit"!==S?F.onStatisticField:void 0,T="percentile_disc"===S||"percentile_cont"===S,_="EnvelopeAggregate"===S||"CentroidAggregate"===S||"ConvexHullAggregate"===S,M=v&&1===m&&(k===y||g)&&"count"===S,!v){e.next=19;break}if(!o.has(k)){A=[],R=(0,l.Z)(f);try{for(R.s();!(N=R.n()).done;)E=N.value,V=this._getAttributeValues(c,E,i),A.push(V)}catch(L){R.e(L)}finally{R.f()}o.set(k,this._calculateUniqueValues(A,!_&&c.returnDistinctValues))}C=o.get(k),z=(0,s.Z)().mark((function e(t){var r,n,a,o,l,d,p,m,v,y,g,x,Z,b;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C[t],n=r.count,a=r.data,o=r.items,l=r.itemPositions,d=a.join(","),h&&!c.validateItems(o,h)){e.next=18;break}if(p=u.get(d)||{attributes:{}},!_){e.next=13;break}return p.aggregateGeometries||(p.aggregateGeometries={}),e.next=7,B._getAggregateGeometry(w,o);case 7:m=e.sent,v=m.aggregateGeometries,y=m.outStatisticFieldName,p.aggregateGeometries[y]=v,e.next=16;break;case 13:g=null,M?g=n:(x=B._getAttributeValues(c,k,i),Z=l.map((function(e){return x[e]})),g=T&&"statisticParameters"in w?B._getPercentileValue(w,Z):B._getStatisticValue(w,Z,null,c.returnDistinctValues)),p.attributes[I]=g;case 16:b=0,f.forEach((function(e,t){return p.attributes[B.fieldsIndex.get(e)?e:"EXPR_"+ ++b]=a[t]})),u.set(d,p);case 18:case"end":return e.stop()}}),e)})),e.t0=(0,s.Z)().keys(C);case 12:if((e.t1=e.t0()).done){e.next=17;break}return D=e.t1.value,e.delegateYield(z(D),"t2",15);case 15:e.next=12;break;case 17:e.next=31;break;case 19:if(!_){e.next=29;break}return r.aggregateGeometries||(r.aggregateGeometries={}),e.next=23,this._getAggregateGeometry(w,this.items);case 23:O=e.sent,P=O.aggregateGeometries,U=O.outStatisticFieldName,r.aggregateGeometries[U]=P,e.next=31;break;case 29:q=this._getAttributeValues(c,k,i),r.attributes[I]=T&&"statisticParameters"in w?this._getPercentileValue(w,q):this._getStatisticValue(w,q,a,c.returnDistinctValues);case 31:n.push({name:I,alias:I,type:"esriFieldTypeDouble"});case 32:e.next=4;break;case 34:e.next=39;break;case 36:e.prev=36,e.t3=e.catch(2),Z.e(e.t3);case 39:return e.prev=39,Z.f(),e.finish(39);case 42:return G=v?Array.from(u.values()):[r],e.abrupt("return",(this._sortFeatures(G,p,(function(e,t){return e.attributes[t]})),{fields:n,features:G}));case 44:case"end":return e.stop()}}),e,this,[[2,36,39,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getAggregateGeometry",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,n){var i,a,u,l,c,d,f,m,v,y,g,x,Z;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(99058),r.e(63645)]).then(r.bind(r,50309));case 2:return i=e.sent,a=t.statisticType,u=t.outStatisticFieldName,l=this.featureAdapter,c=this.spatialReference,d=this.geometryType,f=this.hasZ,m=this.hasM,v=n.map((function(e){return(0,F.Op)(d,f,m,l.getGeometry(e))})),y=i.convexHull(c,v,!0)[0],g={aggregateGeometries:null,outStatisticFieldName:null},"EnvelopeAggregate"===a?(x=y?(0,p._w)(y):(0,p.aO)(i.union(c,v)),g.aggregateGeometries=(0,o.Z)((0,o.Z)({},x),{},{spatialReference:c}),g.outStatisticFieldName=u||"extent"):"CentroidAggregate"===a?(Z=y?(0,h.tO)(y):(0,h.$G)((0,p.aO)(i.union(c,v))),g.aggregateGeometries={x:Z[0],y:Z[1],spatialReference:c},g.outStatisticFieldName=u||"centroid"):"ConvexHullAggregate"===a&&(g.aggregateGeometries=y,g.outStatisticFieldName=u||"convexHull"),e.abrupt("return",g);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getStatisticValue",value:function(e,t,r,n){var i,s=e.onStatisticField,o=e.statisticType;return i=null!==r&&void 0!==r&&r.has(s)?r.get(s):(0,I.qN)(this.fieldsIndex.get(s))?(0,g.H0)({values:t,returnDistinct:n}):(0,g.i5)({values:n?(0,a.Z)(new Set(t)):t,minValue:null,maxValue:null,useSampleStdDev:!0}),r&&r.set(s,i),i["var"===o?"variance":o]}},{key:"_getPercentileValue",value:function(e,t){var r=e.onStatisticField,n=e.statisticParameters,i=e.statisticType,a=n.value,s=n.orderBy,o=this.fieldsIndex.get(r);return(0,g.XL)(t,{value:a,orderBy:s,fieldType:null===o||void 0===o?void 0:o.type,isDiscrete:"percentile_disc"===i})}},{key:"_getAttributeValues",value:function(e,t,r){if(r.has(t))return r.get(t);var n=this.fieldsIndex.get(t),i=this.items.map((function(r){return e.getFieldValue(r,t,n)}));return r.set(t,i),i}},{key:"_getAttributeDataValues",value:function(e,t){return this.items.map((function(r){return e.getDataValue(r,{field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:t.normalizationField,normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})}))}},{key:"_getAttributeExpressionValues",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t,r,n){var i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.LC)();case 2:return i=e.sent,a=i.arcadeUtils,o=a.createFunction(r),u=n&&a.getViewInfo(n),e.abrupt("return",t.getExpressionValues(this.items,o,u,a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_calculateUniqueValues",value:function(e,t){for(var r={},n=this.items,i=n.length,a=0;a<i;a++){var s,o=n[a],u=[],c=(0,l.Z)(e);try{for(c.s();!(s=c.n()).done;){var d=s.value;u.push(d[a])}}catch(h){c.e(h)}finally{c.f()}var f=u.join(",");null==r[f]?r[f]={count:1,data:u,items:[o],itemPositions:[a]}:(t||r[f].count++,r[f].items.push(o),r[f].itemPositions.push(a))}return r}},{key:"_getDataValues",value:function(){var e=(0,u.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u,l,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new x(this.query,this.featureAdapter,this.fieldsIndex),n=t.valueExpression,i=t.field,a=t.normalizationField,o=t.normalizationType,u=t.normalizationTotal,l=t.scale,c=n?{viewingMode:"map",scale:l,spatialReference:this.query.outSR||this.spatialReference}:null,e.abrupt("return",n?this._getAttributeExpressionValues(r,n,c):this._getAttributeDataValues(r,{field:i,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:a,normalizationType:o,normalizationTotal:u}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function k(e,t,r,n){var i=n.x-r.x,a=n.y-r.y,s=i*i+a*a,o=(t.x-r.x)*i+(t.y-r.y)*a,u=Math.min(1,Math.max(0,o/s));e.x=r.x+i*u,e.y=r.y+a*u}function T(e,t){return e?t?4:3:t?3:2}(i=n||(n={}))[i.NONE=0]="NONE",i[i.EDGE=1]="EDGE",i[i.VERTEX=2]="VERTEX";var _=function(){function e(t,r){(0,c.Z)(this,e),this.coords=t,this.coordsIndex=r}return(0,d.Z)(e,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]),e}()},33392:function(e,t,r){r.d(t,{nu:function(){return Z},hr:function(){return x},Jc:function(){return y},G3:function(){return b},Of:function(){return g},z4:function(){return v},hO:function(){return m}});var n=r(93433),i=r(37762),a=r(10064),s=r(15671),o=r(43144),u=r(59026),l=r(48562),c=function(){function e(t,r){(0,s.Z)(this,e),this._cache=new u.Z(t),this._invalidCache=new u.Z(r)}return(0,o.Z)(e,[{key:"get",value:function(e,t){var r="".concat(t.uid,":").concat(e),n=this._cache.get(r);if(n)return n;if(void 0!==this._invalidCache.get(r))return null;try{var i=l.WhereClause.create(e,t);return this._cache.put(r,i),i}catch(a){return this._invalidCache.put(r,null),null}}}]),e}(),d=new c(50,500),f="feature-store:unsupported-query",h=" as ",p=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function m(e,t){if(!t)return!0;var r=d.get(t,e);if(!r)throw new a.Z(f,"invalid SQL expression",{where:t});if(!r.isStandardized)throw new a.Z(f,"where clause is not standard",{where:t});return g(e,r.fieldNames,"where clause contains missing fields"),!0}function v(e,t,r){if(!t)return!0;var n=d.get(t,e);if(!n)throw new a.Z(f,"invalid SQL expression",{having:t});if(!n.isAggregate)throw new a.Z(f,"having does not contain a valid aggregate function",{having:t});var i=n.fieldNames;if(g(e,i,"having contains missing fields"),!n.getExpressions().every((function(t){var n,i=t.aggregateType,a=t.field,s=null===(n=e.get(a))||void 0===n?void 0:n.name;return r.some((function(t){var r,n=t.onStatisticField,a=t.statisticType;return(null===(r=e.get(n))||void 0===r?void 0:r.name)===s&&a.toLowerCase().trim()===i}))})))throw new a.Z(f,"expressions in having should also exist in outStatistics",{having:t});return!0}function y(e,t){return e?d.get(e,t):null}function g(e,t,r){var s,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[],l=(0,i.Z)(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;if("*"!==c&&!e.has(c))if(o){var d=x(c);try{var h=y(d,e);if(!h)throw new a.Z(f,"invalid SQL expression",{where:d});if(!h.isStandardized)throw new a.Z(f,"expression is not standard",{clause:h});g(e,h.fieldNames,"expression contains missing fields")}catch(v){var p=v&&v.details;if(p&&(p.clause||p.where))throw v;p&&p.missingFields?u.push.apply(u,(0,n.Z)(p.missingFields)):u.push(c)}}else u.push(c)}}catch(m){l.e(m)}finally{l.f()}if(u.length)throw new a.Z(f,r,{missingFields:u})}function x(e){return e.split(h)[0]}function Z(e){return e.split(h)[1]}function b(e,t){var r=t.get(e);return!!r&&!p.has(r.type)}},19995:function(e,t,r){r.d(t,{_W:function(){return g},iV:function(){return F},oj:function(){return w}});var n=r(74165),i=r(15671),a=r(43144),s=r(15861),o=r(37762),u=r(29439),l=r(92026),c=r(79803),d=r(40237),f=r(92975),h=r(81753),p=[0,0];function m(e,t){if(!t)return null;if("x"in t){var r,n,i={x:0,y:0};return r=e(t.x,t.y,p),n=(0,u.Z)(r,2),i.x=n[0],i.y=n[1],null!=t.z&&(i.z=t.z),null!=t.m&&(i.m=t.m),i}if("xmin"in t){var a,s,o,l,c={xmin:0,ymin:0,xmax:0,ymax:0};return a=e(t.xmin,t.ymin,p),s=(0,u.Z)(a,2),c.xmin=s[0],c.ymin=s[1],o=e(t.xmax,t.ymax,p),l=(0,u.Z)(o,2),c.xmax=l[0],c.ymax=l[1],t.hasZ&&(c.zmin=t.zmin,c.zmax=t.zmax,c.hasZ=!0),t.hasM&&(c.mmin=t.mmin,c.mmax=t.mmax,c.hasM=!0),c}return"rings"in t?{rings:v(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:v(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:y(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function v(e,t){var r,n=[],i=(0,o.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.push(y(a,t))}}catch(s){i.e(s)}finally{i.f()}return n}function y(e,t){var r,n=[],i=(0,o.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=t(a[0],a[1],[0,0]);n.push(s),a.length>2&&s.push(a[2]),a.length>3&&s.push(a[3])}}catch(u){i.e(u)}finally{i.f()}return n}function g(e,t){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return");case 2:return i=Array.isArray(t)?t.map((function(e){return(0,l.pC)(e.geometry)?e.geometry.spatialReference:null})).filter(l.pC):[t],e.next=5,(0,c.iQ)(i.map((function(e){return{source:e,dest:r}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=m.bind(null,h.hG),b=m.bind(null,h.R6);function F(e,t,r,n){if(!e)return e;if(r||(r=t,t=e.spatialReference),!(0,f.JY)(t)||!(0,f.JY)(r)||(0,f.fS)(t,r))return e;if((0,h.Q8)(t,r)){var i=(0,f.sS)(r)?Z(e):b(e);return i.spatialReference=r,i}return(0,c.oj)(d.N,[e],t,r,null,n)[0]}var I=function(){function e(){(0,i.Z)(this,e),this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return(0,a.Z)(e,[{key:"push",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r,i){var a,s=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length&&r&&i&&!(0,f.fS)(r,i)){e.next=2;break}return e.abrupt("return",t);case 2:return a={geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:null},e.abrupt("return",(this._jobs.push(a),new Promise((function(e){a.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_process",value:function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;(0,h.Q8)(r,n)?(0,f.sS)(n)?i(t.map(Z)):i(t.map(b)):i((0,c.oj)(d.N,t,r,n,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}}]),e}(),S=new I;function w(e,t,r){return S.push(e,t,r)}},31904:function(e,t,r){r.d(t,{EG:function(){return F},Op:function(){return I},S2:function(){return V},Up:function(){return S},j6:function(){return k},vF:function(){return y}});var n=r(74165),i=r(15861),a=r(43404),s=r(92026),o=r(68860),u=r(79803),l=r(94446),c=r(77981),d=r(91340),f=r(92975),h=r(83406),p=r(80457),m=r(19995),v=new a.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),y=Object.freeze({}),g=new p.Z,x=new p.Z,Z=new p.Z,b={esriGeometryPoint:h.fQ,esriGeometryPolyline:h.J6,esriGeometryPolygon:h.eG,esriGeometryMultipoint:h.Iv};function F(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.hasZ,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.hasM;if((0,s.Wi)(t))return null;var a=e.hasZ&&n,o=e.hasM&&i;if(r){var u=(0,h.Nh)(Z,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return(0,h.fQ)(u,a,o)}return(0,h.fQ)(t,a,o)}function I(e,t,r,n,i,a){var o,u,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:r,d=t&&l,f=r&&c,p=(0,s.pC)(n)?"coords"in n?n:n.geometry:null;if((0,s.Wi)(p))return null;if(i){var m,v,y=(0,h.zj)(x,p,t,r,e,i,l,c);return a&&(y=(0,h.Nh)(Z,y,d,f,e,a)),null!==(m=null===(v=b[e])||void 0===v?void 0:v.call(b,y,d,f))&&void 0!==m?m:null}if(a){var F,I,S=(0,h.Nh)(Z,p,t,r,e,a,l,c);return null!==(F=null===(I=b[e])||void 0===I?void 0:I.call(b,S,d,f))&&void 0!==F?F:null}return(0,h.hY)(g,p,t,r,l,c),null!==(o=null===(u=b[e])||void 0===u?void 0:u.call(b,g,d,f))&&void 0!==o?o:null}function S(e,t,r){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var a,s,o,u,l,c,d,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.outFields,s=t.orderByFields,o=t.groupByFieldsForStatistics,u=t.outStatistics,a)for(l=0;l<a.length;l++)a[l]=a[l].trim();if(s)for(c=0;c<s.length;c++)s[c]=s[c].trim();if(o)for(d=0;d<o.length;d++)o[d]=o[d].trim();if(u)for(f=0;f<u.length;f++)u[f].onStatisticField&&(u[f].onStatisticField=u[f].onStatisticField.trim());return e.abrupt("return",(t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),k(t,r,i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,r){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var a,o,u,f,h,p,v,g,x;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(a=t.where,t.where=a=a&&a.trim(),(!a||/^1 *= *1$/.test(a)||r&&r===a)&&(t.where=null),t.geometry){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,A(t);case 7:if(o=e.sent,t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&(u=t.geometry.spatialReference,(o=(0,l.aO)(o)).spatialReference=u),!o){e.next=27;break}return e.next=12,(0,m._W)(o.spatialReference,i);case 12:return o=M(o,i),e.next=15,(0,d.aX)((0,c.im)(o));case 15:if(h=e.sent[0],!(0,s.Wi)(h)){e.next=18;break}throw y;case 18:return p="quantizationParameters"in t&&(null===(f=t.quantizationParameters)||void 0===f?void 0:f.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,v=p&&_(o,i)?{densificationStep:8*p}:void 0,g=h.toJSON(),e.next=23,(0,m.iV)(g,g.spatialReference,i,v);case 23:if(x=e.sent){e.next=26;break}throw y;case 26:x.spatialReference=i,t.geometry=x;case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){if(!e)return!1;var r=e.spatialReference;return((0,c.YX)(e)||(0,c.oU)(e)||(0,c.l9)(e))&&!(0,f.fS)(r,t)&&!(0,u.Up)(r,t)}function M(e,t){var r=e.spatialReference;return _(e,t)&&(0,c.YX)(e)?{spatialReference:r,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}function A(e){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,a,s,u,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.distance,i=t.units,a=t.geometry,null!=r&&!("vertexAttributes"in a)){e.next=3;break}return e.abrupt("return",a);case 3:if(s=a.spatialReference,u=i?v.fromJSON(i):(0,o.qE)(s),!s||!(0,f.sT)(s)&&!(0,f.sS)(s)){e.next=9;break}e.t0=a,e.next=12;break;case 9:return e.next=11,(0,m._W)(s,f.Zn).then((function(){return(0,m.iV)(a,f.Zn)}));case 11:e.t0=e.sent;case 12:return l=e.t0,e.next=15,N();case 15:return e.t1=e.sent,e.abrupt("return",(0,e.t1)(l.spatialReference,l,r,u));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(99058),r.e(63645)]).then(r.bind(r,50309));case 2:return e.abrupt("return",e.sent.geodesicBuffer);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return e&&C in e?JSON.parse(JSON.stringify(e,z)):e}var C="_geVersion",z=function(e,t){return e!==C?t:void 0}}}]);
//# sourceMappingURL=98074.1ee64138.chunk.js.map