"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[73429],{73429:function(t,e,n){n.r(e),n.d(e,{arcgis_hub_new_content_modal:function(){return h}});var i=n(74165),o=n(15861),r=n(15671),a=n(43144),l=n(72585),s=n(32836),c=n(12868),u=n(25434),h=(n(84371),function(){function t(e){(0,r.Z)(this,t),(0,l.r)(this,e),this.arcgisHubNewContentModalSaved=(0,l.c)(this,"arcgisHubNewContentModalSaved",7),this.arcgisHubNewContentModalClosed=(0,l.c)(this,"arcgisHubNewContentModalClosed",7),this.isLoading=!1,this.isValid=!0,this.stepperPosition=0,(0,s.b)(this,"translationFunc","setFormEl","onCalciteModalClose","onSaveButtonClick","onNextButtonClick","handleEditorChangeEvent")}return(0,a.Z)(t,[{key:"handleCalciteStepperChangeEvent",value:function(t){var e;this.stepperPosition=null===(e=null===t||void 0===t?void 0:t.detail)||void 0===e?void 0:e.position}},{key:"handleStepperPositionChange",value:function(){this.setNextStepEl(this.stepperEl)}},{key:"handleErrorChange",value:function(t){this._error=t}},{key:"isFinalStep",get:function(){var t=this.stepperEl&&this.stepperEl.querySelectorAll("calcite-stepper-item"),e=null===t||void 0===t?void 0:t.length,n=e>0,i=this.stepperPosition===e-1;return!n||i}},{key:"componentWillLoad",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.i.loadIntlForComponent(this.element);case 2:this.intl=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillRender",value:function(){var t,e;!this.internalValues&&(null===(t=this.form)||void 0===t?void 0:t.values)&&(this.internalValues=(0,u.c)(null===(e=this.form)||void 0===e?void 0:e.values)||{})}},{key:"setFormEl",value:function(t){this.formEl=t,this.setStepperEl(t)}},{key:"setStepperEl",value:function(t){var e=t&&(t.shadowRoot?t.shadowRoot.querySelector("calcite-stepper"):t.querySelector("calcite-stepper"));this.stepperEl=e,this.setNextStepEl(e)}},{key:"setNextStepEl",value:function(t){this.nextStepEl=this.isFinalStep?null:t&&t.querySelectorAll("calcite-stepper-item")[this.stepperPosition+1]}},{key:"translationFunc",value:function(t,e,n){return this.intl.t(t,e,n)}},{key:"onCalciteModalClose",value:function(){this.resetModal(),this.arcgisHubNewContentModalClosed.emit()}},{key:"onSaveButtonClick",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.arcgisHubNewContentModalSaved.emit(this.internalValues);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onNextButtonClick",value:function(){this.stepperPosition+=1,this.stepperEl.nextStep()}},{key:"resetModal",value:function(){this._error="",this.internalValues={},this.stepperEl&&(this.stepperPosition=0,this.stepperEl.startStep())}},{key:"renderFormHeader",value:function(t){var e=t||{},n=e.title,i=e.description,o=e.icon;return(0,l.h)("div",{class:"new-content-modal__header"},o&&(0,l.h)("div",{class:"new-content-modal__header-icon"},(0,l.h)("calcite-icon",{icon:o,scale:"l"})),n&&(0,l.h)("h2",null,this.form.title),i&&(0,l.h)("span",null,this.form.description))}},{key:"handleEditorChangeEvent",value:function(t){var e=this,n=t.detail,i=n.valid,o=n.values;t.stopPropagation(),this.isValid=i,this.internalValues=Object.assign(Object.assign({},this.internalValues),o),setTimeout((function(){var t;e.isNextStepDisabled=null===(t=e.nextStepEl)||void 0===t?void 0:t.disabled}),0)}},{key:"renderForm",value:function(t){return t&&(0,l.h)("arcgis-configuration-editor",{onArcgisConfigurationEditorChange:this.handleEditorChangeEvent,onArcgisConfigurationEditorInitialized:this.handleEditorChangeEvent,ref:this.setFormEl.bind(this),schema:t.schema,t:this.translationFunc,uiSchema:t.uiSchema,values:this.internalValues})}},{key:"renderModalContent",value:function(t){return this._error?(0,l.h)("calcite-notice",{color:"red",scale:"m",width:"auto"},(0,l.h)("div",{slot:"title"},this._error)):(0,l.h)(l.F,null,this.renderFormHeader(t),this.renderForm(t))}},{key:"render",value:function(){var t;return(0,l.h)(l.H,{unthemed:!0},(0,l.h)("calcite-modal",{"data-element":"modal",onCalciteModalClose:this.onCalciteModalClose,open:this.isOpen,scale:"s"},(0,l.h)("div",{slot:"header"},null===(t=this.form)||void 0===t?void 0:t.title),(0,l.h)("div",{slot:"content"},this.isLoading?(0,l.h)("calcite-loader",{label:"loader"}):this.isOpen&&this.renderModalContent(this.form)),(0,l.h)("calcite-button",{appearance:"outline",onClick:this.onCalciteModalClose,round:!0,slot:"secondary",width:"full"},this.intl.t("cancel")),(0,l.h)("calcite-button",{disabled:this.isFinalStep?!this.isValid:this.isNextStepDisabled,onClick:this.isFinalStep?this.onSaveButtonClick:this.onNextButtonClick,round:!0,slot:"primary",width:"full"},this.intl.t(this.isFinalStep?"create":"next"))))}},{key:"element",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{stepperPosition:["handleStepperPositionChange"],error:["handleErrorChange"]}}}]),t}());h.style='.sc-arcgis-hub-new-content-modal-h{display:block}calcite-modal.sc-arcgis-hub-new-content-modal:not([open]){visibility:hidden}[slot="content"].sc-arcgis-hub-new-content-modal{padding:1rem}[slot="content"].sc-arcgis-hub-new-content-modal .new-content-modal__header.sc-arcgis-hub-new-content-modal{margin-bottom:2rem;display:flex;flex-direction:column;align-items:center;padding-left:2.5rem;padding-right:2.5rem}[slot="content"].sc-arcgis-hub-new-content-modal .new-content-modal__header.sc-arcgis-hub-new-content-modal h2.sc-arcgis-hub-new-content-modal{margin-bottom:1rem;margin-top:1rem;font-size:var(--calcite-font-size-2);line-height:1.5rem;font-weight:var(--calcite-font-weight-bold)}.new-content-modal__header-icon.sc-arcgis-hub-new-content-modal{border-radius:50%;border-width:1px;border-style:solid}.new-content-modal__header-icon.sc-arcgis-hub-new-content-modal calcite-icon.sc-arcgis-hub-new-content-modal{margin:1.5rem}'},32836:function(t,e,n){n.d(e,{b:function(){return i}});var i=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach((function(e){if("function"!==typeof t[e])throw new Error("Cannot bind context. ".concat(e," must be a function"));t[e]=t[e].bind(t)}))}},62254:function(t,e,n){function i(t,e){return e.split(".").reduce((function(t,e){return t?t[e]:void 0}),t)}n.d(e,{g:function(){return i}})},25434:function(t,e,n){n.d(e,{a:function(){return l},b:function(){return u},c:function(){return o},d:function(){return c},e:function(){return f},f:function(){return p},g:function(){return r},i:function(){return d},m:function(){return s},u:function(){return h},w:function(){return a}});var i=n(62254);function o(t){var e={};if(Array.isArray(t))e=t.map(o);else if("object"===typeof t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];null!=i&&"object"===typeof i?i instanceof Date?e[n]=new Date(i.getTime()):"undefined"!==typeof Blob&&i instanceof Blob?e[n]=new Blob([i],{type:i.type}):e[n]=o(i):e[n]=i}}else e=t;return e}function r(t,e,n){return t?t.reduce((function(t,o){return(0,i.g)(o,e)===n&&(t=o),t}),null):null}function a(t,e){return t.filter((function(t){return t!==e}))}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(t).concat(Math.random().toString(36).substr(2,8))}function s(t,e,n){return null!==e&&void 0!==e&&((n=o(n))[t]=e),n}function c(t,e){return null!==t&&void 0!==t&&(e=o(e)).push(t),e}function u(t){return(t=(t=t.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(t,e,n){return n?n.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(t,e,n){return t.toLowerCase()}))}function h(t,e,n){return n.indexOf(t)===e}var d=function(t){return null==t},f=function(t){var e=Array.from(t);return e[0]=e[0].toUpperCase(),e.join("")};function p(t){return t.reduce((function(t,e){return t.concat(e)}),[])}}}]);
//# sourceMappingURL=73429.eca31708.chunk.js.map