"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[32050],{11422:function(e,t,r){r.d(t,{h:function(){return o}});var i=function e(t,r,i){for(var o=0,s=r.length;o<s;o++){var n=r[o];Array.isArray(n)?e(t,n,i):null!=n&&!1!==n&&("string"==typeof n&&(n={vnodeSelector:"",properties:void 0,children:void 0,text:n.toString(),domNode:null}),i.push(n))}};function o(e,t,r){if(Array.isArray(t))r=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||r&&("string"==typeof r||r.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");var o,s;return r&&1===r.length&&"string"==typeof r[0]?o=r[0]:r&&(i(e,r,s=[]),0===s.length&&(s=void 0)),{vnodeSelector:e,properties:t,children:s,text:""===o?void 0:o,domNode:null}}},62921:function(e,t,r){r.d(t,{i:function(){return R}});var i=r(15671),o=r(43144),s=r(11752),n=r(61120),a=r(60136),u=r(92572),c=r(27366),d=r(85015),l=r(79056),h=r(92026),_=r(49861),y=(r(25243),r(63780),r(69912)),p=r(26279),v=r(78289),f=r(78485),m=function(){function e(t){(0,i.Z)(this,e),this._resourceFactory=t,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=p.eZ.Outline}return(0,o.Z)(e,[{key:"destroy",value:function(){this._destroyResources()}},{key:"resources",get:function(){return(0,h.pC)(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this._syncGeometriesToRenderer())}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}},{key:"renderGroup",get:function(){return this._renderGroup},set:function(e){var t;this._renderGroup=e;var r=null===(t=(0,h.WG)(this._resources))||void 0===t?void 0:t.layerView;r&&(r.renderGroup=e)}},{key:"recreate",value:function(){this.attached&&this._createResources()}},{key:"recreateGeometry",value:function(){this._resourceFactory.recreateGeometry?(0,h.Wi)(this._resources)||(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}},{key:"_createOrDestroyResources",value:function(){this._attached?(0,h.Wi)(this._resources)&&this._createResources():this._destroyResources()}},{key:"_createResources",value:function(){var e;this._destroyResources();var t=this._resourceFactory.createResources(),r=new x({view:this._resourceFactory.view,renderGroup:this._renderGroup}),i=null===(e=this._resourceFactory.view.basemapTerrain)||void 0===e?void 0:e.overlayManager;this._resources={layerView:new x({view:this._resourceFactory.view,renderGroup:this._renderGroup}),external:t,geometriesAdded:!1},i&&(this._resources.drapeSourceRenderer=i.registerGeometryDrapeSource(r)),this._syncGeometriesToRenderer()}},{key:"_destroyResources",value:function(){var e;if(!(0,h.Wi)(this._resources)){this._ensureRenderGeometriesRemoved();var t=null===(e=this._resourceFactory.view.basemapTerrain)||void 0===e?void 0:e.overlayManager;t&&t.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}}},{key:"_syncGeometriesToRenderer",value:function(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}},{key:"_ensureRenderGeometriesRemoved",value:function(){(0,h.Wi)(this._resources)||(0,h.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded&&(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,v.T.UPDATE),this._resources.geometriesAdded=!1)}},{key:"_ensureRenderGeometriesAdded",value:function(){(0,h.Wi)(this._resources)||(0,h.Wi)(this._resources.drapeSourceRenderer)||this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,v.T.UPDATE),this._resources.geometriesAdded=!0)}}]),e}(),x=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).drapeSourceType=p.Lw.Features,o.updatePolicy=f.j.SYNC,o.renderGroup=p.eZ.Outline,o}return(0,o.Z)(r)}((0,l.IG)(d.Z));(0,c._)([(0,_.Cb)({constructOnly:!0})],x.prototype,"view",void 0),(0,c._)([(0,_.Cb)({readOnly:!0})],x.prototype,"drapeSourceType",void 0),(0,c._)([(0,_.Cb)()],x.prototype,"renderGroup",void 0),x=(0,c._)([(0,y.j)("DrapedVisualElementLayerView")],x);var g=r(86244),b=r(63825),R=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var o,s=e.view,n=e.isDraped;return(0,i.Z)(this,r),(o=t.call(this,s))._isDraped=!1,o.object3dResources=new b.O(o.createObject3DResourceFactory(s)),o.drapedResources=new m(o.createDrapedResourceFactory(s)),o.isDraped=null!==n&&void 0!==n&&n,o}return(0,o.Z)(r,[{key:"isDraped",get:function(){return this._isDraped},set:function(e){e!==this._isDraped&&(this._isDraped=e,this.object3dResources.attached=this.attached&&!e,this.drapedResources.attached=this.attached&&e)}},{key:"renderGroup",get:function(){return this.drapedResources.renderGroup},set:function(e){this.drapedResources.renderGroup=e}},{key:"createResources",value:function(){this.object3dResources.attached=!this._isDraped,this.drapedResources.attached=this._isDraped}},{key:"destroyResources",value:function(){this.object3dResources.attached=!1,this.drapedResources.attached=!1}},{key:"recreate",value:function(){this.object3dResources.recreate(),this.drapedResources.recreate()}},{key:"recreateGeometry",value:function(){this.object3dResources.recreateGeometry(),this.drapedResources.recreateGeometry()}},{key:"destroy",value:function(){this.object3dResources.destroy(),this.drapedResources.destroy(),(0,s.Z)((0,n.Z)(r.prototype),"destroy",this).call(this)}},{key:"updateVisibility",value:function(e){this.object3dResources.visible=e,this.drapedResources.visible=e}}]),r}(g.l)},98917:function(e,t,r){r.d(t,{R:function(){return O}});var i=r(93433),o=r(37762),s=r(15671),n=r(43144),a=r(60136),u=r(92572),c=r(92026),d=r(94172),l=r(14226),h=r(81949),_=r(11186),y=r(71353),p=r(90045),v=r(67077),f=r(51378),m=r(65618),x=r(62921),g=r(19384),b=r(91526),R=r(40779),k=r(70619),S=r(56529),w=r(39077),G=r(4760),C=r(66832),M=r(58901),O=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e))._maxSize=0,i._position=(0,y.c)(),i._up=(0,y.c)(),i._right=(0,y.c)(),i._renderOccluded=S.yD.OccludeAndTransparent,i._color=(0,v.f)(1,0,0,1),i._outlineColor=(0,v.f)(0,0,0,1),i._outlineSize=0,i._size=32,i._outlineRenderOccluded=S.yD.Opaque,i.applyProps(e),i}return(0,n.Z)(r,[{key:"createObject3DResourceFactory",value:function(e){var t=this;return{view:e,createResources:function(e){return t._createObject3DResources(e)},destroyResources:function(e){return t._destroyObject3DResources(e)},cameraChanged:function(){return t._updateTransformObject3D()}}}},{key:"createDrapedResourceFactory",value:function(e){var t=this;return{view:e,createResources:function(){return t._createDrapedResources()},destroyResources:function(e){return t._destroyDrapedResources(e)}}}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(e){(0,p.c)(this._color,e),this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(e){(0,p.c)(this._outlineColor,e),this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(e){var t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(e){e!==this._size&&(this._size=e,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}},{key:"geometry",set:function(e){var t=e.previous,r=e.center,i=e.next;this._maxSize=Math.min((0,_.i)(r,t),(0,_.i)(r,i))/3,(0,_.n)(this._up,(0,_.b)(this._up,t,r)),(0,_.n)(this._right,(0,_.b)(this._right,i,r)),(0,_.c)(this._position,r),this.recreateGeometry()}},{key:"_createObject3DResources",value:function(e){var t=new C.E(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new M.U(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,r),{quadMaterial:t,outlineMaterial:r,forEach:function(e){e(t),r&&e(r)}}}},{key:"_destroyObject3DResources",value:function(e){var t;e.quadMaterial.dispose(),null===(t=e.outlineMaterial)||void 0===t||t.dispose()}},{key:"_createObject3DGeometries",value:function(e,t,r){if(!(0,_.k)(this._up,y.Z)||!(0,_.k)(this._right,y.Z)){var i,s=this._createGeometries(t,r),n=(0,o.Z)(s);try{for(n.s();!(i=n.n()).done;){var a=i.value;e.addGeometry(a)}}catch(u){n.e(u)}finally{n.f()}this._updateTransformObject3D(e)}}},{key:"_createDrapedResources",value:function(){var e=this,t=new C.E(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new M.U(this._outlineMaterialParameters),i=this._createGeometries(t,r).map((function(e){return new w.z(e,{boundingInfo:e.boundingInfo})}));return this._setTransformDraped(i),{quadMaterial:t,outlineMaterial:r,geometries:i,pixelRatioHandle:(0,d.YP)((function(){return e.view.state.contentPixelRatio}),(function(){e.drapedResources.recreateGeometry()}))}}},{key:"_destroyDrapedResources",value:function(e){var t;e.pixelRatioHandle.remove(),e.geometries=[],null!==(t=e.outlineMaterial)&&void 0!==t&&t.dispose(),e.quadMaterial.dispose()}},{key:"_createGeometries",value:function(e,t){var r=this._getVertices(),i=r.up,o=r.right,s=r.corner,n=this._quadGeometryData(i,o,s,e);return t?[n,(0,k.rh)(t,[i,s,o])]:[n]}},{key:"_getVertices",value:function(){var e=this._up,t=this._right,r=(0,_.a)(f.WM.get(),e,t);return this.isDraped&&(e=(0,_.c)(f.WM.get(),e),t=(0,_.c)(f.WM.get(),t),e[2]=0,t[2]=0,r[2]=0),{up:e,right:t,corner:r}}},{key:"_updateTransform",value:function(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}},{key:"_updateTransformObject3D",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.WG)(this.object3dResources.object);if(e){var t=this.view.state.camera,r=this._size*t.computeScreenPixelSizeAt(this._position),i=Math.min(this._maxSize,r);(0,l.f)(D,this._position),(0,l.k)(D,D,[i,i,i]),e.transformation=D}}},{key:"_setTransformDraped",value:function(e){if(0!==e.length){var t=this.view,r=t.basemapTerrain.overlayManager,i=t.state.contentPixelRatio,s=this._position,n=this._size,a=(0,_.c)(f.WM.get(),s);a[2]=g.Rn;var u=T;u.spatialReference=(0,c.Wg)(r.renderer.spatialReference),u.x=a[0],u.y=a[1];var d=n*(r.overlayPixelSizeInMapUnits(u)*i),h=Math.min(this._maxSize,d);(0,l.f)(D,a),(0,l.k)(D,D,[h,h,1]);var y,p=(0,o.Z)(e);try{for(p.s();!(y=p.n()).done;){y.value.updateTransformation((function(e){(0,l.c)(e,D)}))}}catch(v){p.e(v)}finally{p.f()}}}},{key:"_quadGeometryData",value:function(e,t,r,o){return new R.Z(o,[[G.T.POSITION,new b.a([0,0,0].concat((0,i.Z)(t),(0,i.Z)(e),(0,i.Z)(r)),3,!0)]],[[G.T.POSITION,[0,1,2,1,2,3]]])}},{key:"_quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"_updateQuadMaterial",value:function(){var e,t;null!==(e=(0,c.WG)(this.object3dResources.resources))&&void 0!==e&&e.quadMaterial.setParameters(this._quadMaterialParameters),null===(t=(0,c.WG)(this.drapedResources.resources))||void 0===t||t.quadMaterial.setParameters(this._quadMaterialParameters)}},{key:"_outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}},{key:"_updateOutlineMaterial",value:function(){var e,t,r,i;null!==(e=(0,c.WG)(this.object3dResources.resources))&&void 0!==e&&null!==(t=e.outlineMaterial)&&void 0!==t&&t.setParameters(this._outlineMaterialParameters),null===(r=(0,c.WG)(this.drapedResources.resources))||void 0===r||null===(i=r.outlineMaterial)||void 0===i||i.setParameters(this._outlineMaterialParameters)}}]),r}(x.i),D=(0,h.c)(),T=(0,m.Tx)(0,0,void 0,null)},36444:function(e,t,r){r.d(t,{Z:function(){return g}});var i=r(29439),o=r(37762),s=r(15671),n=r(43144),a=r(60136),u=r(92572),c=r(27366),d=r(51995),l=r(85015),h=r(49861),_=(r(25243),r(63780),r(69912)),y=(r(42877),r(11422)),p=(r(88367),{bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"}),v=function(e){(0,a.Z)(r,e);var t=(0,u.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).x=0,i.y=0,i.text="-",i.fontSize=14,i.anchor="center",i.visible=!0,i.backgroundColor=new d.Z([0,0,0,.6]),i.textColor=new d.Z([255,255,255]),i._textShadowSize=1,i}return(0,n.Z)(r,[{key:"position",get:function(){return[this.x,this.y]},set:function(e){this._set("x",e[0]),this._set("y",e[1])}},{key:"_textShadowColor",get:function(){return this.backgroundColor}},{key:"_textShadow",get:function(){var e=this._textShadowColor.toCss(!1);return"0 0 ".concat(this._textShadowSize,"px ").concat(e)}},{key:"_padding",get:function(){return.5*this.fontSize}},{key:"_borderRadius",get:function(){return this._padding}},{key:"render",value:function(){return(0,y.h)("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this._padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])}},{key:"renderCanvas",value:function(e){if(this.visible){var t=e.font.replace(/^(.*?)px/,"");e.font="".concat(this.fontSize,"px ").concat(t);var r=this._padding,i=this._borderRadius,o=e.measureText(this.text).width,s=this.fontSize,n=f[this.anchor];e.textAlign="center",e.textBaseline="middle";var a=o+2*r,u=s+2*r,c=this.x+n.x*a,d=this.y+n.y*u;this._roundedRect(e,c,d,a,u,i),e.fillStyle=this.backgroundColor.toCss(!0),e.fill();var l=this.x+(n.x+.5)*a,h=this.y+(n.y+.5)*u;this._renderTextShadow(e,this.text,l,h),e.fillStyle=this.textColor.toCss(!0),e.fillText(this.text,l,h)}}},{key:"_renderTextShadow",value:function(e,t,r,s){e.lineJoin="miter",e.fillStyle="rgba(".concat(this._textShadowColor.r,", ").concat(this._textShadowColor.g,", ").concat(this._textShadowColor.b,", ").concat(1/m.length,")");var n,a=this._textShadowSize,u=(0,o.Z)(m);try{for(u.s();!(n=u.n()).done;){var c=(0,i.Z)(n.value,2),d=c[0],l=c[1];e.fillText(t,r+a*d,s+a*l)}}catch(h){u.e(h)}finally{u.f()}}},{key:"_roundedRect",value:function(e,t,r,i,o,s){e.beginPath(),e.moveTo(t,r+s),e.arcTo(t,r,t+s,r,s),e.lineTo(t+i-s,r),e.arcTo(t+i,r,t+i,r+s,s),e.lineTo(t+i,r+o-s),e.arcTo(t+i,r+o,t+i-s,r+o,s),e.lineTo(t+s,r+o),e.arcTo(t,r+o,t,r+o-s,s),e.closePath()}},{key:"_cssClasses",value:function(){var e={"esri-text-overlay-item":!0};for(var t in p)e[p[t]]=this.anchor===t;return e}}]),r}(l.Z);(0,c._)([(0,h.Cb)()],v.prototype,"x",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"y",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"position",null),(0,c._)([(0,h.Cb)()],v.prototype,"text",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"fontSize",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"anchor",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"visible",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"backgroundColor",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"textColor",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"_textShadowSize",void 0),(0,c._)([(0,h.Cb)()],v.prototype,"_textShadowColor",null),(0,c._)([(0,h.Cb)()],v.prototype,"_textShadow",null),(0,c._)([(0,h.Cb)()],v.prototype,"_padding",null),(0,c._)([(0,h.Cb)()],v.prototype,"_borderRadius",null),v=(0,c._)([(0,_.j)("esri.views.overlay.TextOverlayItem")],v);for(var f={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},m=[],x=0;x<360;x+=22.5)m.push([Math.cos(Math.PI*x/180),Math.sin(Math.PI*x/180)]);var g=v}}]);
//# sourceMappingURL=32050.6a57aeec.chunk.js.map