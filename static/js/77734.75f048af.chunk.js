"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[77734,65905],{44925:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:function(){return n}})},62044:function(e,t,r){r.d(t,{Z:function(){return b}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=r(46784),p=r(92026),c=r(86710),d=r(49861),y=(r(25243),r(63780),r(38511)),f=r(69912),v=r(31201),m=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).end=null,n.start=null,n}return(0,o.Z)(r,[{key:"readEnd",value:function(e,t){return null!=t.end?new Date(t.end):null}},{key:"writeEnd",value:function(e,t){t.end=e?e.getTime():null}},{key:"isAllTime",get:function(){return this.equals(n.allTime)}},{key:"isEmpty",get:function(){return this.equals(n.empty)}},{key:"readStart",value:function(e,t){return null!=t.start?new Date(t.start):null}},{key:"writeStart",value:function(e,t){t.start=e?e.getTime():null}},{key:"clone",value:function(){return new n({end:this.end,start:this.start})}},{key:"equals",value:function(e){if(!e)return!1;var t=(0,p.pC)(this.start)?this.start.getTime():this.start,r=(0,p.pC)(this.end)?this.end.getTime():this.end,n=(0,p.pC)(e.start)?e.start.getTime():e.start,i=(0,p.pC)(e.end)?e.end.getTime():e.end;return t===n&&r===i}},{key:"expandTo",value:function(e){if(this.isEmpty||this.isAllTime)return this.clone();var t=(0,p.yw)(this.start,(function(t){return(0,c.JE)(t,e)})),r=(0,p.yw)(this.end,(function(t){var r=(0,c.JE)(t,e);return t.getTime()===r.getTime()?r:(0,c.Nm)(r,1,e)}));return new n({start:t,end:r})}},{key:"intersection",value:function(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return n.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();var t,r,i=(0,p.R2)(this.start,-1/0,(function(e){return e.getTime()})),o=(0,p.R2)(this.end,1/0,(function(e){return e.getTime()})),a=(0,p.R2)(e.start,-1/0,(function(e){return e.getTime()})),s=(0,p.R2)(e.end,1/0,(function(e){return e.getTime()}));if(a>=i&&a<=o?t=a:i>=a&&i<=s&&(t=i),o>=a&&o<=s?r=o:s>=i&&s<=o&&(r=s),null!=t&&null!=r&&!isNaN(t)&&!isNaN(r)){var l=new n;return l.start=t===-1/0?null:new Date(t),l.end=r===1/0?null:new Date(r),l}return n.empty}},{key:"offset",value:function(e,t){if(this.isEmpty||this.isAllTime)return this.clone();var r=new n,i=this.start,o=this.end;return(0,p.pC)(i)&&(r.start=(0,c.Nm)(i,e,t)),(0,p.pC)(o)&&(r.end=(0,c.Nm)(o,e,t)),r}},{key:"union",value:function(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return h.clone();var t=(0,p.pC)(this.start)&&(0,p.pC)(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=(0,p.pC)(this.end)&&(0,p.pC)(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new n({start:t,end:r})}}],[{key:"allTime",get:function(){return h}},{key:"empty",get:function(){return g}}]),r}(u.wq);(0,l._)([(0,d.Cb)({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"end",void 0),(0,l._)([(0,y.r)("end")],m.prototype,"readEnd",null),(0,l._)([(0,v.c)("end")],m.prototype,"writeEnd",null),(0,l._)([(0,d.Cb)({readOnly:!0,json:{read:!1}})],m.prototype,"isAllTime",null),(0,l._)([(0,d.Cb)({readOnly:!0,json:{read:!1}})],m.prototype,"isEmpty",null),(0,l._)([(0,d.Cb)({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"start",void 0),(0,l._)([(0,y.r)("start")],m.prototype,"readStart",null),(0,l._)([(0,v.c)("start")],m.prototype,"writeStart",null);var h=new(m=n=(0,l._)([(0,f.j)("esri.TimeExtent")],m)),g=new m({start:void 0,end:void 0}),b=m},65905:function(e,t,r){r.d(t,{V:function(){return p},b:function(){return u}});var n=r(42265),i=r(76200),o=r(10064),a=r(32718),s=r(35995),l=a.Z.getLogger("esri.assets");function u(e,t){return(0,i.default)(p(e),t)}function p(e){if(!n.Z.assetsPath)throw l.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new o.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(n.Z.assetsPath,e)}},84397:function(e,t,r){r.d(t,{c:function(){return n},g:function(){return i}});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},41691:function(e,t,r){r.d(t,{p:function(){return y},r:function(){return f}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),s=r(27366),l=r(85015),u=r(100),p=r(49861),c=r(69912),d=r(61826),y=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new u.Z}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new d.t}}]),r}(e);return(0,s._)([(0,p.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,p.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,c.j)("esri.core.HandleOwner")],t),t},f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r)}(y(l.Z));f=(0,s._)([(0,c.j)("esri.core.HandleOwner")],f)},18759:function(e,t,r){r.d(t,{WJ:function(){return y},Xq:function(){return d},an:function(){return c},lN:function(){return n}});var n,i,o=r(29439),a=r(37762),s=r(15671),l=r(43144),u=r(92026),p=r(27546),c=-3;(i=n||(n={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";var d=function(){function e(t,r,n){(0,s.Z)(this,e),this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}return(0,l.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,r,n)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,s.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new p.Z,this._users=new p.Z}return(0,l.Z)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,r,i){var o=this._db.get(e);if(o&&(this._size-=o.size,this._db.delete(e),o.entry!==t&&this._notifyRemove(e,o.entry,n.ALL)),r>this._maxSize)this._notifyRemove(e,t,n.ALL);else if(void 0!==t)if(!r||r<0)console.warn("Refusing to cache entry with invalid size "+r);else{var a=1+Math.max(i,c)-c;this._db.set(e,{entry:t,size:r,lifetime:a,lives:a}),this._size+=r,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r){var i=this._db.get(e);if(i&&i.entry===t){for(this._size-=i.size;r>this._maxSize;){var o=this._notifyRemove(e,t,n.SOME);if(!((0,u.pC)(o)&&o>0))return void this._db.delete(e);r=o}i.size=r,this._size+=r,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},n=new Array;this._db.forEach((function(t,i){var o=t.lifetime;n[o]=(n[o]||0)+t.size,e._users.forAll((function(e){var n=e.namespace;if(i.startsWith(n)){var o=r[n]||0;r[n]=o+t.size}}))}));var i={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var n=r[t]||0;r[t]=n,i[t]=Math.round(100*e.hitRate)+"%"}else i[t]="0%"}));var o=Object.keys(r);o.sort((function(e,t){return r[t]-r[e]})),o.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+i[e]}));for(var a=n.length-1;a>=0;--a){var s=n[a];s&&(t["Priority "+(a+c-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(r,i){i.startsWith(e)&&(t._size-=r.size,t._db.delete(i),t._notifyRemove(i,r.entry,n.ALL))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,n.ALL)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var n;return this._removeFuncs.some((function(i){if(e.startsWith(i[0])){var o=i[1](t,r);return"number"==typeof o&&(n=o),!0}return!1})),n}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=(0,a.Z)(this._db);try{for(t.s();!(e=t.n()).done;){var r=(0,o.Z)(e.value,2),i=r[0],s=r[1];if(this._db.delete(i),s.lives<=1){this._size-=s.size;var l=this._notifyRemove(i,s.entry,n.SOME);(0,u.pC)(l)&&l>0&&(this._size+=l,s.lives=s.lifetime,s.size=l,this._db.set(i,s))}else--s.lives,this._db.set(i,s);if(this._size<=.9*this.maxSize)return}}catch(p){t.e(p)}finally{t.f()}}}}]),e}()},48732:function(e,t,r){r.d(t,{Hg:function(){return h},V7:function(){return m},uD:function(){return v},xb:function(){return g}});var n=r(4942),i=r(37762),o=r(85015),a=r(80987),s=r(92026),l=r(23879),u=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function p(e){return e instanceof o.Z}function c(e){return e instanceof a.Z?Object.keys(e.items):p(e)?(0,l.vw)(e).keys():e?Object.keys(e):[]}function d(e,t){return e instanceof a.Z?e.items[t]:e[t]}function y(e){return e?e.declaredClass:null}function f(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=c(e),a=c(t);if(0!==o.length||0!==a.length){if(!o.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,v=a.filter((function(e){return!o.includes(e)})),m=o.filter((function(e){return!a.includes(e)})),h=o.filter((function(r){return a.includes(r)&&d(e,r)!==d(t,r)})).concat(v,m).sort(),g=y(e);if(g&&u.includes(g)&&h.length)return{type:"complete",oldValue:e,newValue:t};var b,_=p(e)&&p(t),w=(0,i.Z)(h);try{for(w.s();!(b=w.n()).done;){var S=b.value,Z=d(e,S),C=d(t,S),T=void 0;if((_||"function"!=typeof Z&&"function"!=typeof C)&&Z!==C&&(null!=Z||null!=C)){if(r&&r[S]&&"function"==typeof r[S])T=r[S](Z,C);else if(Z instanceof Date&&C instanceof Date){if(Z.getTime()===C.getTime())continue;T={type:"complete",oldValue:Z,newValue:C}}else T="object"==typeof Z&&"object"==typeof C&&y(Z)===y(C)?f(Z,C):{type:"complete",oldValue:Z,newValue:C};(0,s.pC)(T)&&((0,s.pC)(l)?l.diff[S]=T:l={type:"partial",diff:(0,n.Z)({},S,T)})}}}catch(k){w.e(k)}finally{w.f()}return l}}function v(e,t){if((0,s.Wi)(e))return!1;var r,n=t.split("."),o=e,a=(0,i.Z)(n);try{for(a.s();!(r=a.n()).done;){var l=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var u=o.diff[l];if(!u)return!1;o=u}}catch(p){a.e(p)}finally{a.f()}return!0}function m(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(v(e,r.value))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}function h(e,t){if(!("function"==typeof e||"function"==typeof t||(0,s.Wi)(e)&&(0,s.Wi)(t)))return(0,s.Wi)(e)||(0,s.Wi)(t)||"object"==typeof e&&"object"==typeof t&&y(e)!==y(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function g(e){if((0,s.Wi)(e))return!0;switch(e.type){case"complete":return!1;case"collection":var t,r=e,n=(0,i.Z)(r.added);try{for(n.s();!(t=n.n()).done;){if(!g(t.value))return!1}}catch(c){n.e(c)}finally{n.f()}var o,a=(0,i.Z)(r.removed);try{for(a.s();!(o=a.n()).done;){if(!g(o.value))return!1}}catch(c){a.e(c)}finally{a.f()}var l,u=(0,i.Z)(r.changed);try{for(u.s();!(l=u.n()).done;){if(!g(l.value))return!1}}catch(c){u.e(c)}finally{u.f()}return!0;case"partial":for(var p in e.diff)if(!g(e.diff[p]))return!1;return!0}}},15909:function(e,t,r){r.d(t,{D:function(){return i}});var n=r(80292);function i(e){e&&e.writtenProperties&&e.writtenProperties.forEach((function(e){var t=e.target,r=e.propName,i=e.newOrigin;(0,n.l)(t)&&i&&t.originOf(r)!==i&&t.updateOrigin(r,i)}))}},41644:function(e,t,r){r.d(t,{Bg:function(){return n},sM:function(){return i}});r(93169);function n(e){}function i(e){return function(){return e}}},80292:function(e,t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{l:function(){return n}})},61826:function(e,t,r){r.d(t,{t:function(){return v}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),s=r(27366),l=r(85015),u=r(100),p=r(92026),c=r(94172),d=r(99346),y=r(49861),f=r(69912),v=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._handles=new u.Z,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,i.Z)(r,[{key:"destroy",value:function(){this.removeAll(),this._handles.destroy()}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,c.YP)}},{key:"addWhen",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,c.gx)}},{key:"addOnCollectionChange",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.initial,o=void 0!==i&&i,a=n.final,s=void 0!==a&&a,l=++this._handleId;return this._handles.add([(0,c.on)(e,"after-changes",this._createSyncUpdatingCallback(),c.Z_),(0,c.on)(e,"change",t,{onListenerAdd:o?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:s?function(e){return t({added:[],removed:e.toArray()})}:void 0})],l),{remove:function(){return r._handles.remove(l)}}}},{key:"addPromise",value:function(e){var t=this;if((0,p.Wi)(e))return e;var r=++this._handleId;this._handles.add({remove:function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t._handles.has(m)||t._set("updating",!1))}},r),this._pendingPromises.add(e),this._set("updating",!0);var n=function(){return t._handles.remove(r)};return e.then(n,n),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,o);var a=i(e,t,n);return this._handles.add(a,o),{remove:function(){return r._handles.remove(o)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var r=this._createSyncUpdatingCallback(),n=(0,c.YP)(e,r,{sync:!0,equals:function(){return!1}});return this._handles.add(n,t),n}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e._handles.remove(m),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e._handles.add((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e._handles.remove(m))})),m)}}}]),r}(l.Z);(0,s._)([(0,y.Cb)({readOnly:!0})],v.prototype,"updating",void 0),v=(0,s._)([(0,f.j)("esri.core.support.WatchUpdatingTracking")],v);var m=-42},86710:function(e,t,r){r.d(t,{JE:function(){return a},Nm:function(){return o},rJ:function(){return s}});r(93169);var n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function o(e,t,r){var n=new Date(e.getTime());if(t&&r){var o=i[r],a=o.getter,s=o.setter,l=o.multiplier;if("months"===r){var u=function(e,t){var r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}(n.getFullYear(),n.getMonth()+t);n.getDate()>u&&n.setDate(u)}n[s](n[a]()+t*l)}return n}function a(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function s(e,t,r){return 0===e?0:e*n[t]/n[r]}},67637:function(e,t,r){r.r(t),r.d(t,{default:function(){return Gt}});var n=r(93433),i=r(74165),o=r(15671),a=r(43144),s=r(60136),l=r(92572),u=r(15861),p=r(37762),c=r(27366),d=r(42265),y=r(59486),f=r(52639),v=r(44055),m=(r(94931),r(78451),r(98689),r(57823),r(32066),r(49018),r(34999),r(28189),r(9014)),h=r(80987),g=r(10064),b=r(41691),_=r(32718),w=r(92026),S=r(97642),Z=r(18202),C=r(66978),T=r(94172),k=r(68860),L=r(35995),N=r(49861),B=r(25243),A=(r(63780),r(38511)),R=r(69912),I=r(31201),j=r(15909),x=r(53866),O=r(79803),P=r(92975),M=r(30651),D=r(6693),F=r(6061),J=r(29598),G=r(56811),E=r(25899),z=r(51508),W=r(46784),V=r(16072),q=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).break=new V.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),n.first=new V.Z({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),n.unlocated=new V.Z({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),n.last=new V.Z({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),n.middle=new V.Z({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),n.waypoint=new V.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"break",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"first",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"unlocated",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"last",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"middle",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],q.prototype,"waypoint",void 0);var U=q=(0,c._)([(0,R.j)("esri.layers.support.RouteStopSymbols")],q),H=r(16851),Y=r(61459),Q=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).directionLines=new H.Z({color:[0,122,194],width:6}),n.directionPoints=new V.Z({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),n.pointBarriers=new V.Z({style:"x",size:10,outline:{color:[255,0,0],width:3}}),n.polygonBarriers=new Y.Z({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),n.polylineBarriers=new H.Z({width:7.5,color:[255,85,0,.7]}),n.routeInfo=new H.Z({width:8,color:[20,89,127]}),n.stops=new U,n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"pointBarriers",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"polygonBarriers",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"polylineBarriers",void 0),(0,c._)([(0,N.Cb)({types:z.LB})],Q.prototype,"routeInfo",void 0),(0,c._)([(0,N.Cb)({type:U})],Q.prototype,"stops",void 0);var X=Q=(0,c._)([(0,R.j)("esri.layers.support.RouteSymbols")],Q),K=r(70032),$=r(98995),ee=r(73117),te=r(76200),re=r(23084),ne=r(27135),ie=r(49022),oe=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).dataType=null,n.name=null,n.parameterNames=null,n.restrictionUsageParameterName=null,n.timeNeutralAttributeName=null,n.trafficSupport=null,n.units=null,n.usageType=null,n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"dataType",void 0),(0,c._)([(0,ne.J)(ie.Ul,{ignoreUnknown:!1})],oe.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[String]})],oe.prototype,"parameterNames",void 0),(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"restrictionUsageParameterName",void 0),(0,c._)([(0,ne.J)(ie.ZI,{ignoreUnknown:!1})],oe.prototype,"timeNeutralAttributeName",void 0),(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"trafficSupport",void 0),(0,c._)([(0,ne.J)(ie.dg)],oe.prototype,"units",void 0),(0,c._)([(0,ne.J)(ie.E2)],oe.prototype,"usageType",void 0);var ae=oe=(0,c._)([(0,R.j)("esri.rest.support.NetworkAttribute")],oe),se=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).buildTime=null,n.name=null,n.networkAttributes=null,n.networkSources=null,n.state=null,n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({type:Number})],se.prototype,"buildTime",void 0),(0,c._)([(0,N.Cb)({type:String})],se.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[ae]})],se.prototype,"networkAttributes",void 0),(0,c._)([(0,N.Cb)()],se.prototype,"networkSources",void 0),(0,c._)([(0,N.Cb)({type:String})],se.prototype,"state",void 0);var le=se=(0,c._)([(0,R.j)("esri.rest.support.NetworkDataset")],se),ue=r(77279),pe=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).accumulateAttributeNames=null,n.attributeParameterValues=null,n.currentVersion=null,n.defaultTravelMode=null,n.directionsLanguage=null,n.directionsLengthUnits=null,n.directionsSupportedLanguages=null,n.directionsTimeAttribute=null,n.hasZ=null,n.impedance=null,n.networkDataset=null,n.supportedTravelModes=null,n}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return(0,w.Wi)(e)?null:e.map((function(e){return ie.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){!(0,w.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ie.Ul.toJSON(e)})))}},{key:"readDefaultTravelMode",value:function(e,t){var r,n,i,o=null!==(r=null===(n=t.supportedTravelModes)||void 0===n?void 0:n.find((function(e){return e.id===t.defaultTravelMode})))&&void 0!==r?r:null===(i=t.supportedTravelModes)||void 0===i?void 0:i.find((function(e){return e.itemId===t.defaultTravelMode}));return o?ue.Z.fromJSON(o):null}}]),r}(W.wq);(0,c._)([(0,N.Cb)()],pe.prototype,"accumulateAttributeNames",void 0),(0,c._)([(0,A.r)("accumulateAttributeNames")],pe.prototype,"readAccumulateAttributes",null),(0,c._)([(0,I.c)("accumulateAttributeNames")],pe.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)()],pe.prototype,"attributeParameterValues",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"currentVersion",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"defaultTravelMode",void 0),(0,c._)([(0,A.r)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],pe.prototype,"readDefaultTravelMode",null),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsLanguage",void 0),(0,c._)([(0,ne.J)(ie.GX)],pe.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsSupportedLanguages",void 0),(0,c._)([(0,ne.J)(ie.ZI,{ignoreUnknown:!1})],pe.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"hasZ",void 0),(0,c._)([(0,ne.J)(ie.Ul,{ignoreUnknown:!1})],pe.prototype,"impedance",void 0),(0,c._)([(0,N.Cb)({type:le})],pe.prototype,"networkDataset",void 0),(0,c._)([(0,N.Cb)({type:[ue.Z]})],pe.prototype,"supportedTravelModes",void 0);var ce=pe=(0,c._)([(0,R.j)("esri.rest.support.NetworkServiceDescription")],pe),de=_.Z.getLogger("esri.rest.networkService");function ye(e,t,r,n){n[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}function fe(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var i,o=(0,p.Z)(n);try{for(o.s();!(i=o.n()).done;){i.value.z=void 0}}catch(a){o.e(a)}finally{o.f()}}}de.warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function ve(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var i,o=(0,p.Z)(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if((0,w.pC)(a)&&a.hasZ)return!0}}catch(s){o.e(s)}finally{o.f()}}}return!1}function me(e,t,r){return he.apply(this,arguments)}function he(){return he=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,l,u,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new g.Z("network-service:missing-url","Url to Network service is missing");case 2:return o=(0,re.lA)({f:"json",token:r},n),e.next=5,(0,te.default)(t,o);case 5:return a=e.sent,s=a.data,l=s.currentVersion>=10.4?_e(t,r,n):ge(t,n),e.next=10,l;case 10:return u=e.sent,p=u.defaultTravelMode,c=u.supportedTravelModes,e.abrupt("return",(s.defaultTravelMode=p,s.supportedTravelModes=c,ce.fromJSON(s)));case 14:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function ge(e,t){return be.apply(this,arguments)}function be(){return be=(0,u.Z)((0,i.Z)().mark((function e(t,r){var n,o,a,s,l,u,c,d,y,f,v,m,h,g,b,_,w,S,C,T,k,N,B,A,R,I;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,re.lA)({f:"json"},r),e.next=3,(0,te.default)(t.replace(/\/rest\/.*$/i,"/info"),a);case 3:if(s=e.sent,(l=s.data)&&l.owningSystemUrl){e.next=7;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 7:return u=l.owningSystemUrl,c=(0,L.Qj)(u)+"/sharing/rest/portals/self",e.next=11,(0,te.default)(c,a);case 11:if(d=e.sent,y=d.data,f=(0,Z.hS)("helperServices.routingUtilities.url",y)){e.next=16;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 16:return v=(0,re.en)(u),m=/\/solve$/i.test(v.path)?"Route":/\/solveclosestfacility$/i.test(v.path)?"ClosestFacility":"ServiceAreas",h=(0,re.lA)({f:"json",serviceName:m},r),g=(0,L.Qj)(f)+"/GetTravelModes/execute",e.next=22,(0,te.default)(g,h);case 22:if(b=e.sent,_=[],w=null,null!==b&&void 0!==b&&null!==(n=b.data)&&void 0!==n&&null!==(o=n.results)&&void 0!==o&&o.length){S=b.data.results,C=(0,p.Z)(S);try{for(C.s();!(T=C.n()).done;)if("supportedTravelModes"===(k=T.value).paramName){if(null!==(N=k.value)&&void 0!==N&&N.features){B=(0,p.Z)(k.value.features);try{for(B.s();!(A=B.n()).done;)(R=A.value.attributes)&&(I=JSON.parse(R.TravelMode),_.push(I))}catch(i){B.e(i)}finally{B.f()}}}else"defaultTravelMode"===k.paramName&&(w=k.value)}catch(i){C.e(i)}finally{C.f()}}return e.abrupt("return",{supportedTravelModes:_,defaultTravelMode:w});case 27:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function _e(e,t,r){return we.apply(this,arguments)}function we(){return(we=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,l,u,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=(0,re.lA)({f:"json",token:r},n),a=(0,L.Qj)(t)+"/retrieveTravelModes",e.next=5,(0,te.default)(a,o);case 5:return s=e.sent,l=s.data,u=l.supportedTravelModes,p=l.defaultTravelMode,e.abrupt("return",{supportedTravelModes:u,defaultTravelMode:p});case 12:throw e.prev=12,e.t0=e.catch(0),new g.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Se=r(1413),Ze=r(91340),Ce=r(3321),Te=r(49818),ke=r(43404),Le=new ke.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),Ne=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).description=null,n.type=null,n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],Ne.prototype,"description",void 0),(0,c._)([(0,N.Cb)({type:String,json:{read:Le.read,write:Le.write}})],Ne.prototype,"type",void 0);var Be=Ne=(0,c._)([(0,R.j)("esri.rest.support.GPMessage")],Ne),Ae=new ke.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),Re=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).type=null,n}return(0,a.Z)(r)}(Be);(0,c._)([(0,N.Cb)({type:String,json:{read:Ae.read,write:Ae.write}})],Re.prototype,"type",void 0);var Ie=Re=(0,c._)([(0,R.j)("esri.rest.support.NAMessage")],Re),je=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){return(0,o.Z)(this,r),t.call(this,e)}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({json:{read:{source:"string"}}})],je.prototype,"text",void 0),(0,c._)([(0,ne.J)(ie.Ks,{name:"stringType"})],je.prototype,"type",void 0);var xe=je=(0,c._)([(0,R.j)("esri.rest.support.DirectionsString")],je),Oe=r(585),Pe=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).arriveTime=null,n.arriveTimeOffset=null,n.geometry=null,n.strings=null,n}return(0,a.Z)(r,[{key:"readArriveTimeOffset",value:function(e,t){return(0,Ce.pQ)(t.ETA,t.arriveTimeUTC)}},{key:"readGeometry",value:function(e,t){return Oe.Z.fromJSON(t.point)}}]),r}(W.wq);(0,c._)([(0,N.Cb)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Pe.prototype,"arriveTime",void 0),(0,c._)([(0,N.Cb)()],Pe.prototype,"arriveTimeOffset",void 0),(0,c._)([(0,A.r)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Pe.prototype,"readArriveTimeOffset",null),(0,c._)([(0,N.Cb)({type:Oe.Z})],Pe.prototype,"geometry",void 0),(0,c._)([(0,A.r)("geometry",["point"])],Pe.prototype,"readGeometry",null),(0,c._)([(0,N.Cb)({type:[xe]})],Pe.prototype,"strings",void 0);var Me=Pe=(0,c._)([(0,R.j)("esri.rest.support.DirectionsEvent")],Pe),De=r(29909);var Fe=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).events=null,n.strings=null,n}return(0,a.Z)(r,[{key:"readGeometry",value:function(e,t){var r=function(e){if((0,w.Wi)(e)||""===e)return null;var t,r,n,i,o,a,s,l,u=0,p=0,c=0,d=0,y=[],f=0,v=0,m=0;if((o=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(o=[]),0===parseInt(o[f],32)){f=2;var h=parseInt(o[f],32);f++,a=parseInt(o[f],32),f++,1&h&&(v=o.indexOf("|")+1,s=parseInt(o[v],32),v++),2&h&&(m=o.indexOf("|",v)+1,l=parseInt(o[m],32),m++)}else a=parseInt(o[f],32),f++;for(;f<o.length&&"|"!==o[f];){t=parseInt(o[f],32)+u,f++,u=t,r=parseInt(o[f],32)+p,f++,p=r;var g=[t/a,r/a];v&&(i=parseInt(o[v],32)+c,v++,c=i,g.push(i/s)),m&&(n=parseInt(o[m],32)+d,m++,d=n,g.push(n/l)),y.push(g)}return{paths:[y],hasZ:v>0,hasM:m>0}}(t.compressedGeometry);return(0,w.pC)(r)?De.Z.fromJSON(r):null}}]),r}(f.Z);(0,c._)([(0,N.Cb)({type:[Me]})],Fe.prototype,"events",void 0),(0,c._)([(0,A.r)("geometry",["compressedGeometry"])],Fe.prototype,"readGeometry",null),(0,c._)([(0,N.Cb)({type:[xe]})],Fe.prototype,"strings",void 0);var Je=Fe=(0,c._)([(0,R.j)("esri.rest.support.DirectionsFeature")],Fe),Ge=r(78952);var Ee=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).extent=null,n.features=[],n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return(0,a.Z)(r,[{key:"readFeatures",value:function(e,t){var r;if(!e)return[];var n=null!==(r=t.summary.envelope.spatialReference)&&void 0!==r?r:t.spatialReference,i=n&&Ge.Z.fromJSON(n);return e.map((function(e){var t=Je.fromJSON(e);if((0,w.pC)(t.geometry)&&(t.geometry.spatialReference=i),(0,w.pC)(t.events)){var r,n=(0,p.Z)(t.events);try{for(n.s();!(r=n.n()).done;){var o=r.value;(0,w.pC)(o.geometry)&&(o.geometry.spatialReference=i)}}catch(a){n.e(a)}finally{n.f()}}return t}))}},{key:"mergedGeometry",get:function(){return this.features?function(e,t){if(0===e.length)return new De.Z({spatialReference:t});var r,i=[],o=(0,p.Z)(e);try{for(o.s();!(r=o.n()).done;){var a,s=r.value,l=(0,p.Z)(s.paths);try{for(l.s();!(a=l.n()).done;){var u=a.value;i.push.apply(i,(0,n.Z)(u))}}catch(v){l.e(v)}finally{l.f()}}}catch(v){o.e(v)}finally{o.f()}var c=[];i.forEach((function(e,t){0!==t&&e[0]===i[t-1][0]&&e[1]===i[t-1][1]||c.push(e)}));var d=e[0],y=d.hasM,f=d.hasZ;return new De.Z({hasM:y,hasZ:f,paths:[c],spatialReference:t})}(this.features.map((function(e){var t=e.geometry;return(0,w.Wg)(t)})),this.extent.spatialReference):null}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings})).flat().filter(w.pC)}}]),r}(Te.Z);(0,c._)([(0,N.Cb)({type:x.Z,json:{read:{source:"summary.envelope"}}})],Ee.prototype,"extent",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0})],Ee.prototype,"features",void 0),(0,c._)([(0,A.r)("features")],Ee.prototype,"readFeatures",null),(0,c._)([(0,N.Cb)()],Ee.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Ee.prototype,"mergedGeometry",null),(0,c._)([(0,N.Cb)()],Ee.prototype,"routeId",void 0),(0,c._)([(0,N.Cb)()],Ee.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({value:null,readOnly:!0})],Ee.prototype,"strings",null),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],Ee.prototype,"totalDriveTime",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalLength"}}})],Ee.prototype,"totalLength",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalTime"}}})],Ee.prototype,"totalTime",void 0);var ze=Ee=(0,c._)([(0,R.j)("esri.rest.support.DirectionsFeatureSet")],Ee),We=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).directionLines=null,n.directionPoints=null,n.directions=null,n.route=null,n.routeName=null,n.stops=null,n.traversedEdges=null,n.traversedJunctions=null,n.traversedTurns=null,n}return(0,a.Z)(r)}(W.wq);(0,c._)([(0,N.Cb)({type:Te.Z,json:{write:!0}})],We.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({type:Te.Z,json:{write:!0}})],We.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({type:ze,json:{write:!0}})],We.prototype,"directions",void 0),(0,c._)([(0,N.Cb)({type:f.Z,json:{write:!0}})],We.prototype,"route",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],We.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({type:[f.Z],json:{write:!0}})],We.prototype,"stops",void 0),(0,c._)([(0,N.Cb)({type:Te.Z,json:{write:!0}})],We.prototype,"traversedEdges",void 0),(0,c._)([(0,N.Cb)({type:Te.Z,json:{write:!0}})],We.prototype,"traversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:Te.Z,json:{write:!0}})],We.prototype,"traversedTurns",void 0);var Ve=We=(0,c._)([(0,R.j)("esri.rest.support.RouteResult")],We);function qe(e){return e?Te.Z.fromJSON(e).features.filter(w.pC):[]}var Ue=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).messages=null,n.pointBarriers=null,n.polylineBarriers=null,n.polygonBarriers=null,n.routeResults=null,n}return(0,a.Z)(r,[{key:"readPointBarriers",value:function(e,t){return qe(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return qe(e)}},{key:"readPolygonBarriers",value:function(e){return qe(e)}}]),r}(W.wq);(0,c._)([(0,N.Cb)({type:[Ie]})],Ue.prototype,"messages",void 0),(0,c._)([(0,N.Cb)({type:[f.Z]})],Ue.prototype,"pointBarriers",void 0),(0,c._)([(0,A.r)("pointBarriers",["barriers"])],Ue.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],Ue.prototype,"polylineBarriers",void 0),(0,c._)([(0,A.r)("polylineBarriers")],Ue.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],Ue.prototype,"polygonBarriers",void 0),(0,c._)([(0,A.r)("polygonBarriers")],Ue.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({type:[Ve]})],Ue.prototype,"routeResults",void 0);var He=Ue=(0,c._)([(0,R.j)("esri.rest.support.RouteSolveResult")],Ue);function Ye(e){return e instanceof Te.Z}function Qe(e,t,r){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,l,u,p,c,d,y,f,v,m,h,g,b,_;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],a=[],s={},l={},u=(0,re.en)(t),p=u.path,Ye(r.stops)&&ye(r.stops.features,a,"stops.features",s),Ye(r.pointBarriers)&&ye(r.pointBarriers.features,a,"pointBarriers.features",s),Ye(r.polylineBarriers)&&ye(r.polylineBarriers.features,a,"polylineBarriers.features",s),Ye(r.polygonBarriers)&&ye(r.polygonBarriers.features,a,"polygonBarriers.features",s),e.next=4,(0,Ze.aX)(a);case 4:for(d in c=e.sent,s)y=s[d],o.push(d),l[d]=c.slice(y[0],y[1]);if(!ve(l,o)){e.next=17;break}return f=null,e.prev=8,e.next=11,me(p,r.apiKey,n);case 11:f=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:f&&!f.hasZ&&fe(l,o);case 17:for(m in v=function(e){l[e].forEach((function(t,n){r.get(e)[n].geometry=t}))},l)v(m);return h=(0,Se.Z)((0,Se.Z)({},n),{},{query:(0,Se.Z)((0,Se.Z)((0,Se.Z)({},u.query),(0,Ce.Yc)(r)),{},{f:"json"})}),g=p.endsWith("/solve")?p:"".concat(p,"/solve"),e.next=23,(0,te.default)(g,h);case 23:return b=e.sent,_=b.data,e.abrupt("return",Ke(_));case 26:case"end":return e.stop()}}),e,null,[[8,14]])}))),Xe.apply(this,arguments)}function Ke(e){var t,r=e.barriers,n=e.directionLines,i=e.directionPoints,o=e.directions,a=e.messages,s=e.polygonBarriers,l=e.polylineBarriers,u=e.routes,p=e.stops,c=e.traversedEdges,d=e.traversedJunctions,y=e.traversedTurns,f=function(e){var t=m.find((function(t){return t.routeName===e}));if((0,w.pC)(t))return t;var r={routeId:m.length+1,routeName:e};return m.push(r),r},v=function(e){var t=m.find((function(t){return t.routeId===e}));if((0,w.pC)(t))return t;var r={routeId:e,routeName:null};return m.push(r),r},m=[];null!==u&&void 0!==u&&u.features.forEach((function(e,t){e.geometry.spatialReference=u.spatialReference;var r=e.attributes.Name,n=t+1;m.push({routeId:n,routeName:r,route:e})})),null===o||void 0===o||o.forEach((function(e){var t=e.routeName;f(t).directions=e}));var h=null!==(t=null===p||void 0===p?void 0:p.features.every((function(e){return(0,w.Wi)(e.attributes.RouteName)})))&&void 0!==t&&t&&m.length>0?m[0].routeName:null;return null!==p&&void 0!==p&&p.features.forEach((function(e){var t,r,n;e.geometry&&(null!==(t=(n=e.geometry).spatialReference)&&void 0!==t||(n.spatialReference=p.spatialReference));var i=null!==h&&void 0!==h?h:e.attributes.RouteName,o=f(i);null!==(r=o.stops)&&void 0!==r||(o.stops=[]),o.stops.push(e)})),null!==n&&void 0!==n&&n.features.forEach((function(e){var t,r=e.attributes.RouteID,i=v(r),o=n.geometryType,a=n.spatialReference;null!==(t=i.directionLines)&&void 0!==t||(i.directionLines={features:[],geometryType:o,spatialReference:a}),i.directionLines.features.push(e)})),null!==i&&void 0!==i&&i.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),o=i.geometryType,a=i.spatialReference;null!==(t=n.directionPoints)&&void 0!==t||(n.directionPoints={features:[],geometryType:o,spatialReference:a}),n.directionPoints.features.push(e)})),null!==c&&void 0!==c&&c.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=c.geometryType,o=c.spatialReference;null!==(t=n.traversedEdges)&&void 0!==t||(n.traversedEdges={features:[],geometryType:i,spatialReference:o}),n.traversedEdges.features.push(e)})),null!==d&&void 0!==d&&d.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=d.geometryType,o=d.spatialReference;null!==(t=n.traversedJunctions)&&void 0!==t||(n.traversedJunctions={features:[],geometryType:i,spatialReference:o}),n.traversedJunctions.features.push(e)})),null!==y&&void 0!==y&&y.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r);null!==(t=n.traversedTurns)&&void 0!==t||(n.traversedTurns={features:[]}),n.traversedTurns.features.push(e)})),He.fromJSON({routeResults:m,barriers:r,polygonBarriers:s,polylineBarriers:l,messages:a})}var $e=r(40653),et=r(54889),tt=r(16406),rt=r(44745),nt=r(21604),it=r(99821),ot=r(11582),at=r(1337),st=r(77981),lt=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n.geometry=null,n.geometryType=null,n.name=null,n.spatialRelationship=null,n.type="layer",n.where=null,n}return(0,a.Z)(r)}((0,ot.J)(W.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],lt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({types:y.qM,json:{read:st.im,write:!0}})],lt.prototype,"geometry",void 0),(0,c._)([(0,ne.J)(ie.KA)],lt.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({type:String,json:{name:"layerName",write:!0}})],lt.prototype,"name",void 0),(0,c._)([(0,ne.J)(ie.S7,{name:"spatialRel"})],lt.prototype,"spatialRelationship",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],lt.prototype,"type",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],lt.prototype,"where",void 0);var ut,pt=lt=(0,c._)([(0,R.j)("esri.rest.support.DataLayer")],lt),ct=ut=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n}return(0,a.Z)(r,[{key:"clone",value:function(){return new ut((0,Se.Z)({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements},this.cloneProperties()))}}]),r}(Te.Z);(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ct.prototype,"doNotLocateOnRestrictedElements",void 0);var dt=ct=ut=(0,c._)([(0,R.j)("esri.rest.support.NetworkFeatureSet")],ct),yt=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n.url=null,n}return(0,a.Z)(r)}((0,ot.J)(W.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],yt.prototype,"url",void 0);var ft,vt=yt=(0,c._)([(0,R.j)("esri.rest.support.NetworkUrl")],yt);function mt(e,t,r){(0,w.pC)(e)&&(t[r]=h.Z.isCollection(e)?{features:e.toArray().map((function(e){return e.toJSON()}))}:e.toJSON())}var ht=ft=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).accumulateAttributes=null,n.apiKey=null,n.attributeParameterValues=null,n.directionsLanguage=null,n.directionsLengthUnits=null,n.directionsOutputType=null,n.directionsStyleName=null,n.directionsTimeAttribute=null,n.findBestSequence=null,n.geometryPrecision=null,n.geometryPrecisionM=null,n.geometryPrecisionZ=null,n.ignoreInvalidLocations=null,n.impedanceAttribute=null,n.outputGeometryPrecision=null,n.outputGeometryPrecisionUnits=null,n.outputLines="true-shape",n.outSpatialReference=null,n.overrides=null,n.pointBarriers=null,n.polygonBarriers=null,n.polylineBarriers=null,n.preserveFirstStop=null,n.preserveLastStop=null,n.preserveObjectID=null,n.restrictionAttributes=null,n.restrictUTurns=null,n.returnBarriers=!1,n.returnDirections=!1,n.returnPolygonBarriers=!1,n.returnPolylineBarriers=!1,n.returnRoutes=!0,n.returnStops=!1,n.returnTraversedEdges=null,n.returnTraversedJunctions=null,n.returnTraversedTurns=null,n.returnZ=!0,n.startTime=null,n.startTimeIsUTC=!0,n.stops=null,n.timeWindowsAreUTC=null,n.travelMode=null,n.useHierarchy=null,n.useTimeWindows=null,n}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return(0,w.Wi)(e)?null:e.map((function(e){return ie.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){!(0,w.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ie.Ul.toJSON(e)})))}},{key:"writePointBarriers",value:function(e,t,r){mt(e,t,r)}},{key:"writePolygonBarrier",value:function(e,t,r){mt(e,t,r)}},{key:"writePolylineBarrier",value:function(e,t,r){mt(e,t,r)}},{key:"readRestrictionAttributes",value:function(e){return(0,w.Wi)(e)?null:e.map((function(e){return ie.kL.fromJSON(e)}))}},{key:"writeRestrictionAttributes",value:function(e,t,r){!(0,w.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ie.kL.toJSON(e)})))}},{key:"readStartTime",value:function(e,t){var r=t.startTime;return(0,w.Wi)(r)?null:"now"===r?"now":new Date(r)}},{key:"writeStartTime",value:function(e,t){(0,w.Wi)(e)||(t.startTime="now"===e?"now":e.getTime())}},{key:"readStops",value:function(e,t){return function(e){return function(e){return e&&"type"in e}(e)?pt.fromJSON(e):function(e){return e&&"url"in e}(e)?vt.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?dt.fromJSON(e):function(e){return e&&"features"in e}(e)?Te.Z.fromJSON(e):null}(t.stops)}},{key:"writeStops",value:function(e,t,r){mt(e,t,r)}}],[{key:"from",value:function(e){return(0,B.TJ)(ft,e)}}]),r}((0,ot.J)(W.wq));(0,c._)([(0,N.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],ht.prototype,"accumulateAttributes",void 0),(0,c._)([(0,A.r)("accumulateAttributes")],ht.prototype,"readAccumulateAttributes",null),(0,c._)([(0,I.c)("accumulateAttributes")],ht.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)(at.q)],ht.prototype,"apiKey",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],ht.prototype,"attributeParameterValues",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],ht.prototype,"directionsLanguage",void 0),(0,c._)([(0,ne.J)(ie.GX)],ht.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,ne.J)(ie.$7)],ht.prototype,"directionsOutputType",void 0),(0,c._)([(0,ne.J)(ie.WP)],ht.prototype,"directionsStyleName",void 0),(0,c._)([(0,ne.J)(ie.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],ht.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"findBestSequence",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],ht.prototype,"geometryPrecision",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],ht.prototype,"geometryPrecisionM",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],ht.prototype,"geometryPrecisionZ",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"ignoreInvalidLocations",void 0),(0,c._)([(0,ne.J)(ie.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],ht.prototype,"impedanceAttribute",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],ht.prototype,"outputGeometryPrecision",void 0),(0,c._)([(0,ne.J)(ie.q$)],ht.prototype,"outputGeometryPrecisionUnits",void 0),(0,c._)([(0,ne.J)(ie.no)],ht.prototype,"outputLines",void 0),(0,c._)([(0,N.Cb)({type:Ge.Z,json:{name:"outSR",write:!0}})],ht.prototype,"outSpatialReference",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],ht.prototype,"overrides",void 0),(0,c._)([(0,N.Cb)({json:{name:"barriers",write:!0}})],ht.prototype,"pointBarriers",void 0),(0,c._)([(0,I.c)("pointBarriers")],ht.prototype,"writePointBarriers",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],ht.prototype,"polygonBarriers",void 0),(0,c._)([(0,I.c)("polygonBarriers")],ht.prototype,"writePolygonBarrier",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],ht.prototype,"polylineBarriers",void 0),(0,c._)([(0,I.c)("polylineBarriers")],ht.prototype,"writePolylineBarrier",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"preserveFirstStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"preserveLastStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"preserveObjectID",void 0),(0,c._)([(0,N.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],ht.prototype,"restrictionAttributes",void 0),(0,c._)([(0,A.r)("restrictionAttributes")],ht.prototype,"readRestrictionAttributes",null),(0,c._)([(0,I.c)("restrictionAttributes")],ht.prototype,"writeRestrictionAttributes",null),(0,c._)([(0,ne.J)(ie.ip)],ht.prototype,"restrictUTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnDirections",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnPolygonBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnPolylineBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnRoutes",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnStops",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnTraversedEdges",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnTraversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnTraversedTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"returnZ",void 0),(0,c._)([(0,N.Cb)({type:Date,json:{type:Number,write:!0}})],ht.prototype,"startTime",void 0),(0,c._)([(0,A.r)("startTime")],ht.prototype,"readStartTime",null),(0,c._)([(0,I.c)("startTime")],ht.prototype,"writeStartTime",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"startTimeIsUTC",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],ht.prototype,"stops",void 0),(0,c._)([(0,A.r)("stops")],ht.prototype,"readStops",null),(0,c._)([(0,I.c)("stops")],ht.prototype,"writeStops",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"timeWindowsAreUTC",void 0),(0,c._)([(0,N.Cb)({type:ue.Z,json:{write:!0}})],ht.prototype,"travelMode",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"useHierarchy",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"useTimeWindows",void 0);var gt=ht=ft=(0,c._)([(0,R.j)("esri.rest.support.RouteParameters")],ht),bt=r(37321),_t=r(70491),wt=r(77577);function St(e){return e.length?e:null}function Zt(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:Zt("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:Zt("esriGeometryPolyline")}}}function Ct(e){return"layers"in e}function Tt(e){return"esri.rest.support.FeatureSet"===e.declaredClass}function kt(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}function Lt(e,t,r){var n,i,o,a,s,l,u,c,d,y,f,v,m,h,b,_,S,Z=null===(n=t.networkDataset)||void 0===n?void 0:n.networkAttributes,C=null!==(i=null===Z||void 0===Z?void 0:Z.filter((function(e){return"cost"===e.usageType})))&&void 0!==i?i:[],T=null!==(o=r.travelMode)&&void 0!==o?o:t.defaultTravelMode;if((0,w.Wi)(T))Ft.warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");else{var k=T.timeAttributeName,L=T.distanceAttributeName,N=C.find((function(e){return e.name===k})),B=C.find((function(e){return e.name===L})),A=null!==(a=null!==(s=null===(l=(0,w.Wg)(r.travelMode))||void 0===l?void 0:l.impedanceAttributeName)&&void 0!==s?s:(0,w.Wg)(r.impedanceAttribute))&&void 0!==a?a:t.impedance,R=null===N||void 0===N?void 0:N.units,I=null===B||void 0===B?void 0:B.units;if(!R||!I)throw new g.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");var j,x=null!==(u=r.directionsLanguage)&&void 0!==u?u:t.directionsLanguage,O=null!==(c=null!==(d=(0,w.Wg)(r.accumulateAttributes))&&void 0!==d?d:t.accumulateAttributeNames)&&void 0!==c?c:[],P=new Set(C.filter((function(e){var t=e.name;return t===k||t===L||t===A||null!=t&&O.includes(t)})).map((function(e){return e.name}))),M=function(e){for(var t in e)P.has(t)||delete e[t]},D=(0,p.Z)(e.pointBarriers);try{for(D.s();!(j=D.n()).done;){var F,J=j.value;(0,w.pC)(J.costs)&&(J.addedCost=null!==(F=J.costs[A])&&void 0!==F?F:0,M(J.costs))}}catch(pe){D.e(pe)}finally{D.f()}var G,E=(0,p.Z)(e.polygonBarriers);try{for(E.s();!(G=E.n()).done;){var z,W=G.value;(0,w.pC)(W.costs)&&(W.scaleFactor=null!==(z=W.costs[A])&&void 0!==z?z:1,M(W.costs))}}catch(pe){E.e(pe)}finally{E.f()}var V,q=(0,p.Z)(e.polylineBarriers);try{for(q.s();!(V=q.n()).done;){var U,H=V.value;(0,w.pC)(H.costs)&&(H.scaleFactor=null!==(U=H.costs[A])&&void 0!==U?U:1,M(H.costs))}}catch(pe){q.e(pe)}finally{q.f()}var Y=e.routeInfo,Q=r.findBestSequence,X=r.preserveFirstStop,K=r.preserveLastStop,$=r.startTimeIsUTC,ee=r.timeWindowsAreUTC;Y.analysisSettings=new bt.Z({accumulateAttributes:O,directionsLanguage:x,findBestSequence:Q,preserveFirstStop:X,preserveLastStop:K,startTimeIsUTC:$,timeWindowsAreUTC:ee,travelMode:T}),Y.totalDuration=At(null!==(y=null===(f=Y.totalCosts)||void 0===f?void 0:f[k])&&void 0!==y?y:0,R),Y.totalDistance=Rt(null!==(v=null===(m=Y.totalCosts)||void 0===m?void 0:m[L])&&void 0!==v?v:0,I),Y.totalLateDuration=At(null!==(h=null===(b=Y.totalViolations)||void 0===b?void 0:b[k])&&void 0!==h?h:0,R),Y.totalWaitDuration=At(null!==(_=null===(S=Y.totalWait)||void 0===S?void 0:S[k])&&void 0!==_?_:0,R),(0,w.pC)(Y.totalCosts)&&M(Y.totalCosts),(0,w.pC)(Y.totalViolations)&&M(Y.totalViolations),(0,w.pC)(Y.totalWait)&&M(Y.totalWait);var te,re=(0,p.Z)(e.stops);try{for(re.s();!(te=re.n()).done;){var ne,ie,oe,ae,se,le,ue=te.value;(0,w.pC)(ue.serviceCosts)&&(ue.serviceDuration=At(null!==(ne=ue.serviceCosts[k])&&void 0!==ne?ne:0,R),ue.serviceDistance=Rt(null!==(ie=ue.serviceCosts[L])&&void 0!==ie?ie:0,I),M(ue.serviceCosts)),(0,w.pC)(ue.cumulativeCosts)&&(ue.cumulativeDuration=At(null!==(oe=ue.cumulativeCosts[k])&&void 0!==oe?oe:0,R),ue.cumulativeDistance=Rt(null!==(ae=ue.cumulativeCosts[L])&&void 0!==ae?ae:0,I),M(ue.cumulativeCosts)),(0,w.pC)(ue.violations)&&(ue.lateDuration=At(null!==(se=ue.violations[k])&&void 0!==se?se:0,R),M(ue.violations)),(0,w.pC)(ue.wait)&&(ue.waitDuration=At(null!==(le=ue.wait[k])&&void 0!==le?le:0,R),M(ue.wait))}}catch(pe){re.e(pe)}finally{re.f()}}}function Nt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ge.Z.WGS84,e.next=3,(0,O.iQ)(t.spatialReference,r);case 3:return e.abrupt("return",(0,O.iV)(t,r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function Rt(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,k.En)(e,t,"meters")}var It=h.Z.ofType($e.Z),jt=h.Z.ofType(et.Z),xt=h.Z.ofType(tt.Z),Ot=h.Z.ofType(rt.Z),Pt=h.Z.ofType(nt.Z),Mt=h.Z.ofType(_t.Z),Dt="esri.layers.RouteLayer",Ft=_.Z.getLogger(Dt),Jt=function(e){(0,s.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;(0,o.Z)(this,r),(n=t.call(this,e))._cachedServiceDescription=null,n._featureCollection=null,n._type="Feature Collection",n.defaultSymbols=new X,n.directionLines=null,n.directionPoints=null,n.featureCollectionType="route",n.legendEnabled=!1,n.maxScale=0,n.minScale=0,n.pointBarriers=new xt,n.polygonBarriers=new Ot,n.polylineBarriers=new Pt,n.routeInfo=null,n.spatialReference=Ge.Z.WGS84,n.stops=new Mt,n.type="route";var i=function(){n._setStopSymbol(n.stops)};return n.addHandles((0,T.on)((function(){return n.stops}),"change",i,{sync:!0,onListenerAdd:i})),n}return(0,a.Z)(r,[{key:"writeFeatureCollectionWebmap",value:function(e,t,r,n){var i=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((function(e){return!!e})),o=i.map((function(e,t){return t})),a="web-map"===n.origin?"featureCollection.layers":"layers";(0,Z.RB)(a,i,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=o}},{key:"readDirectionLines",value:function(e,t){return this._getNetworkFeatures(t,"DirectionLines",(function(e){return $e.Z.fromGraphic(e)}))}},{key:"readDirectionPoints",value:function(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(function(e){return et.Z.fromGraphic(e)}))}},{key:"fullExtent",get:function(){var e,t=new x.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:Ge.Z.WGS84});if((0,w.pC)(this.routeInfo)&&(0,w.pC)(this.routeInfo.geometry))return null!==(e=this.routeInfo.geometry.extent)&&void 0!==e?e:t;if((0,w.Wi)(this.stops))return t;var r=this.stops.filter((function(e){return(0,w.pC)(e.geometry)}));if(r.length<2)return t;var n=r.getItemAt(0).geometry.spatialReference;if((0,w.Wi)(n))return t;var i=r.toArray().map((function(e){var t=e.geometry;return[t.x,t.y]}));return new wt.Z({points:i,spatialReference:n}).extent}},{key:"readMaxScale",value:function(e,t){var r,n,i,o=null===(r=Ct(t)?t.layers:null===(n=t.featureCollection)||void 0===n?void 0:n.layers)||void 0===r?void 0:r.find((function(e){return(0,w.pC)(e.layerDefinition.maxScale)}));return null!==(i=null===o||void 0===o?void 0:o.layerDefinition.maxScale)&&void 0!==i?i:0}},{key:"readMinScale",value:function(e,t){var r,n,i,o=null===(r=Ct(t)?t.layers:null===(n=t.featureCollection)||void 0===n?void 0:n.layers)||void 0===r?void 0:r.find((function(e){return(0,w.pC)(e.layerDefinition.minScale)}));return null!==(i=null===o||void 0===o?void 0:o.layerDefinition.minScale)&&void 0!==i?i:0}},{key:"readPointBarriers",value:function(e,t){return this._getNetworkFeatures(t,"Barriers",(function(e){return tt.Z.fromGraphic(e)}))}},{key:"readPolygonBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(function(e){return rt.Z.fromGraphic(e)}))}},{key:"readPolylineBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(function(e){return nt.Z.fromGraphic(e)}))}},{key:"readRouteInfo",value:function(e,t){var r=this._getNetworkFeatures(t,"RouteInfo",(function(e){return it.Z.fromGraphic(e)}));return r.length>0?r.getItemAt(0):null}},{key:"readSpatialReference",value:function(e,t){var r,n,i,o,a,s,l=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers;if(null===l||void 0===l||!l.length)return Ge.Z.WGS84;var u=l[0],p=u.layerDefinition,c=u.featureSet,d=c.features[0],y=null!==(n=null!==(i=null!==(o=null!==(a=null===(s=(0,w.Wg)(null===d||void 0===d?void 0:d.geometry))||void 0===s?void 0:s.spatialReference)&&void 0!==a?a:c.spatialReference)&&void 0!==o?o:p.spatialReference)&&void 0!==i?i:p.extent.spatialReference)&&void 0!==n?n:P.Zn;return Ge.Z.fromJSON(y)}},{key:"readStops",value:function(e,t){var r=this;return this._getNetworkFeatures(t,"Stops",(function(e){return _t.Z.fromGraphic(e)}),(function(e){return r._setStopSymbol(e)}))}},{key:"title",get:function(){return(0,w.pC)(this.routeInfo)&&(0,w.pC)(this.routeInfo.name)?this.routeInfo.name:"Route"},set:function(e){this._overrideIfSome("title",e)}},{key:"url",get:function(){return d.Z.routeServiceUrl},set:function(e){null!=e?this._set("url",(0,E.Nm)(e,Ft)):this._set("url",d.Z.routeServiceUrl)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"removeAll",value:function(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}},{key:"removeResult",value:function(){(0,w.pC)(this.directionLines)&&(this.directionLines.removeAll(),this._set("directionLines",null)),(0,w.pC)(this.directionPoints)&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),(0,w.pC)(this.routeInfo)&&this._set("routeInfo",null)}},{key:"save",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var t,r,n,o,a,s,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=this.fullExtent,r=this.portalItem){e.next=5;break}throw new g.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");case 5:if(r.id){e.next=7;break}throw new g.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");case 7:if("Feature Collection"===r.type){e.next=9;break}throw new g.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');case 9:if(!(0,w.Wi)(this.routeInfo)){e.next=11;break}throw new g.Z("routelayer:route-unsolved","save() requires a solved route");case 11:return n=r.portal,e.next=14,n.signIn();case 14:if(e.t0=n.user,e.t0){e.next=18;break}return e.next=18,r.reload();case 18:if(o=r.itemUrl,"admin"===(a=r.itemControl)||"update"===a){e.next=21;break}throw new g.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");case 21:return s={messages:[],origin:"portal-item",portal:n,url:o?(0,L.mN)(o):void 0,writtenProperties:[]},l=this.write(void 0,s),e.next=24,Nt(t);case 24:return r.extent=e.sent,r.title=this.title,e.next=28,r.update({data:l});case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var r,n,o,a,s,l,u,p,c,d,y=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load();case 3:if(!(0,w.Wi)(this.routeInfo)){e.next=5;break}throw new g.Z("routelayer:route-unsolved","saveAs() requires a solved route");case 5:if(l=$.default.from(t).clone(),null===(r=l.extent)||void 0===r){e.next=10;break}e.next=13;break;case 10:return e.next=12,Nt(this.fullExtent);case 12:l.extent=e.sent;case 13:return l.id=null,null!==(n=l.portal)&&void 0!==n||(l.portal=K.Z.getDefault()),null!==(o=l.title)&&void 0!==o||(l.title=this.title),l.type="Feature Collection",l.typeKeywords=["Data","Feature Collection",ee.Kz.MULTI_LAYER,"Route Layer"],u=l.portal,p={messages:[],origin:"portal-item",portal:u,url:null,writtenProperties:[]},e.next=21,u.signIn();case 21:return c=null===s||void 0===s?void 0:s.folder,d=this.write(void 0,p),e.next=24,null===(a=u.user)||void 0===a?void 0:a.addItem({item:l,folder:c,data:d});case 24:return this.portalItem=l,(0,j.D)(p),p.portalItem=l,e.abrupt("return",l);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"solve",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,r){var n,o,a,s,l,u,c,d,y,f,v,m,b,_,S,Z,T,k,L,N,B,A,R;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null!==(n=null===t||void 0===t?void 0:t.stops)&&void 0!==n?n:this.stops,d=null!==(o=null===t||void 0===t?void 0:t.pointBarriers)&&void 0!==o?o:St(this.pointBarriers),y=null!==(a=null===t||void 0===t?void 0:t.polylineBarriers)&&void 0!==a?a:St(this.polylineBarriers),f=null!==(s=null===t||void 0===t?void 0:t.polygonBarriers)&&void 0!==s?s:St(this.polygonBarriers),!(0,w.Wi)(c)){e.next=3;break}throw new g.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");case 3:if(!((Tt(c)||kt(c))&&c.features.length<2||h.Z.isCollection(c)&&c.length<2)){e.next=5;break}throw new g.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");case 5:if(h.Z.isCollection(c)){v=(0,p.Z)(c);try{for(v.s();!(m=v.n()).done;)m.value.routeName=null}catch(i){v.e(i)}finally{v.f()}}return b=null===t||void 0===t?void 0:t.apiKey,_=this.url,e.next=10,this._getServiceDescription(_,b,r);case 10:for(B in S=e.sent,Z=null!==(l=null===t||void 0===t?void 0:t.travelMode)&&void 0!==l?l:S.defaultTravelMode,T=null!==(u=(0,w.Wg)(null===t||void 0===t?void 0:t.accumulateAttributes))&&void 0!==u?u:[],(0,w.pC)(Z)&&(T.push(Z.distanceAttributeName),Z.timeAttributeName&&T.push(Z.timeAttributeName)),k={startTime:new Date},L={accumulateAttributes:T,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:d,polylineBarriers:y,polygonBarriers:f,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!d,returnDirections:!0,returnPolygonBarriers:!!f,returnPolylineBarriers:!!y,returnRoutes:!0,returnStops:!0,stops:c},N=t?gt.from(t):new gt,k)null==N[B]&&(N[B]=k[B]);return N.set(L),e.prev=17,e.next=20,Qe(_,N,r);case 20:A=e.sent,e.next=26;break;case 23:throw e.prev=23,e.t0=e.catch(17),(0,C.D_)(e.t0)?e.t0:new g.Z("routelayer:failed-route-request","the routing request failed",{error:e.t0});case 26:return R=this._toRouteLayerSolution(A),e.abrupt("return",(this._isOverridden("title")||(this.title=(0,w.yl)(R.routeInfo.name,"Route")),Lt(R,S,N),R));case 28:case"end":return e.stop()}}),e,this,[[17,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=e.stops,r=e.directionLines,n=e.directionPoints,i=e.pointBarriers,o=e.polylineBarriers,a=e.polygonBarriers,s=e.routeInfo;this.set({stops:t,pointBarriers:i,polylineBarriers:o,polygonBarriers:a}),this._set("directionLines",r),this._set("directionPoints",n),this._set("routeInfo",s),(0,w.pC)(s.geometry)&&(this.spatialReference=s.geometry.spatialReference)}},{key:"_getNetworkFeatures",value:function(e,t,r,n){var i,o,a,s,l,u=this,p=null===(i=Ct(e)?e.layers:null===(o=e.featureCollection)||void 0===o?void 0:o.layers)||void 0===i?void 0:i.find((function(e){return e.layerDefinition.name===t}));if((0,w.Wi)(p))return new h.Z;var c=p.layerDefinition,d=p.popupInfo,y=p.featureSet,g=c.drawingInfo.renderer,b=y.features,_=null!==(a=null!==(s=null!==(l=y.spatialReference)&&void 0!==l?l:c.spatialReference)&&void 0!==s?s:c.extent.spatialReference)&&void 0!==a?a:P.Zn,S=g&&(0,m.a)(g),Z=Ge.Z.fromJSON(_),C=b.map((function(e){var n,i,o,a=f.Z.fromJSON(e);(0,w.pC)(a.geometry)&&(0,w.pC)(e.geometry)&&(0,w.Wi)(e.geometry.spatialReference)&&(a.geometry.spatialReference=Z);var s=r(a);return null!==(n=s.symbol)&&void 0!==n||(s.symbol=null!==(i=null===S||void 0===S?void 0:S.getSymbol(a))&&void 0!==i?i:u._getNetworkSymbol(t)),null!==(o=s.popupTemplate)&&void 0!==o||(s.popupTemplate=d&&v.Z.fromJSON(d)),s}));return n&&C.some((function(e){return!e.symbol}))&&n(C),new h.Z(C)}},{key:"_getNetworkSymbol",value:function(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}},{key:"_getServiceDescription",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,w.pC)(this._cachedServiceDescription)||this._cachedServiceDescription.url!==t){e.next=2;break}return e.abrupt("return",this._cachedServiceDescription.serviceDescription);case 2:return e.next=4,me(t,r,n);case 4:return o=e.sent,e.abrupt("return",(this._cachedServiceDescription={serviceDescription:o,url:t},o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_setStopSymbol",value:function(e){if(e&&0!==e.length&&!(0,w.Wi)(this.defaultSymbols.stops)&&!e.every((function(e){return(0,w.pC)(e.symbol)}))){var t=this.defaultSymbols.stops,r=t.first,i=t.last,o=t.middle,a=t.unlocated,s=t.waypoint,l=t.break;if((0,w.Wi)(this.routeInfo)||1===e.length)e.forEach((function(t,n){switch(n){case 0:t.symbol=r;break;case e.length-1:t.symbol=i;break;default:t.symbol=o}}));else{var u,c=e.map((function(e){return e.sequence})).filter((function(e){return(0,w.pC)(e)})),d=Math.min.apply(Math,(0,n.Z)(c)),y=Math.max.apply(Math,(0,n.Z)(c)),f=(0,p.Z)(e);try{for(f.s();!(u=f.n()).done;){var v=u.value;v.sequence!==d?v.sequence!==y?"ok"===v.status||"not-located-on-closest"===v.status?"waypoint"!==v.locationType?"break"!==v.locationType?v.symbol=o:v.symbol=l:v.symbol=s:v.symbol=a:v.symbol=i:v.symbol=r}}catch(m){f.e(m)}finally{f.f()}}}}},{key:"_toRouteLayerSolution",value:function(e){var t,r,n,i,o,a,s,l=this,u=null===(t=e.routeResults[0].stops)||void 0===t?void 0:t.map((function(e){return _t.Z.fromJSON(e.toJSON())}));this._setStopSymbol(u);var p=new Mt(u),c=new Ot(null===(r=e.polygonBarriers)||void 0===r?void 0:r.map((function(e){var t=rt.Z.fromJSON(e.toJSON());return t.symbol=l.defaultSymbols.polygonBarriers,t}))),d=new Pt(null===(n=e.polylineBarriers)||void 0===n?void 0:n.map((function(e){var t=nt.Z.fromJSON(e.toJSON());return t.symbol=l.defaultSymbols.polylineBarriers,t}))),y=new xt(null===(i=e.pointBarriers)||void 0===i?void 0:i.map((function(e){var t=tt.Z.fromJSON(e.toJSON());return t.symbol=l.defaultSymbols.pointBarriers,t}))),f=null===(o=e.routeResults[0].route)||void 0===o?void 0:o.toJSON(),v=it.Z.fromJSON(f);v.symbol=this.defaultSymbols.routeInfo;var m=new jt(null===(a=e.routeResults[0].directionPoints)||void 0===a?void 0:a.features.map((function(e){var t=et.Z.fromJSON(e.toJSON());return t.symbol=l.defaultSymbols.directionPoints,t})));return{directionLines:new It(null===(s=e.routeResults[0].directionLines)||void 0===s?void 0:s.features.map((function(e){var t=$e.Z.fromJSON(e.toJSON());return t.symbol=l.defaultSymbols.directionLines,t}))),directionPoints:m,pointBarriers:y,polygonBarriers:c,polylineBarriers:d,routeInfo:v,stops:p}}},{key:"_writeDirectionLines",value:function(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",$e.Z.fields,$e.Z.popupInfo,"DirectionLines","Direction Lines")}},{key:"_writeDirectionPoints",value:function(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",et.Z.fields,et.Z.popupInfo,"DirectionPoints","Direction Points")}},{key:"_writeNetworkFeatures",value:function(e,t,r,n,i,o,a){if((0,w.Wi)(e)||!e.length)return null;var s=this.spatialReference.toJSON(),l=this.fullExtent,u=this.maxScale,p=this.minScale;return{featureSet:{features:e.toArray().map((function(e){return function(e){var t=e.toGraphic().toJSON();return{attributes:t.attributes,geometry:t.geometry,popupInfo:t.popupTemplate,symbol:t.symbol}}(e)})),geometryType:r,spatialReference:s},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:(0,w.pC)(t)?t.toJSON():Zt(r)}},extent:l.toJSON(),fields:n,geometryType:r,hasM:!1,hasZ:!1,maxScale:u,minScale:p,name:o,objectIdField:"ObjectID",spatialReference:s,title:a,type:"Feature Layer",typeIdField:""},popupInfo:i}}},{key:"_writePointBarriers",value:function(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",tt.Z.fields,tt.Z.popupInfo,"Barriers","Point Barriers")}},{key:"_writePolygonBarriers",value:function(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",rt.Z.fields,rt.Z.popupInfo,"PolygonBarriers","Polygon Barriers")}},{key:"_writePolylineBarriers",value:function(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",nt.Z.fields,nt.Z.popupInfo,"PolylineBarriers","Line Barriers")}},{key:"_writeRouteInfo",value:function(){return this._writeNetworkFeatures((0,w.pC)(this.routeInfo)?new h.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",it.Z.fields,it.Z.popupInfo,"RouteInfo","Route Details")}},{key:"_writeStops",value:function(){var e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",_t.Z.fields,_t.Z.popupInfo,"Stops","Stops");if((0,w.Wi)(e))return null;var t=this.defaultSymbols.stops,r=(0,w.pC)(t)&&(0,w.pC)(t.first)&&t.first.toJSON(),n=(0,w.pC)(t)&&(0,w.pC)(t.middle)&&t.middle.toJSON(),i=(0,w.pC)(t)&&(0,w.pC)(t.last)&&t.last.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:n,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:"".concat(this.stops.length),symbol:i,label:"Last Stop"}]},e}}]),r}((0,D.h)((0,G.M)((0,F.q)((0,J.I)((0,S.R)((0,b.p)(M.Z)))))));(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy:function(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],Jt.prototype,"_featureCollection",void 0),(0,c._)([(0,I.c)(["web-map","portal-item"],"_featureCollection")],Jt.prototype,"writeFeatureCollectionWebmap",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy:function(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],Jt.prototype,"_type",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:X})],Jt.prototype,"defaultSymbols",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Jt.prototype,"directionLines",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],Jt.prototype,"readDirectionLines",null),(0,c._)([(0,N.Cb)({readOnly:!0})],Jt.prototype,"directionPoints",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],Jt.prototype,"readDirectionPoints",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Jt.prototype,"featureCollectionType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Jt.prototype,"fullExtent",null),(0,c._)([(0,N.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],Jt.prototype,"legendEnabled",void 0),(0,c._)([(0,N.Cb)({type:["show","hide"]})],Jt.prototype,"listMode",void 0),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Jt.prototype,"maxScale",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],Jt.prototype,"readMaxScale",null),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Jt.prototype,"minScale",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],Jt.prototype,"readMinScale",null),(0,c._)([(0,N.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],Jt.prototype,"operationalLayerType",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(tt.Z)})],Jt.prototype,"pointBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],Jt.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(rt.Z)})],Jt.prototype,"polygonBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],Jt.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(nt.Z)})],Jt.prototype,"polylineBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],Jt.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({readOnly:!0})],Jt.prototype,"routeInfo",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],Jt.prototype,"readRouteInfo",null),(0,c._)([(0,N.Cb)({type:Ge.Z})],Jt.prototype,"spatialReference",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],Jt.prototype,"readSpatialReference",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(_t.Z)})],Jt.prototype,"stops",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],Jt.prototype,"readStops",null),(0,c._)([(0,N.Cb)()],Jt.prototype,"title",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1}})],Jt.prototype,"type",void 0),(0,c._)([(0,N.Cb)()],Jt.prototype,"url",null);var Gt=Jt=(0,c._)([(0,R.j)(Dt)],Jt)},6693:function(e,t,r){r.d(t,{h:function(){return d}});var n=r(43144),i=r(15671),o=r(60136),a=r(92572),s=r(27366),l=r(49861),u=(r(25243),r(63780),r(69912)),p=r(60676),c={read:{reader:p.ij},write:{allowNull:!0,writer:p.cW}},d=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return(0,n.Z)(r)}(e);return(0,s._)([(0,l.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,s._)([(0,l.Cb)({json:{read:!1,write:!1,origins:{"web-map":c,"portal-item":c}}})],t.prototype,"effect",void 0),t=(0,s._)([(0,u.j)("esri.layers.mixins.BlendLayer")],t)}},6061:function(e,t,r){r.d(t,{q:function(){return _}});var n=r(1413),i=r(15671),o=r(43144),a=r(11752),s=r(61120),l=r(60136),u=r(92572),p=r(27366),c=r(10064),d=r(35995),y=r(49861),f=(r(25243),r(63780),r(69912)),v=r(31201),m=r(92562),h=r(18987),g={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},b=r(70361),_=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).title=null,e}return(0,o.Z)(r,[{key:"writeListMode",value:function(e,t,r,n){(n&&"ground"===n.layerContainerType||e&&(0,h.d)(this,r,{},n))&&(t[r]=e)}},{key:"writeOperationalLayerType",value:function(e,t,r,n){!e||n&&"tables"===n.layerContainerType||(t.layerType=e)}},{key:"writeTitle",value:function(e,t){t.title=null!==e&&void 0!==e?e:"Layer"}},{key:"read",value:function(e,t){var n=this;t&&(t.layer=this),(0,m.$)(this,e,(function(t){return(0,a.Z)((0,s.Z)(r.prototype),"read",n).call(n,e,t)}),t)}},{key:"write",value:function(e,t){var i;if(null!==t&&void 0!==t&&t.origin){var o,l="".concat(t.origin,"/").concat(t.layerContainerType||"operational-layers"),u=g[l],p=u&&u[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===l&&(p=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===l&&(p=!1),!p)return null!==(o=t.messages)&&void 0!==o&&o.push(new c.Z("layer:unsupported","Layers (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' are not supported in the context of '").concat(l,"'"),{layer:this})),null}var y=(0,a.Z)((0,s.Z)(r.prototype),"write",this).call(this,e,(0,n.Z)((0,n.Z)({},t),{},{layer:this})),f=!!t&&!!t.messages&&!!t.messages.filter((function(e){return e instanceof c.Z&&"web-document-write:property-required"===e.name})).length;return(0,d.jc)(null===y||void 0===y?void 0:y.url)?(null!==t&&void 0!==t&&null!==(i=t.messages)&&void 0!==i&&i.push(new c.Z("layer:invalid-url","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' using a Blob URL cannot be written to web scenes and web maps"),{layer:this})),null):!this.url&&f?null:y}},{key:"beforeSave",value:function(){}}]),r}(e);return(0,p._)([(0,y.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,p._)([(0,y.Cb)(b.rT)],t.prototype,"listMode",void 0),(0,p._)([(0,v.c)("listMode")],t.prototype,"writeListMode",null),(0,p._)([(0,y.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),(0,p._)([(0,v.c)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,p._)([(0,y.Cb)(b.Oh)],t.prototype,"opacity",void 0),(0,p._)([(0,y.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,p._)([(0,v.c)("title"),(0,v.c)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,p._)([(0,y.Cb)({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=(0,p._)([(0,f.j)("esri.layers.mixins.OperationalLayer")],t)}},56811:function(e,t,r){r.d(t,{M:function(){return p}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),s=r(27366),l=r(49861),u=(r(25243),r(63780),r(69912)),p=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return(0,i.Z)(r,[{key:"effectiveScaleRange",get:function(){var e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);var r=this._get("effectiveScaleRange");return r&&r.minScale===e.minScale&&r.maxScale===e.maxScale?r:e}}]),r}(e);return(0,s._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,s._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,s._)([(0,l.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,s._)([(0,u.j)("esri.layers.mixins.ScaleRangeLayer")],t)}},9114:function(e,t,r){r.d(t,{u:function(){return d}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=r(46784),p=r(49861),c=(r(25243),r(63780),r(69912)),d=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(u.wq);(0,l._)([(0,p.Cb)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,l._)([(0,p.Cb)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0),d=n=(0,l._)([(0,c.j)("esri.layers.support.CodedValue")],d)},52175:function(e,t,r){r.d(t,{Z:function(){return m}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=r(84652),p=r(49861),c=(r(25243),r(27135)),d=r(69912),y=r(9114),f=r(64538),v=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new n({codedValues:(0,u.d9)(this.codedValues),name:this.name})}}]),r}(f.Z);(0,l._)([(0,p.Cb)({type:[y.u],json:{write:!0}})],v.prototype,"codedValues",void 0),(0,l._)([(0,c.J)({codedValue:"coded-value"})],v.prototype,"type",void 0);var m=v=n=(0,l._)([(0,d.j)("esri.layers.support.CodedValueDomain")],v)},64538:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(43144),i=r(15671),o=r(60136),a=r(92572),s=r(27366),l=r(43404),u=r(46784),p=r(49861),c=(r(25243),r(63780),r(27135)),d=r(69912),y=new l.X({inherited:"inherited",codedValue:"coded-value",range:"range"}),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return(0,n.Z)(r)}(u.wq);(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,s._)([(0,c.J)(y)],f.prototype,"type",void 0);var v=f=(0,s._)([(0,d.j)("esri.layers.support.Domain")],f)},83040:function(e,t,r){r.d(t,{Z:function(){return _}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=r(43404),p=r(46784),c=r(49861),d=r(25243),y=(r(63780),r(27135)),f=r(38511),v=r(69912),m=r(67755),h=r(85249),g=new u.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),b=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(r,[{key:"readDescription",value:function(e,t){var r,n,i=t.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(r=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==r?r:null}},{key:"readValueType",value:function(e,t){var r=t.description,n=null;try{n=r?JSON.parse(r):null}catch(i){}return n?g.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),r}(p.wq);(0,l._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),(0,l._)([(0,c.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),(0,l._)([(0,c.Cb)()],b.prototype,"description",void 0),(0,l._)([(0,f.r)("description")],b.prototype,"readDescription",null),(0,l._)([(0,c.Cb)({types:m.V5,json:{read:{reader:m.im},write:!0}})],b.prototype,"domain",void 0),(0,l._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),(0,l._)([(0,c.Cb)({type:d.z8,json:{write:!0}})],b.prototype,"length",void 0),(0,l._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"name",void 0),(0,l._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),(0,l._)([(0,y.J)(h.v)],b.prototype,"type",void 0),(0,l._)([(0,c.Cb)()],b.prototype,"valueType",void 0),(0,l._)([(0,f.r)("valueType",["description"])],b.prototype,"readValueType",null),(0,l._)([(0,c.Cb)({type:Boolean,json:{read:!1}})],b.prototype,"visible",void 0);var _=b=n=(0,l._)([(0,v.j)("esri.layers.support.Field")],b)},56754:function(e,t,r){r.d(t,{Z:function(){return y}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=(r(32718),r(25243),r(63780),r(10064),r(93169),r(27135)),p=r(69912),c=r(64538),d=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="inherited",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n}}]),r}(c.Z);(0,l._)([(0,u.J)({inherited:"inherited"})],d.prototype,"type",void 0);var y=d=n=(0,l._)([(0,p.j)("esri.layers.support.InheritedDomain")],d)},30539:function(e,t,r){r.d(t,{Z:function(){return f}});var n,i=r(15671),o=r(43144),a=r(60136),s=r(92572),l=r(27366),u=r(49861),p=(r(25243),r(63780),r(27135)),c=r(69912),d=r(64538),y=n=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(d.Z);(0,l._)([(0,u.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],y.prototype,"maxValue",void 0),(0,l._)([(0,u.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],y.prototype,"minValue",void 0),(0,l._)([(0,p.J)({range:"range"})],y.prototype,"type",void 0);var f=y=n=(0,l._)([(0,c.j)("esri.layers.support.RangeDomain")],y)},67755:function(e,t,r){r.d(t,{V5:function(){return s},im:function(){return l}});r(93169);var n=r(52175),i=r(64538),o=r(56754),a=r(30539),s={key:"type",base:i.Z,typeMap:{range:a.Z,"coded-value":n.Z,inherited:o.Z}};function l(e){if(!e||!e.type)return null;switch(e.type){case"range":return a.Z.fromJSON(e);case"codedValue":return n.Z.fromJSON(e);case"inherited":return o.Z.fromJSON(e)}return null}},85249:function(e,t,r){r.d(t,{v:function(){return n}});var n=new(r(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},80724:function(e,t,r){var n,i;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function s(e){return e.valueExpression?n.Expression:e.field&&"string"==typeof e.field?n.Field:n.Unknown}function l(e,t){var r=t||s(e),o=e.valueUnit||"unknown";return r===n.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}r.d(t,{PS:function(){return s},QW:function(){return l},RY:function(){return n},hL:function(){return i},iY:function(){return o},qh:function(){return a}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(n||(n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},49818:function(e,t,r){r.d(t,{Z:function(){return k}});var n,i=r(29439),o=r(37762),a=r(15671),s=r(43144),l=r(60136),u=r(92572),p=r(27366),c=r(59486),d=r(52639),y=r(43404),f=r(46784),v=r(84652),m=r(92026),h=r(49861),g=(r(25243),r(38511)),b=r(69912),_=r(31201),w=r(78952),S=r(77981),Z=r(83040),C=new y.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),T=n=function(e){(0,l.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,s.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=w.Z.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],a=d.Z.fromJSON(o),s=o.geometry&&o.geometry.spatialReference;(0,m.pC)(a.geometry)&&!s&&(a.geometry.spatialReference=r);var l=o.aggregateGeometries,u=a.aggregateGeometries;if(l&&(0,m.pC)(u))for(var p in u){var c,y=u[p],f=null===(c=l[p])||void 0===c?void 0:c.spatialReference;(0,m.pC)(y)&&!f&&(y.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)C.write(e,t,r,n);else{var i=this.features;if(i){var a,s=(0,o.Z)(i);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(l&&(0,m.pC)(l.geometry))return void C.write(l.geometry.type,t,r,n)}}catch(u){s.e(u)}finally{s.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,S.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=w.Z.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=(0,o.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&(0,m.pC)(a.geometry)&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(s){i.e(s)}finally{i.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),r=t[0],n=t[1],o=(0,i.Z)(e.translate,2),a=o[0],s=o[1],l=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((s-e)/n)})),p=0,c=l.length;p<c;p++)(null===u||void 0===u?void 0:u((0,m.Wg)(l[p].geometry)))||(l.splice(p,1),p--,c--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var n,a=(0,i.Z)(r.translate,2),s=a[0],l=a[1],u=(0,i.Z)(r.scale,2),p=u[0],c=u[1],d=this._getHydrationFunction(e,(function(e){return e*p+s}),(function(e){return l-e*c})),y=(0,o.Z)(t);try{for(y.s();!(n=y.n()).done;){var f=n.value.geometry;(0,m.pC)(f)&&d&&d(f)}}catch(v){y.e(v)}finally{y.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,o=[],a=0,s=e.length;a<s;a++){var l=e[a];if(a>0){var u=t(l[0]),p=r(l[1]);u===n&&p===i||(o.push([u-n,p-i]),n=u,i=p)}else n=t(l[0]),i=r(l[1]),o.push([n,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,S.oU)(e)?e.rings:e.paths,o=[],a=0,s=i.length;a<s;a++){var l=i[a],u=n._quantizePoints(l,t,r);u&&o.push(u)}return o.length>0?((0,S.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=(0,S.oU)(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var l=o[a],u=0,p=l.length;u<p;u++){var c=l[u];u>0?(n+=c[0],i+=c[1]):(n=c[0],i=c[1]),c[0]=t(n),c[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,s=o.length;a<s;a++){var l=o[a];a>0?(n+=l[0],i+=l[1]):(n=l[0],i=l[1]),l[0]=t(n),l[1]=r(i)}}:null}}]),r}(f.wq);(0,p._)([(0,h.Cb)({type:String,json:{write:!0}})],T.prototype,"displayFieldName",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],T.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,h.Cb)({type:[d.Z],json:{write:!0}})],T.prototype,"features",void 0),(0,p._)([(0,g.r)("features")],T.prototype,"readFeatures",null),(0,p._)([(0,h.Cb)({type:[Z.Z],json:{write:!0}})],T.prototype,"fields",void 0),(0,p._)([(0,h.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:C.read}}})],T.prototype,"geometryType",void 0),(0,p._)([(0,_.c)("geometryType")],T.prototype,"writeGeometryType",null),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],T.prototype,"hasM",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],T.prototype,"hasZ",void 0),(0,p._)([(0,h.Cb)({types:c.qM,json:{write:!0}})],T.prototype,"queryGeometry",void 0),(0,p._)([(0,g.r)("queryGeometry")],T.prototype,"readQueryGeometry",null),(0,p._)([(0,h.Cb)({type:w.Z,json:{write:!0}})],T.prototype,"spatialReference",void 0),(0,p._)([(0,_.c)("spatialReference")],T.prototype,"writeSpatialReference",null),(0,p._)([(0,h.Cb)({json:{write:!0}})],T.prototype,"transform",void 0),(T=n=(0,p._)([(0,b.j)("esri.rest.support.FeatureSet")],T)).prototype.toJSON.isDefaultToJSON=!0;var k=T},1337:function(e,t,r){r.d(t,{q:function(){return n}});var n={type:String,json:{read:{source:"token"},write:{target:"token"}}}}}]);
//# sourceMappingURL=77734.75f048af.chunk.js.map