"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[62573],{74509:function(e,n,t){t.d(n,{Jn:function(){return l},Lt:function(){return v},Ou:function(){return f},RL:function(){return d},VW:function(){return a},W_:function(){return k},Zz:function(){return u},jG:function(){return P},mF:function(){return s},tR:function(){return Z},tq:function(){return m},vQ:function(){return h},vu:function(){return c},zx:function(){return g}});var r=t(92026),i=t(88152);function o(e){return e?P:Z}function u(e,n){return(0,r.Wi)(n)||!n.mode?o(e).mode:n.mode}function s(e,n){return(0,r.pC)(n)?n:o(e)}function a(e,n){return u(!!(0,r.pC)(e)&&e.hasZ,n)}function l(e,n){return s(!!(0,r.pC)(e)&&!!e.hasZ,n)}function c(e){var n=p(e);return a(e.geometry,n)}function d(e){var n=p(e),t=a(e.geometry,n);return{mode:t,offset:(0,r.pC)(n)&&"on-the-ground"!==t?(0,r.Pt)(n.offset,0)*(0,i.Z7)((0,r.Pt)(n.unit,"meters")):0}}function v(e){if("on-the-ground"===c(e))return!1;var n=p(e),t=(0,r.pC)(n)&&n.featureExpressionInfo?n.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function p(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function f(e,n,t){if(!(0,r.Wi)(t)&&t.mode){var i=e.hasZ?e.z:0,o=(0,r.pC)(t.offset)?t.offset:0;switch(t.mode){case"absolute-height":return i-o;case"on-the-ground":return 0;case"relative-to-ground":return i-((0,r.Pt)(n.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"ground"),0)+o);case"relative-to-scene":return i-((0,r.Pt)(n.elevationProvider.getElevation(e.x,e.y,i,e.spatialReference,"scene"),0)+o)}}}function h(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(e,n.x,n.y,n.hasZ?n.z:0,n.spatialReference,t,r)}function g(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return y(e,n[0],n[1],n.length>2?n[2]:0,t,r,i)}function y(e,n,t,i,o,u){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!(0,r.Wi)(u)){var a=(0,r.pC)(s)?s.mode:"absolute-height";if("on-the-ground"===a)return 0;var l=m(n,t,i,o,e,u),c=l.absoluteZ;return b(c,n,t,i,o,e,s,a)}}function m(e,n,t,i,o,u){var s=(0,r.pC)(u.offset)?u.offset:0;switch(u.mode){case"absolute-height":return{absoluteZ:t+s,elevation:0};case"on-the-ground":var a=(0,r.Pt)(o.elevationProvider.getElevation(e,n,0,i,"ground"),0);return{absoluteZ:a,elevation:a};case"relative-to-ground":var l=(0,r.Pt)(o.elevationProvider.getElevation(e,n,t,i,"ground"),0);return{absoluteZ:t+l+s,elevation:l};case"relative-to-scene":var c=(0,r.Pt)(o.elevationProvider.getElevation(e,n,t,i,"scene"),0);return{absoluteZ:t+c+s,elevation:c}}}function b(e,n,t,i,o,u,s,a){var l=(0,r.pC)(s)&&(0,r.pC)(s.offset)?s.offset:0;switch(a){case"absolute-height":return e-l;case"relative-to-ground":return e-((0,r.Pt)(u.elevationProvider.getElevation(n,t,i,o,"ground"),0)+l);case"relative-to-scene":return e-((0,r.Pt)(u.elevationProvider.getElevation(n,t,i,o,"scene"),0)+l)}}function k(e,n){if((0,r.Wi)(n))return!1;var t=n.mode;return(0,r.pC)(t)&&("scene"===e&&"relative-to-scene"===t||"ground"===e&&"absolute-height"!==t)}var P={mode:"absolute-height",offset:0},Z={mode:"on-the-ground",offset:null}},79240:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var r=t(74165),i=t(15861),o=t(15671),u=t(43144),s=t(11752),a=t(61120),l=t(60136),c=t(92572),d=t(27366),v=t(10064),p=t(92026),f=t(94172),h=t(49861),g=(t(25243),t(63780),t(69912)),y=t(42069),m=t(60487),b=t(79510),k=t(77098),P=t(61712),Z=t(78485),C=t(67581),w=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,o.Z)(this,t),(e=n.apply(this,arguments)).type="graphics-3d",e.symbologySnappingSupported=!0,e._slicePlaneEnabled=!1,e.fullExtentInLocalViewSpatialReference=null,e}return(0,u.Z)(t,[{key:"initialize",value:function(){var e=this;this._set("processor",new b.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.handles.add(this.layer.on("graphic-update",(function(n){return e.processor.graphicsCore.graphicUpdateHandler(n)}))),this.addResolvingPromise((0,P.E)(this).then((function(n){return e.fullExtentInLocalViewSpatialReference=n}))),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,f.gx)((function(){var n,t;return null===(n=e.view)||void 0===n||null===(t=n.basemapTerrain)||void 0===t?void 0:t.ready}),(function(){return function(){return e.notifyChange("updating")}}),{once:!0}))}},{key:"destroy",value:function(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,p.SC)(this.processor))}},{key:"loadedGraphics",get:function(){return this.layer.graphics}},{key:"legendEnabled",get:function(){var e;return this.canResume()&&!(null!==(e=this.processor)&&void 0!==e&&e.frustumVisibilitySuspended)}},{key:"slicePlaneEnabled",get:function(){var e=this.layer.internal;return this._slicePlaneEnabled&&!e},set:function(e){this._slicePlaneEnabled=e}},{key:"getSuspendInfo",value:function(){var e,n,r,i,o=(0,s.Z)((0,a.Z)(t.prototype),"getSuspendInfo",this).call(this);return o.outsideScaleRange=null!==(e=null===(n=this.processor)||void 0===n?void 0:n.scaleVisibilitySuspended)&&void 0!==e&&e,o.outsideOfView=null!==(r=null===(i=this.processor)||void 0===i?void 0:i.frustumVisibilitySuspended)&&void 0!==r&&r,o}},{key:"fetchPopupFeatures",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(i=null===(o=(0,p.Wg)(t))||void 0===o?void 0:o.clientGraphics)&&void 0!==i?i:[]);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"getHit",value:function(e){return this.processor.getHit(e)}},{key:"whenGraphicBounds",value:function(e,n){return this.processor.whenGraphicBounds(e,n)}},{key:"computeAttachmentOrigin",value:function(e,n){var t;return null===(t=this.processor)||void 0===t?void 0:t.computeAttachmentOrigin(e,n)}},{key:"getSymbolLayerSize",value:function(e,n){return this.processor.getSymbolLayerSize(e,n)}},{key:"queryGraphics",value:function(){return Promise.resolve(this.loadedGraphics)}},{key:"maskOccludee",value:function(e){return this.processor.maskOccludee(e)}},{key:"highlight",value:function(e){return this.processor.highlight(e)}},{key:"elevationAlignPointsInFeatures",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i,o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.processor,!(0,p.Wi)(i)&&!(0,p.Wi)(i.graphics3DGraphics)){e.next=3;break}throw new v.Z("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");case 3:return o=i.graphics3DGraphics,u=function(e){return"number"==typeof e?o.get(e):void 0},e.abrupt("return",(0,m.W)(this.view,this.layer,u,n,t));case 5:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"queryForSymbologySnapping",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.c)(this.processor,n,t));case 1:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()},{key:"updatePolicy",get:function(){var e;return(null===(e=this.processor)||void 0===e?void 0:e.graphicsCore.effectiveUpdatePolicy)||Z.j.SYNC}},{key:"canResume",value:function(){var e;return(0,s.Z)((0,a.Z)(t.prototype),"canResume",this).call(this)&&!(null!==(e=this.processor)&&void 0!==e&&e.scaleVisibilitySuspended)}},{key:"isUpdating",value:function(){var e,n,t;return!((null===(e=this.processor)||void 0===e||!e.updating)&&(this.layer.internal||null!==(n=this.view)&&void 0!==n&&null!==(t=n.basemapTerrain)&&void 0!==t&&t.ready))}},{key:"performanceInfo",get:function(){var e,n,t;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!==(e=null===(n=this.processor)||void 0===n?void 0:n.elevationAlignment.updating)&&void 0!==e&&e,visibilityFrustum:!(null!==(t=this.processor)&&void 0!==t&&t.frustumVisibilitySuspended)}}},{key:"getUsedMemory",value:function(){var e,n,t;return null!==(e=null===(n=this.processor)||void 0===n||null===(t=n.graphicsCore)||void 0===t?void 0:t.usedMemory)&&void 0!==e?e:0}},{key:"getUnloadedMemory",value:function(){var e,n;return null===(e=this.processor)||void 0===e||null===(n=e.graphicsCore)||void 0===n?void 0:n.unprocessedMemoryEstimate}},{key:"ignoresMemoryFactor",value:function(){return!0}}]),t}((0,y.A)(C.Z));(0,d._)([(0,h.Cb)()],w.prototype,"loadedGraphics",null),(0,d._)([(0,h.Cb)({readOnly:!0})],w.prototype,"legendEnabled",null),(0,d._)([(0,h.Cb)()],w.prototype,"layer",void 0),(0,d._)([(0,h.Cb)({readOnly:!0})],w.prototype,"processor",void 0),(0,d._)([(0,h.Cb)()],w.prototype,"_slicePlaneEnabled",void 0),(0,d._)([(0,h.Cb)({type:Boolean})],w.prototype,"slicePlaneEnabled",null);var E=w=(0,d._)([(0,g.j)("esri.views.3d.layers.GraphicsLayerView3D")],w)}}]);
//# sourceMappingURL=62573.0c35827e.chunk.js.map