/*! For license information please see 37889.d0450ca6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[37889],{34601:function(t,n,r){r.d(n,{O:function(){return f}});var e=r(43144),a=r(15671),i=r(97326),o=r(60136),u=r(92572),s=r(28664),c=r(20399),f=function(t){(0,o.Z)(r,t);var n=(0,u.Z)(r);function r(t,e,o){var u;return(0,a.Z)(this,r),e=e||"UNKNOWN_ERROR",o=(0,c.g)(o,"rootCause",o),(u=n.call(this,e)).operation=t,u.name="OperationError",u.rootCause=o,Object.setPrototypeOf((0,i.Z)(u),r.prototype),u.stack=(0,c.g)(o,"stack",(new Error).stack),u}return(0,e.Z)(r)}((0,s.Z)(Error))},94062:function(t,n,r){r.d(n,{O:function(){return w},a:function(){return j},c:function(){return b},f:function(){return P},g:function(){return N}});var e=r(74165),a=r(15861),i=r(93433),o=r(15671),u=r(43144),s=r(25434),c=r(20399),f=r(21010),p=r(34601),h=r(69207),d=r(9882),g=r(62254),l=r(41817),m=r(4066),v=r(88968),O=r(22690),y=r(77843),b=function(t){return function(n){return t.reduce((function(t,r){return t.then(r).catch((function(t){if("OperationError"===t.name)return Promise.reject(t);var r="IPipeableFn did not reject with an OperationError \n Operation Stack: \n ".concat(n.stack.toString()),e=new p.O("pipeline execution error",r);return e.operationStack=n.stack.serialize(),Promise.reject(e)}))}),Promise.resolve(n))}};var w=function(){function t(){(0,o.Z)(this,t),this.operations=[]}return(0,u.Z)(t,[{key:"startOperation",value:function(t){var n=(0,s.c)(t);n.startedAt=(new Date).getTime(),n.state="working",this.operations.push(n)}},{key:"start",value:function(t,n){var r={type:t,id:(0,c.g)(n,"id",(0,s.a)("".concat(t,"_"))),inputs:(0,c.g)(n,"inputs",{}),cleanup:(0,c.g)(n,"cleanup","n/a"),startedAt:(new Date).getTime(),state:"working"};return this.operations.push(r),r.id}},{key:"getOperation",value:function(t){return this.operations.find((function(n){return n.id===t}))}},{key:"getOperations",value:function(){return this.operations}},{key:"finish",value:function(t,n){var r=this.getOperation(t);if(!r)throw new Error("No operation with id ".concat(t," present in stack"));r.duration=(new Date).getTime()-r.startedAt,r.state="completed",n&&(r.output=(0,s.c)(n))}},{key:"merge",value:function(t){this.operations=[].concat((0,i.Z)(this.operations),(0,i.Z)(t.operations))}},{key:"getCompleted",value:function(){return(0,s.c)(this.operations.filter((function(t){return"completed"===t.state})))}},{key:"getWorking",value:function(){return(0,s.c)(this.operations.filter((function(t){return"working"===t.state})))}},{key:"toString",value:function(){return this.operations.sort((function(t,n){return t.startedAt<n.startedAt?-1:n.startedAt<t.startedAt?1:0})).map(k).join("\n")}},{key:"serialize",value:function(){return{operations:(0,s.c)(this.getOperations())}}}]),t}();function k(t){var n="".concat(t.startedAt," : Operation ").concat(t.id," started with inputs ").concat(JSON.stringify(t.inputs)," but was not completed");return"completed"===t.state&&(n="".concat(t.startedAt," : Operation ").concat(t.id," took ").concat(t.duration," ms with inputs ").concat(JSON.stringify(t.inputs)," and output ").concat(t.output?JSON.stringify(t.output):"n/a")),n}function j(t,n){var r=(0,g.g)(n,"portal")||(0,g.g)(n,"authentication.portal")||"www.arcgis.com",e="".concat((0,d.g)(r),"/sharing/rest");return(0,l.a)(t,Object.assign(Object.assign({},n),{portal:e}))}function x(t){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)((0,e.Z)().mark((function t(n){var a,i,o;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(65268).then(r.bind(r,65268)).then((function(t){return t.p}));case 2:return a=t.sent,i=a.parse,o={ignoreAttributes:!1,attributeNamePrefix:"@_",textNodeName:"#value"},t.abrupt("return",i(n,o));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return(_=(0,a.Z)((0,e.Z)().mark((function t(n,r){var a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,h.e)(n,r);case 3:return a=t.sent,t.next=6,x(a);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var Z=function(t,n,r){var e=n.data,a=n.stack,i=n.requestOptions;return a.finish(r,{error:t}),{data:Object.assign(Object.assign({},e),{errors:N(t,e.errors)}),stack:a,requestOptions:i}},q={groupIds:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichGroupIds");return(0,h.a)(n.item.id,e).then((function(t){var o=t.admin,u=t.member,s=t.other,c=[].concat((0,i.Z)(o),(0,i.Z)(u),(0,i.Z)(s)).map((function(t){return t.id}));return r.finish(a),{data:Object.assign(Object.assign({},n),{groupIds:c}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))},metadata:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichMetadata");return function(t,n){return _.apply(this,arguments)}(n.item.id,e).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{metadata:t}),stack:r,requestOptions:e}}))},ownerUser:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichOwner"),i=Object.assign({username:n.item.owner},e);return(0,d.a)(i).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{ownerUser:t}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))},org:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichOrg"),i=(0,f.a)(n.item,n.ownerUser);return(i?j(i,e):Promise.resolve(void 0)).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{org:t}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))},data:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichData");return(0,h.c)(n.item.id,e).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{data:t}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))},server:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichServer"),i=(0,m.p)(n.item.url),o=Object.assign(Object.assign({},e),{url:i});return(0,v.g)(o).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{server:t}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))},layers:function(t){var n=t.data,r=t.stack,e=t.requestOptions,a=r.start("enrichLayers"),o=n.item.url;return function(t){var n=t.url,r=(0,O._)(t,["url"]),e=(0,m.p)(n)+"/layers";return(0,y.r)(e,r)}(Object.assign(Object.assign({},e),{url:o})).then((function(t){return[].concat((0,i.Z)(t.layers),(0,i.Z)(t.tables)).filter((function(t){return"Group Layer"!==t.type}))})).then((function(t){return r.finish(a),{data:Object.assign(Object.assign({},n),{layers:t}),stack:r,requestOptions:e}})).catch((function(n){return Z(n,t,a)}))}},N=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r="string"===typeof t?t:t.message;return[].concat((0,i.Z)(n),[{type:"Other",message:r}])},P=function(t,n,r){var e=n.reduce((function(t,n){var r=q[n];return r&&t.push(r),t}),[]);return b(e)({data:{item:t},stack:new w,requestOptions:r}).then((function(t){return t.data}))}},80046:function(t,n,r){r.d(n,{a:function(){return a}});var e=r(77843);function a(t,n,r){var a=(0,e._)((0,e._)({params:{}},r),t);return a.params=n.reduce((function(n,r){return(t[r]||"boolean"===typeof t[r])&&(n[r]=t[r]),n}),a.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(t,n){return a[n]&&(t[n]=a[n]),t}),{})}},69207:function(t,n,r){r.d(n,{a:function(){return v},b:function(){return f},c:function(){return g},d:function(){return s},e:function(){return y},f:function(){return l},g:function(){return h},h:function(){return m},i:function(){return c},j:function(){return O},s:function(){return u}});var e=r(63613),a=r(98825),i=r(77843),o=r(80046);function u(t){var n=JSON.parse(JSON.stringify(t));return n.data&&("undefined"!==typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?n.file=t.data:n.text=t.data,delete n.data),n}function s(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function c(t){return Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[1])}function f(t){return t.join(",")}var p=/[\x00-\x1F\x7F-\x9F\xA0]/g;function h(t,n){var r=d(t,n),a=(0,e._)({httpMethod:"GET"},n);return(0,i.r)(r,a)}var d=function(t,n){return("string"===typeof n?n:(0,a.g)(n))+"/content/items/"+t};function g(t,n){var r=d(t,n)+"/data",a=(0,e._)({httpMethod:"GET",params:{}},n);return a.file&&(a.params.f=null),(0,i.r)(r,a).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function l(t,n){var r=d(t,n)+"/resources",a=(0,e._)({},n);return a.params=(0,e._)({num:1e3},a.params),(0,i.r)(r,a)}function m(t,n){var r=n.readAs||"blob";return b(t,"/resources/"+n.fileName,r,n)}function v(t,n){var r=d(t,n)+"/groups";return(0,i.r)(r,n)}function O(t){return s(t).then((function(n){var r=(0,a.g)(t)+"/content/users/"+n+"/items/"+t.id+"/status",u=(0,o.a)(t,["jobId","jobType"],{params:(0,e._)({},t.params)});return(0,i.r)(r,u)}))}function y(t,n){return function(t,n){var r=n||{},a=r.fileName,i=void 0===a?"iteminfo.xml":a,o=r.readAs;return b(t,"/info/"+i,void 0===o?"text":o,(0,e._)({httpMethod:"GET"},n))}(t,(0,e._)((0,e._)({},n),{fileName:"metadata/metadata.xml"}))}function b(t,n,r,a){var o=""+d(t,a)+n,u=(0,e._)({params:{}},a),s=u.rawResponse;return u.rawResponse=!0,u.params.f=null,(0,i.r)(o,u).then((function(t){return s?t:"json"!==r?t[r]():t.text().then((function(t){return JSON.parse(t.replace(p,""))}))}))}},41817:function(t,n,r){r.d(n,{a:function(){return u},g:function(){return o}});var e=r(63613),a=r(98825),i=r(77843);function o(t){return u(null,t)}function u(t,n){var r=t||"self",o=(0,a.g)(n)+"/portals/"+r,u=(0,e._)({httpMethod:"GET"},n);return(0,i.r)(o,u)}},20399:function(t,n,r){r.d(n,{g:function(){return a}});var e=r(62254);function a(t,n,r){var a=(0,e.g)(t,n);return void 0!==a?a:r}},9882:function(t,n,r){r.d(n,{a:function(){return o},g:function(){return u}});var e=r(63613),a=r(98825),i=r(77843);function o(t){var n,r={httpMethod:"GET"};if("string"===typeof t)n="https://www.arcgis.com/sharing/rest/community/users/"+t;else{var o=t.username||t.authentication.username;n=(0,a.g)(t)+"/community/users/"+encodeURIComponent(o),r=(0,e._)((0,e._)({},t),r)}return(0,i.r)(n,r)}function u(t){var n=t;return t.match(/(qaext|\.mapsqa)\.arcgis.com/)?n="https://qaext.arcgis.com":t.match(/(devext|\.mapsdevext)\.arcgis.com/)?n="https://devext.arcgis.com":t.match(/(www|\.maps)\.arcgis.com/)&&(n="https://www.arcgis.com"),n}},88968:function(t,n,r){r.d(n,{g:function(){return i}});var e=r(77843),a=r(30678);function i(t){return(0,e.r)((0,a.c)(t.url),t)}},85822:function(t,n,r){function e(t){"{"===t[0]&&(t=t.substring(1,t.length-1));return/^(\{){0,1}[0-9a-fA-F]{8}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{12}(\}){0,1}$/gi.test(t)}r.d(n,{i:function(){return e}})},63613:function(t,n,r){r.d(n,{_:function(){return e},a:function(){return a}});var e=function(){return e=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t},e.apply(this,arguments)};function a(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),a=0;for(n=0;n<r;n++)for(var i=arguments[n],o=0,u=i.length;o<u;o++,a++)e[a]=i[o];return e}},22690:function(t,n,r){r.d(n,{_:function(){return a},a:function(){return e}});var e=function(){return e=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t},e.apply(this,arguments)};function a(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(e=Object.getOwnPropertySymbols(t);a<e.length;a++)n.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(r[e[a]]=t[e[a]])}return r}}}]);
//# sourceMappingURL=37889.d0450ca6.chunk.js.map