{"version":3,"file":"static/js/50397.925e4f9c.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{isNone as s,isSome as o}from\"../../../core/maybe.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../rest/support/FeatureSet.js\";import p from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";function u(e,t){if(s(e)&&s(t))return null;const r={};return o(t)&&(r.geometry=t.toJSON()),o(e)&&(r.where=e),r}let m=class extends p{constructor(){super(...arguments),this._enabledEventTypes=new Set,this._isUserPaused=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.addHandles([i((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),i((()=>this.layer.purgeOptions),(()=>this._update())),i((()=>this.suspended),(e=>{e?this._proxy.pauseStream():this._isUserPaused||this._proxy.resumeStream()}))],\"constructor\")}get connectionError(){if(this.errorString)return new t(\"stream-controller\",this.errorString)}pause(){this._isUserPaused=!0,this._proxy.pauseStream()}resume(){this._isUserPaused=!1,this._proxy.resumeStream()}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const o=super.on(e,t),i=this;return{remove(){o.remove(),s&&(i._proxy.closed||i.hasEventListener(e)||i._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=c.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus=\"disconnected\"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,i=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:s,objectIdField:t,timeInfo:o,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:i,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],m.prototype,\"errorString\",void 0),e([n({readOnly:!0})],m.prototype,\"connectionError\",null),e([n()],m.prototype,\"connectionStatus\",void 0),m=e([a(\"esri.views.2d.layers.StreamLayerView2D\")],m);const y=m;export{y as default};\n"],"names":["u","e","t","s","r","o","geometry","toJSON","where","m","arguments","_enabledEventTypes","Set","_isUserPaused","errorString","connectionStatus","this","addHandles","i","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","pauseStream","resumeStream","get","Array","isArray","map","includes","add","enableEvent","remove","closed","hasEventListener","timeInfo","endField","startField","trackIdField","queryLatestObservations","_cleanUpQuery","then","c","features","forEach","sourceLayer","setProperty","set","propertyName","value","JSON","stringify","definitionExpression","geometryDefinition","objectIdField","fields","l","geometryType","spatialReference","type","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","p","n","prototype","readOnly","y","a"],"sourceRoot":""}