"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[92901],{92901:function(t,e,i){i.r(e),i.d(e,{arcgis_hub_card:function(){return f}});var o=i(74165),n=i(15861),r=i(15671),a=i(43144),l=i(72585),s=i(12868),c=i(96728),h=i(29043),d=i(32836),u=i(25434),p=i(18436),f=(i(84371),i(21010),i(49799),i(77843),i(79399),function(){function t(e){(0,r.Z)(this,t),(0,l.r)(this,e),this.arcgisHubCardSelect=(0,l.c)(this,"arcgisHubCardSelect",7),this.arcgisHubCardTitleLinkClick=(0,l.c)(this,"arcgisHubCardTitleLinkClick",7),this.arcgisHubCardAction=(0,l.c)(this,"arcgisHubCardAction",7),this.layout="row",this.imageType=c.I.thumbnail,this.lazy=!1,this.selected=!1,this.corners=c.C.square,this.titleTag="div",this.showAdditionalInfo=!0,this.showBadges=!0,this.showType=!0,this.showOwner=!0,this.clickable=!1,this.sanitizer=new h.S({whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:["script"]}),(0,d.b)(this,"onTitleLinkClick","setPopoverElement","handlePopoverTimeout","removePopoverTimeout"),this.internalId=(0,u.a)("ahc")}return(0,a.Z)(t,[{key:"contentTypeIcon",get:function(){return this.model.type?(0,p.b)(this.model.type):"file"}},{key:"primaryInfos",get:function(){if(this.showAdditionalInfo){var t=0;return"row"===this.layout&&(t=this.hasPrimaryAction?2:4),this.model.additionalInfo.slice(0,t)}return[]}},{key:"secondaryInfos",get:function(){var t=[];if(this.showAdditionalInfo){var e=this.primaryInfos.length,i=4-this.secondaryActions.length+e;t=this.model.additionalInfo.slice(e,i)}return t}},{key:"hasPopoverContent",get:function(){return!(!this.secondaryActions.length&&!this.secondaryInfos.length)}},{key:"hasPrimaryAction",get:function(){return!!this.primaryActions.length}},{key:"primaryActions",get:function(){return(this.model.actionLinks||[]).slice(0,1)}},{key:"secondaryActions",get:function(){return(this.model.actionLinks||[]).slice(1,3)}},{key:"isClickable",get:function(){var t;return this.clickable&&!!(null===(t=this.model)||void 0===t?void 0:t.titleUrl)}},{key:"componentWillLoad",value:function(){var t=(0,n.Z)((0,o.Z)().mark((function t(){var e,i=this;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.i.loadIntlForComponent(this.element);case 2:this.intl=t.sent,this.model||(e={additionalInfo:[],actionLinks:[]},["summary","source","thumbnailUrl","family","type"].forEach((function(t){e=(0,u.m)(t,i[t],e)})),e=(0,u.m)("id",this.identifier,e),e=(0,u.m)("title",this.itemTitle,e),this.additionalInfo&&(e.additionalInfo=this.additionalInfo.split("|").map((function(t){return{i18nKey:t.split(":")[0],value:t.split(":")[1]}}))),this.actionLinks&&(e.actionLinks=this.actionLinks.split("|").map((function(t){var e=t.split(":"),i={action:e[0]};return i=(0,u.m)("icon",e[1],i),i=(0,u.m)("label",e[2],i)}))),this.badges&&(e.badges=this.badges.split("|").map((function(t){var e=t.split(":"),i={color:e[0]};return i=(0,u.m)("icon",e[1],i),i=(0,u.m)("label",e[2],i)}))),this.model=e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handelCardSelectEvent",value:function(){this.selected=!this.selected,this.arcgisHubCardSelect.emit(this.model)}},{key:"_thumbnailUrl",get:function(){var t,e,i,o=this.model;if(o.thumbnailUrl){i=o.thumbnailUrl;var n=null===(e=null===(t=this.context)||void 0===t?void 0:t.session)||void 0===e?void 0:e.token;if(n&&"public"!==o.access){var r=new URL(i);r.searchParams.append("token",n),i=r.toString()}var a=new URL(i);a.searchParams.append("w","400"),i=a.toString()}return i}},{key:"_fallbackUrl",get:function(){var t="Group"===this.model.type?"./assets/groups-fallback.png":"./assets/content-fallback.png";return(0,l.a)(t)}},{key:"renderThumbnail",value:function(t){var e;if(this.showThumbnail&&!this.loading)if("User"===t.type)e=this.renderAvatar(t);else{var i="Group"===t.type?"group-thumbnail":"content-thumbnail";e=this.imageType===c.I.thumbnail?(0,l.h)("arcgis-hub-image",{alt:this.intl.t("thumbnail"),class:i,fallback:this._fallbackUrl,lazy:this.lazy,src:this._thumbnailUrl}):(0,l.h)("div",{class:"icon-container"},(0,l.h)("calcite-icon",{icon:this.contentTypeIcon,scale:"l"}))}return this.isClickable?(0,l.h)("a",{href:t.titleUrl,slot:"thumbnail",target:this.newTab?"_blank":"_self"},e):(0,l.h)("div",{slot:"thumbnail"},e)}},{key:"renderAvatar",value:function(t){return(0,l.h)("div",{class:"avatar-container"},(0,l.h)("calcite-avatar",{"full-name":t.title,scale:"l",thumbnail:t.thumbnailUrl,username:t.source}))}},{key:"renderCardTitle",value:function(t){var e=t.titleUrl,i=t.title,o=this.titleTag;return e?(0,l.h)(o,{class:"title",slot:"title"},(0,l.h)("a",{href:e,onClick:this.onTitleLinkClick,target:this.newTab?"_blank":"_self"},t.title)):(0,l.h)(o,{class:"title",slot:"title"},(0,l.h)("span",null,i))}},{key:"onTitleLinkClick",value:function(t){this.arcgisHubCardTitleLinkClick.emit({model:this.model,event:t})}},{key:"renderFooter",value:function(){var t=[];this.primaryInfos.length&&t.push((0,l.h)("dl",{slot:"footer-leading"},this.renderAdditionalInfo(this.primaryInfos)));var e=this.element.querySelector('[slot="actions"]');return(this.primaryActions.length||e)&&t.push((0,l.h)("div",{slot:"footer-trailing"},(0,l.h)("slot",{name:"actions"}),this.renderActions(this.primaryActions))),t}},{key:"renderAdditionalInfo",value:function(t){var e=this;return t.map((function(t){return(0,l.h)("div",{key:t.i18nKey},(0,l.h)("dt",null,e.intl.t(t.i18nKey)),(0,l.h)("dd",null,t.value))}))}},{key:"renderPopoverAdditionalInfo",value:function(){if(this.secondaryInfos.length)return(0,l.h)("dl",null,this.renderAdditionalInfo(this.secondaryInfos))}},{key:"actionHandler",value:function(t,e){console.log("arcgisHubCardAction",[t,e]),this.arcgisHubCardAction.emit({action:t,model:e})}},{key:"renderActions",value:function(t){var e=this;return t.map((function(t,i){var o=t.label;!o&&t.i18nKey&&(o=e.intl.t(t.i18nKey));var n=t.action&&e.actionHandler.bind(e,t.action,e.model);return(0,l.h)("calcite-button",{color:"blue",href:t.href,iconStart:t.icon,key:i,label:o,onClick:n||void 0,width:"full"},o)}))}},{key:"renderHeader",value:function(t){var e=this.showType&&!["Group","User"].includes(this.model.type);if(e||this.showBadges||this.hasPopoverContent){var i=this.intl.t(t.family||"other");return(0,l.h)("div",{slot:"title"},e&&(0,l.h)("div",{class:"content-type"},(0,l.h)(l.F,null,(0,l.h)("calcite-icon",{icon:this.contentTypeIcon}),(0,l.h)("span",null,i))),this.showBadges&&this.renderChips(t),this.hasPopoverContent&&this.renderPopover())}}},{key:"renderChips",value:function(t){var e=this,i=(t.badges||[]).map((function(t,i){var o=(t.i18nKey?e.intl.t(t.i18nKey):t.label)||null;return(0,l.h)("calcite-chip",{icon:t.icon,key:i,scale:"s",value:o},o)}));return(0,l.h)("div",{class:"chips"},i)}},{key:"setPopoverElement",value:function(t){this.popoverElement=t}},{key:"handlePopoverTimeout",value:function(t){var e=this;"mouseenter"===t.type?this.popoverTimeout=setTimeout((function(){e.popoverElement.toggle(!0)}),500):"mouseleave"===t.type&&(this.popoverElement.toggle(!1),this.removePopoverTimeout())}},{key:"removePopoverTimeout",value:function(){clearTimeout(this.popoverTimeout),this.popoverTimeout=null}},{key:"renderPopover",value:function(){return(0,l.h)("div",null,(0,l.h)("calcite-popover",{"auto-close":!0,label:this.intl.t("additionalInfo"),ref:this.setPopoverElement,referenceElement:"popover-toggle"},(0,l.h)("div",{class:"popover-content"},this.renderPopoverAdditionalInfo(),this.renderActions(this.secondaryActions))),(0,l.h)("calcite-button",{appearance:"transparent",color:"blue","icon-start":"ellipsis",id:"popover-toggle",label:this.intl.t("additionalInfoButton"),onClick:this.removePopoverTimeout,onMouseEnter:this.handlePopoverTimeout,onMouseLeave:this.handlePopoverTimeout,round:!0,scale:"s"}))}},{key:"renderSourceSlot",value:function(t){if(this.showOwner)return"Group"!==t.type?(0,l.h)("div",{class:"owner",slot:"subtitle"},t.source):(0,l.h)("arcgis-hub-group-member-summary",{context:this.context,identifier:t.id,slot:"subtitle"})}},{key:"renderLayout",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="card"===this.layout?"block-start":"inline-start";return this.showThumbnail||(i="block-start"),(0,l.h)(l.H,null,(0,l.h)("calcite-card",{dir:this.intl.direction,loading:e,selectable:this.selectable,selected:this.selected,thumbnailPosition:i},this.renderThumbnail(t),this.renderHeader(t),this.renderCardTitle(t),this.renderSourceSlot(t),(0,l.h)("div",{class:"snippet"},this.sanitizer.sanitize(t.summary)),this.renderFooter()))}},{key:"render",value:function(){return this.model?this.renderLayout(this.model,this.loading):"No data."}},{key:"element",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["assets","locales"]}}]),t}());f.style=":host{display:block}:host([corners=\"round\"]){--calcite-border-radius-base:10px;border-radius:var(--calcite-border-radius-base)}:host([corners=\"round\"]) calcite-card{border-radius:var(--calcite-border-radius-base)}:host([shadow=\"low\"]) calcite-card{--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([shadow=\"medium\"]) calcite-card{--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([shadow=\"heavy\"]) calcite-card{--tw-shadow:0 12px 32px -2px rgba(0, 0, 0, 0.1), 0 4px 20px 0 rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 12px 32px -2px var(--tw-shadow-color), 0 4px 20px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}h1,h2,h3,h4,h5,h6{font-family:var(--hub-heading-family, inherit)}calcite-card{height:100%}[slot=\"title\"]{display:flex;justify-content:space-between;gap:0.5rem}.content-type{margin-bottom:0.5rem;display:flex;align-items:center;gap:0.25rem;font-weight:var(--calcite-font-weight-bold)}.title>*{width:100%;font-size:var(--calcite-font-size-2);line-height:1.5rem;font-weight:var(--calcite-font-weight-medium);overflow-wrap:anywhere}.title a{color:var(--calcite-ui-text-link);-webkit-text-decoration-line:var(--hub-text-decoration, underline);text-decoration-line:var(--hub-text-decoration, underline)}:host([clickable]) .title a::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:auto;content:\"\";background-color:rgba(0,0,0,0)}.owner{margin-top:0.5rem;font-size:var(--calcite-font-size--0);line-height:1.375rem;font-weight:var(--calcite-font-weight-medium)}.snippet{margin-left:0px;margin-right:0px;font-size:var(--calcite-font-size-0);line-height:1.25rem;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow-wrap:anywhere;color:var(--hub-gallery-body-text)}dl[slot='footer-leading']{margin:0px;display:grid;width:100%;gap:0.25rem;font-size:var(--calcite-font-size--1);line-height:normal;grid-template-columns:repeat(auto-fill, minmax(max(200px, (100% - (2 - 1) * 0.25rem) / 2), 1fr))}calcite-popover dl>div,dl[slot='footer-leading']>div{display:flex;gap:0.25rem;overflow:hidden;white-space:nowrap}calcite-popover dt::after,dl[slot='footer-leading'] dt::after{content:':'}calcite-popover dd,dl[slot='footer-leading'] dd{margin:0px;overflow:hidden;text-overflow:ellipsis;font-weight:var(--calcite-font-weight-bold)}.chips{margin-left:auto;display:flex;gap:0.25rem}calcite-popover .popover-content{display:flex;flex-direction:column;align-items:stretch;gap:0.25rem;padding:0.5rem;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:14.5rem;}calcite-popover .popover-content:lang(el){font-size:var(--calcite-font-size--3)}calcite-popover dl{margin:0.5rem;display:flex;flex-direction:column;gap:0.25rem}#popover-toggle{vertical-align:middle}#popover-toggle:hover{cursor:pointer}*[slot=\"thumbnail\"]{display:block;height:100%;width:100%}.avatar-container,.icon-container{display:grid;height:100%;width:100%;align-content:center;justify-content:center;color:var(--calcite-ui-brand)}.avatar-container calcite-avatar{height:8rem;width:8rem}.icon-container calcite-icon{height:4rem;width:4rem}:host([selectable]) [slot=\"title\"]{margin-right:1.5rem}:host([layout='card']) calcite-card{height:100%;width:100%}:host([layout='card']) .avatar-container,:host([layout='card']) .icon-container{padding-top:0.5rem;padding-bottom:0.5rem}:host([layout='card']) .title{height:3rem}:host([layout='card']) .title>*{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}:host([layout=\"card\"]) [slot=\"footer-trailing\"]{width:100%}:host([layout='row']) .title>*{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}@media only screen and (min-width: 769px){:host([layout='row']) .title>*{display:inline}:host([layout='row']) .title>*{overflow:visible}:host([layout='row']) .title>*{-webkit-line-clamp:unset}}:host([layout=\"row\"]) .snippet{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}:host([layout=\"row\"]) [slot=\"footer-trailing\"]{margin-left:auto}"},32836:function(t,e,i){i.d(e,{b:function(){return o}});var o=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];i.forEach((function(e){if("function"!==typeof t[e])throw new Error("Cannot bind context. ".concat(e," must be a function"));t[e]=t[e].bind(t)}))}},96728:function(t,e,i){var o,n,r,a,l,s,c;i.d(e,{A:function(){return o},C:function(){return n},D:function(){return r},I:function(){return c},L:function(){return a},U:function(){return l},V:function(){return s}}),function(t){t.start="start",t.center="center",t.end="end"}(o||(o={})),function(t){t.square="square",t.round="round"}(n||(n={})),function(t){t.none="none",t.low="low",t.medium="medium",t.heavy="heavy"}(r||(r={})),function(t){t.simple="simple",t.dataViz="dataViz",t.moreInfo="moreInfo"}(a||(a={})),function(t){t.before="before",t.after="after",t.below="below"}(l||(l={})),function(t){t.none="none",t.sparkline="sparkline",t.icon="icon",t.logo="logo"}(s||(s={})),function(t){t.thumbnail="thumbnail",t.icon="icon"}(c||(c={}))}}]);
//# sourceMappingURL=92901.4f502abe.chunk.js.map