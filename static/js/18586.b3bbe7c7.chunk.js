"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[18586],{36231:function(e,t,n){n.d(t,{q:function(){return s}});var r,i,a,u={},o={get exports(){return u},set exports(e){u=e}};r=o,i=function(){function e(n,r,i,a,u){for(;a>i;){if(a-i>600){var o=a-i+1,s=r-i+1,l=Math.log(o),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-s*c/o+p)),Math.min(a,Math.floor(r+(o-s)*c/o+p)),u)}var h=n[r],f=i,d=a;for(t(n,i,r),u(n[a],h)>0&&t(n,i,a);f<d;){for(t(n,f,d),f++,d--;u(n[f],h)<0;)f++;for(;u(n[d],h)>0;)d--}0===u(n[i],h)?t(n,i,d):t(n,++d,a),d<=r&&(i=d+1),r<=d&&(a=d-1)}}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}return function(t,r,i,a,u){e(t,r,i||0,a||t.length-1,u||n)}},void 0!==(a=i())&&(r.exports=a);var s=u},14921:function(e,t,n){n.d(t,{Ed:function(){return v},UI:function(){return y},mt:function(){return k},q6:function(){return x},vr:function(){return C},w6:function(){return Z}});var r=n(74165),i=n(15671),a=n(43144),u=n(60136),o=n(92572),s=n(15861),l=n(27366),c=n(85015),p=n(92026),h=n(66978),f=n(49861),d=(n(25243),n(63780),n(69912));function v(e,t,n){return(0,h.as)(e.map((function(e,r){return t.apply(n,[e,r])})))}function y(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)((0,r.Z)().mark((function e(t,n,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.as)(t.map((function(e,t){return n.apply(i,[e,t])})));case 2:return e.abrupt("return",e.sent.map((function(e){return e.value})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return{ok:!0,value:e}}function g(e){return{ok:!1,error:e}}function x(e){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.Wi)(t)){e.next=2;break}return e.abrupt("return",{ok:!1,error:new Error("no promise provided")});case 2:return e.prev=2,e.t0=_,e.next=6,t;case 6:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 10:return e.prev=10,e.t2=e.catch(2),e.abrupt("return",g(e.t2));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=_,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",((0,h.r9)(e.t2),g(e.t2)));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Z(e){if(!0===e.ok)return e.value;throw e.error}function C(e,t){return new S(e,t)}var S=function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var a;(0,i.Z)(this,n),(a=t.call(this,{}))._result=null,a._abortHandle=null,a.abort=function(){a._abortController=(0,p.IM)(a._abortController)},a.remove=a.abort,a._abortController=new AbortController;var u=a._abortController.signal;return a.promise=e(u),a.promise.then((function(e){a._result=_(e),a._cleanup()}),(function(e){a._result=g(e),a._cleanup()})),a._abortHandle=(0,h.fu)(r,a.abort),a}return(0,a.Z)(n,[{key:"value",get:function(){return e=this._result,(0,p.pC)(e)&&!0===e.ok?e.value:null;var e}},{key:"error",get:function(){return e=this._result,(0,p.pC)(e)&&!1===e.ok?e.error:null;var e}},{key:"finished",get:function(){return(0,p.pC)(this._result)}},{key:"normalizeCtorArgs",value:function(){return{}}},{key:"destroy",value:function(){this.abort()}},{key:"_cleanup",value:function(){this._abortHandle=(0,p.hw)(this._abortHandle),this._abortController=null}}]),n}(c.Z);(0,l._)([(0,f.Cb)()],S.prototype,"value",null),(0,l._)([(0,f.Cb)()],S.prototype,"error",null),(0,l._)([(0,f.Cb)()],S.prototype,"finished",null),(0,l._)([(0,f.Cb)()],S.prototype,"promise",void 0),(0,l._)([(0,f.Cb)()],S.prototype,"_result",void 0),S=(0,l._)([(0,d.j)("esri.core.asyncUtils.ReactiveTask")],S)},47991:function(e,t,n){n.d(t,{SR:function(){return v},Ui:function(){return d}});var r=n(43144),i=n(15671),a=n(37762),u=n(29439),o=n(92026),s=n(65156),l=n(376),c=n(69662),p=n(77981),h=n(76335),f=n(92975);function d(e){return y(e,!0)}function v(e){return y(e,!1)}function y(e,t){if((0,o.Wi)(e))return null;var n=e.spatialReference,r=(0,f.C5)(n),i="toJSON"in e?e.toJSON():e;if(!r)return i;var a=(0,f.sS)(n)?102100:4326,u=h.UZ[a].maxX,s=h.UZ[a].minX;if((0,p.wp)(i))return _(i,u,s);if((0,p.aW)(i))return i.points=i.points.map((function(e){return _(e,u,s)})),i;if((0,p.YX)(i))return m(i,r);if((0,p.oU)(i)||(0,p.l9)(i)){var c=(0,l.$P)(Z,i),d={xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3]},v=(0,h.XZ)(d.xmin,s)*(2*u),y=0===v?i:(0,h.Sy)(i,v);return d.xmin+=v,d.xmax+=v,d.xmax>u?k(y,u,t):d.xmin<s?k(y,s,t):y}return i}function m(e,t){if(!t)return e;var n=function(e,t){var n=[],r=e.ymin,i=e.ymax,a=e.xmin,o=e.xmax,s=e.xmax-e.xmin,l=(0,u.Z)(t.valid,2),c=l[0],p=l[1],h=g(e.xmin,t),f=h.x,d=h.frameId,v=g(e.xmax,t),y=v.x,m=v.frameId,_=f===y&&s>0;if(s>2*p){var b={xmin:a<o?f:y,ymin:r,xmax:p,ymax:i},k={xmin:c,ymin:r,xmax:a<o?y:f,ymax:i},Z={xmin:0,ymin:r,xmax:p,ymax:i},C={xmin:c,ymin:r,xmax:0,ymax:i},S=[],F=[];x(b,Z)&&S.push(d),x(b,C)&&F.push(d),x(k,Z)&&S.push(m),x(k,C)&&F.push(m);for(var I=d+1;I<m;I++)S.push(I),F.push(I);n.push(new w(b,[d]),new w(k,[m]),new w(Z,S),new w(C,F))}else f>y||_?n.push(new w({xmin:f,ymin:r,xmax:p,ymax:i},[d]),new w({xmin:c,ymin:r,xmax:y,ymax:i},[m])):n.push(new w({xmin:f,ymin:r,xmax:y,ymax:i},[d]));return n}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function _(e,t,n){if(Array.isArray(e)){var r=e[0];if(r>t){var i=(0,h.XZ)(r,t);e[0]=r+i*(-2*t)}else if(r<n){var a=(0,h.XZ)(r,n);e[0]=r+a*(-2*n)}}else{var u=e.x;if(u>t){var o=(0,h.XZ)(u,t);e.x+=o*(-2*t)}else if(u<n){var s=(0,h.XZ)(u,n);e.x+=s*(-2*n)}}return e}function g(e,t){var n,r=(0,u.Z)(t.valid,2),i=r[0],a=r[1],o=2*a,s=0;return e>a?(e-=(n=Math.ceil(Math.abs(e-a)/o))*o,s=n):e<i&&(e+=(n=Math.ceil(Math.abs(e-i)/o))*o,s=-n),{x:e,frameId:s}}function x(e,t){var n=t.xmin,r=t.ymin,i=t.xmax,a=t.ymax;return b(e,n,r)&&b(e,n,a)&&b(e,i,a)&&b(e,i,r)}function b(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}function k(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(0,p.l9)(e);if(r&&(0,c.Zy)(e),n)return(new C).cut(e,t);for(var i=r?e.rings:e.paths,u=r?4:2,o=i.length,s=-2*t,l=0;l<o;l++){var h=i[l];if(h&&h.length>=u){var f,d=[],v=(0,a.Z)(h);try{for(v.s();!(f=v.n()).done;){var y=f.value;d.push([y[0]+s,y[1]])}}catch(m){v.e(m)}finally{v.f()}i.push(d)}}return r?e.rings=i:e.paths=i,e}var w=(0,r.Z)((function e(t,n){(0,i.Z)(this,e),this.extent=t,this.frameIds=n})),Z=(0,s.Ue)(),C=function(){function e(){(0,i.Z)(this,e),this._linesIn=[],this._linesOut=[]}return(0,r.Z)(e,[{key:"cut",value:function(e,t){var n;if(this._xCut=t,e.rings)this._closed=!0,n=e.rings,this._minPts=4;else{if(!e.paths)return null;this._closed=!1,n=e.paths,this._minPts=2}var r,i=(0,a.Z)(n);try{for(i.s();!(r=i.n()).done;){var u=r.value;if(u&&!(u.length<this._minPts)){var o,s=!0,l=(0,a.Z)(u);try{for(l.s();!(o=l.n()).done;){var c=o.value;s?(this.moveTo(c),s=!1):this.lineTo(c)}}catch(x){l.e(x)}finally{l.f()}this._closed&&this.close()}}}catch(x){i.e(x)}finally{i.f()}this._pushLineIn(),this._pushLineOut(),n=[];var p,h=(0,a.Z)(this._linesIn);try{for(h.s();!(p=h.n()).done;){var f=p.value;f&&f.length>=this._minPts&&n.push(f)}}catch(x){h.e(x)}finally{h.f()}var d,v=-2*this._xCut,y=(0,a.Z)(this._linesOut);try{for(y.s();!(d=y.n()).done;){var m=d.value;if(m&&m.length>=this._minPts){var _,g=(0,a.Z)(m);try{for(g.s();!(_=g.n()).done;){_.value[0]+=v}}catch(x){g.e(x)}finally{g.f()}n.push(m)}}}catch(x){y.e(x)}finally{y.f()}return this._closed?e.rings=n:e.paths=n,e}},{key:"moveTo",value:function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e}},{key:"lineTo",value:function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var n=this._intersect(this._prevPt,e);this._lineTo(this._xCut,n,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e}},{key:"close",value:function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}},{key:"_moveTo",value:function(e,t,n){this._closed?(this._lineIn.push([n<=0?e:this._xCut,t]),this._lineOut.push([n>=0?e:this._xCut,t])):(n<=0&&this._lineIn.push([e,t]),n>=0&&this._lineOut.push([e,t]))}},{key:"_lineTo",value:function(e,t,n){this._closed?(this._addPolyVertex(this._lineIn,n<=0?e:this._xCut,t),this._addPolyVertex(this._lineOut,n>=0?e:this._xCut,t)):n<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([e,t])):n>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([e,t])):this._prevSide<0?(this._lineIn.push([e,t]),this._lineOut.push([e,t])):this._prevSide>0&&(this._lineOut.push([e,t]),this._lineIn.push([e,t]))}},{key:"_addPolyVertex",value:function(e,t,n){var r=e.length;r>1&&e[r-1][0]===t&&e[r-2][0]===t?e[r-1][1]=n:e.push([t,n])}},{key:"_checkClosingPt",value:function(e){var t=e.length;t>3&&e[0][0]===this._xCut&&e[t-2][0]===this._xCut&&e[1][0]===this._xCut&&(e[0][1]=e[t-2][1],e.pop())}},{key:"_side",value:function(e){return e<this._xCut?-1:e>this._xCut?1:0}},{key:"_intersect",value:function(e,t){var n=(this._xCut-e[0])/(t[0]-e[0]);return e[1]+n*(t[1]-e[1])}},{key:"_pushLineIn",value:function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}},{key:"_pushLineOut",value:function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}]),e}()},52410:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(37762),i=n(15671),a=n(43144),u=n(80031);function o(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function l(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,i.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var n,a=[],c=(0,r.Z)(t);try{for(c.s();!(n=c.n()).done;){var f=n.value,d=null===f||void 0===f?void 0:f.name,v=h(null===f||void 0===f?void 0:f.name);if(d&&v){var y=p(d);this._fieldsMap.set(d,f),this._fieldsMap.set(y,f),this._normalizedFieldsMap.set(v,f),a.push(y),o(f)?(this.dateFields.push(f),this._dateFieldsSet.add(f)):(0,u.H7)(f)&&(this._numericFieldsSet.add(f),this.numericFields.push(f)),s(f)||l(f)||(f.editable=null==f.editable||!!f.editable,f.nullable=null==f.nullable||!!f.nullable)}}}catch(m){c.e(m)}finally{c.f()}a.sort(),this.uid=a.join(",")}}return(0,a.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,r.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var n=e.value;s(n)||l(n)||n.nullable||void 0!==(0,u.os)(n)||this._requiredFields.push(n)}}catch(i){t.e(i)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var n=this._fieldsMap.get(e);return n||((n=null!==(t=this._fieldsMap.get(p(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(h(e)))&&this._fieldsMap.set(e,n),n)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,n=this.get(e);if(n)return null!==(t=n.name)&&void 0!==t?t:void 0}}]),e}();function p(e){return e.trim().toLowerCase()}function h(e){var t,n;return null!==(t=null===(n=(0,u.q6)(e))||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:""}},79563:function(e,t,n){n.d(t,{Ne:function(){return m},Od:function(){return d},Sp:function(){return y},_M:function(){return f},mx:function(){return v}});var r=n(65905),i=n(51995),a=n(76200),u=n(59026),o=n(17842),s=n(49729),l="picture-fill",c="simple-fill",p="simple-marker",h=new u.Z(1e3);function f(e){var t=e.style,n=null;if(e)switch(e.type){case p:"cross"!==t&&"x"!==t&&(n=e.color);break;case c:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.V)("esri/symbols/patterns/".concat(t,".png")),width:5,height:5});break;case l:n={type:"pattern",src:e.url,width:(0,o.F2)(e.width)*e.xscale,height:(0,o.F2)(e.height)*e.yscale,x:(0,o.F2)(e.xoffset),y:(0,o.F2)(e.yoffset)};break;case"text":n=e.color;break;case"cim":n=(0,s.iW)(e)}return n}function d(e,t){var n=e+"-"+t;return void 0!==h.get(n)?Promise.resolve(h.get(n)):(0,a.default)(e,{responseType:"image"}).then((function(e){var r=e.data,i=r.naturalWidth,a=r.naturalHeight,u=document.createElement("canvas");u.width=i,u.height=a;var o=u.getContext("2d");o.fillStyle=t,o.fillRect(0,0,i,a),o.globalCompositeOperation="destination-in",o.drawImage(r,0,0);var s=u.toDataURL();return h.put(n,s),s}))}function v(e){if(!e)return null;var t=null;switch(e.type){case c:case l:case p:t=v(e.outline);break;case"simple-line":var n=(0,o.F2)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:y(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,o.F2)(e.miterLimit):e.join});break;default:t=null}return t}var y=function(){var e={};return function(t){if(e[t])return e[t];var n=t.replace(/-/g,"");return e[t]=n,n}}(),m=new i.Z([128,128,128])},74579:function(e,t,n){n.d(t,{BR:function(){return A},Q8:function(){return U},QL:function(){return G},Y6:function(){return y},YW:function(){return m},_h:function(){return g},e3:function(){return T},nf:function(){return _},tb:function(){return b},wJ:function(){return H}});var r=n(74165),i=n(37762),a=n(15861),u=n(51995),o=n(51508),s=n(14921),l=(n(93169),n(92026)),c=n(17842),p=n(71353),h=n(60676),f=n(79563),d=n(32537),v=new u.Z("white");function y(e){var t;if(!e)return 0;if((0,o.dU)(e)){var n=function(e){var t=e.symbolLayers&&e.symbolLayers.length;if(t){var n=e.symbolLayers.getItemAt(t-1);return"outline"in n?(0,l.U2)(n,"outline","size"):void 0}}(e);return(0,l.pC)(n)?n:0}return(0,c.Wz)(null===(t=(0,f.mx)(e))||void 0===t?void 0:t.width)}function m(e){if((0,l.Wi)(e)||!("symbolLayers"in e)||(0,l.Wi)(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((function(e){return"object"===e.type}));case"line-3d":return e.symbolLayers.some((function(e){return"path"===e.type}));case"polygon-3d":return e.symbolLayers.some((function(e){return"object"===e.type||"extrude"===e.type}));default:return!1}}function _(e){return(0,l.s3)(e.resource).href}function g(e,t){if(!e)return null;var n=null;return(0,o.dU)(e)?n=function(e){var t=e.symbolLayers;if(!t)return null;var n=null;return t.forEach((function(e){var t;"object"===e.type&&null!=(null===(t=e.resource)||void 0===t?void 0:t.href)||(n="water"===e.type?(0,l.Wg)(e.color):(0,l.pC)(e.material)?(0,l.Wg)(e.material.color):null)})),n?new u.Z(n):null}(e):(0,o.cT)(e)&&(n=e.color?new u.Z(e.color):null),n?x(n,t):null}function x(e,t){if(null==t||null==e)return e;var n=e.toRgba();return n[3]=n[3]*t,new u.Z(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new u.Z(t)),(0,o.dU)(e)?function(e,t,n){var r=e.symbolLayers;if(r){var i=function(e){var r,i,a=(0,l.pC)(e)?e:null;return x(t=null!==(r=null!==(i=t)&&void 0!==i?i:a)&&void 0!==r?r:null!=n?v:null,n)};r.forEach((function(e){var r;if("object"!==e.type||null==(null===(r=e.resource)||void 0===r?void 0:r.href)||t)if("water"===e.type)e.color=i(e.color);else{var a=(0,l.pC)(e.material)?e.material.color:null,u=i(a);(0,l.Wi)(e.material)?e.material=new d.b({color:u}):e.material.color=u,null!=n&&"outline"in e&&(0,l.pC)(e.outline)&&(0,l.pC)(e.outline.color)&&(e.outline.color=x(e.outline.color,n))}}))}}(e,t,n):(0,o.cT)(e)&&function(e,t,n){var r;(t=null!==(r=t)&&void 0!==r?r:e.color)&&(e.color=x(t,n)),null!=n&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=x(e.outline.color,n))}(e,t,n))}function k(e,t){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.symbolLayers,e.t0=i,!e.t0){e.next=5;break}return e.next=5,(0,s.Ed)(i,function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function Z(e,t){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="extrude"===e.t0?3:"icon"===e.t0||"line"===e.t0||"text"===e.t0?5:"path"===e.t0?7:"object"===e.t0?9:11;break;case 3:return I(t,n),e.abrupt("break",11);case 5:return S(t,n),e.abrupt("break",11);case 7:return O(t,n),e.abrupt("break",11);case 9:return e.next=11,P(t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){var n=F(t);(0,l.pC)(n)&&(e.size=n)}function F(e){var t,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("number"==typeof r)return r}}catch(a){n.e(a)}finally{n.f()}return null}function I(e,t){e.size="number"==typeof t[2]?t[2]:0}function P(e,t){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)((0,r.Z)().mark((function e(t,n){var i,a,u,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:i=e.sent,a=i.resourceSize,u=i.symbolSize,o=M(n,a,u),t.width=z(n[0],u[0],a[0],o),t.depth=z(n[1],u[1],a[1],o),t.height=z(n[2],u[2],a[2],o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){var n=M(t,p.O,[e.width,void 0,e.height]);e.width=z(t[0],e.width,1,n),e.height=z(t[2],e.height,1,n)}function M(e,t,n){for(var r=0;r<3;r++){var i=e[r];switch(i){case"symbol-value":var a=n[r];return null!=a?a/t[r]:1;case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}function E(e){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)((0,r.Z)().mark((function e(t){var i,a,u,o,s,l,c,p,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(23657).then(n.bind(n,23657));case 2:return i=e.sent,e.next=5,i.computeObjectLayerResourceSize(t,10);case 5:a=e.sent,u=t.width,o=t.height,s=t.depth,l=[u,s,o],c=1,p=0;case 12:if(!(p<3)){e.next=20;break}if(null==(h=l[p])){e.next=17;break}return c=h/a[p],e.abrupt("break",20);case 17:p++,e.next=12;break;case 20:for(f=0;f<3;f++)null==l[f]&&(l[f]=a[f]*c);return e.abrupt("return",{resourceSize:a,symbolSize:l});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}function R(e,t){var n=F(t);if(!(0,l.Wi)(n))switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":var r=e.width/e.height;r>1?(e.width=n,e.height=n*r):(e.width=n*r,e.height=n);break;case"simple-line":e.width=n;break;case"text":e.font.size=n}}function T(e,t){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=2;break}return e.abrupt("return",(0,o.dU)(t)?k(t,n):void((0,o.cT)(t)&&R(t,n)));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n){if(e&&null!=t)if((0,o.dU)(e)){var r=e.symbolLayers;r&&r.forEach((function(e){if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,o.cT)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function H(e){if(!e)return null;var t=e.effects.filter((function(e){return"bloom"!==e.type})).map((function(e){return e.toJSON()}));return(0,h.rM)(t)}function G(e){return(0,l.pC)(e)&&"polygon-3d"===e.type&&e.symbolLayers.some((function(e){return"extrude"===e.type}))}function U(e,t){return q.apply(this,arguments)}function q(){return(q=(0,a.Z)((0,r.Z)().mark((function e(t,n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchSymbol(n);case 2:return i=e.sent,e.abrupt("return",i||t.fetchCIMSymbol(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},36700:function(e,t,n){n.d(t,{x:function(){return p}});var r=n(1413),i=n(15671),a=n(43144),u=n(60136),o=n(92572),s=n(95122),l=n(75691),c=n(61309),p=function(e){(0,u.Z)(n,e);var t=(0,o.Z)(n);function n(e){return(0,i.Z)(this,n),t.call(this,(0,r.Z)((0,r.Z)({},e),{},{constraint:new s.Hk(e.targetPoint)}))}return(0,a.Z)(n,[{key:"hints",get:function(){return[new c.n(this.targetPoint,this.isDraped,this.domain)]}}]),n}(l.a)},33518:function(e,t,n){n.r(t),n.d(t,{GraphicsSnappingSource:function(){return A}});var r=n(4942),i=n(29439),a=n(93433),u=n(37762),o=n(74165),s=n(15861),l=n(15671),c=n(43144),p=n(60136),h=n(92572),f=n(27366),d=n(85015),v=n(63780),y=n(14921),m=n(41691),_=n(92026),g=n(66978),x=n(94172),b=n(49861),k=(n(25243),n(69912)),w=n(80885),Z=n(79803),C=n(47991),S=n(27823),F=n(83406),I=n(3182),P=n(68928),L=n(14e3),O=n(74509),M=n(74579),E=n(64674),W=n(52824),z=n(59877),R=n(53580),T=n(48817),j="graphics-collections",A=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,l.Z)(this,n),(r=t.call(this,e)).availability=1,r._sources={multipoint:null,point:null,polygon:null,polyline:null},r._loadedWkids=new Set,r._loadedWkts=new Set,r._pendingAdds=[],r._extrudedPolygonSymbolsCount=0,r}return(0,c.Z)(n,[{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"_hasZ",get:function(){var e=this.view;return(0,_.pC)(e)&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type}},{key:"_snappingElevationAligner",get:function(){var e=this.view,t=this.layerSource.layer,n=(0,_.pC)(e)&&"3d"===e.type;if(!n||"map-notes"===t.type)return(0,z.p)();var r=function(){var n=(0,s.Z)((0,o.Z)().mark((function n(r,i){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,g.Hl)(e.whenLayerView(t),i);case 2:return n.abrupt("return",n.sent.elevationAlignPointsInFeatures(r,i));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,z.p)(n,{elevationInfo:t.elevationInfo,alignPointsInFeatures:r,spatialReference:e.spatialReference})}},{key:"_snappingElevationFilter",get:function(){var e=this.view,t=(0,_.pC)(e)&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type;return(0,R.c)(t)}},{key:"_symbologySnappingFetcher",get:function(){var e=this.view,t=this.layerSource.layer,n=(0,_.pC)(e)&&"3d"===e.type,r=this._extrudedPolygonSymbolsCount>0;return n&&"map-notes"!==t.type&&r?(0,T.k)(r,function(){var n=(0,s.Z)((0,o.Z)().mark((function n(r,i){var a;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.whenLayerView(t);case 2:return a=n.sent,n.abrupt("return",((0,g.k_)(i),a.queryForSymbologySnapping({candidates:r,spatialReference:e.spatialReference},i)));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()):(0,T.k)()}},{key:"destroy",value:function(){var e,t=this,n=(0,u.Z)(this._pendingAdds);try{for(n.s();!(e=n.n()).done;){e.value.task.abort()}}catch(r){n.e(r)}finally{n.f()}this._pendingAdds.length=0,this._mapSources((function(e){return t._destroySource(e)}))}},{key:"initialize",value:function(){var e=this;this.updatingHandles.add((function(){return e.getGraphicsLayers()}),(function(t){e.updatingHandles.removeHandles(j);var n,r=(0,u.Z)(t);try{var i=function(){var t=n.value;e._addMany(t.graphics.toArray()),e.handles.add([t.on("graphic-update",(function(t){return e._onGraphicUpdate(t)})),e.updatingHandles.addOnCollectionChange((function(){return t.graphics}),(function(t){return e._onGraphicsChanged(t)}))],j)};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}),x.nn);var t=this.view,n=this.layerSource.layer;(0,_.pC)(t)&&"3d"===t.type&&"map-notes"!==n.type&&this.addHandles([t.elevationProvider.on("elevation-change",(function(t){var r=t.context;(0,O.W_)(r,n.elevationInfo)&&e._snappingElevationAligner.notifyElevationSourceChange()})),(0,x.YP)((function(){return n.elevationInfo}),(function(){return e._snappingElevationAligner.notifyElevationSourceChange()}),x.nn),(0,x.on)((function(){return n}),["edits","apply-edits","graphic-update"],(function(){return e._symbologySnappingFetcher.notifySymbologyChange()}))])}},{key:"fetchCandidates",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,u,s=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.point,e.next=3,(0,g.WW)(this._mapSources((function(e){return s._fetchCandidatesForSource(e,t,n)})));case 3:return i=e.sent,(0,g.k_)(n),a=this._getGroundElevation,u=i.flat().map((function(e){return(0,W.X)(e,a)})),e.abrupt("return",((0,E.lQ)(r,u),u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getGroundElevation",get:function(){return(0,W.g)(this.view)}},{key:"_fetchCandidatesForSource",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,u,s,l,c,p,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,E.rh)(n,null!==(i=null===(u=(0,_.Wg)(this.view))||void 0===u?void 0:u.type)&&void 0!==i?i:"2d"),e.next=3,t.queryEngine.executeQueryForSnapping(s,r);case 3:return l=e.sent,(0,g.k_)(r),e.next=7,this._snappingElevationAligner.alignCandidates(l.candidates,r);case 7:return c=e.sent,(0,g.k_)(r),e.next=11,this._symbologySnappingFetcher.fetch(c,r);case 11:return p=e.sent,(0,g.k_)(r),h=0===p.length?c:[].concat((0,a.Z)(c),(0,a.Z)(p)),e.abrupt("return",this._snappingElevationFilter.filter(s,h));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){}},{key:"_onGraphicUpdate",value:function(e){if(this.getGraphicsLayers().some((function(t){return t.graphics.includes(e.graphic)})))switch(e.property){case"geometry":case"visible":this._remove(e.graphic),this._addMany([e.graphic])}}},{key:"_onGraphicsChanged",value:function(e){var t,n=(0,u.Z)(e.removed);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._remove(r)}}catch(i){n.e(i)}finally{n.f()}this._addMany(e.added)}},{key:"_addMany",value:function(e){var t,n=[],r=new Map,i=(0,u.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;(0,_.Wi)(a.geometry)||(this._needsInitializeProjection(a.geometry.spatialReference)?(n.push(a.geometry.spatialReference),r.set(a.uid,a)):this._add(a))}}catch(o){i.e(o)}finally{i.f()}this._createPendingAdd(n,r)}},{key:"_createPendingAdd",value:function(e,t){var n=this;if(e.length){var r=(0,y.vr)(function(){var r=(0,s.Z)((0,o.Z)().mark((function r(a){var s,l,c,p;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Z.iQ)(e.map((function(e){return{source:e,dest:n.spatialReference}})),{signal:a});case 2:n._markLoadedSpatialReferences(e),s=(0,u.Z)(t);try{for(s.s();!(l=s.n()).done;)c=(0,i.Z)(l.value,2),p=c[1],n._add(p)}catch(o){s.e(o)}finally{s.f()}case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());this.updatingHandles.addPromise(r.promise);var a={task:r,graphics:t},l=function(){return(0,v.e$)(n._pendingAdds,a)};r.promise.then(l,l),this._pendingAdds.push(a)}}},{key:"_markLoadedSpatialReferences",value:function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;null!=r.wkid&&this._loadedWkids.add(r.wkid),null!=r.wkt&&this._loadedWkts.add(r.wkt)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_add",value:function(e){if(!(0,_.Wi)(e.geometry)&&e.visible){var t=e.geometry;if("mesh"!==t.type){"extent"===t.type&&(t=w.Z.fromExtent(t));var n=this._ensureSource(t.type);if(!(0,_.Wi)(n)){var r=this._createOptimizedFeature(e.uid,t);(0,_.Wi)(r)||(n.featureStore.add(r),(0,M.QL)(e.symbol)&&this._extrudedPolygonSymbolsCount++)}}}}},{key:"_needsInitializeProjection",value:function(e){return(null==e.wkid||!this._loadedWkids.has(e.wkid))&&(null==e.wkt||!this._loadedWkts.has(e.wkt))&&!(0,Z.Up)(e,this.spatialReference)}},{key:"_createOptimizedFeature",value:function(e,t){var n=(0,Z.iV)((0,C.SR)(t),this.spatialReference);if(!n)return null;var i=this._ensureGeometryHasZ(n),a=(0,F.GH)(i,this._hasZ,!1);return new I.u_(a,(0,r.Z)({},H,e),null,e)}},{key:"_ensureGeometryHasZ",value:function(e){var t;if(!this._hasZ)return e;var n=function(e){for(;e.length<3;)e.push(0)},r=e.clone();switch(r.hasZ=!0,r.type){case"point":r.z=null!==(t=r.z)&&void 0!==t?t:0;break;case"multipoint":r.points.forEach(n);break;case"polyline":r.paths.forEach((function(e){return e.forEach(n)}));break;case"polygon":r.rings.forEach((function(e){return e.forEach(n)}))}return r}},{key:"_ensureSource",value:function(e){var t=this._sources[e];if((0,_.pC)(t))return t;var n=this._createSource(e);return this._sources[e]=n,n}},{key:"_createSource",value:function(e){var t=S.M.toJSON(e),n=this._hasZ,r=new P.Z({geometryType:t,hasZ:n,hasM:!1});return{featureStore:r,queryEngine:new L.q({featureStore:r,fields:[{name:H,type:"esriFieldTypeOID",alias:H}],geometryType:t,hasM:!1,hasZ:n,objectIdField:H,spatialReference:this.spatialReference,scheduler:(0,_.pC)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}},{key:"_remove",value:function(e){var t=this;this._mapSources((function(n){return t._removeFromSource(n,e)}));var n,r=(0,u.Z)(this._pendingAdds);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.graphics.delete(e.uid),0===i.graphics.size&&i.task.abort()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_removeFromSource",value:function(e,t){var n=t.uid;e.featureStore.has(n)&&(e.featureStore.removeById(t.uid),(0,M.QL)(t.symbol)&&this._extrudedPolygonSymbolsCount--)}},{key:"_destroySource",value:function(e){e.queryEngine.destroy(),this._sources[e.type]=null}},{key:"_mapSources",value:function(e){var t=this._sources,n=t.point,r=t.polygon,i=t.polyline,a=t.multipoint,u=[];return(0,_.pC)(n)&&u.push(e(n)),(0,_.pC)(r)&&u.push(e(r)),(0,_.pC)(i)&&u.push(e(i)),(0,_.pC)(a)&&u.push(e(a)),u}}]),n}((0,m.p)(d.Z));(0,f._)([(0,b.Cb)()],A.prototype,"getGraphicsLayers",void 0),(0,f._)([(0,b.Cb)({constructOnly:!0})],A.prototype,"layerSource",void 0),(0,f._)([(0,b.Cb)({constructOnly:!0})],A.prototype,"spatialReference",void 0),(0,f._)([(0,b.Cb)({constructOnly:!0})],A.prototype,"view",void 0),(0,f._)([(0,b.Cb)({readOnly:!0})],A.prototype,"updating",null),(0,f._)([(0,b.Cb)({readOnly:!0})],A.prototype,"availability",void 0),(0,f._)([(0,b.Cb)()],A.prototype,"_hasZ",null),(0,f._)([(0,b.Cb)()],A.prototype,"_snappingElevationAligner",null),(0,f._)([(0,b.Cb)()],A.prototype,"_snappingElevationFilter",null),(0,f._)([(0,b.Cb)()],A.prototype,"_symbologySnappingFetcher",null),(0,f._)([(0,b.Cb)()],A.prototype,"_extrudedPolygonSymbolsCount",void 0),(0,f._)([(0,b.Cb)()],A.prototype,"_getGroundElevation",null),A=(0,f._)([(0,k.j)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],A);var H="OBJECTID"},52824:function(e,t,n){n.d(t,{X:function(){return c},g:function(){return p}});var r=n(92026),i=n(71353),a=n(1700),u=n(97760),o=n(95905),s=n(36700);function l(e){var t=e.x,n=e.y,r=e.z;return(0,a.uc)((0,i.f)(t,n,null!==r&&void 0!==r?r:0))}function c(e,t){switch(e.type){case"edge":return e.draped?new u.k({edgeStart:l(e.start),edgeEnd:l(e.end),targetPoint:l(e.target),objectId:e.objectId,getGroundElevation:t}):new o.L({edgeStart:l(e.start),edgeEnd:l(e.end),targetPoint:l(e.target),objectId:e.objectId,isDraped:!1});case"vertex":return new s.x({targetPoint:l(e.target),objectId:e.objectId,isDraped:!1})}}function p(e){return(0,r.pC)(e)&&"3d"===e.type?function(t,n,r){return e.elevationProvider.getElevation(t,n,null!==r&&void 0!==r?r:0,e.spatialReference,"ground")}:function(){return null}}},61309:function(e,t,n){n.d(t,{n:function(){return s}});var r=n(15671),i=n(43144),a=n(60136),u=n(92572),o=n(11186),s=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,i,a){var u;return(0,r.Z)(this,n),(u=t.call(this,i,a)).point=e,u}return(0,i.Z)(n,[{key:"equals",value:function(e){return e instanceof n&&(0,o.k)(this.point,e.point)}}]),n}(n(55054).r)}}]);
//# sourceMappingURL=18586.b3bbe7c7.chunk.js.map