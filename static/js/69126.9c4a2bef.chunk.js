"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[69126],{69126:function(t,e,n){n.r(e),n.d(e,{arcgis_hub_boundary_picker:function(){return l}});var r=n(74165),i=n(15861),a=n(15671),s=n(43144),u=n(5692),o=n(58669),c=n(54805),p=n(12969),d=n(35137),h=function(t){var e=t.extent;return(0,o.i)(e)?Object.assign(Object.assign({},(0,o.b)(e)),{type:"extent"}):void 0},f=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e,n,i){var a,s,u,o,h,f,v,l,m,y,g,k,x,b;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.item,s=a.id,u=a.owner,o=a.properties,h=n.value,f=Object.assign({item:{id:s,owner:u,properties:Object.assign(Object.assign({},o),{boundary:h})},authentication:i.authentication},i),(v=n.graphic)&&"item"===h&&(l=v.geometry,m=l.xmin,y=l.ymin,g=l.xmax,k=l.ymax,f.item.extent="".concat(m,", ").concat(y,", ").concat(g,", ").concat(k)),t.next=7,(0,c.u)(f);case 7:return x=t.sent,b=(0,p.c)(e),t.next=11,(0,d.g)(x.id,i);case 11:return b.item=t.sent,t.abrupt("return",b);case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),v=n(98942),l=(n(67450),n(1319),n(60415),n(76880),n(29398),n(39318),n(47268),n(16063),n(45059),n(73576),n(90494),n(59514),n(42377),function(){function t(e){(0,a.Z)(this,t),(0,u.r)(this,e),this.arcgisHubBoundaryPickerError=(0,u.c)(this,"arcgisHubBoundaryPickerError",7),this.arcgisHubBoundaryPickerUpdate=(0,u.c)(this,"arcgisHubBoundaryPickerUpdate",7),this.loading=!1,this.saving=!1}return(0,s.Z)(t,[{key:"componentWillLoad",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.onContentUpdate();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onContentUpdate",value:function(){var t=this.content;"string"===typeof t?this.loadContent(t):this._content=t}},{key:"loadContent",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,(0,v.f)(e,this.requestOptions);case 4:this._content=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.arcgisHubBoundaryPickerError.emit(t.t0);case 10:return t.prev=10,this.loading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[0,7,10,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"handleSave",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateContentBoundary(e.detail);case 2:e.target.cancelEditGeometry();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"updateContentBoundary",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.authenticated){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,this.saving=!0,t.next=6,this._updateContentBoundary(this._content,e,this.requestOptions);case 6:this._content=t.sent,this.arcgisHubBoundaryPickerUpdate.emit(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this.arcgisHubBoundaryPickerError.emit(t.t0);case 13:return t.prev=13,this.saving=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[2,10,13,16]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_updateContentBoundary",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e,n,i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f(e,n,i));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"state",get:function(){return this.saving?"saving":this.loading?"loading":void 0}},{key:"authenticated",get:function(){var t;return Boolean(null===(t=this.requestOptions)||void 0===t?void 0:t.authentication)}},{key:"_item",get:function(){var t;return null===(t=this._content)||void 0===t?void 0:t.item}},{key:"_extent",get:function(){return this.extent?Object.assign(Object.assign({},this.extent),{type:"extent"}):this._item?h(this._item):void 0}},{key:"_sources",get:function(){return function(t){var e,n=null===t||void 0===t?void 0:t.item,r=null===(e=null===n||void 0===n?void 0:n.properties)||void 0===e?void 0:e.boundary,i=[{value:"none",selected:"none"===r}];if(n){var a=h(n),s=a&&{geometry:a};i.push({value:"item",graphic:s,selected:"item"===r})}return i}(this._content)}},{key:"render",value:function(){return(0,u.h)(u.H,null,(0,u.h)("arcgis-boundary-picker-ui",{authenticated:this.authenticated,extent:this._extent,sources:this._sources,state:this.state}))}},{key:"element",get:function(){return(0,u.g)(this)}}],[{key:"watchers",get:function(){return{content:["onContentUpdate"],requestOptions:["onContentUpdate"]}}}]),t}());l.style=":host{display:block}"},54805:function(t,e,n){n.d(e,{a:function(){return o},m:function(){return c},u:function(){return u}});var r=n(29847),i=n(46356),a=n(35137),s=n(67450);function u(t){return(0,a.d)(t).then((function(e){var n=t.folderId?(0,i.g)(t)+"/content/users/"+e+"/"+t.folderId+"/items/"+t.item.id+"/update":(0,i.g)(t)+"/content/users/"+e+"/items/"+t.item.id+"/update";return t.params=(0,r._)((0,r._)({},t.params),(0,a.s)(t.item)),t.params.extent&&(0,a.i)(t.params.extent)&&(t.params.extent=(0,a.b)(t.params.extent)),(0,s.r)(n,t)}))}function o(t){return(0,a.d)(t).then((function(e){var n=(0,i.g)(t)+"/content/users/"+e+"/items/"+t.id+"/updateResources";return t.params=(0,r._)({file:t.resource,fileName:t.name,resourcesPrefix:t.prefix,text:t.content},t.params),"undefined"!==typeof t.private&&(t.params.access=t.private?"private":"inherit"),(0,s.r)(n,t)}))}function c(t){return(0,a.d)(t).then((function(e){var n=(0,i.g)(t)+"/content/users/"+e+"/items/"+t.itemId+"/move",a=t.folderId;return a||(a="/"),t.params=(0,r._)({folder:a},t.params),(0,s.r)(n,t)}))}}}]);
//# sourceMappingURL=69126.9c4a2bef.chunk.js.map