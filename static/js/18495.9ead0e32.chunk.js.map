{"version":3,"file":"static/js/18495.9ead0e32.chunk.js","mappings":"sIAIA,SAASA,EAAEA,GAAE,MAAOC,EAAED,EAAEE,MAAM,MAAG,cAAcD,GAAc,QAAb,EAAEA,EAAEE,iBAAS,OAAX,EAAaC,YAAY,WAAWJ,EAAEK,KAAaC,EAAEN,EAAEK,KAAKE,OAAON,EAAEE,UAAUC,YAAmB,IAAI,CAAC,SAASH,EAAED,EAAEC,GAAE,MAAC,MAAM,cAAcA,GAAc,QAAb,EAAEA,EAAEE,iBAAS,OAAX,EAAaC,WAAWE,EAAEN,EAAEC,EAAEE,UAAUC,YAAY,IAAI,CAAC,SAASE,EAAEN,EAAEC,GAAG,GAAK,OAADD,QAAC,IAADA,IAAAA,EAAGQ,OAAO,OAAO,KAAK,IAAMF,EAAEN,EAAES,QAAQ,SAAAT,GAAC,MAAE,KAAKA,CAAC,IAAGU,KAAK,SAAAV,GAAC,iBAAMA,EAAC,QAAM,OAAOM,EAAEK,KAAK,MAAK,UAAIV,EAAC,gBAAQK,EAAEM,KAAK,KAAI,gBAAQX,EAAC,WAAU,C,kaCA04BY,EAAE,qCAAqCC,EAAEC,EAAAA,EAAAA,UAAYF,GAAGG,EAAE,SAAAD,GAAI,IAAIC,EAAC,0CAAiB,aAAiB,iDAAFC,EAAC,yBAADA,EAAC,gBAAkJ,OAAhJ,+BAASA,KAAQC,+BAA+B,KAAK,EAAKT,OAAO,KAAK,EAAKU,WAAW,KAAK,EAAKjB,MAAM,KAAK,EAAKkB,eAAe,GAAG,EAAKf,KAAK,KAAI,EAAshL,OAArhL,6CAAY,WAACgB,KAAKC,QAAQC,IAAI,EAACtB,EAAAA,EAAAA,KAAG,WAAI,MAAOgB,EAAE,EAAKf,MAAM,MAAM,CAAE,OAADe,QAAC,IAADA,GAAgB,QAAf,EAADA,EAAGO,qBAAa,WAAf,EAAD,EAAkBC,sBAAsBR,GAAG,iBAAiBA,EAAEA,EAAES,aAAa,KAAKT,GAAG,aAAaA,GAAGA,EAAEU,SAASV,GAAG,aAAaA,GAAGA,EAAEW,SAASX,GAAG,iBAAiBA,GAAGA,EAAEY,aAAaZ,GAAG,cAAcA,GAAGA,EAAEd,UAAU,EAAKM,OAAO,EAAKqB,cAAc,EAAKX,WAAW,IAAI,kBAAI,EAAKY,6BAA6B,GAAEC,EAAAA,KAAG1B,EAAAA,EAAAA,KAAG,wBAAa,QAAb,EAAI,EAAKD,YAAI,aAAT,EAAWE,MAAM,GAAE,UAAU,kBAAI,EAAKwB,6BAA6B,KAAGzB,EAAAA,EAAAA,KAAG,WAAK,IAAMW,EAAE,EAAKf,MAAM,OAAOe,GAAG,cAAcA,EAAEA,EAAEgB,UAAU,IAAI,GAAG,UAAU,kBAAI,EAAKF,6BAA6B,KAAI,GAAC,uBAAAG,IAAA,WAAsB,IAAYjB,EAA0CI,KAAhDnB,MAA2BiC,EAAqBd,KAAxCnB,MAAOkC,YAA8BrB,EAAGM,KAAlBD,eAAuB,MAAM,cAAcH,GAAGA,EAAEoB,WAAUC,EAAAA,EAAAA,IAAEH,EAAC,mBAAKI,EAAAA,EAAAA,IAAEJ,EAAElB,EAAEoB,aAAU,OAAItB,MAAIuB,EAAAA,EAAAA,IAAEH,EAAEpB,EAAE,GAAC,qBAAAmB,IAAA,WAAoB,OAAOb,KAAKnB,OAAO,kBAAkBmB,KAAKnB,MAAMmB,KAAKnB,MAAM4B,cAAc,IAAI,EAACU,IAAA,SAAkBvB,GAAGI,KAAKoB,UAAU,gBAAgBxB,EAAE,GAAC,+BAAAiB,IAAA,WAA8B,OAAO,CAAC,EAACM,IAAA,SAA4BvB,GAAGH,EAAE4B,MAAM,4BAA4B,sDAAsD,GAAC,uCAAAR,IAAA,WAAsC,OAAM,CAAE,GAAC,gCAAUjB,GAAG,MAAM,IAAI0B,MAAM,yBAAyB,GAAC,oCAAc,IAAM1B,EAAE,CAACoB,UAAU,CAAC,KAAKO,gBAAe,EAAGC,oBAAoBxB,KAAKhB,KAAKyC,kBAAkBX,GAAEY,EAAAA,EAAAA,IAAE1B,KAAKZ,QAAQY,KAAKZ,OAAOuC,YAAY/B,GAAG,IAAIgC,EAAAA,EAAEhC,GAAG,GAAG,YAAYI,KAAKnB,MAAMgD,KAAK,CAAC,IAAMjC,GAAEkC,EAAAA,EAAAA,GAAE9B,OAAM0B,EAAAA,EAAAA,IAAE9B,KAAKkB,EAAEiB,MAAMjB,EAAEiB,MAAK,WAAKjB,EAAEiB,MAAK,kBAAUnC,EAAC,KAAIA,EAAE,CAAC,OAAO8B,EAAAA,EAAAA,IAAE1B,KAAKF,cAAcgB,EAAEhB,YAAW4B,EAAAA,EAAAA,IAAEZ,EAAEhB,YAAYgB,EAAEhB,WAAWkC,aAAahC,KAAKF,YAAYE,KAAKF,WAAWmC,SAASnB,CAAC,GAAC,6CAAuB,IAAMlB,EAAE,CAACoB,UAAU,CAAC,KAAKO,gBAAe,EAAGC,oBAAoBxB,KAAKhB,KAAKyC,kBAAkB,OAAO,IAAIG,EAAAA,EAAEhC,EAAE,GAAC,oCAAcA,EAAEkB,GAAG,MAAM,IAAIQ,MAAM,yBAAyB,GAAC,qCAAe1B,EAAEkB,GAAG,MAAM,IAAIQ,MAAM,yBAAyB,GAAC,wCAAkB1B,EAAEkB,GAAG,MAAM,IAAIQ,MAAM,yBAAyB,GAAC,kCAAY1B,EAAEkB,GAAG,MAAM,IAAIQ,MAAM,yBAAyB,GAAC,oFAAyB1B,EAAEkB,GAAC,4EAA4C,KAApCpB,EAAEM,KAAKkC,2BAA2BpB,IAAO,sBAAOpB,EAAC,gCAAQM,KAAKmC,yBAAyBrB,IAAE,gDAAC,qDAA9H,IAA8H,yCAAmBlB,GAAG,OAAOA,EAAEiB,IAAI,2BAA2BuB,MAAMC,QAAQzC,EAAE0C,UAAU1C,EAAE0C,QAAQC,MAAM,SAAA3C,GAAC,MAAE,eAAeA,EAAEiC,IAAI,KAAGW,EAAAA,EAAAA,MAAIC,QAAQC,SAAS,GAAC,oDAA6B,WAAO9C,EAAEI,KAAK2C,wBAAwB3C,KAAK4C,KAAK,iCAAiChD,GAAGA,EAAEiD,MAAM,WAAK,EAAKhD,iCAAiCD,GAAG,EAAKgD,KAAK,iCAAiC,KAAK,GAAG,GAAC,yGAAAjC,EAAA,yFAAkCX,KAAKnB,OAAQmB,KAAKhB,KAAI,iDAA6M,OAA/LY,EAAE,OAAOI,KAAKhB,KAAK6C,KAAYf,EAAyCd,KAA/CnB,MAAK,EAA0CmB,KAAvCnB,MAAmBa,EAAC,EAAbqB,YAA4B+B,EAAC,EAAfC,cAAuBnE,EAAE,aAAakC,GAAGA,EAAEP,SAASI,EAAE,YAAYG,GAAGA,EAAEkC,QAAQ/D,EAAE,qBAAqB6B,EAAEA,EAAEmC,iBAAiB,KAAKC,EAAE,IAAIC,IAAG,WAASxE,EAAAA,EAAAA,IAAE,CAACC,EAAEA,EAAEwE,sBAAsBF,EAAExD,GAAG,MAAK2D,EAAAA,EAAAA,IAAEH,EAAEpC,GAAGlB,GAAE0D,EAAAA,EAAAA,IAAEJ,EAAEpC,GAAG,MAAKY,EAAAA,EAAAA,IAAE1B,KAAKZ,SAAQmE,EAAAA,EAAAA,IAAEL,EAAEpC,EAAEd,KAAKZ,QAAQ,MAAKsC,EAAAA,EAAAA,IAAE1B,KAAKS,gBAAe8C,EAAAA,EAAAA,IAAEL,EAAEpC,EAAEd,KAAKS,cAAcrB,QAAQ,KAAKH,GAAEuE,EAAAA,EAAAA,IAAEN,EAAEpC,EAAE7B,GAAG,KAAK0B,GAAE8C,EAAAA,EAAAA,IAAEP,EAAEpC,EAAEH,GAAG,OAAM,QAAvM,GAAD+C,EAAC,OAA2M,aAAa5C,GAAGA,EAAER,UAAUN,KAAKF,aAAY6D,EAAAA,EAAAA,IAAET,EAAEpC,EAAEC,YAAY,CAACD,EAAER,SAASsD,WAAW9C,EAAER,SAASuD,WAAW,YAAY/C,EAAEe,OAAOf,EAAEhC,YAAW6E,EAAAA,EAAAA,IAAET,EAAEpC,EAAEC,YAAY,CAACD,EAAEhC,UAAUC,aAAaa,IAAG8B,EAAAA,EAAAA,IAAEZ,EAAEgD,aAAa,MAAMhD,EAAEiD,eAAetE,EAAE4B,MAAM,kDAAiDsC,EAAAA,EAAAA,IAAET,EAAEpC,EAAEC,YAAY,CAACD,EAAEiD,kBAAkB,kBAAkBjD,EAAEe,KAAI,iBAAkH,OAAhHmC,EAAAA,EAAAA,IAAEd,EAAExD,EAAEoB,EAAEmD,cAAoBrE,EAAEkB,EAAEF,UAAUvB,KAAK,SAAAO,GAAC,aAAE6C,QAAQyB,IAAI,CAAW,QAAX,EAACtE,EAAEW,gBAAQ,aAAV,EAAY6C,sBAAsBF,EAAExD,IAAG2D,EAAAA,EAAAA,IAAEH,EAAEtD,IAAI,IAAE,WAAOjB,EAAAA,EAAAA,IAAEiB,GAAE,kBAAgB8D,GAAC,IAAhB,4BAAUhC,EAAC,SAAQL,OAAO5B,EAAE4B,MAAMK,EAAEL,MAAO,gCAAA2C,EAAAA,EAAAA,IAAEd,EAAExD,EAAEoD,GAAGlD,GAAG,iBAAiBkB,GAAGA,EAAET,eAAc2D,EAAAA,EAAAA,IAAEd,EAAExD,EAAEoB,EAAET,cAAoB8D,EAAE/B,MAAMgC,KAAKlB,GAAGmB,OAAOrE,KAAK4C,KAAK,iBAAiBuB,GAAE,iDAAC,kDAAzlC,IAAylC,iDAA2BvE,GAAE,MAAC,IAAGkD,EAAAA,EAAAA,IAAElD,GAAG,OAAO,KAAK,IAAmC,EAAnC,UAA+B,QAA/B,EAAeA,EAAE0E,sBAAc,QAAE,IAAE,IAAnC,2BAAoC,KAA1B5E,EAAC,QAAgCgC,EAAEhC,EAAEb,MAAM,GAAG,iBAAiB6C,IAAIA,EAAE6C,aAAa,OAAO,IAAIzD,EAAAA,EAAE,sCAAsC,sBAAsB,CAACjC,MAAM6C,IAAI,GAAGhC,EAAE8E,YAAY,CAAC,IAAM5E,EAAE,qBAAqB8B,EAAEA,EAAEuB,iBAAiB,KAAK,KAAKrD,GAAG,kBAAkBA,GAAGA,EAAE2E,cAAc3E,EAAE6E,eAAe,OAAO,IAAI3D,EAAAA,EAAE,sCAAsC,sBAAsB,CAACjC,MAAM6C,GAAG,MAAM,GAAG,kBAAkBA,KAAOgD,EAAAA,EAAAA,GAAEhD,EAAE9B,GAAG,OAAO,IAAIkB,EAAAA,EAAE,sCAAsC,yCAAyC,CAACjC,MAAM6C,GAAI,CAAC,kCAAC,0FAA+B9B,GAAC,4GAAoC,IAA5BkB,GAAEY,EAAAA,EAAAA,IAAE9B,GAAGA,EAAE0E,eAAe,OAAY,IAAIxD,EAAE3B,OAAM,yCAAO,IAAE,OAAsC,OAA/BO,EAAE,IAAI0C,MAAMtB,EAAE3B,QAAQR,EAAE,IAAIgG,IAAG,SAAS3E,KAAK4E,iBAAiBhF,GAAE,OAAhChB,EAAC,OAAwC8C,EAAE,EAAC,YAACA,EAAEZ,EAAE3B,QAAM,iBAAkB,KAANwB,EAAEG,EAAEY,IAAQ8C,YAAW,iBAAS,OAAP9E,EAAEgC,GAAGf,EAAE,gCAAwB,GAAM,iBAAf1B,EAAE0B,EAAE9B,OAA6B,wDAAiE,GAAhDqE,GAAEhC,EAAAA,EAAAA,IAAElB,KAAKnB,MAAMkC,YAAYnC,EAAEoC,WAAW0C,GAAEgB,EAAAA,EAAAA,GAAEzF,EAAEW,KAAMkD,EAAAA,EAAAA,IAAEY,GAAE,yEAAwB1D,KAAK6E,mBAAmBnB,GAAE,SAAlCS,EAAC,SAAqCA,EAAEW,YAAYC,sBAAsBrB,MAAKsB,EAAAA,EAAAA,IAAE9B,EAAEvC,GAAGhC,EAAEwC,IAAIR,EAAEsE,cAAc,CAACC,QAAQvE,EAAEwE,MAAMzD,IAAIhC,EAAEgC,GAAGf,EAAC,QAA3Te,IAAG,0BAA4T,WAAW1B,KAAKnB,MAAMgD,MAAM,IAAIlD,EAAEyG,KAAI,0CAAQ1F,EAAEN,OAAOiG,UAAQ,QAAkC,OAAjCzG,EAAE0G,UAAUlD,MAAMgC,KAAKzF,EAAE4G,QAAQ,oBAAkBvF,KAAKnB,MAAM2G,cAAc5G,GAAE,QAAnCgB,EAAC,iBAAkDA,EAAE6F,UAAQ,IAAzB,2BAAU3E,EAAC,UAAoDnC,EAAEkC,IAAIC,EAAEmE,eAApBrF,EAAC,EAAnBsF,QAASQ,SAAkBhE,EAAC,EAAPyD,MAAgCrE,EAAE4E,WAAW5E,EAAE4E,SAAS9F,GAAGF,EAAEgC,GAAGZ,CAAE,mHAAepB,EAAEN,OAAOiG,UAAQ,2DAAC,mDAAvyB,IAAuyB,kFAAuBzF,GAAC,wGAAQkB,EAAEd,KAAKnB,MAAM8C,cAAcjC,EAAE,IAAIyD,IAAQxE,GAAE,EAASC,GAAE8C,EAAAA,EAAAA,IAAE9B,IAAIA,EAAE0E,eAAe1E,EAAE0E,eAAejF,KAAK,SAAAO,GAAC,OAAEA,EAAEf,KAAK,IAAG,CAACmB,KAAKnB,OAAM,UAAgBD,GAAC,yDAAL,GAAY,iBAAb8C,EAAC,SAA8B,wDAAyB,GAARZ,GAAE4D,EAAAA,EAAAA,GAAEhD,EAAE9B,KAAMkD,EAAAA,EAAAA,IAAEhC,GAAE,yEAAwBd,KAAK6E,mBAAmB/D,GAAE,QAAwF,OAA1HlC,EAAC,OAAkC+B,EAAE/B,GAAGA,EAAEkG,YAAYC,sBAAsBjE,GAAGnC,IAAI,UAAUqB,KAAKnB,MAAM8G,eAAehF,GAAG,WAAciF,EAAAA,EAAAA,GAAE5F,KAAKnB,MAAMiC,GAAE,QAAvB7B,EAAC,iBAAsCA,GAAC,IAAhB,2BAAUW,EAAC,QAAMF,EAAEQ,IAAIN,EAAE,8KAA2N,OAAvNkB,EAAES,eAAe5C,EAAEmC,EAAE+E,QAAQlH,EAAEmC,EAAEgF,QAAQnH,EAAEmC,EAAEE,UAAUoB,MAAMgC,KAAK1E,GAAGoB,EAAEU,oBAAoBxB,KAAKhB,KAAKyC,iBAAiB,YAAYzB,KAAKnB,MAAMgD,OAAYjC,GAAEkC,EAAAA,EAAAA,GAAE9B,OAAM0B,EAAAA,EAAAA,IAAE9B,KAAKkB,EAAEiB,MAAMjB,EAAEiB,MAAK,WAAKjB,EAAEiB,MAAK,kBAAUnC,EAAC,KAAIA,IAAU,EAAP,gBAAOkB,GAAC,gEAAC,mDAA5oB,IAA4oB,kCAAY,SAAQ,6DAAqBY,EAAAA,EAAAA,IAAE1B,KAAKF,cAAcE,KAAKF,WAAWiG,QAAQ,KAAC,EAAzsL,CAAerG,GAA4rL,OAAOE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,OAAKvD,EAAEqG,UAAU,sCAAiC,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAAC+C,UAAS,KAAMtG,EAAEqG,UAAU,kBAAkB,OAAMpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACrB,KAAKqE,EAAAA,KAAKvG,EAAEqG,UAAU,gBAAgB,OAAMpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACrB,KAAKsE,EAAAA,KAAKxG,EAAEqG,UAAU,cAAS,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAEiB,EAAAA,KAAIxE,EAAEqG,UAAU,kBAAa,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,OAAKvD,EAAEqG,UAAU,aAAQ,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACrB,KAAKuE,UAAUzG,EAAEqG,UAAU,0BAA0B,OAAMpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAAC+C,UAAS,EAAGpE,KAAKwD,WAAW1F,EAAEqG,UAAU,kCAAkC,OAAMpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAAC+C,UAAS,KAAMtG,EAAEqG,UAAU,sBAAiB,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,OAAKvD,EAAEqG,UAAU,iBAAY,IAAQpG,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,OAAKvD,EAAEqG,UAAU,YAAO,GAAQrG,GAAEC,EAAAA,EAAAA,GAAE,EAAC8D,EAAAA,EAAAA,GAAElE,IAAIG,GAAGA,CAAC,C,8LCAhtO+B,EAAE,SAAAA,GAAI,IAAIyE,EAAC,qGAAuM,OAAvM,kCAAiB,WAAY,WAACnG,KAAKC,QAAQC,KAAIvB,EAAAA,EAAAA,KAAG,kBAAI,EAAKE,KAAK,GAAE,WAAW,SAAAa,GAAI,EAAK2G,UAAU3G,EAAE4G,aAAaC,OAAO,SAAA7G,IAAIoD,EAAAA,EAAAA,IAAEpD,IAAIE,EAAAA,EAAAA,UAAY,EAAK4G,eAAenF,MAAM3B,EAAE,GAAG,IAAI,uBAAuB,KAAC,EAAvM,CAAegC,GAA0L,OAAOhC,EAAAA,EAAAA,GAAE,EAACoB,EAAAA,EAAAA,OAAKqF,EAAEH,UAAU,aAAQ,GAAQG,GAAEzG,EAAAA,EAAAA,GAAE,EAACiB,EAAAA,EAAAA,GAAE,4CAA4CwF,EAAI,C,0ICA7kB,SAAehC,EAAE,GAAD,4CAA8e,OAA9e,0BAAhB,WAAiBlF,GAAC,4GAAkB,GAAjBkF,EAAC,+BAAClF,EAAEwF,gBAAkB7E,EAAAA,EAAAA,IAAEuE,GAAE,yCAAO,IAAE,uBAAeA,EAAEsC,kBAAkBxH,EAAE8B,aAAY,OAAuF,GAAjI+B,EAAC,OAA+DpB,EAAGyC,EAAvBuC,oBAAwC9H,EAAiDK,EAA/D8D,cAA4BG,EAAmCjE,EAA/C0H,YAA4BhG,EAAmB1B,EAAjC8E,cAA8BpF,EAAGM,EAAjB2H,eAAsB9D,EAAE+D,SAAS,KAAI,0CAAO,CAAC,MAAI,YAASnF,EAAC,mCAAOgC,EAAAA,EAAAA,IAAEzE,GAAE,iDAAC,GAAE,QAA+B,OAAhDS,EAAC,KAAiBwG,GAAEpF,EAAAA,EAAAA,IAAE7B,EAAE8B,YAAW,kBAAK+B,IAAC,OAAIpD,KAAG,mBAAQwD,GAAGgD,EAAE5G,KAAK4D,GAAGgD,GAAGtH,GAAgB,QAAf,EAAEK,EAAE8B,mBAAW,OAAb,EAAe+F,IAAIlI,KAAKsH,EAAEW,SAASjI,IAAIsH,EAAE5G,KAAKV,GAAGsH,GAAGvF,GAAgB,QAAf,EAAE1B,EAAE8B,mBAAW,OAAb,EAAe+F,IAAInG,KAAKuF,EAAEW,SAASlG,IAAIuF,EAAE5G,KAAKqB,GAAGhC,GAAGA,EAAEoI,SAAS,SAAAnH,GAAG,MAAgB8D,EAAG9D,EAAZoH,SAAcd,GAAGxC,IAAgB,QAAf,EAAEzE,EAAE8B,mBAAW,aAAb,EAAe+F,IAAIpD,MAAKwC,EAAEW,SAASnD,IAAIwC,EAAE5G,KAAKoE,EAAE,IAAIwC,IAAC,4CAAC,iCAASpD,EAAElD,EAAE8D,GAAG,OAAO9D,EAAE6E,cAAc7E,EAAE6E,eAAcxF,EAAAA,EAAAA,IAAEyE,IAAIA,EAAEuD,8BAA6BhI,EAAAA,EAAAA,IAAEW,EAAEsH,sBAAsBtH,EAAEsH,qBAAqB,IAAI,C","sources":["../node_modules/@arcgis/core/layers/support/floorFilterUtils.js","../node_modules/@arcgis/core/views/layers/FeatureLayerView.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/layers/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isSome as i,isNone as s}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{watch as n,syncAndInitial as a,on as l}from\"../../core/reactiveUtils.js\";import{property as u}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as d}from\"../../layers/support/commonProperties.js\";import f from\"../../layers/support/FeatureEffect.js\";import c from\"../../layers/support/FeatureFilter.js\";import{fixFields as m,unpackFieldNames as y,collectLabelingFields as h,collectElevationFields as F,collectFilterFields as g,collectFeatureReductionFields as w,collectOrderByInfos as E,collectFields as b,collectField as x,featureHasFields as I}from\"../../layers/support/fieldUtils.js\";import{getFloorFilterClause as v}from\"../../layers/support/floorFilterUtils.js\";import R from\"../../rest/support/Query.js\";import{loadArcade as j}from\"../../support/arcadeOnDemand.js\";import{getFetchPopupTemplate as q,getRequiredFields as P}from\"./support/popupUtils.js\";const _=\"esri.views.layers.FeatureLayerView\",O=r.getLogger(_),A=r=>{let A=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.handles.add([n((()=>{const e=this.layer;return[e?.elevationInfo?.featureExpressionInfo,e&&\"displayField\"in e?e.displayField:null,e&&\"timeInfo\"in e&&e.timeInfo,e&&\"renderer\"in e&&e.renderer,e&&\"labelingInfo\"in e&&e.labelingInfo,e&&\"floorInfo\"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]}),(()=>this._handleRequiredFieldsChange()),a),l((()=>this.view?.floors),\"change\",(()=>this._handleRequiredFieldsChange())),l((()=>{const e=this.layer;return e&&\"sublayers\"in e?e.sublayers:null}),\"change\",(()=>this._handleRequiredFieldsChange()))])}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return\"outFields\"in e&&e.outFields?m(t,[...y(t,e.outFields),...r]):m(t,r)}get featureEffect(){return this.layer&&\"featureEffect\"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override(\"featureEffect\",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){O.error(\"#maximumNumberOfFeatures=\",\"Setting maximum number of features is not supported\")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error(\"missing implementation\")}createQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=i(this.filter)?this.filter.createQuery(e):new R(e);if(\"feature\"===this.layer.type){const e=v(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return i(this.timeExtent)&&(t.timeExtent=i(t.timeExtent)?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}createAggregateQuery(){const e={outFields:[\"*\"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new R(e)}queryFeatures(e,t){throw new Error(\"missing implementation\")}queryObjectIds(e,t){throw new Error(\"missing implementation\")}queryFeatureCount(e,t){throw new Error(\"missing implementation\")}queryExtent(e,t){throw new Error(\"missing implementation\")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){return e.get(\"expressionInfos.length\")||Array.isArray(e.content)&&e.content.some((e=>\"expression\"===e.type))?j():Promise.resolve()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set(\"_updatingRequiredFieldsPromise\",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set(\"_updatingRequiredFieldsPromise\",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e=\"3d\"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:s}}=this,n=\"renderer\"in t&&t.renderer,a=\"orderBy\"in t&&t.orderBy,l=\"featureReduction\"in t?t.featureReduction:null,u=new Set,p=await o([n?n.collectRequiredFields(u,r):null,h(u,t),e?F(u,t):null,i(this.filter)?g(u,t,this.filter):null,i(this.featureEffect)?g(u,t,this.featureEffect.filter):null,l?w(u,t,l):null,a?E(u,t,a):null]);if(\"timeInfo\"in t&&t.timeInfo&&this.timeExtent&&b(u,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),\"feature\"===t.type&&(t.floorInfo&&b(u,t.fieldsIndex,[t.floorInfo.floorField]),e&&i(t.infoFor3D)&&(null==t.globalIdField&&O.error(\"globalIdField missing on 3DObjectFeatureLayer\"),b(u,t.fieldsIndex,[t.globalIdField]))),\"subtype-group\"===t.type){x(u,r,t.subtypeField);const e=t.sublayers.map((e=>Promise.all([e.renderer?.collectRequiredFields(u,r),h(u,e)])));await o(e)}for(const i of p)i.error&&O.error(i.error);x(u,r,s),e&&\"displayField\"in t&&t.displayField&&x(u,r,t.displayField);const d=Array.from(u).sort();this._set(\"requiredFields\",d)}validateFetchPopupFeatures(e){if(s(e))return null;for(const r of e.clientGraphics??[]){const i=r.layer;if(\"popupEnabled\"in i&&!i.popupEnabled)return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i});if(r.isAggregate){const e=\"featureReduction\"in i?i.featureReduction:null;if(!(e&&\"popupTemplate\"in e&&e.popupEnabled&&e.popupTemplate))return new t(\"featurelayerview:fetchPopupFeatures\",\"Popups are disabled\",{layer:i})}else if(\"popupTemplate\"in i){if(!q(i,e))return new t(\"featurelayerview:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:i})}}}async fetchClientPopupFeatures(e){const t=i(e)?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),o=new Map,n=await this.createPopupQuery(e);for(let i=0;i<t.length;i++){const a=t[i];if(a.isAggregate){r[i]=a;continue}const l=a.layer;if(!(\"popupEnabled\"in l))continue;const u=y(this.layer.fieldsIndex,n.outFields),p=q(l,e);if(s(p))continue;const d=await this._loadArcadeModules(p);d&&d.arcadeUtils.hasGeometryOperations(p)||!I(u,a)?o.set(a.getObjectId(),{graphic:a,index:i}):r[i]=a}if(\"stream\"===this.layer.type||0===o.size)return r.filter(Boolean);n.objectIds=Array.from(o.keys());try{const e=await this.layer.queryFeatures(n);for(const t of e.features){const{graphic:{geometry:e},index:i}=o.get(t.getObjectId());t.geometry||(t.geometry=e),r[i]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let o=!1;const n=i(e)&&e.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const i of n){if(!(\"popupEnabled\"in i))continue;const t=q(i,e);if(s(t))continue;const n=await this._loadArcadeModules(t),a=n&&n.arcadeUtils.hasGeometryOperations(t);o=!(\"point\"!==this.layer.geometryType&&!a);const l=await P(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=o,t.returnZ=o,t.returnM=o,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,\"feature\"===this.layer.type){const e=v(this);i(e)&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(!i(this.timeExtent)||!this.timeExtent.isEmpty)}};return e([u()],A.prototype,\"_updatingRequiredFieldsPromise\",void 0),e([u({readOnly:!0})],A.prototype,\"availableFields\",null),e([u({type:f})],A.prototype,\"featureEffect\",null),e([u({type:c})],A.prototype,\"filter\",void 0),e([u(d)],A.prototype,\"timeExtent\",void 0),e([u()],A.prototype,\"layer\",void 0),e([u({type:Number})],A.prototype,\"maximumNumberOfFeatures\",null),e([u({readOnly:!0,type:Boolean})],A.prototype,\"maximumNumberOfFeaturesExceeded\",null),e([u({readOnly:!0})],A.prototype,\"requiredFields\",void 0),e([u()],A.prototype,\"suspended\",void 0),e([u()],A.prototype,\"view\",void 0),A=e([p(_)],A),A};export{A as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as l}from\"../../../core/maybe.js\";import{getFeatureEditFields as p,fixFields as t}from\"../../../layers/support/fieldUtils.js\";async function d(l,d=l.popupTemplate){if(e(d))return[];const s=await d.getRequiredFields(l.fieldsIndex),{lastEditInfoEnabled:i}=d,{objectIdField:n,typeIdField:u,globalIdField:a,relationships:o}=l;if(s.includes(\"*\"))return[\"*\"];const r=i?await p(l):[],f=t(l.fieldsIndex,[...s,...r]);return u&&f.push(u),f&&n&&l.fieldsIndex?.has(n)&&!f.includes(n)&&f.push(n),f&&a&&l.fieldsIndex?.has(a)&&!f.includes(a)&&f.push(a),o&&o.forEach((e=>{const{keyField:p}=e;f&&p&&l.fieldsIndex?.has(p)&&!f.includes(p)&&f.push(p)})),f}function s(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{s as getFetchPopupTemplate,d as getRequiredFields};\n"],"names":["o","n","layer","floorInfo","floorField","view","l","floors","length","filter","map","push","join","_","O","r","A","e","_updatingRequiredFieldsPromise","timeExtent","requiredFields","this","handles","add","elevationInfo","featureExpressionInfo","displayField","timeInfo","renderer","labelingInfo","featureEffect","_handleRequiredFieldsChange","a","sublayers","get","t","fieldsIndex","outFields","m","y","set","_override","error","Error","returnGeometry","outSpatialReference","spatialReference","i","createQuery","R","type","v","where","intersection","clone","validateFetchPopupFeatures","fetchClientPopupFeatures","Array","isArray","content","some","j","Promise","resolve","_updateRequiredFields","_set","then","s","objectIdField","orderBy","featureReduction","u","Set","collectRequiredFields","h","F","g","w","E","p","b","startField","endField","infoFor3D","globalIdField","x","subtypeField","all","d","from","sort","clientGraphics","popupEnabled","isAggregate","popupTemplate","q","Map","createPopupQuery","_loadArcadeModules","arcadeUtils","hasGeometryOperations","I","getObjectId","graphic","index","size","Boolean","objectIds","keys","queryFeatures","features","geometry","geometryType","P","returnZ","returnM","isEmpty","prototype","readOnly","f","c","Number","doRefresh","dataChanged","catch","declaredClass","getRequiredFields","lastEditInfoEnabled","typeIdField","relationships","includes","has","forEach","keyField","defaultPopupTemplateEnabled","defaultPopupTemplate"],"sourceRoot":""}