"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[40123],{70804:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(71002),i=n(89611),a=n(60136);function o(){o=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,a){var o=new RegExp(e,r);return t.set(o,a||t.get(e)),(0,i.Z)(o,n.prototype)}function u(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var a=0;void 0===e[i[a]]&&a+1<i.length;)a++;t[n]=e[i[a]]}return t}),Object.create(null))}return(0,a.Z)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=u(n,this);var r=n.indices;r&&(r.groups=u(r,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(e,t){var n=a[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,r.Z)(e[e.length-1])&&(e=[].slice.call(e)).push(u(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,n,i)},o.apply(this,arguments)}},48732:function(e,t,n){n.d(t,{Hg:function(){return h},V7:function(){return g},uD:function(){return m},xb:function(){return v}});var r=n(4942),i=n(37762),a=n(85015),o=n(80987),u=n(92026),s=n(23879),c=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof a.Z}function p(e){return e instanceof o.Z?Object.keys(e.items):l(e)?(0,s.vw)(e).keys():e?Object.keys(e):[]}function f(e,t){return e instanceof o.Z?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function y(e,t){var n=e.diff;if(n&&"function"==typeof n)return n(e,t);var a=p(e),o=p(t);if(0!==a.length||0!==o.length){if(!a.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var s,m=o.filter((function(e){return!a.includes(e)})),g=a.filter((function(e){return!o.includes(e)})),h=a.filter((function(n){return o.includes(n)&&f(e,n)!==f(t,n)})).concat(m,g).sort(),v=d(e);if(v&&c.includes(v)&&h.length)return{type:"complete",oldValue:e,newValue:t};var b,Z=l(e)&&l(t),w=(0,i.Z)(h);try{for(w.s();!(b=w.n()).done;){var k=b.value,x=f(e,k),F=f(t,k),I=void 0;if((Z||"function"!=typeof x&&"function"!=typeof F)&&x!==F&&(null!=x||null!=F)){if(n&&n[k]&&"function"==typeof n[k])I=n[k](x,F);else if(x instanceof Date&&F instanceof Date){if(x.getTime()===F.getTime())continue;I={type:"complete",oldValue:x,newValue:F}}else I="object"==typeof x&&"object"==typeof F&&d(x)===d(F)?y(x,F):{type:"complete",oldValue:x,newValue:F};(0,u.pC)(I)&&((0,u.pC)(s)?s.diff[k]=I:s={type:"partial",diff:(0,r.Z)({},k,I)})}}}catch(j){w.e(j)}finally{w.f()}return s}}function m(e,t){if((0,u.Wi)(e))return!1;var n,r=t.split("."),a=e,o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("complete"===a.type)return!0;if("partial"!==a.type)return!1;var c=a.diff[s];if(!c)return!1;a=c}}catch(l){o.e(l)}finally{o.f()}return!0}function g(e,t){var n,r=(0,i.Z)(t);try{for(r.s();!(n=r.n()).done;){if(m(e,n.value))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}function h(e,t){if(!("function"==typeof e||"function"==typeof t||(0,u.Wi)(e)&&(0,u.Wi)(t)))return(0,u.Wi)(e)||(0,u.Wi)(t)||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:y(e,t)}function v(e){if((0,u.Wi)(e))return!0;switch(e.type){case"complete":return!1;case"collection":var t,n=e,r=(0,i.Z)(n.added);try{for(r.s();!(t=r.n()).done;){if(!v(t.value))return!1}}catch(p){r.e(p)}finally{r.f()}var a,o=(0,i.Z)(n.removed);try{for(o.s();!(a=o.n()).done;){if(!v(a.value))return!1}}catch(p){o.e(p)}finally{o.f()}var s,c=(0,i.Z)(n.changed);try{for(c.s();!(s=c.n()).done;){if(!v(s.value))return!1}}catch(p){c.e(p)}finally{c.f()}return!0;case"partial":for(var l in e.diff)if(!v(e.diff[l]))return!1;return!0}}},63543:function(e,t,n){n.d(t,{Dm:function(){return f},Hq:function(){return d},MS:function(){return y},bU:function(){return c}});var r=n(4942),i=n(1413),a=n(93169),o=n(84652),u=n(60480),s=n(76115);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.I4:"esriGeometryPolyline"===e?s.ET:s.lF}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function f(e,t){if((0,a.Z)("esri-csp-restrictions"))return function(){return(0,i.Z)((0,r.Z)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var o in e)n+="this".concat(l.test(o)?".".concat(o):'["'.concat(o,'"]')," = ").concat(JSON.stringify(e[o]),";");var u=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new u}}catch(s){return function(){return(0,i.Z)((0,r.Z)({},t,null),e)}}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,o.d9)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:u.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},67213:function(e,t,n){n.d(t,{$9:function(){return x},G4:function(){return S},Lu:function(){return k},WW:function(){return P},d:function(){return G},eS:function(){return O},gp:function(){return C},j:function(){return j},w9:function(){return F},yN:function(){return R}});var r=n(74165),i=n(37762),a=n(1413),o=n(70804),u=n(15861),s=(n(59486),n(76200)),c=n(10064),l=n(32718),p=n(92026),f=n(92975),d=n(81753),y=n(83406),m=n(6908),g=n(47615),h=n(63543),v=n(52410),b=n(85249),Z=n(78952),w=l.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),k="http://www.opengis.net/def/crs/",x="".concat(k,"OGC/1.3/CRS84");function F(e,t){return I.apply(this,arguments)}function I(){return I=(0,u.Z)((0,r.Z)().mark((function e(t,n){var o,u,l,f,d,y,m,Z,k,x,F,I,j,T,S,W,C,A,O,D,G,R=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=R.length>2&&void 0!==R[2]?R[2]:{},u=R.length>3&&void 0!==R[3]?R[3]:5,l=t.links,f=B(l,"items","application/geo+json")||B(l,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,p.Wi)(f)){e.next=5;break}throw new c.Z("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,(0,s.default)(f.href,{signal:o.signal,query:(0,a.Z)((0,a.Z)({limit:u},o.customParameters),{},{token:o.apiKey}),headers:{accept:"application/geo+json"}});case 7:return d=e.sent,y=d.data,e.next=11,(0,g.O3)(y);case 11:if(m=(0,g.my)(y,{geometryType:n.geometryType}),Z=n.fields||m.fields||[],k=null!=n.hasZ?n.hasZ:m.hasZ,x=m.geometryType,F=n.objectIdField||m.objectIdFieldName||"OBJECTID",I=n.timeInfo,!(j=Z.find((function(e){return e.name===F})))){e.next=18;break}j.editable=!1,j.nullable=!1,e.next=21;break;case 18:if(m.objectIdFieldType){e.next=20;break}throw new c.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 20:Z.unshift({name:F,alias:F,type:"number"===m.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1});case 21:F!==m.objectIdFieldName&&(T=Z.find((function(e){return e.name===m.objectIdFieldName})))&&(T.type="esriFieldTypeInteger"),Z===m.fields&&m.unknownFields.length>0&&w.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:m.unknownFields}}),S=(0,i.Z)(Z),e.prev=24,S.s();case 26:if((W=S.n()).done){e.next=34;break}if(null==(C=W.value).name&&(C.name=C.alias),null==C.alias&&(C.alias=C.name),"esriFieldTypeOID"!==C.type&&"esriFieldTypeGlobalID"!==C.type&&(C.editable=null==C.editable||!!C.editable,C.nullable=null==C.nullable||!!C.nullable),C.name){e.next=30;break}throw new c.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:C});case 30:if(b.v.jsonValues.includes(C.type)){e.next=32;break}throw new c.Z("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(C.name,'"'),{field:C});case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),S.e(e.t0);case 39:return e.prev=39,S.f(),e.finish(39);case 42:return I&&(A=new v.Z(Z),I.startTimeField&&((O=A.get(I.startTimeField))?(I.startTimeField=O.name,O.type="esriFieldTypeDate"):I.startTimeField=null),I.endTimeField&&((D=A.get(I.endTimeField))?(I.endTimeField=D.name,D.type="esriFieldTypeDate"):I.endTimeField=null),I.trackIdField&&((G=A.get(I.trackIdField))?I.trackIdField=G.name:(I.trackIdField=null,w.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:I}}))),I.startTimeField||I.endTimeField||(w.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:I}}),I=null)),e.abrupt("return",{drawingInfo:x?(0,h.bU)(x):null,extent:_(t),geometryType:x,fields:Z,hasZ:!!k,objectIdField:F,timeInfo:I});case 44:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),I.apply(this,arguments)}function j(e){return T.apply(this,arguments)}function T(){return T=(0,u.Z)((0,r.Z)().mark((function e(t){var n,i,o,u,l,f,d,y,m=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},i=t.links,o=B(i,"data","application/json")||B(i,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"),!(0,p.Wi)(o)){e.next=4;break}throw new c.Z("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return u=n.apiKey,l=n.customParameters,f=n.signal,e.next=9,(0,s.default)(o.href,{signal:f,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},l),{},{token:u})});case 9:return d=e.sent,y=d.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function S(e){return W.apply(this,arguments)}function W(){return W=(0,u.Z)((0,r.Z)().mark((function e(t){var n,i,o,u,l,f,d,y,m=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>1&&void 0!==m[1]?m[1]:{},i=t.links,o=B(i,"conformance","application/json")||B(i,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"),!(0,p.Wi)(o)){e.next=4;break}throw new c.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return u=n.apiKey,l=n.customParameters,f=n.signal,e.next=9,(0,s.default)(o.href,{signal:f,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},l),{},{token:u})});case 9:return d=e.sent,y=d.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function C(e){return A.apply(this,arguments)}function A(){return A=(0,u.Z)((0,r.Z)().mark((function e(t){var n,i,o,u,c,l,p=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},i=n.apiKey,o=n.customParameters,u=n.signal,e.next=6,(0,s.default)(t,{signal:u,headers:{accept:"application/json"},query:(0,a.Z)((0,a.Z)({},o),{},{token:i})});case 6:return c=e.sent,l=c.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function O(e){return D.apply(this,arguments)}function D(){return D=(0,u.Z)((0,r.Z)().mark((function e(t){var n,i,o,u,c,l,f,d,y=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:{},i="application/vnd.oai.openapi+json;version=3.0",o=B(t.links,"service-desc",i),!(0,p.Wi)(o)){e.next=4;break}return e.abrupt("return",(w.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return u=n.apiKey,c=n.customParameters,l=n.signal,e.next=9,(0,s.default)(o.href,{signal:l,headers:{accept:i},query:(0,a.Z)((0,a.Z)({},c),{},{token:u})});case 9:return f=e.sent,d=f.data,e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function G(e){var t,n=null===(t=(0,o.Z)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!n)return null;var r=n.authority,i=n.code;switch(r.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return Z.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return Z.Z.WGS84.wkid;default:return null}case"esri":case"epsg":var a=Number.parseInt(i,10);return Number.isNaN(a)?null:a;default:return null}}function R(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,u.Z)((0,r.Z)().mark((function e(t,n,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,n,i);case 2:return a=e.sent,e.abrupt("return",(0,y.cn)(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n){return q.apply(this,arguments)}function q(){return q=(0,u.Z)((0,r.Z)().mark((function e(t,n,o){var u,l,h,v,b,w,k,x,F,I,j,T,S,W,C,A,O,D,G,R,N,P,q,M,_,H,K,L,z,J,Q,X,Y,ee,te,ne,re,ie,ae,oe;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.collection,l=t.layerDefinition,h=t.maxRecordCount,v=t.queryParameters,b=v.apiKey,w=v.customParameters,k=t.spatialReference,x=t.supportedCrs,F=u.links,I=B(F,"items","application/geo+json")||B(F,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!(0,p.Wi)(I)){e.next=3;break}throw new c.Z("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(j=n.geometry,T=n.num,S=n.start,W=n.timeExtent,C=n.where,!n.objectIds){e.next=6;break}throw new c.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return A=Z.Z.fromJSON(k),O=(0,p.Pt)(n.outSpatialReference,A),D=O.isWGS84?null:V(O,x),G=U(j,x),R=E(W),N=$(C),P=null!==T&&void 0!==T?T:null!=S&&void 0!==S?10:h,e.next=15,(0,s.default)(I.href,(0,a.Z)((0,a.Z)({},o),{},{query:(0,a.Z)((0,a.Z)((0,a.Z)({},w),G),{},{crs:D,datetime:R,query:N,limit:P,startindex:S,token:b}),headers:{accept:"application/geo+json"}}));case 15:if(q=e.sent,M=q.data,_=!1,M.links&&(H=M.links.find((function(e){return"next"===e.rel})),_=!!H),!_&&Number.isInteger(M.numberMatched)&&Number.isInteger(M.numberReturned)&&(_=M.numberReturned<M.numberMatched),K=l.fields,L=l.geometryType,z=l.hasZ,J=l.objectIdField,Q=(0,g.lG)(M,{geometryType:L,hasZ:z,objectIdField:J}),!D&&O.isWebMercator){X=(0,i.Z)(Q);try{for(X.s();!(Y=X.n()).done;)ee=Y.value,(0,p.pC)(ee.geometry)&&null!=L&&((te=(0,y.di)(ee.geometry,L,z,!1)).spatialReference=Z.Z.WGS84,ee.geometry=(0,y.GH)((0,d.iV)(te,O)))}catch(r){X.e(r)}finally{X.f()}}ne=(0,i.Z)(Q);try{for(ne.s();!(re=ne.n()).done;)(ie=re.value).objectId=ie.attributes[J]}catch(r){ne.e(r)}finally{ne.f()}return ae=D||!D&&O.isWebMercator?O.toJSON():f.Zn,oe=new m.Z,e.abrupt("return",(oe.exceededTransferLimit=_,oe.features=Q,oe.fields=K,oe.geometryType=L,oe.hasZ=z,oe.objectIdFieldName=J,oe.spatialReference=ae,oe));case 26:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function V(e,t){var n,r,i,a=e.isWebMercator;if(!e.wkid)return null;var o=a?null!==(n=null!==(r=null!==(i=t[3857])&&void 0!==i?i:t[102100])&&void 0!==r?r:t[102113])&&void 0!==n?n:t[900913]:t[e.wkid];return o?"".concat(k).concat(o):null}function M(e){if((0,p.Wi)(e))return"";var t=e.xmin,n=e.ymin,r=e.xmax,i=e.ymax;return"".concat(t,",").concat(n,",").concat(r,",").concat(i)}function E(e){if((0,p.Wi)(e))return null;var t=e.start,n=e.end;return"".concat((0,p.pC)(t)?t.toISOString():"..","/").concat((0,p.pC)(n)?n.toISOString():"..")}function $(e){return(0,p.Wi)(e)||!e||"1=1"===e?null:e}function U(e,t){if(!function(e){return(0,p.pC)(e)&&"extent"===e.type}(e))return null;var n=e.spatialReference;if(!n||n.isWGS84)return{bbox:M(e)};var r=V(n,t);return(0,p.pC)(r)?{bbox:M(e),"bbox-crs":r}:n.isWebMercator?{bbox:M((0,d.iV)(e,Z.Z.WGS84))}:null}function _(e){var t,n=null===(t=e.extent)||void 0===t?void 0:t.spatial;if(!n)return null;var r=n.bbox[0],i=4===r.length,a=r[0],o=r[1],u=i?void 0:r[2];return{xmin:a,ymin:o,xmax:i?r[2]:r[3],ymax:i?r[3]:r[4],zmin:u,zmax:i?void 0:r[5],spatialReference:Z.Z.WGS84.toJSON()}}function B(e,t,n){return e.find((function(e){return e.rel===t&&e.type===n}))||e.find((function(e){return e.rel===t&&!e.type}))}}}]);
//# sourceMappingURL=40123.fffc12d2.chunk.js.map