"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[79762],{35888:function(n,e,t){t.d(e,{d:function(){return o}});var r=t(16889),i=t(72838);function o(n,e,t){var o,s=Array.isArray(n),l=s?n.length/e:n.byteLength/(4*e),v=s?n:new Uint32Array(n,0,l*e),T=null!==(o=null===t||void 0===t?void 0:t.minReduction)&&void 0!==o?o:0,A=(null===t||void 0===t?void 0:t.originalIndices)||null,N=A?A.length:0,O=(null===t||void 0===t?void 0:t.componentOffsets)||null,g=0;if(O)for(var d=0;d<O.length-1;d++){var I=O[d+1]-O[d];I>g&&(g=I)}else g=l;var E=Math.floor(1.1*g)+1;(null==f||f.length<2*E)&&(f=new Uint32Array((0,r.Sf)(2*E)));for(var S=0;S<2*E;S++)f[S]=0;for(var p=0,m=!!O&&!!A,R=m?N:l,h=(0,i.$z)(l/3),L=new Uint32Array(N),D=1.96,y=0!==T?Math.ceil(4*D*D/(T*T)*T*(1-T)):R,U=1,w=O?O[1]:R,P=0;P<R;P++){if(P===y){var M=1-p/P;if(M+D*Math.sqrt(M*(1-M)/P)<T)return null;y*=2}if(P===w){for(var C=0;C<2*E;C++)f[C]=0;if(A)for(var F=O[U-1];F<O[U];F++)L[F]=h[A[F]];w=O[++U]}for(var V=m?A[P]:P,b=V*e,G=c(v,b,e),B=G%E,k=p;0!==f[2*B+1];){if(f[2*B]===G){var _=f[2*B+1]-1;if(a(v,b,_*e,e)){k=h[_];break}}++B>=E&&(B-=E)}k===p&&(f[2*B]=G,f[2*B+1]=V+1,p++),h[V]=k}if(0!==T&&1-p/l<T)return null;if(m){for(var x=O[U-1];x<L.length;x++)L[x]=h[A[x]];h=(0,i.mi)(L)}var H=s?new Array(p):new Uint32Array(p*e);p=0;for(var X=0;X<R;X++)h[X]===p&&(u(v,(m?A[X]:X)*e,H,p*e,e),p++);if(A&&!m){for(var Z=new Uint32Array(N),K=0;K<Z.length;K++)Z[K]=h[A[K]];h=(0,i.mi)(Z)}return{buffer:Array.isArray(H)?H:H.buffer,indices:h,uniqueCount:p}}function a(n,e,t,r){for(var i=0;i<r;i++)if(n[e+i]!==n[t+i])return!1;return!0}function u(n,e,t,r,i){for(var o=0;o<i;o++)t[r+o]=n[e+o]}function c(n,e,t){for(var r=0,i=0;i<t;i++)r=(r=n[e+i]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var f=null},50256:function(n,e,t){t.d(e,{K:function(){return o}});var r=t(8548),i=t(61109);function o(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=n.stride;return n.fieldNames.filter((function(e){var t=n.fields.get(e).optional;return!(t&&t.glPadding)})).map((function(r){var o=n.fields.get(r),u=o.constructor.ElementCount,c=a(o.constructor.ElementType),f=o.offset,s=!(!o.optional||!o.optional.glNormalized);return new i.G(r,u,c,f,t,s,e)}))}function a(n){var e=u[n];if(e)return e;throw new Error("BufferType not supported in WebGL")}var u={u8:r.g.UNSIGNED_BYTE,u16:r.g.UNSIGNED_SHORT,u32:r.g.UNSIGNED_INT,i8:r.g.BYTE,i16:r.g.SHORT,i32:r.g.INT,f32:r.g.FLOAT}},4760:function(n,e,t){var r;t.d(e,{T:function(){return r}}),function(n){n.POSITION="position",n.NORMAL="normal",n.UV0="uv0",n.AUXPOS1="auxpos1",n.AUXPOS2="auxpos2",n.COLOR="color",n.SYMBOLCOLOR="symbolColor",n.SIZE="size",n.TANGENT="tangent",n.OFFSET="offset",n.SUBDIVISIONFACTOR="subdivisionFactor",n.COLORFEATUREATTRIBUTE="colorFeatureAttribute",n.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",n.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",n.DISTANCETOSTART="distanceToStart",n.UVMAPSPACE="uvMapSpace",n.BOUNDINGRECT="boundingRect",n.UVREGION="uvRegion",n.NORMALCOMPRESSED="normalCompressed",n.PROFILERIGHT="profileRight",n.PROFILEUP="profileUp",n.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",n.FEATUREVALUE="featureValue",n.MODELORIGINHI="modelOriginHi",n.MODELORIGINLO="modelOriginLo",n.MODEL="model",n.MODELNORMAL="modelNormal",n.INSTANCECOLOR="instanceColor",n.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",n.LOCALTRANSFORM="localTransform",n.GLOBALTRANSFORM="globalTransform",n.BOUNDINGSPHERE="boundingSphere",n.MODELORIGIN="modelOrigin",n.MODELSCALEFACTORS="modelScaleFactors",n.FEATUREATTRIBUTE="featureAttribute",n.STATE="state",n.LODLEVEL="lodLevel",n.POSITION0="position0",n.POSITION1="position1",n.NORMALA="normalA",n.NORMALB="normalB",n.COMPONENTINDEX="componentIndex",n.VARIANTOFFSET="variantOffset",n.VARIANTSTROKE="variantStroke",n.VARIANTEXTENSION="variantExtension",n.U8PADDING="u8padding",n.U16PADDING="u16padding",n.SIDENESS="sideness",n.START="start",n.END="end",n.UP="up",n.EXTRUDE="extrude",n.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",n.OBJECTANDLAYERIDCOLOR_INSTANCED="objectAndLayerIdColor_instanced"}(r||(r={}))},67009:function(n,e,t){t.d(e,{Hr:function(){return l},dG:function(){return s},dx:function(){return c},rD:function(){return u},so:function(){return v},tf:function(){return a}});var r=t(50256),i=t(55158),o=t(4760),a=(0,i.U$)().vec3f(o.T.POSITION).u16(o.T.COMPONENTINDEX).u16(o.T.U16PADDING),u=(0,i.U$)().vec2u8(o.T.SIDENESS),c=(0,r.K)(u),f=(0,i.U$)().vec3f(o.T.POSITION0).vec3f(o.T.POSITION1).u16(o.T.COMPONENTINDEX).u8(o.T.VARIANTOFFSET,{glNormalized:!0}).u8(o.T.VARIANTSTROKE).u8(o.T.VARIANTEXTENSION,{glNormalized:!0}).u8(o.T.U8PADDING,{glPadding:!0}).u16(o.T.U16PADDING,{glPadding:!0}),s=f.clone().vec3f(o.T.NORMAL),l=f.clone().vec3f(o.T.NORMALA).vec3f(o.T.NORMALB),v=new Map([[o.T.POSITION0,0],[o.T.POSITION1,1],[o.T.COMPONENTINDEX,2],[o.T.VARIANTOFFSET,3],[o.T.VARIANTSTROKE,4],[o.T.VARIANTEXTENSION,5],[o.T.NORMAL,6],[o.T.NORMALA,6],[o.T.NORMALB,7],[o.T.SIDENESS,8]])},41371:function(n,e,t){t.d(e,{D9:function(){return g},qE:function(){return d}});var r=t(15671),i=t(43144),o=t(84936),a=t(11186),u=t(71353),c=t(50256),f=t(67009),s=function(){function n(){(0,r.Z)(this,n)}return(0,i.Z)(n,[{key:"updateSettings",value:function(n){this.settings=n,this._edgeHashFunction=n.reducedPrecision?N:A}},{key:"write",value:function(n,e,t){var r=this._edgeHashFunction(t);E.seed=r;var i=E.getIntRange(0,255),o=E.getIntRange(0,this.settings.variants-1),a=E.getFloat(),u=255*(.5*function(n,e){var t=n<0?-1:1;return Math.pow(Math.abs(n),e)*t}(-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/(1-.7),1.2)+.5);n.position0.setVec(e,t.position0),n.position1.setVec(e,t.position1),n.componentIndex.set(e,t.componentIndex),n.variantOffset.set(e,i),n.variantStroke.set(e,o),n.variantExtension.set(e,u)}},{key:"trim",value:function(n,e){return n.slice(0,e)}}]),n}(),l=new Float32Array(6),v=new Uint32Array(l.buffer),T=new Uint32Array(1);function A(n){var e=l;e[0]=n.position0[0],e[1]=n.position0[1],e[2]=n.position0[2],e[3]=n.position1[0],e[4]=n.position1[1],e[5]=n.position1[2],T[0]=5381;for(var t=0;t<v.length;t++)T[0]=31*T[0]+v[t];return T[0]}function N(n){var e=l;e[0]=O(n.position0[0]),e[1]=O(n.position0[1]),e[2]=O(n.position0[2]),e[3]=O(n.position1[0]),e[4]=O(n.position1[1]),e[5]=O(n.position1[2]),T[0]=5381;for(var t=0;t<v.length;t++)T[0]=31*T[0]+v[t];return T[0]}function O(n){return Math.round(1e4*n)/1e4}var g=function(){function n(){(0,r.Z)(this,n),this._commonWriter=new s}return(0,i.Z)(n,[{key:"updateSettings",value:function(n){this._commonWriter.updateSettings(n)}},{key:"allocate",value:function(n){return f.dG.createBuffer(n)}},{key:"write",value:function(n,e,t){this._commonWriter.write(n,e,t),(0,a.a)(I,t.faceNormal0,t.faceNormal1),(0,a.n)(I,I),n.normal.setVec(e,I)}},{key:"trim",value:function(n,e){return this._commonWriter.trim(n,e)}}]),n}();g.Layout=f.dG,g.glLayout=(0,c.K)(f.dG,1);var d=function(){function n(){(0,r.Z)(this,n),this._commonWriter=new s}return(0,i.Z)(n,[{key:"updateSettings",value:function(n){this._commonWriter.updateSettings(n)}},{key:"allocate",value:function(n){return f.Hr.createBuffer(n)}},{key:"write",value:function(n,e,t){this._commonWriter.write(n,e,t),n.normalA.setVec(e,t.faceNormal0),n.normalB.setVec(e,t.faceNormal1)}},{key:"trim",value:function(n,e){return this._commonWriter.trim(n,e)}}]),n}();d.Layout=f.Hr,d.glLayout=(0,c.K)(f.Hr,1);var I=(0,u.c)(),E=new o.Z},10662:function(n,e,t){t.d(e,{P:function(){return r},n:function(){return s}});var r,i,o=t(63780),a=t(16889),u=t(11186),c=t(71353),f=-1;function s(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,i=n.vertices.position,c=n.vertices.componentIndex,s=(0,a.Vl)(r.anglePlanar),g=(0,a.Vl)(r.angleSignificantEdge),I=Math.cos(g),E=Math.cos(s),S=O.edge,p=S.position0,m=S.position1,R=S.faceNormal0,h=S.faceNormal1,L=N(n),D=A(n),y=D.length/4,U=e.allocate(y),w=0,P=y,M=t.allocate(P),C=0,F=0,V=0,b=(0,o.w6)(0,y),G=new Float32Array(y);G.forEach((function(n,e,t){i.getVec(D[4*e+0],p),i.getVec(D[4*e+1],m),t[e]=(0,u.i)(p,m)})),b.sort((function(n,e){return G[e]-G[n]}));for(var B=new Array,k=new Array,_=0;_<y;_++){var x=b[_],H=G[x],X=D[4*x+0],Z=D[4*x+1],K=D[4*x+2],W=D[4*x+3],Y=W===f;if(i.getVec(X,p),i.getVec(Z,m),Y)(0,u.s)(R,L[3*K+0],L[3*K+1],L[3*K+2]),(0,u.c)(h,R),S.componentIndex=c.get(X),S.cosAngle=(0,u.e)(R,h);else{if((0,u.s)(R,L[3*K+0],L[3*K+1],L[3*K+2]),(0,u.s)(h,L[3*W+0],L[3*W+1],L[3*W+2]),S.componentIndex=c.get(X),S.cosAngle=(0,u.e)(R,h),v(S,E))continue;S.cosAngle<-.9999&&(0,u.c)(h,R)}F+=H,V++,Y||l(S,I)?(e.write(U,w++,S),B.push(H)):T(S,s)&&(t.write(M,C++,S),k.push(H))}var z=new Float32Array(B.reverse()),$=new Float32Array(k.reverse());return{regular:{instancesData:e.trim(U,w),lodInfo:{lengths:z}},silhouette:{instancesData:t.trim(M,C),lodInfo:{lengths:$}},averageEdgeLength:F/V}}function l(n,e){return n.cosAngle<e}function v(n,e){return n.cosAngle>e}function T(n,e){var t=(0,a.ZF)(n.cosAngle),r=O.fwd,i=O.ortho;return(0,u.r)(r,n.position1,n.position0),t*((0,u.e)((0,u.f)(i,n.faceNormal0,n.faceNormal1),r)>0?-1:1)>e}function A(n){for(var e=n.faces.length/3,t=n.faces,r=n.neighbors,i=0,o=0;o<e;o++){var a=r[3*o+0],u=r[3*o+1],c=r[3*o+2],s=t[3*o+0],l=t[3*o+1],v=t[3*o+2];i+=a===f||s<l?1:0,i+=u===f||l<v?1:0,i+=c===f||v<s?1:0}for(var T=new Int32Array(4*i),A=0,N=0;N<e;N++){var O=r[3*N+0],g=r[3*N+1],d=r[3*N+2],I=t[3*N+0],E=t[3*N+1],S=t[3*N+2];(O===f||I<E)&&(T[A++]=I,T[A++]=E,T[A++]=N,T[A++]=O),(g===f||E<S)&&(T[A++]=E,T[A++]=S,T[A++]=N,T[A++]=g),(d===f||S<I)&&(T[A++]=S,T[A++]=I,T[A++]=N,T[A++]=d)}return T}function N(n){for(var e=n.faces.length/3,t=n.vertices.position,r=n.faces,i=g.v0,o=g.v1,a=g.v2,c=new Float32Array(3*e),f=0;f<e;f++){var s=r[3*f+0],l=r[3*f+1],v=r[3*f+2];t.getVec(s,i),t.getVec(l,o),t.getVec(v,a),(0,u.b)(o,o,i),(0,u.b)(a,a,i),(0,u.f)(i,o,a),(0,u.n)(i,i),c[3*f+0]=i[0],c[3*f+1]=i[1],c[3*f+2]=i[2]}return c}(i=r||(r={}))[i.SOLID=0]="SOLID",i[i.SKETCH=1]="SKETCH";var O={edge:{position0:(0,c.c)(),position1:(0,c.c)(),faceNormal0:(0,c.c)(),faceNormal1:(0,c.c)(),componentIndex:0,cosAngle:0},ortho:(0,c.c)(),fwd:(0,c.c)()},g={v0:(0,c.c)(),v1:(0,c.c)(),v2:(0,c.c)()},d={anglePlanar:4,angleSignificantEdge:35}},79762:function(n,e,t){t.d(e,{Kl:function(){return v},n_:function(){return d},kY:function(){return T},Yr:function(){return g}});var r=t(43144),i=t(15671),o=t(35888);function a(n,e,t){for(var r=e/3,i=new Uint32Array(t+1),o=new Uint32Array(t+1),a=function(n,e){n<e?i[n+1]++:o[e+1]++},u=0;u<r;u++){var c=n[3*u],f=n[3*u+1],s=n[3*u+2];a(c,f),a(f,s),a(s,c)}for(var l=0,v=0,T=0;T<t;T++){var A=i[T+1],N=o[T+1];i[T+1]=l,o[T+1]=v,l+=A,v+=N}for(var O=new Uint32Array(6*r),g=i[t],d=function(n,e,t){if(n<e){var r=i[n+1]++;O[2*r]=e,O[2*r+1]=t}else{var a=o[e+1]++;O[2*g+2*a]=n,O[2*g+2*a+1]=t}},I=0;I<r;I++){var E=n[3*I],S=n[3*I+1],p=n[3*I+2];d(E,S,I),d(S,p,I),d(p,E,I)}for(var m=function(n,e){for(var t=2*n,r=e-n,i=1;i<r;i++){for(var o=O[t+2*i],a=O[t+2*i+1],u=i-1;u>=0&&O[t+2*u]>o;u--)O[t+2*u+2]=O[t+2*u],O[t+2*u+3]=O[t+2*u+1];O[t+2*u+2]=o,O[t+2*u+3]=a}},R=0;R<t;R++)m(i[R],i[R+1]),m(g+o[R],g+o[R+1]);for(var h=new Int32Array(3*r),L=function(e,t){return e===n[3*t]?0:e===n[3*t+1]?1:e===n[3*t+2]?2:-1},D=function(n,e){var t=L(n,e);h[3*e+t]=-1},y=function(n,e,t,r){var i=L(n,e);h[3*e+i]=r;var o=L(t,r);h[3*r+o]=e},U=0;U<t;U++){for(var w=i[U],P=i[U+1],M=o[U],C=o[U+1];w<P&&M<C;){var F=O[2*w],V=O[2*g+2*M];F===V?(y(U,O[2*w+1],V,O[2*g+2*M+1]),w++,M++):F<V?(D(U,O[2*w+1]),w++):(D(V,O[2*g+2*M+1]),M++)}for(;w<P;)D(U,O[2*w+1]),w++;for(;M<C;)D(O[2*g+2*M],O[2*g+2*M+1]),M++}return h}var u=t(55158),c=t(4760),f=t(67009),s=t(41371),l=t(10662);function v(n){var e=T(n.data,n.skipDeduplicate,n.indices,n.indicesLength);return N.updateSettings(n.writerSettings),O.updateSettings(n.writerSettings),(0,l.n)(e,N,O)}function T(n,e,t,r){if(e){var i=a(t,r,n.count);return new A(t,r,i,n)}var u=(0,o.d)(n.buffer,n.stride/4,{originalIndices:t,originalIndicesLength:r}),c=a(u.indices,r,u.uniqueCount);return{faces:u.indices,facesLength:u.indices.length,neighbors:c,vertices:f.tf.createView(u.buffer)}}var A=(0,r.Z)((function n(e,t,r,o){(0,i.Z)(this,n),this.faces=e,this.facesLength=t,this.neighbors=r,this.vertices=o})),N=new s.D9,O=new s.qE,g=(0,u.U$)().vec3f(c.T.POSITION0).vec3f(c.T.POSITION1),d=(0,u.U$)().vec3f(c.T.POSITION0).vec3f(c.T.POSITION1).u16(c.T.COMPONENTINDEX).u16(c.T.U16PADDING,{glPadding:!0})}}]);
//# sourceMappingURL=79762.42307b04.chunk.js.map