"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[35662],{30651:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(74165),i=n(15861),o=n(15671),a=n(43144),u=n(60136),l=n(92572),s=n(27366),p=(n(59486),n(76200)),c=n(10064),y=n(91505),f=n(79056),d=n(54472),v=n(32718),m=n(66978),h=n(35995),b=n(49861),g=(n(25243),n(63780),n(69912)),w=n(42265);function Z(){return Z=(0,i.Z)((0,r.Z)().mark((function e(t){var i,o,a,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([n.e(79803),n.e(98995),n.e(46727),n.e(43139),n.e(6356)]).then(n.bind(n,43139));case 3:return o=e.sent,e.prev=4,e.next=7,o.fromItem(i);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),a=i&&i.portalItem,u=a&&a.id||"unset",l=a&&a.portal&&a.portal.url||w.Z.portalUrl,v.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+u+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),Z.apply(this,arguments)}var C=n(53866),_=n(78952),x=0,k=function(e){(0,u.Z)(s,e);var t=(0,l.Z)(s);function s(){var e;return(0,o.Z)(this,s),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new C.Z(-180,-90,180,90,_.Z.WGS84),e.id=Date.now().toString(16)+"-layer-"+x++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=_.Z.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,a.Z)(s,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var n,r;(0,m.D_)(t)||v.Z.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(n=e.title)&&void 0!==n?n:"no title","', id: '").concat(null!==(r=e.id)&&void 0!==r?r:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){return(0,h.mN)(this.url)}},{key:"fetchAttributionData",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,(0,p.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new c.Z("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?{url:t}:t,e.next=3,Promise.all([n.e(46727),n.e(94650)]).then(n.bind(n,94650));case 3:return e.abrupt("return",e.sent.fromUrl(i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return Z.apply(this,arguments)}(e)}}]),s}(y.Z.EventedMixin((0,f.IG)(d.Z)));(0,s._)([(0,b.Cb)({type:String})],k.prototype,"attributionDataUrl",void 0),(0,s._)([(0,b.Cb)({type:C.Z})],k.prototype,"fullExtent",void 0),(0,s._)([(0,b.Cb)({readOnly:!0})],k.prototype,"hasAttributionData",null),(0,s._)([(0,b.Cb)({type:String,clonable:!1})],k.prototype,"id",void 0),(0,s._)([(0,b.Cb)({type:Boolean,nonNullable:!0})],k.prototype,"legendEnabled",void 0),(0,s._)([(0,b.Cb)({type:["show","hide","hide-children"]})],k.prototype,"listMode",void 0),(0,s._)([(0,b.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],k.prototype,"opacity",void 0),(0,s._)([(0,b.Cb)({clonable:!1})],k.prototype,"parent",void 0),(0,s._)([(0,b.Cb)({readOnly:!0})],k.prototype,"parsedUrl",null),(0,s._)([(0,b.Cb)({type:Boolean})],k.prototype,"popupEnabled",void 0),(0,s._)([(0,b.Cb)({type:Boolean})],k.prototype,"attributionVisible",void 0),(0,s._)([(0,b.Cb)({type:_.Z})],k.prototype,"spatialReference",void 0),(0,s._)([(0,b.Cb)({type:String})],k.prototype,"title",void 0),(0,s._)([(0,b.Cb)({readOnly:!0,json:{read:!1}})],k.prototype,"type",void 0),(0,s._)([(0,b.Cb)()],k.prototype,"url",void 0),(0,s._)([(0,b.Cb)({type:Boolean,nonNullable:!0})],k.prototype,"visible",void 0);var S=k=(0,s._)([(0,g.j)("esri.layers.Layer")],k)},87165:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(15671),i=n(43144),o=n(60136),a=n(92572),u=n(27366),l=n(11582),s=n(46784),p=n(49861),c=(n(25243),n(63780),n(38511)),y=n(69912),f=n(31201),d=n(67755),v=n(12224),m=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return(0,i.Z)(n,[{key:"readDomains",value:function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t[i]=(0,d.im)(e[i])}return t}},{key:"writeDomains",value:function(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o,a=i[r];e[a]&&(n[a]=null===(o=e[a])||void 0===o?void 0:o.toJSON())}t.domains=n}}]),n}((0,l.J)(s.wq));(0,u._)([(0,p.Cb)({json:{write:!0}})],m.prototype,"id",void 0),(0,u._)([(0,p.Cb)({json:{write:!0}})],m.prototype,"name",void 0),(0,u._)([(0,p.Cb)({json:{write:!0}})],m.prototype,"domains",void 0),(0,u._)([(0,c.r)("domains")],m.prototype,"readDomains",null),(0,u._)([(0,f.c)("domains")],m.prototype,"writeDomains",null),(0,u._)([(0,p.Cb)({type:[v.Z],json:{write:!0}})],m.prototype,"templates",void 0);var h=m=(0,u._)([(0,y.j)("esri.layers.support.FeatureType")],m)},37933:function(e,t,n){n.d(t,{A2:function(){return c},Am:function(){return f},CY:function(){return s},S1:function(){return w},Tv:function(){return y},fb:function(){return p},iC:function(){return l},ln:function(){return Z},mt:function(){return h},oP:function(){return b},rQ:function(){return v},sy:function(){return d},y2:function(){return m}});var r=n(74165),i=n(15861),o=n(19545),a=n(76200),u=n(92026);function l(e){var t=null===e||void 0===e?void 0:e.type;return"base-tile"===t||"tile"===t||"elevation"===t||"imagery-tile"===t||"base-elevation"===t||"open-street-map"===t||"wcs"===t||"web-tile"===t||"wmts"===t||"vector-tile"===t}function s(e){return null!=e&&"type"in e&&"group"===e.type}var p={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function c(e){var t=null===e||void 0===e?void 0:e.type;return"building-scene"===t||"integrated-mesh"===t||"point-cloud"===t||"scene"===t}function y(e){return"voxel"===(null===e||void 0===e?void 0:e.type)}function f(e){return"imagery-tile"===(null===e||void 0===e?void 0:e.type)}function d(e){return null!=e&&null!=e.parent&&"declaredClass"in e.parent&&"esri.Basemap"===e.parent.declaredClass&&e.parent.baseLayers.includes(e)}function v(e){var t;return"feature"===(null===e||void 0===e?void 0:e.type)&&!e.url&&"memory"===(null===(t=e.source)||void 0===t?void 0:t.type)}function m(e){var t;return"feature"===(null===e||void 0===e?void 0:e.type)&&"feature-layer"===(null===(t=e.source)||void 0===t?void 0:t.type)}function h(e){if(e.activeLayer){var t=e.activeLayer.tileMatrixSet;if(t)return t;var n=e.activeLayer.tileMatrixSets;if(n)return n}return null}function b(e,t){return g.apply(this,arguments)}function g(){return g=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,l,s,p,c,y;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(null===(i=null===o.id||void 0===o.id?void 0:o.id.findServerInfo(t))||void 0===i?void 0:i.currentVersion)){e.next=3;break}return e.abrupt("return",i.owningSystemUrl||null);case 3:if(-1!==(l=t.toLowerCase().indexOf("/rest/services"))){e.next=6;break}return e.abrupt("return",null);case 6:return s="".concat(t.substring(0,l),"/rest/info"),p=(0,u.pC)(n)?n.signal:null,e.next=10,(0,a.default)(s,{query:{f:"json"},responseType:"json",signal:p});case 10:return c=e.sent,y=c.data,e.abrupt("return",(null===y||void 0===y?void 0:y.owningSystemUrl)||null);case 13:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){return function(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Z(e){return!!function(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}},80724:function(e,t,n){var r,i;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function u(e){return e.valueExpression?r.Expression:e.field&&"string"==typeof e.field?r.Field:r.Unknown}function l(e,t){var n=t||u(e),o=e.valueUnit||"unknown";return n===r.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}n.d(t,{PS:function(){return u},QW:function(){return l},RY:function(){return r},hL:function(){return i},iY:function(){return o},qh:function(){return a}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(r||(r={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},49818:function(e,t,n){n.d(t,{Z:function(){return S}});var r,i=n(29439),o=n(37762),a=n(15671),u=n(43144),l=n(60136),s=n(92572),p=n(27366),c=n(59486),y=n(52639),f=n(43404),d=n(46784),v=n(84652),m=n(92026),h=n(49861),b=(n(25243),n(38511)),g=n(69912),w=n(31201),Z=n(78952),C=n(77981),_=n(83040),x=new f.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),k=r=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return(0,u.Z)(n,[{key:"readFeatures",value:function(e,t){for(var n=Z.Z.fromJSON(t.spatialReference),r=[],i=0;i<e.length;i++){var o=e[i],a=y.Z.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;(0,m.pC)(a.geometry)&&!u&&(a.geometry.spatialReference=n);var l=o.aggregateGeometries,s=a.aggregateGeometries;if(l&&(0,m.pC)(s))for(var p in s){var c,f=s[p],d=null===(c=l[p])||void 0===c?void 0:c.spatialReference;(0,m.pC)(f)&&!d&&(f.spatialReference=n)}r.push(a)}return r}},{key:"writeGeometryType",value:function(e,t,n,r){if(e)x.write(e,t,n,r);else{var i=this.features;if(i){var a,u=(0,o.Z)(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l&&(0,m.pC)(l.geometry))return void x.write(l.geometry.type,t,n,r)}}catch(s){u.e(s)}finally{u.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var n=!!e.spatialReference,r=(0,C.im)(e);return r&&!n&&t.spatialReference&&(r.spatialReference=Z.Z.fromJSON(t.spatialReference)),r}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var n=this.features;if(n){var r,i=(0,o.Z)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a&&(0,m.pC)(a.geometry)&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(u){i.e(u)}finally{i.f()}}}}},{key:"clone",value:function(){return new r(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var n=0;n<t.features.length;n++){var r=t.features[n];if(r.geometry){var i=e&&e[n];r.geometry=i&&i.toJSON()||r.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),n=t[0],r=t[1],o=(0,i.Z)(e.translate,2),a=o[0],u=o[1],l=this.features,s=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/n)}),(function(e){return Math.round((u-e)/r)})),p=0,c=l.length;p<c;p++)(null===s||void 0===s?void 0:s((0,m.Wg)(l[p].geometry)))||(l.splice(p,1),p--,c--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,n=this.transform;if(!n)return this;var r,a=(0,i.Z)(n.translate,2),u=a[0],l=a[1],s=(0,i.Z)(n.scale,2),p=s[0],c=s[1],y=this._getHydrationFunction(e,(function(e){return e*p+u}),(function(e){return l-e*c})),f=(0,o.Z)(t);try{for(f.s();!(r=f.n()).done;){var d=r.value.geometry;(0,m.pC)(d)&&y&&y(d)}}catch(v){f.e(v)}finally{f.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,n){for(var r,i,o=[],a=0,u=e.length;a<u;a++){var l=e[a];if(a>0){var s=t(l[0]),p=n(l[1]);s===r&&p===i||(o.push([s-r,p-i]),r=s,i=p)}else r=t(l[0]),i=n(l[1]),o.push([r,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,n){var r=this;return"point"===e?function(e){return e.x=t(e.x),e.y=n(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,C.oU)(e)?e.rings:e.paths,o=[],a=0,u=i.length;a<u;a++){var l=i[a],s=r._quantizePoints(l,t,n);s&&o.push(s)}return o.length>0?((0,C.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=r._quantizePoints(e.points,t,n);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,n){return"point"===e?function(e){e.x=t(e.x),e.y=n(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var r,i,o=(0,C.oU)(e)?e.rings:e.paths,a=0,u=o.length;a<u;a++)for(var l=o[a],s=0,p=l.length;s<p;s++){var c=l[s];s>0?(r+=c[0],i+=c[1]):(r=c[0],i=c[1]),c[0]=t(r),c[1]=n(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=n(e.ymin),e.xmax=t(e.xmax),e.ymax=n(e.ymax)}:"multipoint"===e?function(e){for(var r,i,o=e.points,a=0,u=o.length;a<u;a++){var l=o[a];a>0?(r+=l[0],i+=l[1]):(r=l[0],i=l[1]),l[0]=t(r),l[1]=n(i)}}:null}}]),n}(d.wq);(0,p._)([(0,h.Cb)({type:String,json:{write:!0}})],k.prototype,"displayFieldName",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,h.Cb)({type:[y.Z],json:{write:!0}})],k.prototype,"features",void 0),(0,p._)([(0,b.r)("features")],k.prototype,"readFeatures",null),(0,p._)([(0,h.Cb)({type:[_.Z],json:{write:!0}})],k.prototype,"fields",void 0),(0,p._)([(0,h.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:x.read}}})],k.prototype,"geometryType",void 0),(0,p._)([(0,w.c)("geometryType")],k.prototype,"writeGeometryType",null),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"hasM",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],k.prototype,"hasZ",void 0),(0,p._)([(0,h.Cb)({types:c.qM,json:{write:!0}})],k.prototype,"queryGeometry",void 0),(0,p._)([(0,b.r)("queryGeometry")],k.prototype,"readQueryGeometry",null),(0,p._)([(0,h.Cb)({type:Z.Z,json:{write:!0}})],k.prototype,"spatialReference",void 0),(0,p._)([(0,w.c)("spatialReference")],k.prototype,"writeSpatialReference",null),(0,p._)([(0,h.Cb)({json:{write:!0}})],k.prototype,"transform",void 0),(k=r=(0,p._)([(0,g.j)("esri.rest.support.FeatureSet")],k)).prototype.toJSON.isDefaultToJSON=!0;var S=k}}]);
//# sourceMappingURL=35662.1769f4f8.chunk.js.map