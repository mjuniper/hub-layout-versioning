{"version":3,"file":"static/js/98441.70f9d500.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/LRUCache.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{MemCacheStorage as t}from\"./MemCache.js\";class e{constructor(e,s){this._storage=new t,this._storage.maxSize=e,s&&this._storage.registerRemoveFunc(\"\",s)}put(t,e,s){this._storage.put(t,e,s,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import e from\"../../../../core/LRUCache.js\";import{getOrCreateMapValue as t}from\"../../../../core/MapUtils.js\";import{isSome as s,isNone as n}from\"../../../../core/maybe.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{getMetersPerVerticalUnitForSR as i}from\"../../../../core/unitUtils.js\";import{getMetersPerUnit as a}from\"../../../../symbols/support/unitConversionUtils.js\";function r(e=!1,t){if(e){const{elevationInfo:e,alignPointsInFeatures:s,spatialReference:n}=t;return new l(e,s,n)}return new c}class c{async alignCandidates(e,t){return e}notifyElevationSourceChange(){}}const h=1024;class l{constructor(t,s,n){this._elevationInfo=t,this._alignPointsInFeatures=s,this.spatialReference=n,this._alignmentsCache=new e(h),this._cacheVersion=0,this._metersPerVerticalUnit=i(n)}async alignCandidates(e,t){const n=this._elevationInfo;return s(n)&&\"absolute-height\"===n.mode&&!n.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(e,n),e):this._alignComputedElevationCandidates(e,t)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(e,t){const{offset:s,unit:o}=t;if(n(s))return;const i=s*(a(o??\"meters\")/this._metersPerVerticalUnit);for(const n of e)switch(n.type){case\"edge\":n.start.z+=i,n.end.z+=i;continue;case\"vertex\":n.target.z+=i;continue}}async _alignComputedElevationCandidates(e,s){const n=new Map;for(const o of e)t(n,o.objectId,p).push(o);const[i,a,r]=this._prepareQuery(n),c=await this._alignPointsInFeatures(i,s);o(s);if(r!==this._cacheVersion)return this._alignComputedElevationCandidates(e,s);this._applyCacheAndResponse(i,c,a);const{drapedObjectIds:h,failedObjectIds:l}=c,d=[];for(const t of e){const{objectId:e}=t;h.has(e)&&\"edge\"===t.type&&(t.draped=!0),l.has(e)||d.push(t)}return d}_prepareQuery(e){const t=[],s=[];for(const[n,o]of e){const e=[];for(const t of o)this._addToQueriesOrCachedResult(n,t.target,e,s),\"edge\"===t.type&&(this._addToQueriesOrCachedResult(n,t.start,e,s),this._addToQueriesOrCachedResult(n,t.end,e,s));0!==e.length&&t.push({objectId:n,points:e})}return[t,s,this._cacheVersion]}_addToQueriesOrCachedResult(e,t,n,o){const i=u(e,t),a=this._alignmentsCache.get(i);s(a)?o.push(new d(t,a)):n.push(t)}_applyCacheAndResponse(e,{elevations:t,drapedObjectIds:s,failedObjectIds:n},o){for(const r of o)r.apply();let i=0;const a=this._alignmentsCache;for(const{objectId:r,points:c}of e){if(n.has(r)){i+=c.length;continue}const e=!s.has(r);for(const s of c){const n=u(r,s),o=t[i++];s.z=o,e&&a.put(n,o,1)}}}}class d{constructor(e,t){this.point=e,this.z=t}apply(){this.point.z=this.z}}function u(e,{x:t,y:s,z:n}){return`${e}-${t}-${s}-${n??0}}`}function p(){return[]}export{r as getSnappingCandidateElevationAligner};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";class t{filter(t,n){return n}notifyElevationSourceChange(){}}class n{filter(t,n){const{point:r,distance:c}=t,{z:i}=r;if(!(null!=i))return n;if(0===n.length)return n;const o=s(c),u=this._updateCandidatesTo3D(n,r,o).filter(e);return u.sort(a),u}_updateCandidatesTo3D(t,n,e){for(const r of t)switch(r.type){case\"edge\":c(r,n,e);continue;case\"vertex\":o(r,n,e);continue}return t}}function e(t){return t.distance<=1}function r(e=!1){return e?new n:new t}function c(t,n,{x:e,y:r,z:c}){const{start:o,end:s,target:a}=t;t.draped||i(a,n,o,s);const u=(n.x-a.x)/e,d=(n.y-a.y)/r,f=(n.z-a.z)/c;t.distance=Math.sqrt(u*u+d*d+f*f)}function i(t,n,e,r){const c=r.x-e.x,i=r.y-e.y,o=r.z-e.z,s=c*c+i*i+o*o,a=(n.x-e.x)*c+(n.y-e.y)*i+o*(n.z-e.z),u=Math.min(1,Math.max(0,a/s)),d=e.x+c*u,f=e.y+i*u,x=e.z+o*u;t.x=d,t.y=f,t.z=x}function o(t,n,{x:e,y:r,z:c}){const{target:i}=t,o=(n.x-i.x)/e,s=(n.y-i.y)/r,a=(n.z-i.z)/c,u=Math.sqrt(o*o+s*s+a*a);t.distance=u}function s(t){return\"number\"==typeof t?{x:t,y:t,z:t}:t}function a(t,n){return t.distance-n.distance}export{r as getSnappingCandidateElevationFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import e from\"../../../../core/LRUCache.js\";import{throwIfAborted as s}from\"../../../../core/promiseUtils.js\";import{numericHash as o}from\"../../../../core/string.js\";function n(t=!1,e){return t?new i(e):new c}class c{async fetch(){return[]}notifySymbologyChange(){}}const r=1024;class i{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new e(r),this._cacheVersion=0}async fetch(e,o){if(0===e.length)return[];const n=[],c=[],r=this._candidatesCache;for(const s of e){const e=a(s),o=r.get(e);if(o)for(const s of o)c.push(t(s));else n.push(s),r.put(e,[],1)}if(0===n.length)return c;const i=this._cacheVersion,{candidates:h,sourceCandidateIndices:d}=await this._getSymbologyCandidates(n,o);s(o);if(i!==this._cacheVersion)return this.fetch(e,o);const f=[],{length:g}=h;for(let s=0;s<g;++s){const e=h[s],o=a(n[d[s]]),c=r.get(o);c.push(e),r.put(o,c,c.length),f.push(t(e))}return c.concat(f)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function a(t){switch(t.type){case\"vertex\":{const{objectId:e,target:s}=t,n=`${e}-vertex-${s.x}-${s.y}-${s.z??0}`;return o(n).toString()}case\"edge\":{const{objectId:e,start:s,end:n}=t,c=`${e}-edge-${s.x}-${s.y}-${s.z??0}-to-${n.x}-${n.y}-${n.z??0}`;return o(c).toString()}default:return\"\"}}export{n as getSymbologySnappingCandidatesFetcher};\n"],"names":["e","s","this","_storage","t","maxSize","registerRemoveFunc","put","pop","get","clearAll","destroy","set","r","elevationInfo","alignPointsInFeatures","n","spatialReference","l","c","_elevationInfo","_alignPointsInFeatures","_alignmentsCache","_cacheVersion","_metersPerVerticalUnit","i","mode","featureExpressionInfo","_alignAbsoluteElevationCandidates","_alignComputedElevationCandidates","clear","offset","o","unit","a","type","start","z","end","target","Map","objectId","p","push","_prepareQuery","_applyCacheAndResponse","h","drapedObjectIds","failedObjectIds","d","has","draped","_addToQueriesOrCachedResult","length","points","u","elevations","apply","point","x","y","distance","_updateCandidatesTo3D","filter","sort","Math","min","max","f","sqrt","_getSymbologyCandidates","_candidatesCache","candidates","sourceCandidateIndices","fetch","g","concat","toString"],"sourceRoot":""}