"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[24989],{24989:function(e,t,s){s.r(t),s.d(t,{arcgis_hub_discussions:function(){return T},arcgis_hub_discussions_map_action_notice:function(){return P},arcgis_hub_discussions_map_preview:function(){return Z}});var i=s(29439),n=s(74165),a=s(15861),r=s(15671),o=s(43144),c=s(93433),l=s(5692),u=s(81724),h=s(54825),d=s(13129),p=s(4541),g=s(16777),v=s(2001),b=s(33375),m=s(37330),f=s(12969),y=s(76880),D=s(13115),k=s(45958),w=s(23872),x=s(9618);s(39318),s(67450),s(89732),s(1319),s(47268),s(42377),s(98942),s(60415),s(29398),s(35137),s(16063),s(45059),s(73576),s(90494),s(59514),s(54805),s(7597),s(95101),s(58669),s(25240);function O(e,t){var s=!1,i=e.itemControl,n=e.owner,a=e.orgId,r=t.roleId,o=t.role,l=t.username,u=t.groups,h=t.orgId,d=(0,y.i)(["admin","update"],i)||!!n&&n===l||!!(!!a&&a===h)&&!r&&"org_admin"===o,p=function(e){var t=e.privileges,s=void 0===t?[]:t;return(0,y.i)(s,"portal:user:createItem")}(t);if(p&&d)s=!0;else if(p){var g=[].concat((0,c.Z)((0,D.g)(e,"groupIds")||[]),[(0,D.g)(e,"properties.collaborationGroupId")]);s=u.some((function(e){return(0,k.i)(e)&&(0,y.i)(g,e.id)}))}return s}var I=function(e,t,s,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(a<3?n(r):a>3?n(t,s,r):n(t,s))||r);return a>3&&r&&Object.defineProperty(t,s,r),r},T=function(){function e(t){(0,r.Z)(this,e),(0,l.r)(this,t),this.arcgisHubGeometryGoTo=(0,l.c)(this,"arcgisHubGeometryGoTo",7),this.arcgisHubDiscussionsFeature=(0,l.c)(this,"arcgisHubDiscussionsFeature",7),this.arcgisHubDiscussionsFeatureDeleted=(0,l.c)(this,"arcgisHubDiscussionsFeatureDeleted",7),this.arcgisHubGeometryFeatureSelect=(0,l.c)(this,"arcgisHubGeometryFeatureSelect",7),this.arcgisHubGeometryFeatureHover=(0,l.c)(this,"arcgisHubGeometryFeatureHover",7),this.arcgisHubGeometryDrawCreate=(0,l.c)(this,"arcgisHubGeometryDrawCreate",7),this.arcgisHubGeometryDrawTypeSelect=(0,l.c)(this,"arcgisHubGeometryDrawTypeSelect",7),this.arcgisHubGeometryDrawEdit=(0,l.c)(this,"arcgisHubGeometryDrawEdit",7),this.arcgisHubGeometryDrawEditCancel=(0,l.c)(this,"arcgisHubGeometryDrawEditCancel",7),this.arcgisHubGeometryDrawReset=(0,l.c)(this,"arcgisHubGeometryDrawReset",7),this.arcgisHubGeometrySelect=(0,l.c)(this,"arcgisHubGeometrySelect",7),this.arcgisHubGeometryDeselect=(0,l.c)(this,"arcgisHubGeometryDeselect",7),this.arcgisHubDiscussionsViewThread=(0,l.c)(this,"arcgisHubDiscussionsViewThread",7),this.arcgisHubDiscussionsDismiss=(0,l.c)(this,"arcgisHubDiscussionsDismiss",7),this.arcgisHubDiscussionsClose=(0,l.c)(this,"arcgisHubDiscussionsClose",7),this.arcgisHubFeatureRemove=(0,l.c)(this,"arcgisHubFeatureRemove",7),this.arcgisHubGeometryClearAll=(0,l.c)(this,"arcgisHubGeometryClearAll",7),this.hubTelemetry=(0,l.c)(this,"hubTelemetry",7),this.unsavedFeatures=[],this.unsavedRelatedFeatures=[],this.unsavedExistingFeatures=[],this.discussionDetails=null,this.error=null,this.optionsError=null,this.optionsSaving=!1,this.thread=null,this.previousThread=null,this.total=0,this.nextStart=1,this.loading=!0,this.showPostEditor=!1,this.showOptions=!1,(0,h.b)(this,"handleViewAllReplies","handleCheckStatus","handleResetThread","handleSelectThread","handleDOMReady","handleGeometryGoTo","handleNewPost","renderLoading","renderAddOrCreatePostButton","renderEmpty","renderPostEditor","renderThread","renderPostList","renderError","handleDiscussionOptionsClick","handleOptionsBack","checkIsMobile","handleSaveOptions","handleResetOptionsError"),this.observer=new MutationObserver(this.handleDOMReady)}return(0,o.Z)(e,[{key:"handlePostIdChange",value:function(e,t){var s,i;e&&e!==t&&e!==(null===(i=null===(s=this.thread)||void 0===s?void 0:s.postDetails)||void 0===i?void 0:i.postId)&&this.reinitialize()}},{key:"handleReplyIdChange",value:function(e,t){var s,i;e&&e!==t&&e!==(null===(i=null===(s=this.thread)||void 0===s?void 0:s.replyDetails)||void 0===i?void 0:i.postId)&&this.reinitialize()}},{key:"handleLocationIdChange",value:function(e,t){e&&e!==t&&this.reinitialize()}},{key:"componentWillLoad",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.i.loadIntlForComponent(this.element);case 2:this.intl=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidLoad",value:function(){this.observe()}},{key:"connectedCallback",value:function(){this.observe()}},{key:"disconnectedCallback",value:function(){this.disconnect()}},{key:"initialize",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.postId,s=this.replyId,i=this.locationId,a=this.context,this.loading=!0,this.error=null,e.prev=3,!(null===a||void 0===a?void 0:a.currentUser)){e.next=17;break}return e.next=7,this.fetchSubject();case 7:if(this.discussionDetails=e.sent,!t&&!s){e.next=12;break}this.initThread(),e.next=14;break;case 12:return e.next=14,this.initPostList();case 14:i&&(this.thread=null,this.enableGoTo=!0),e.next=18;break;case 17:this.resetState();case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),console.error("Failed to load discussions:",e.t0.message),this.error=e.t0;case 24:return e.prev=24,this.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[3,20,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"reinitialize",value:function(){this.initialize()}},{key:"resetState",value:function(){this.thread=null,this.nextStart=-1,this.total=0,this.error=null,this.loading=!1,this.discussionDetails=null,this.postAggregates=null,this.scrollTarget=null,this.optionsError=null,this.optionsSaving=!1,this.previousThread=null,this.showPostEditor=null,this.showOptions=null}},{key:"searchPostAggregates",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,s){var i,a,r,o,l,h,d,p,g,v,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.context,a=this.discussionDetails.discussion,r=this.locationId,o=this.postAggregates,l=void 0===o?[]:o,this.loading=!0,h=r?"".concat(a,"%?id=%").concat(r,"%"):"".concat(a,"%"),e.next=5,(0,u.b)(Object.assign(Object.assign(Object.assign({discussion:h},r?{parents:[]}:{parents:[""]}),{sortBy:u.P.UPDATED_AT,sortOrder:u.S.DESC,start:t}),i.hubRequestOptions));case 5:d=e.sent,p=d.nextStart,g=d.items,v=d.total,b=s?[].concat((0,c.Z)(l),(0,c.Z)(g)):g,this.postAggregates=b,this.nextStart=p,this.total=v,this.loading=!1;case 14:case"end":return e.stop()}}),e,this)})));return function(t,s){return e.apply(this,arguments)}}()},{key:"initThread",value:function(){var e=this.postId,t=this.replyId,s={channelDetails:{channelId:this.channelId},postDetails:{postId:e}};t&&(s.replyDetails={postId:t}),this.thread=s,this.previousThread=s}},{key:"initPostList",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.searchPostAggregates(1);case 3:this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.open.label.postList),{response:p.d.constants.response.SUCCESS})),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.open.label.postList),{response:p.d.constants.response.FAILURE})),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSubject",value:function(e){var t=this.discussion,s=this.context,i=this.locationId;return(0,u.h)(Object.assign({discussion:t,locationId:i,bust:e},s.hubRequestOptions))}},{key:"handleResetThread",value:function(){var e=this.postAggregates,t=this.thread,s=t.channelDetails,i=t.postDetails,n=t.replyDetails,a=this.arcgisHubDiscussionsViewThread;this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.open.label.thread),{postId:null===n||void 0===n?void 0:n.postId,parentId:i.postId,channelId:s.channel.id,channelAccess:s.channel.access})),this.thread=null,e||this.searchPostAggregates(1),a.emit({postId:null,channelId:null})}},{key:"observe",value:function(){var e=this.observer,t=this.element;e&&t&&e.observe(t,{subtree:!0,childList:!0,attributes:!0}),g.R.addHandler(window.document.body,this.checkIsMobile)}},{key:"disconnect",value:function(){var e=this.observer;e&&e.disconnect(),g.R.removeHandler(window.document.body,this.checkIsMobile)}},{key:"handleDOMReady",value:function(){this.scrollTarget&&(this.element.scrollTo({behavior:"smooth",left:this.scrollTarget.offsetLeft,top:this.scrollTarget.offsetTop}),this.scrollTarget=null)}},{key:"handleNewPost",value:function(){this.hubTelemetry.emit(p.d.dictionary.category.interaction.action.open.label.editor),this.showPostEditor=!0}},{key:"handlePostCancelled",value:function(e){e.stopPropagation(),this.showPostEditor=!1}},{key:"handleScrollTo",value:function(e){this.scrollTarget=e.target}},{key:"handleLoadMoreChange",value:function(e){e.stopPropagation();var t=e.detail;this.searchPostAggregates(t,!0)}},{key:"handlePostUpdated",value:function(e){e.stopPropagation();var t,s=this.thread,i=this.postAggregates,n=e.detail;s&&(t=Object.assign(Object.assign({},s),{postDetails:n}),this.thread=t),i&&(this.postAggregates=i.map((function(e){var s;return(null===(s=null===e||void 0===e?void 0:e.postDetails)||void 0===s?void 0:s.postId)===n.postId?t||Object.assign(Object.assign({},e),{postDetails:n}):e})))}},{key:"handleReplyUpdated",value:function(e){e.stopPropagation();var t,s=this.thread,i=this.postAggregates,n=e.detail;s&&(t=Object.assign(Object.assign({},s),{replyDetails:n}),this.thread=t),i&&(this.postAggregates=i.map((function(e){var s;return(null===(s=null===e||void 0===e?void 0:e.replyDetails)||void 0===s?void 0:s.postId)===n.postId?t||Object.assign(Object.assign({},e),{replyDetails:n}):e})))}},{key:"handleChannelUpdated",value:function(e){e.stopPropagation();var t,s=this.thread,i=this.postAggregates,n=e.detail,a=n.postId,r=n.channelDetails;if(s&&(t=Object.assign(Object.assign({},s),{channelDetails:r}),this.thread=t),i){this.postAggregates=i.map((function(e){return function(e){return Boolean(e.replyDetails)?e.replyDetails:e.postDetails}(e).postId===a?t||Object.assign(Object.assign({},e),{channelDetails:r}):e}))}}},{key:"handlePostCreated",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,i,a,r,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),s=t.detail,i=this.postAggregates,a=this.context,r=this.nextStart,e.next=5,(0,u.e)(Object.assign({channelDetails:{channelId:s.channelId}},a.hubRequestOptions));case 5:return o=e.sent,e.next=8,this.updateThreadOwnership({postDetails:{postId:s.id,post:s},channelDetails:o});case 8:l=e.sent,this.postAggregates=i?[l].concat((0,c.Z)(i)):[l],this.total+=1,r>-1&&(this.nextStart+=1),this.arcgisHubDiscussionsFeature.emit({post:s,create:!0});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePostDeleted",value:function(e){e.stopPropagation();var t=e.detail,s=this.postAggregates,i=this.thread,n=this.nextStart;i&&(this.thread=Object.assign(Object.assign({},i),{postDetails:Object.assign(Object.assign({},i.postDetails),{post:null})})),s&&(this.previousThread=null,this.total-=1,this.postAggregates=s.filter((function(e){return e.postDetails.post.id!==t.id})),n>-1&&(this.nextStart-=1)),this.deletedDuringSession=!0,this.arcgisHubDiscussionsFeatureDeleted.emit(t)}},{key:"handlePostEdited",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,i,r,o,c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),s=this.thread,i=this.postAggregates,r=this.context,o=t.detail,c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.n)(Object.assign({postDetails:Object.assign(Object.assign({},t.postDetails),{post:o}),includeReplyCount:!0},r.hubRequestOptions));case 2:return s=e.sent,e.abrupt("return",Object.assign(Object.assign({},t),{postDetails:s}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!s){e.next=9;break}return e.next=7,c(s);case 7:l=e.sent,this.thread=l;case 9:if(!i){e.next=13;break}return e.next=12,Promise.all(i.map((function(e){return e.postDetails.postId===o.id?l||c(e):e})));case 12:this.postAggregates=e.sent;case 13:this.arcgisHubDiscussionsFeature.emit({post:o,create:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateThreadOwnership",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,a,r,o,c,l,h,d,p,g,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.context,a=s.hubRequestOptions,r=s.currentUser.username,o=t.channelDetails,c=(0,i.Z)(o.groups,1),l=c[0].owner,h=o.channel,d=h.id,p=h.creator,g=t,p!==r||l===r){e.next=10;break}return g=(0,f.c)(t),e.next=7,(0,u.m)(Object.assign({channelId:d,params:{creator:l}},a));case 7:v=e.sent,g.channelDetails.channel=v,g.postDetails.post.channel=v;case 10:return e.abrupt("return",g);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleThreadSelected",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),(s=t.detail)?this.selectThread(s):this.handleResetThread();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeepLinkedThreadSelected",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),(s=t.detail)?this.selectThread(s,!0):this.handleResetThread();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectThread",value:function(e,t){var s=this.arcgisHubDiscussionsViewThread,i=this.postAggregates,n=this.shouldComminglePostList,a=Object.assign({},e);t||(delete a.replyDetails,(null===i||void 0===i?void 0:i.length)&&!n&&(this.postAggregates=i.map((function(e){return e.postDetails.postId===a.postDetails.postId?a:e})))),this.showPostEditor=!1,this.thread=a,this.previousThread=a,this.replyId=null,s.emit({postId:a.postDetails.postId,channelId:a.channelDetails.channelId})}},{key:"handleSelectThread",value:function(){var e=this.thread,t=e.channelDetails,s=e.postDetails,i=e.replyDetails;this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.open.label.thread),{postId:null===i||void 0===i?void 0:i.postId,parentId:s.postId,channelId:t.channel.id,channelAccess:t.channel.access})),this.selectThread(this.thread)}},{key:"handleReplyCreated",value:function(e){e.stopPropagation();var t=e.detail,s=this.thread,i=this.postAggregates,n=function(e){return Object.assign(Object.assign({},e),{postDetails:Object.assign(Object.assign({},e.postDetails),{post:Object.assign(Object.assign({},e.postDetails.post),{replyCount:e.postDetails.post.replyCount+1})})})};s&&(this.thread=n(s)),i&&(this.postAggregates=i.map((function(e){return e.replyDetails||e.postDetails.postId!==(t.parentId||(null===t||void 0===t?void 0:t.parent.id))?e:n(e)}))),this.arcgisHubDiscussionsFeature.emit({post:t,create:!0})}},{key:"handleReplyEdited",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,i,a,r,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),s=this.postAggregates,i=this.thread,a=this.context,r=t.detail,!(null===i||void 0===i?void 0:i.replyDetails)){e.next=8;break}return e.next=6,(0,u.n)(Object.assign({postDetails:Object.assign(Object.assign({},i.replyDetails),{post:r})},a.hubRequestOptions));case 6:o=e.sent,this.thread=Object.assign(Object.assign({},i),{replyDetails:o});case 8:s&&(c=this.postAggregates.find((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.replyDetails)||void 0===t?void 0:t.postId)===r.id})),c&&(c.replyDetails.post=Object.assign(Object.assign({},c.replyDetails.post),r))),this.arcgisHubDiscussionsFeature.emit({post:r,create:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleReplyDeleted",value:function(e){e.stopPropagation();var t=this.thread,s=this.postAggregates,i=e.detail,n=function(e){var t=Object.assign(Object.assign({},e),{postDetails:Object.assign(Object.assign({},e.postDetails),{post:e.postDetails.post?Object.assign(Object.assign({},e.postDetails.post),{replyCount:e.postDetails.post.replyCount-1}):e.postDetails.post})});return t.replyDetails&&(t.replyDetails=Object.assign(Object.assign({},t.replyDetails),{post:null})),t};t&&(this.thread=n(t)),s&&(this.postAggregates=s.map((function(e){return e.replyDetails||e.postDetails.postId!==(i.parentId||(null===i||void 0===i?void 0:i.parent.id))?e:n(e)})).filter((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.replyDetails)||void 0===t?void 0:t.postId)!==i.id}))),this.arcgisHubDiscussionsFeatureDeleted.emit(i)}},{key:"handleGeometryGoTo",value:function(){var e=this.thread;this.arcgisHubGeometryGoTo.emit(e)}},{key:"handleGeometryFeatureSelect",value:function(e){e.stopPropagation(),this.arcgisHubGeometryFeatureSelect.emit(e.detail)}},{key:"handleGeometryFeatureHover",value:function(e){e.stopPropagation(),this.arcgisHubGeometryFeatureHover.emit(e.detail)}},{key:"handleGeometryDrawCreate",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDrawCreate.emit(e.detail)}},{key:"handleGeometryDrawTypeSelect",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDrawTypeSelect.emit(e.detail)}},{key:"handleGeometryDrawEdit",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDrawEdit.emit(e.detail)}},{key:"handleGeometryDrawEditCancel",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDrawEditCancel.emit()}},{key:"handleGeometryDrawReset",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDrawReset.emit()}},{key:"handleGeometrySelect",value:function(e){e.stopPropagation(),this.arcgisHubGeometrySelect.emit(e.detail)}},{key:"handleGeometryDeselect",value:function(e){e.stopPropagation(),this.arcgisHubGeometryDeselect.emit()}},{key:"handleFeatureRemove",value:function(e){e.stopPropagation(),this.arcgisHubFeatureRemove.emit(e.detail)}},{key:"handleGeometryClearAll",value:function(e){e.stopPropagation(),this.arcgisHubGeometryClearAll.emit()}},{key:"handleCalcitePanelDismissedChange",value:function(e){e.stopPropagation(),this.arcgisHubDiscussionsDismiss.emit()}},{key:"handleCalcitePanelDismissChange",value:function(e){e.stopPropagation(),this.arcgisHubDiscussionsClose.emit()}},{key:"captureEmptyListImpression",value:function(){this.hubTelemetry.emit(p.d.dictionary.category.interaction.action.viewed.label.empty)}},{key:"handleViewAllReplies",value:function(){var e=this.thread,t=this.arcgisHubDiscussionsViewThread,s=Object.assign({},e);delete s.replyDetails,this.thread=s,this.replyId=null,t.emit({postId:e.postDetails.postId,channelId:e.channelDetails.channelId})}},{key:"handleCheckStatus",value:function(e){var t=this;e.preventDefault();var s=e.target;this.hubTelemetry.emit(p.d.dictionary.category.navigation.action.external.label.hubStatus),setTimeout((function(){return t.goToUrl(s.href)}),250)}},{key:"goToUrl",value:function(e){window.location.href=e}},{key:"checkIsMobile",value:function(){var e=window.document.body.clientWidth;this.isMobile=e<768}},{key:"handleDiscussionOptionsClick",value:function(){this.showOptions=!0,this.showPostEditor=!1,this.hubTelemetry.emit(p.d.dictionary.category.interaction.action.open.label.panel.details.discussionOptions)}},{key:"handleOptionsBack",value:function(){this.showOptions=!1}},{key:"updateDiscussionDetails",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchSubject(!0);case 2:this.discussionDetails=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSaveOptions",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,i,a,r,o,c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.discussionDetails,s=this.context,i=this.optionsElement,a=i.value,r=t.type===u.D.CONTENT?t.type:"groups",o=a?"allowDiscussions":"blockDiscussions",c=p.d.dictionary.category[r].action.update.label.settings.details[o],this.optionsSaving=!0,this.optionsError=null,e.prev=7,e.next=10,(0,u.u)(Object.assign({subject:t.reference,discussable:a},s.requestOptions));case 10:l=e.sent,this.hubTelemetry.emit(Object.assign(Object.assign({},c),{response:p.d.constants.response.SUCCESS})),this.discussionDetails=Object.assign(Object.assign({},t),{reference:l}),this.updateDiscussionDetails(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),this.hubTelemetry.emit(Object.assign(Object.assign({},c),{response:p.d.constants.response.FAILURE})),this.optionsError=e.t0;case 20:return e.prev=20,this.optionsSaving=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[7,16,20,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleResetOptionsError",value:function(){this.optionsError=null}},{key:"view",get:function(){var e=this.error,t=this.thread,s=this.postAggregates,i=this.showOptions,n=this.context;return(null===n||void 0===n?void 0:n.currentUser)?e?this.renderError:t||s?i?this.renderOptions:t?this.renderThread:this.renderPostList:this.renderLoading:this.renderRequiresAuth}},{key:"shouldRenderOptions",get:function(){var e=this.context,t=this.discussionDetails,s=!1;return this.dismissible||(s=(null===t||void 0===t?void 0:t.type)===u.D.CONTENT&&O(t.reference.item,e.currentUser)),s}},{key:"blockedNotice",get:function(){var e,t=this.discussionDetails;return t&&!(0,u.l)(t.reference)&&(e="group"===t.type?m.A.Group:m.A.Item),e}},{key:"shouldComminglePostList",get:function(){var e=this.locationId;return Boolean(e)}},{key:"renderRequiresAuth",value:function(){var e=this.intl;return(0,l.h)("section",{class:"requires-auth"},(0,l.h)("calcite-icon",{icon:"frown",scale:"l"}),(0,l.h)("header",null,e.t("auth.title")),(0,l.h)("p",null,e.t("auth.text")))}},{key:"renderEmpty",value:function(){var e=this.intl,t=this.deletedDuringSession,s=this.blockedNotice;return t||this.captureEmptyListImpression(),(0,l.h)("section",{class:"empty"},(0,l.h)("calcite-icon",{icon:"speech-bubble",scale:"l"}),(0,l.h)("header",null,e.t("emptyHeading")),(0,l.h)("p",null,e.t("emptyMessage")),(0,l.h)("calcite-button",{disabled:Boolean(s),onClick:this.handleNewPost,round:!0,scale:"l"},e.t("createPost")),s?(0,l.h)("arcgis-hub-discussions-blocked-notice",{variant:m.A.Item}):(0,l.h)("arcgis-hub-discussions-private-notice",null))}},{key:"renderOptions",value:function(){var e=this,t=this.discussionDetails,s=this.optionsSaving,i=this.intl,n=this.blockedNotice,a=this.optionsError;return(0,l.h)("calcite-panel",{"data-element":"discussions-options-panel",description:t.reference.title,disabled:s,heading:i.t("options.heading"),onCalcitePanelBackClick:this.handleOptionsBack,showBackButton:!0},(0,l.h)("div",null,(0,l.h)("arcgis-hub-discussions-options",{layout:"vertical",ref:function(t){e.optionsElement=t},value:!n,variant:t.type}),(0,l.h)("div",null,(0,l.h)("calcite-button",{loading:s,onClick:this.handleSaveOptions,round:!0,scale:"l",type:"submit"},i.t(s?"options.saving":"options.save"))),a&&(0,l.h)("calcite-notice",{active:!0,closable:!0,color:"red",onCalciteNoticeClose:this.handleResetOptionsError},(0,l.h)("header",{slot:"title"},i.t("options.failure.title")),(0,l.h)("p",{slot:"message"},i.t("options.failure.message")))))}},{key:"renderPostEditor",value:function(){var e=this.unsavedFeatures,t=this.discussionDetails,s=this.hasMap,i=this.context,n=this.unsavedRelatedFeatures,a=this.unsavedExistingFeatures,r=this.isMobile;return(0,l.h)(l.F,null,(0,l.h)("arcgis-hub-discussions-post-editor",{context:i,discussionDetails:t,hasMap:s,isMobile:r,slot:"list-before",unsavedExistingFeatures:a,unsavedFeatures:e,unsavedRelatedFeatures:n}),(0,l.h)("arcgis-hub-discussions-private-notice",{slot:"list-before"}))}},{key:"renderAddOrCreatePostButton",value:function(){var e=this.intl,t=this.handleNewPost,s=this.total,i=this.blockedNotice;return s?(0,l.h)(l.F,null,(0,l.h)("calcite-button",{appearance:"outline",color:"blue",disabled:Boolean(i),"icon-start":"speech-bubble-plus",onClick:t,scale:"l",slot:"list-before",type:"button",width:"auto"},e.t("addPost")),i?(0,l.h)("arcgis-hub-discussions-blocked-notice",{slot:"list-before",variant:m.A.Item}):(0,l.h)("arcgis-hub-discussions-private-notice",{slot:"list-before"})):this.renderEmpty()}},{key:"renderGoToAction",value:function(){var e=this.enableGoTo,t=this.intl;if(e)return(0,l.h)("calcite-action",{class:"discussions-go-to",onClick:this.handleGeometryGoTo,slot:"header-actions-end",text:t.t("showFullDiscussion")},(0,l.h)("calcite-icon",{class:"discussions-go-to-icon",icon:"extent",scale:"s"}))}},{key:"renderPostList",value:function(){var e,t=this.discussionDetails,s=this.context,i=this.hasMap,n=this.isHub,a=this.unsavedFeatures,r=this.unsavedRelatedFeatures,o=this.unsavedExistingFeatures,c=this.postAggregates,u=this.showPostEditor,h=this.nextStart,d=this.loading,p=this.previousThread,g=this.locationId,v=this.intl,b=this.shouldRenderOptions,m=this.isMobile,f=this.dismissible,y={"location-list":Boolean(g)},D=g&&(null===(e=t.displayField)||void 0===e?void 0:e.value)?t.displayField.value:v.t("list.heading"),k=g?v.t("location.summary"):null===t||void 0===t?void 0:t.reference.title;return(0,l.h)("calcite-panel",{closable:f,description:k,heading:D},this.renderGoToAction(),b&&(0,l.h)("calcite-action",{class:"discussions-options",onClick:this.handleDiscussionOptionsClick,slot:"header-actions-end",text:"Discussion Options"},(0,l.h)("calcite-icon",{class:"discussions-options-icon",icon:"gear",scale:"s"})),(0,l.h)("arcgis-hub-discussions-post-list",{class:y,context:s,discussionDetails:t,hasMap:i,isHub:n,isMobile:m,loading:d,nextStart:h,postAggregates:c,previousThread:p,unsavedExistingFeatures:o,unsavedFeatures:a,unsavedRelatedFeatures:r},!g&&(u?this.renderPostEditor():this.renderAddOrCreatePostButton())))}},{key:"renderLoading",value:function(){return(0,l.h)("calcite-loader",{active:!0,label:this.intl.t("loading"),scale:"m",type:"indeterminate"})}},{key:"renderError",value:function(){var e=this.intl;return(0,l.h)("section",null,(0,l.h)("calcite-icon",{icon:"frown",scale:"l"}),(0,l.h)("header",null,e.t("error.title")),(0,l.h)("p",null,e.t("error.text")),(0,l.h)("calcite-button",{appearance:"clear",color:"red",href:"https://hubstatus.arcgis.com/",onClick:this.handleCheckStatus,round:!0,scale:"l"},e.t("error.button")))}},{key:"renderThread",value:function(){var e=this.thread,t=this.context,s=this.hasMap,i=this.isHub,n=this.unsavedFeatures,a=this.unsavedRelatedFeatures,r=this.unsavedExistingFeatures,o=this.discussionDetails,c=this.dismissible,u=this.intl,h=this.handleResetThread,d=this.locationId,p=this.handleSelectThread,g=this.disableNavigation,v=this.isMobile,b="generic.heading",m="thread.summary",f=h;return(null===e||void 0===e?void 0:e.replyDetails)?(b="reply.heading",m="reply.summary",f=p):d&&(b="location.heading"),g&&(b="list.heading"),(0,l.h)("calcite-panel",{closable:c,description:u.t(m),heading:u.t(b),onCalcitePanelBackClick:f,showBackButton:!g},this.renderGoToAction(),(0,l.h)("arcgis-hub-discussions-thread",{context:t,discussionDetails:o,hasMap:s,isHub:i,isMobile:v,thread:e,unsavedExistingFeatures:r,unsavedFeatures:n,unsavedRelatedFeatures:a}))}},{key:"render",value:function(){return(0,l.h)(l.H,{"data-element":"discussions"},this.view())}},{key:"element",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{postId:["handlePostIdChange"],replyId:["handleReplyIdChange"],locationId:["handleLocationIdChange"],context:["initialize"]}}}]),e}();I([(0,v.D)({timeout:50})],T.prototype,"reinitialize",null),I([(0,v.D)({timeout:1e3})],T.prototype,"handleDOMReady",null),I([(0,b.c)()],T.prototype,"captureEmptyListImpression",null),I([(0,v.D)({timeout:250})],T.prototype,"checkIsMobile",null),T.style='.sc-arcgis-hub-discussions-h{display:block;height:100%;overflow:auto}section.sc-arcgis-hub-discussions{margin-top:1rem;margin-bottom:1rem;margin-left:0.75rem;margin-right:0.75rem;display:grid;gap:0.75rem;border-radius:0.25rem;padding:0.75rem;--tw-shadow:0 2px 8px 0 rgba(0, 0, 0, 0.12);--tw-shadow-colored:0 2px 8px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}header.sc-arcgis-hub-discussions{margin:0px;font-size:var(--calcite-font-size-1);line-height:1.5rem;font-weight:var(--calcite-font-weight-bold)}p.sc-arcgis-hub-discussions{margin:0px;font-size:var(--calcite-font-size--0);line-height:1.375rem}section.sc-arcgis-hub-discussions calcite-button.sc-arcgis-hub-discussions{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}calcite-button[icon-start="speech-bubble-plus"].sc-arcgis-hub-discussions{margin-top:1.5rem;margin-bottom:1.5rem;margin-left:1rem;margin-right:1rem;display:block}arcgis-hub-discussions-private-notice.sc-arcgis-hub-discussions,arcgis-hub-discussions-blocked-notice.sc-arcgis-hub-discussions{margin-left:1rem;margin-right:1rem;margin-bottom:1.5rem}.empty.sc-arcgis-hub-discussions arcgis-hub-discussions-private-notice.sc-arcgis-hub-discussions,.empty.sc-arcgis-hub-discussions arcgis-hub-discussions-blocked-notice.sc-arcgis-hub-discussions{margin:0px;margin-top:0.25rem}arcgis-hub-discussions-thread.sc-arcgis-hub-discussions{overflow:hidden;padding-top:1rem;padding-bottom:1rem}arcgis-hub-discussions-post-list.location-list.sc-arcgis-hub-discussions{padding-top:0.25rem;padding-bottom:0.25rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions{background-color:var(--calcite-ui-foreground-1);padding:1rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions div.sc-arcgis-hub-discussions{display:flex;justify-content:flex-end;padding-top:0.5rem}[data-element="discussions-options-panel"].sc-arcgis-hub-discussions>div.sc-arcgis-hub-discussions div.sc-arcgis-hub-discussions+calcite-notice.sc-arcgis-hub-discussions{margin-top:1rem;width:100%}.discussions-options.sc-arcgis-hub-discussions:active .discussions-options-icon.sc-arcgis-hub-discussions{--tw-text-opacity:1;color:rgb(21 21 21 / var(--tw-text-opacity))}.discussions-go-to.sc-arcgis-hub-discussions:active .discussions-go-to-icon.sc-arcgis-hub-discussions{--tw-text-opacity:1;color:rgb(21 21 21 / var(--tw-text-opacity))}';var H=function(e,t,s,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(a<3?n(r):a>3?n(t,s,r):n(t,s))||r);return a>3&&r&&Object.defineProperty(t,s,r),r},j="#9747FF",P=function(){function e(t){(0,r.Z)(this,e),(0,l.r)(this,t),this.arcgisHubDrawDone=(0,l.c)(this,"arcgisHubDrawDone",7),this.activeStyles={outline:".25rem solid ".concat(j),padding:".25rem",outlineOffset:"-.25rem"},(0,h.b)(this,"handleDone")}return(0,o.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.i.loadIntlForComponent(this.el);case 2:this.intl=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this._connect()}},{key:"disconnectedCallback",value:function(){this._disconnect()}},{key:"_connect",value:function(){var e=this,t=this.view,s=this.el,i=this.activeStyles;Object.keys(i).forEach((function(e){return t.ui.container.style[e]=i[e]})),t.ui.add(s),setTimeout((function(){e.isConnected=!0}),50)}},{key:"_disconnect",value:function(){var e=this.view,t=this.activeStyles,s=this.el;Object.keys(t).forEach((function(t){return e.ui.container.style.removeProperty(t)})),e.ui.remove(s),this.isConnected=!1}},{key:"handleDone",value:function(){this.arcgisHubDrawDone.emit()}},{key:"hasViewUI",get:function(){var e=this.view;return Boolean(e&&e.ui)}},{key:"styles",get:function(){return{"--display":this.isConnected?"block":"none","--hub-map-outline":j}}},{key:"render",value:function(){var e=this.intl,t=this.styles,s=this.isConnected;return(0,l.h)(l.H,{"aria-hidden":s,"data-element":"discussions-map-action-notice",style:t,tabindex:0},(0,l.h)("div",null,(0,l.h)("span",null,e.t("adding.notice")),(0,l.h)("calcite-button",{appearance:"outline",color:"neutral",onClick:this.handleDone,round:!0,scale:"s"},e.t("adding.action"))))}},{key:"el",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}}]),e}();H([(0,v.D)({timeout:100}),(0,w.C)({when:function(){return this.hasViewUI&&!this.isConnected}})],P.prototype,"_connect",null),H([(0,w.C)({when:function(){return this.hasViewUI&&this.isConnected}})],P.prototype,"_disconnect",null),P.style=':host{left:50%;width:auto;display:var(--display);transform:translate(-50%, 0)}:host([aria-hidden="true"]){display:none}div{border-bottom-right-radius:0.75rem;border-bottom-left-radius:0.75rem;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));background-color:var(--hub-map-outline);font-weight:var(--calcite-font-weight-bold);font-size:var(--calcite-font-size--1)}calcite-button{margin-left:1rem}';var C=function(e,t,s,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(r=(a<3?n(r):a>3?n(t,s,r):n(t,s))||r);return a>3&&r&&Object.defineProperty(t,s,r),r},Z=function(){function e(t){(0,r.Z)(this,e),(0,l.r)(this,t),this.arcgisHubDiscussionsViewFull=(0,l.c)(this,"arcgisHubDiscussionsViewFull",7),this.arcgisHubDiscussionsGeometryZoomTo=(0,l.c)(this,"arcgisHubDiscussionsGeometryZoomTo",7),this.arcgisHubDiscussionsPreviewDidRender=(0,l.c)(this,"arcgisHubDiscussionsPreviewDidRender",7),this.arcgisHubDiscussionsPreviewDismiss=(0,l.c)(this,"arcgisHubDiscussionsPreviewDismiss",7),this.hubTelemetry=(0,l.c)(this,"hubTelemetry",7),this.loading=!0,(0,h.b)(this,"handleViewFullThread","handleZoomTo","handleDismiss")}return(0,o.Z)(e,[{key:"creatorFullName",get:function(){var e=this.intl,t=this.thread.postDetails,s=t.creatorDetails.user,i=t.post,n=e.t("anonymous");return(s||(null===i||void 0===i?void 0:i.creator))&&(n=(null===s||void 0===s?void 0:s.fullName)||e.t("privateUser")),n}},{key:"componentWillLoad",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.i.loadIntlForComponent(this.element);case 2:this.intl=e.sent,this.initialize();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidRender",value:function(){this.arcgisHubDiscussionsPreviewDidRender.emit(this.element.offsetHeight)}},{key:"initialize",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.channelId,s=this.postId,i=this.replyId,a=this.locationId,!t||!(s||i||a)){e.next=15;break}if(this.loading=!0,!a||s){e.next=9;break}return e.next=6,this.fetchThreadByLocationId();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this.fetchThreadByIds();case 11:e.t0=e.sent;case 12:this.thread=e.t0,this.loading=!1,this.emitHubTelemetry(p.d.dictionary.category.interaction.action.open.label.popUp.details.post);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchThreadByLocationId",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,a,r,o,c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.locationId,s=this.context,a=this.discussion,r="".concat(a,"%?id=%").concat(t,"%"),e.next=4,(0,u.b)(Object.assign({discussion:r,parents:[],num:1,sortBy:u.P.UPDATED_AT,sortOrder:u.S.DESC,start:1},s.hubRequestOptions));case 4:return o=e.sent,c=(0,i.Z)(o.items,1),l=c[0],e.next=9,this.enrichThreadDetails(l);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchThreadByIds",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,s,i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.channelId,s=this.postId,i=this.replyId,e.next=3,this.enrichThreadDetails({channelDetails:{channelId:t},postDetails:{postId:s},replyDetails:i&&{postId:i}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enrichThreadDetails",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var s,a,r,o,c,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.context,a=t.channelDetails,r=t.postDetails,o=t.replyDetails,e.next=4,Promise.all([(0,u.e)(Object.assign({channelDetails:a},s.hubRequestOptions)),(0,u.n)(Object.assign({postDetails:r},s.hubRequestOptions)),o&&(0,u.n)(Object.assign({postDetails:o},s.hubRequestOptions))]);case 4:return c=e.sent,l=(0,i.Z)(c,3),a=l[0],r=l[1],o=l[2],e.abrupt("return",{channelDetails:a,postDetails:r,replyDetails:o});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"emitHubTelemetry",value:function(e){var t,s=this.thread,i=s.postDetails.postId,n=s.replyDetails,a=s.channelDetails,r=a.channelId,o=a.channel.access;this.hubTelemetry.emit(Object.assign(Object.assign({},e),{postId:null!==(t=null===n||void 0===n?void 0:n.postId)&&void 0!==t?t:i,parentId:(null===n||void 0===n?void 0:n.postId)?i:null,channelId:r,channelAccess:o}))}},{key:"handleViewFullThread",value:function(){this.emitHubTelemetry(p.d.dictionary.category.interaction.action.open.label.thread.details[this.locationId?"location":"post"]),this.arcgisHubDiscussionsViewFull.emit()}},{key:"handleZoomTo",value:function(){this.emitHubTelemetry(p.d.dictionary.category.interaction.action.zoom.label.in),this.arcgisHubDiscussionsGeometryZoomTo.emit(this.thread)}},{key:"handleDismiss",value:function(){this.emitHubTelemetry(p.d.dictionary.category.interaction.action.close.label.popUp.details.post),this.arcgisHubDiscussionsPreviewDismiss.emit()}},{key:"renderAvatars",value:function(){var e,t=this.context,s=this.thread,n=(0,i.Z)(s.channelDetails.groups,1)[0],a=s.postDetails,r=s.replyDetails,o=null!==r&&void 0!==r?r:a,c=t.session,u=c.portal,h=c.token,d=!o.creatorDetails.user&&o.post?{username:o.post.creator}:o.creatorDetails.user,p=[(0,l.h)("calcite-avatar",{"full-name":null===d||void 0===d?void 0:d.fullName,key:"creator",scale:"m",thumbnail:(null===d||void 0===d?void 0:d.thumbnail)&&(0,x.a)(u,d,h),"user-id":null===(e=d)||void 0===e?void 0:e.id,username:null===d||void 0===d?void 0:d.username})];return n&&p.push((0,l.h)("calcite-avatar",{"full-name":n.title,scale:"s",thumbnail:(0,x.g)(t.session.portal,n,t.session.token)})),p}},{key:"renderContent",value:function(){var e,t=this.thread,s=null!==(e=t.replyDetails)&&void 0!==e?e:t.postDetails;return(0,l.h)(l.F,null,(0,l.h)("div",{class:"avatars"},this.renderAvatars()),(0,l.h)("address",null,(0,l.h)("b",null,this.creatorFullName),(0,l.h)("span",null,"\xb7"),(0,l.h)("arcgis-relative-date",{dateTime:s.post.createdAt,formatStyle:"short"})),(0,l.h)("arcgis-multiline-ellipsis",{innerHTML:s.post.body,lines:2}),(0,l.h)("calcite-action-group",{id:"text-actions",layout:"horizontal"},(0,l.h)("calcite-action",{onClick:this.handleViewFullThread,scale:"s",text:this.intl.t("view"),textEnabled:!0}),!1,(0,l.h)("calcite-action",{onClick:this.handleDismiss,scale:"s",text:this.intl.t("dismiss"),textEnabled:!0})))}},{key:"renderLoading",value:function(){return(0,l.h)("arcgis-hub-discussions-post-skeleton",null)}},{key:"render",value:function(){return(0,l.h)(l.H,{"data-element":"discussions-map-preview"},this.loading?this.renderLoading():this.renderContent())}},{key:"element",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{channelId:["initialize"],postId:["initialize"],replyId:["initialize"],locationId:["initialize"]}}}]),e}();C([(0,v.D)({timeout:50})],Z.prototype,"initialize",null),Z.style=":host{display:block;background-color:var(--calcite-ui-foreground-1);padding:1rem;padding-bottom:0.5rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}address{margin-bottom:0.125rem;display:grid;font-size:var(--calcite-font-size--1);font-style:normal;line-height:1.25rem;grid-template-columns:minmax(0, -webkit-max-content) 1rem minmax(0, -webkit-max-content);grid-template-columns:minmax(0, max-content) 1rem minmax(0, max-content)}address b{font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}address span{display:flex;justify-content:center;color:var(--calcite-ui-text-2)}address arcgis-relative-date{color:var(--calcite-ui-text-2)}arcgis-multiline-ellipsis{font-size:var(--calcite-font-size-0);line-height:1.375}calcite-action-group{margin-left:2.75rem}.avatars{position:relative;grid-row:span 2 / span 2;float:left;margin-right:1.25rem;display:flex}.avatars calcite-avatar+calcite-avatar{position:absolute;top:1rem;left:1rem;z-index:10;border-radius:9999px;border:3px solid var(--calcite-ui-foreground-1)}@media only screen and (max-width: 640px){:host{border-radius:1.75rem}}@media only screen and (min-width: 640px){:host{border-radius:1.75rem 1.75rem 1.75rem 0}}"},33375:function(e,t,s){function i(){return function(e,t,s){var i=s.value,n="_".concat(t,"Called");Object.defineProperty(e,n,{writable:!0,value:!1});var a="_".concat(t,"Cache");return Object.defineProperty(e,a,{writable:!0}),Object.assign(Object.assign({},s),{value:function(){if(!this[n]){this[n]=!0;for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this[a]=i.apply(this,t)}return this[a]}})}}s.d(t,{c:function(){return i}})},23872:function(e,t,s){function i(e){return function(t,s,i){var n=i.value,a=e.when;return Object.assign(Object.assign({},i),{value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var i=a.apply(this,t);if(i)return n.apply(this,t)}})}}s.d(t,{C:function(){return i}})},2001:function(e,t,s){function i(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(i){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];clearTimeout(t),t=setTimeout((function(){return e.apply(i,a)}),s)}}function n(e){return function(t,s,n){var a=n.value,r="".concat(s.toString(),"Debounced");return Object.assign(Object.assign({},n),{value:function(){this[r]||Object.defineProperty(this,r,{value:i(a,e.timeout)});for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];this[r].apply(this,[this].concat(s))}})}}s.d(t,{D:function(){return n}})},45958:function(e,t,s){function i(e){return e.capabilities.includes("updateitemcontrol")}s.d(t,{i:function(){return i}})},16777:function(e,t,s){s.d(t,{R:function(){return a}});var i=s(15671),n=s(43144),a=function(){function e(){(0,i.Z)(this,e),this.resizeObserver=new ResizeObserver(this.onResize.bind(this)),this.handlers=new WeakMap}return(0,n.Z)(e,[{key:"addHandler",value:function(e,t){this.handlers.has(e)||(this.handlers.set(e,[]),this.resizeObserver.observe(e));var s=this.handlers.get(e);s.includes(t)||s.push(t)}},{key:"removeHandler",value:function(e,t){if(this.handlers.has(e)){var s=this.handlers.get(e),i=s.indexOf(t),n=s.filter((function(e,t){return t!==i}));n.length?this.handlers.set(e,n):(this.handlers.delete(e),this.resizeObserver.unobserve(e))}}},{key:"unobserve",value:function(e){this.handlers.has(e)&&(this.handlers.delete(e),this.resizeObserver.unobserve(e))}},{key:"onResize",value:function(e){var t=this;requestAnimationFrame((function(s){e.forEach((function(e){var s;(null!==(s=t.handlers.get(e.target))&&void 0!==s?s:[]).forEach((function(e){return e()}))}))}))}}],[{key:"create",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"addHandler",value:function(e,t){this.create(),this.instance.addHandler(e,t)}},{key:"removeHandler",value:function(e,t){this.instance&&this.instance.removeHandler(e,t)}},{key:"unobserve",value:function(e){this.instance&&this.instance.unobserve(e)}}]),e}()},37330:function(e,t,s){s.d(t,{A:function(){return n},a:function(){return r}});var i,n,a=s(4942);!function(e){e.Item="item",e.EditPost="edit.post",e.EditPostGroup="edit.post.group",e.EditPostItem="edit.post.item",e.EditReply="reply.post",e.EditReplyGroup="edit.reply.group",e.EditReplyItem="edit.reply.item",e.Group="group",e.Reply="reply"}(n||(n={}));var r=(i={},(0,a.Z)(i,n.Item,{title:"item.title",message:"item.message"}),(0,a.Z)(i,n.EditPost,{title:"post.title",message:"post.message"}),(0,a.Z)(i,n.EditPostGroup,{title:"post.title",message:"post.message.group"}),(0,a.Z)(i,n.EditPostItem,{title:"post.title",message:"post.message.item"}),(0,a.Z)(i,n.EditReply,{title:"reply.title",message:"reply.message"}),(0,a.Z)(i,n.EditReplyGroup,{title:"reply.title",message:"reply.message.group"}),(0,a.Z)(i,n.EditReplyItem,{title:"reply.title",message:"reply.message.item"}),(0,a.Z)(i,n.Group,{title:"group.title",message:"group.message"}),(0,a.Z)(i,n.Reply,{title:"reply.title.generic",message:"reply.message.generic"}),i)},9618:function(e,t,s){s.d(t,{a:function(){return h},b:function(){return l},e:function(){return r},g:function(){return u},r:function(){return c},v:function(){return o}});var i=s(12969),n=s(25240),a={arcgis:{label:"ArcGIS Online",url:"https://www.arcgis.com",type:"arcgis"},arcgisQA:{label:"ArcGIS Online QAEXT",url:"https://qaext.arcgis.com",type:"arcgis"},arcgisDEV:{label:"ArcGIS Online DEVEXT",url:"https://devext.arcgis.com",type:"arcgis"},hub:{label:"ArcGIS Hub",url:"https://hub.arcgis.com/api",type:"arcgis-hub"},hubDEV:{label:"ArcGIS Hub DEV",url:"https://hubdev.arcgis.com/api",type:"arcgis-hub"},hubQA:{label:"ArcGIS Hub QA",url:"https://hubqa.arcgis.com/api",type:"arcgis-hub"}};function r(e){return"string"===typeof e&&e in a?a[e]:e}function o(e){var t={};return Array.isArray(e)?t={any:e}:("string"===typeof e&&(t={any:[e]}),"object"===typeof e&&(t=e)),t}function c(e){var t=new Date,s={type:"date-range",from:t.getTime(),to:t.getTime()};switch(e.unit){case"hours":case"days":case"weeks":s.from=s.to-{min:6e4,hours:36e5,days:864e5,weeks:6048e5}[e.unit]*e.num;break;case"months":t.setMonth(t.getMonth()-e.num),s.from=t.getTime();break;case"years":t.setFullYear(t.getFullYear()-e.num),s.from=t.getTime()}return s}function l(e,t,s,a){var r=(0,i.c)(e);return e.authentication&&(r.authentication=n.U.deserialize(e.authentication.serialize())),r.start=t>-1?t:s+1,function(e){return e&&(r.authentication=e),a(r)}}function u(e,t,s){var i=null;return t.thumbnail&&(i="".concat(e,"/community/groups/").concat(t.id,"/info/").concat(t.thumbnail),s&&"public"!==t.access&&(i="".concat(i,"?token=").concat(s))),i}function h(e,t,s){var i=null;return t.thumbnail&&(i="".concat(e,"/community/users/").concat(t.username,"/info/").concat(t.thumbnail),s&&"public"!==t.access&&(i="".concat(i,"?token=").concat(s))),i}}}]);
//# sourceMappingURL=24989.9876b44e.chunk.js.map