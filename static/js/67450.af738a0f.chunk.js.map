{"version":3,"file":"static/js/67450.af738a0f.chunk.js","mappings":"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","sources":["../node_modules/@esri/hub-components/dist/esm/request-c15cc2af.js"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/* Copyright (c) 2017 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n/**\n * Checks parameters to see if we should use FormData to send the request\n * @param params The object whose keys will be encoded.\n * @return A boolean indicating if FormData will be required.\n */\nfunction requiresFormData(params) {\n    return Object.keys(params).some(function (key) {\n        var value = params[key];\n        if (!value) {\n            return false;\n        }\n        if (value && value.toParam) {\n            value = value.toParam();\n        }\n        var type = value.constructor.name;\n        switch (type) {\n            case \"Array\":\n                return false;\n            case \"Object\":\n                return false;\n            case \"Date\":\n                return false;\n            case \"Function\":\n                return false;\n            case \"Boolean\":\n                return false;\n            case \"String\":\n                return false;\n            case \"Number\":\n                return false;\n            default:\n                return true;\n        }\n    });\n}\n/**\n * Converts parameters to the proper representation to send to the ArcGIS REST API.\n * @param params The object whose keys will be encoded.\n * @return A new object with properly encoded values.\n */\nfunction processParams(params) {\n    var newParams = {};\n    Object.keys(params).forEach(function (key) {\n        var _a, _b;\n        var param = params[key];\n        if (param && param.toParam) {\n            param = param.toParam();\n        }\n        if (!param &&\n            param !== 0 &&\n            typeof param !== \"boolean\" &&\n            typeof param !== \"string\") {\n            return;\n        }\n        var type = param.constructor.name;\n        var value;\n        // properly encodes objects, arrays and dates for arcgis.com and other services.\n        // ported from https://github.com/Esri/esri-leaflet/blob/master/src/Request.js#L22-L30\n        // also see https://github.com/Esri/arcgis-rest-js/issues/18:\n        // null, undefined, function are excluded. If you want to send an empty key you need to send an empty string \"\".\n        switch (type) {\n            case \"Array\":\n                // Based on the first element of the array, classify array as an array of arrays, an array of objects\n                // to be stringified, or an array of non-objects to be comma-separated\n                // eslint-disable-next-line no-case-declarations\n                var firstElementType = (_b = (_a = param[0]) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name;\n                value =\n                    firstElementType === \"Array\" ? param : // pass thru array of arrays\n                        firstElementType === \"Object\" ? JSON.stringify(param) : // stringify array of objects\n                            param.join(\",\"); // join other types of array elements\n                break;\n            case \"Object\":\n                value = JSON.stringify(param);\n                break;\n            case \"Date\":\n                value = param.valueOf();\n                break;\n            case \"Function\":\n                value = null;\n                break;\n            case \"Boolean\":\n                value = param + \"\";\n                break;\n            default:\n                value = param;\n                break;\n        }\n        if (value || value === 0 || typeof value === \"string\" || Array.isArray(value)) {\n            newParams[key] = value;\n        }\n    });\n    return newParams;\n}\n\n/* Copyright (c) 2017 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n/**\n * Encodes keys and parameters for use in a URL's query string.\n *\n * @param key Parameter's key\n * @param value Parameter's value\n * @returns Query string with key and value pairs separated by \"&\"\n */\nfunction encodeParam(key, value) {\n    // For array of arrays, repeat key=value for each element of containing array\n    if (Array.isArray(value) && value[0] && Array.isArray(value[0])) {\n        return value.map(function (arrayElem) { return encodeParam(key, arrayElem); }).join(\"&\");\n    }\n    return encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\n}\n/**\n * Encodes the passed object as a query string.\n *\n * @param params An object to be encoded.\n * @returns An encoded query string.\n */\nfunction encodeQueryString(params) {\n    var newParams = processParams(params);\n    return Object.keys(newParams)\n        .map(function (key) {\n        return encodeParam(key, newParams[key]);\n    })\n        .join(\"&\");\n}\n\n/* Copyright (c) 2017 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n/**\n * Encodes parameters in a [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData) object in browsers or in a [FormData](https://github.com/form-data/form-data) in Node.js\n *\n * @param params An object to be encoded.\n * @returns The complete [FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData) object.\n */\nfunction encodeFormData(params, forceFormData) {\n    // see https://github.com/Esri/arcgis-rest-js/issues/499 for more info.\n    var useFormData = requiresFormData(params) || forceFormData;\n    var newParams = processParams(params);\n    if (useFormData) {\n        var formData_1 = new FormData();\n        Object.keys(newParams).forEach(function (key) {\n            if (typeof Blob !== \"undefined\" && newParams[key] instanceof Blob) {\n                /* To name the Blob:\n                 1. look to an alternate request parameter called 'fileName'\n                 2. see if 'name' has been tacked onto the Blob manually\n                 3. if all else fails, use the request parameter\n                */\n                var filename = newParams[\"fileName\"] || newParams[key].name || key;\n                formData_1.append(key, newParams[key], filename);\n            }\n            else {\n                formData_1.append(key, newParams[key]);\n            }\n        });\n        return formData_1;\n    }\n    else {\n        return encodeQueryString(params);\n    }\n}\n\n/* Copyright (c) 2017 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n// TypeScript 2.1 no longer allows you to extend built in types. See https://github.com/Microsoft/TypeScript/issues/12790#issuecomment-265981442\n// and https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n//\n// This code is from MDN https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types.\nvar ArcGISRequestError = /** @class */ (function () {\n    /**\n     * Create a new `ArcGISRequestError`  object.\n     *\n     * @param message - The error message from the API\n     * @param code - The error code from the API\n     * @param response - The original response from the API that caused the error\n     * @param url - The original url of the request\n     * @param options - The original options and parameters of the request\n     */\n    function ArcGISRequestError(message, code, response, url, options) {\n        message = message || \"UNKNOWN_ERROR\";\n        code = code || \"UNKNOWN_ERROR_CODE\";\n        this.name = \"ArcGISRequestError\";\n        this.message =\n            code === \"UNKNOWN_ERROR_CODE\" ? message : code + \": \" + message;\n        this.originalMessage = message;\n        this.code = code;\n        this.response = response;\n        this.url = url;\n        this.options = options;\n    }\n    return ArcGISRequestError;\n}());\nArcGISRequestError.prototype = Object.create(Error.prototype);\nArcGISRequestError.prototype.constructor = ArcGISRequestError;\n\n/* Copyright (c) 2017-2018 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\nvar NODEJS_DEFAULT_REFERER_HEADER = \"@esri/arcgis-rest-js\";\nvar DEFAULT_ARCGIS_REQUEST_OPTIONS = {\n    httpMethod: \"POST\",\n    params: {\n        f: \"json\",\n    },\n};\nvar ArcGISAuthError = /** @class */ (function (_super) {\n    __extends(ArcGISAuthError, _super);\n    /**\n     * Create a new `ArcGISAuthError`  object.\n     *\n     * @param message - The error message from the API\n     * @param code - The error code from the API\n     * @param response - The original response from the API that caused the error\n     * @param url - The original url of the request\n     * @param options - The original options of the request\n     */\n    function ArcGISAuthError(message, code, response, url, options) {\n        if (message === void 0) { message = \"AUTHENTICATION_ERROR\"; }\n        if (code === void 0) { code = \"AUTHENTICATION_ERROR_CODE\"; }\n        var _this = _super.call(this, message, code, response, url, options) || this;\n        _this.name = \"ArcGISAuthError\";\n        _this.message =\n            code === \"AUTHENTICATION_ERROR_CODE\" ? message : code + \": \" + message;\n        return _this;\n    }\n    ArcGISAuthError.prototype.retry = function (getSession, retryLimit) {\n        var _this = this;\n        if (retryLimit === void 0) { retryLimit = 3; }\n        var tries = 0;\n        var retryRequest = function (resolve, reject) {\n            getSession(_this.url, _this.options)\n                .then(function (session) {\n                var newOptions = __assign(__assign({}, _this.options), { authentication: session });\n                tries = tries + 1;\n                return request(_this.url, newOptions);\n            })\n                .then(function (response) {\n                resolve(response);\n            })\n                .catch(function (e) {\n                if (e.name === \"ArcGISAuthError\" && tries < retryLimit) {\n                    retryRequest(resolve, reject);\n                }\n                else if (e.name === \"ArcGISAuthError\" && tries >= retryLimit) {\n                    reject(_this);\n                }\n                else {\n                    reject(e);\n                }\n            });\n        };\n        return new Promise(function (resolve, reject) {\n            retryRequest(resolve, reject);\n        });\n    };\n    return ArcGISAuthError;\n}(ArcGISRequestError));\n/**\n * Checks for errors in a JSON response from the ArcGIS REST API. If there are no errors, it will return the `data` passed in. If there is an error, it will throw an `ArcGISRequestError` or `ArcGISAuthError`.\n *\n * @param data The response JSON to check for errors.\n * @param url The url of the original request\n * @param params The parameters of the original request\n * @param options The options of the original request\n * @returns The data that was passed in the `data` parameter\n */\nfunction checkForErrors(response, url, params, options, originalAuthError) {\n    // this is an error message from billing.arcgis.com backend\n    if (response.code >= 400) {\n        var message = response.message, code = response.code;\n        throw new ArcGISRequestError(message, code, response, url, options);\n    }\n    // error from ArcGIS Online or an ArcGIS Portal or server instance.\n    if (response.error) {\n        var _a = response.error, message = _a.message, code = _a.code, messageCode = _a.messageCode;\n        var errorCode = messageCode || code || \"UNKNOWN_ERROR_CODE\";\n        if (code === 498 ||\n            code === 499 ||\n            messageCode === \"GWM_0003\" ||\n            (code === 400 && message === \"Unable to generate token.\")) {\n            if (originalAuthError) {\n                throw originalAuthError;\n            }\n            else {\n                throw new ArcGISAuthError(message, errorCode, response, url, options);\n            }\n        }\n        throw new ArcGISRequestError(message, errorCode, response, url, options);\n    }\n    // error from a status check\n    if (response.status === \"failed\" || response.status === \"failure\") {\n        var message = void 0;\n        var code = \"UNKNOWN_ERROR_CODE\";\n        try {\n            message = JSON.parse(response.statusMessage).message;\n            code = JSON.parse(response.statusMessage).code;\n        }\n        catch (e) {\n            message = response.statusMessage || response.message;\n        }\n        throw new ArcGISRequestError(message, code, response, url, options);\n    }\n    return response;\n}\n/**\n * ```js\n * import { request } from '@esri/arcgis-rest-request';\n * //\n * request('https://www.arcgis.com/sharing/rest')\n *   .then(response) // response.currentVersion === 5.2\n * //\n * request('https://www.arcgis.com/sharing/rest', {\n *   httpMethod: \"GET\"\n * })\n * //\n * request('https://www.arcgis.com/sharing/rest/search', {\n *   params: { q: 'parks' }\n * })\n *   .then(response) // response.total => 78379\n * ```\n * Generic method for making HTTP requests to ArcGIS REST API endpoints.\n *\n * @param url - The URL of the ArcGIS REST API endpoint.\n * @param requestOptions - Options for the request, including parameters relevant to the endpoint.\n * @returns A Promise that will resolve with the data from the response.\n */\nfunction request(url, requestOptions) {\n    if (requestOptions === void 0) { requestOptions = { params: { f: \"json\" } }; }\n    var options = __assign(__assign(__assign({ httpMethod: \"POST\" }, DEFAULT_ARCGIS_REQUEST_OPTIONS), requestOptions), {\n        params: __assign(__assign({}, DEFAULT_ARCGIS_REQUEST_OPTIONS.params), requestOptions.params),\n        headers: __assign(__assign({}, DEFAULT_ARCGIS_REQUEST_OPTIONS.headers), requestOptions.headers),\n    });\n    var missingGlobals = [];\n    var recommendedPackages = [];\n    // don't check for a global fetch if a custom implementation was passed through\n    if (!options.fetch && typeof fetch !== \"undefined\") {\n        options.fetch = fetch.bind(Function(\"return this\")());\n    }\n    else {\n        missingGlobals.push(\"`fetch`\");\n        recommendedPackages.push(\"`node-fetch`\");\n    }\n    if (typeof Promise === \"undefined\") {\n        missingGlobals.push(\"`Promise`\");\n        recommendedPackages.push(\"`es6-promise`\");\n    }\n    if (typeof FormData === \"undefined\") {\n        missingGlobals.push(\"`FormData`\");\n        recommendedPackages.push(\"`isomorphic-form-data`\");\n    }\n    if (!options.fetch ||\n        typeof Promise === \"undefined\" ||\n        typeof FormData === \"undefined\") {\n        throw new Error(\"`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing \" + missingGlobals.join(\", \") + \". We recommend installing the \" + recommendedPackages.join(\", \") + \" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.\");\n    }\n    var httpMethod = options.httpMethod, authentication = options.authentication, rawResponse = options.rawResponse;\n    var params = __assign({ f: \"json\" }, options.params);\n    var originalAuthError = null;\n    var fetchOptions = {\n        method: httpMethod,\n        /* ensures behavior mimics XMLHttpRequest.\n        needed to support sending IWA cookies */\n        credentials: options.credentials || \"same-origin\",\n    };\n    // the /oauth2/platformSelf route will add X-Esri-Auth-Client-Id header\n    // and that request needs to send cookies cross domain\n    // so we need to set the credentials to \"include\"\n    if (options.headers &&\n        options.headers[\"X-Esri-Auth-Client-Id\"] &&\n        url.indexOf(\"/oauth2/platformSelf\") > -1) {\n        fetchOptions.credentials = \"include\";\n    }\n    return (authentication\n        ? authentication.getToken(url, { fetch: options.fetch }).catch(function (err) {\n            /**\n             * append original request url and requestOptions\n             * to the error thrown by getToken()\n             * to assist with retrying\n             */\n            err.url = url;\n            err.options = options;\n            /**\n             * if an attempt is made to talk to an unfederated server\n             * first try the request anonymously. if a 'token required'\n             * error is thrown, throw the UNFEDERATED error then.\n             */\n            originalAuthError = err;\n            return Promise.resolve(\"\");\n        })\n        : Promise.resolve(\"\"))\n        .then(function (token) {\n        if (token.length) {\n            params.token = token;\n        }\n        if (authentication && authentication.getDomainCredentials) {\n            fetchOptions.credentials = authentication.getDomainCredentials(url);\n        }\n        // Custom headers to add to request. IRequestOptions.headers with merge over requestHeaders.\n        var requestHeaders = {};\n        if (fetchOptions.method === \"GET\") {\n            // Prevents token from being passed in query params when hideToken option is used.\n            /* istanbul ignore if - window is always defined in a browser. Test case is covered by Jasmine in node test */\n            if (params.token &&\n                options.hideToken &&\n                // Sharing API does not support preflight check required by modern browsers https://developer.mozilla.org/en-US/docs/Glossary/Preflight_request\n                typeof window === \"undefined\") {\n                requestHeaders[\"X-Esri-Authorization\"] = \"Bearer \" + params.token;\n                delete params.token;\n            }\n            // encode the parameters into the query string\n            var queryParams = encodeQueryString(params);\n            // dont append a '?' unless parameters are actually present\n            var urlWithQueryString = queryParams === \"\" ? url : url + \"?\" + encodeQueryString(params);\n            if (\n            // This would exceed the maximum length for URLs specified by the consumer and requires POST\n            (options.maxUrlLength &&\n                urlWithQueryString.length > options.maxUrlLength) ||\n                // Or if the customer requires the token to be hidden and it has not already been hidden in the header (for browsers)\n                (params.token && options.hideToken)) {\n                // the consumer specified a maximum length for URLs\n                // and this would exceed it, so use post instead\n                fetchOptions.method = \"POST\";\n                // If the token was already added as a Auth header, add the token back to body with other params instead of header\n                if (token.length && options.hideToken) {\n                    params.token = token;\n                    // Remove existing header that was added before url query length was checked\n                    delete requestHeaders[\"X-Esri-Authorization\"];\n                }\n            }\n            else {\n                // just use GET\n                url = urlWithQueryString;\n            }\n        }\n        /* updateResources currently requires FormData even when the input parameters dont warrant it.\n    https://developers.arcgis.com/rest/users-groups-and-items/update-resources.htm\n        see https://github.com/Esri/arcgis-rest-js/pull/500 for more info. */\n        var forceFormData = new RegExp(\"/items/.+/updateResources\").test(url);\n        if (fetchOptions.method === \"POST\") {\n            fetchOptions.body = encodeFormData(params, forceFormData);\n        }\n        // Mixin headers from request options\n        fetchOptions.headers = __assign(__assign({}, requestHeaders), options.headers);\n        /* istanbul ignore next - karma reports coverage on browser tests only */\n        if (typeof window === \"undefined\" && !fetchOptions.headers.referer) {\n            fetchOptions.headers.referer = NODEJS_DEFAULT_REFERER_HEADER;\n        }\n        /* istanbul ignore else blob responses are difficult to make cross platform we will just have to trust the isomorphic fetch will do its job */\n        if (!requiresFormData(params) && !forceFormData) {\n            fetchOptions.headers[\"Content-Type\"] =\n                \"application/x-www-form-urlencoded\";\n        }\n        return options.fetch(url, fetchOptions);\n    })\n        .then(function (response) {\n        if (!response.ok) {\n            // server responded w/ an actual error (404, 500, etc)\n            var status_1 = response.status, statusText = response.statusText;\n            throw new ArcGISRequestError(statusText, \"HTTP \" + status_1, response, url, options);\n        }\n        if (rawResponse) {\n            return response;\n        }\n        switch (params.f) {\n            case \"json\":\n                return response.json();\n            case \"geojson\":\n                return response.json();\n            case \"html\":\n                return response.text();\n            case \"text\":\n                return response.text();\n            /* istanbul ignore next blob responses are difficult to make cross platform we will just have to trust that isomorphic fetch will do its job */\n            default:\n                return response.blob();\n        }\n    })\n        .then(function (data) {\n        if ((params.f === \"json\" || params.f === \"geojson\") && !rawResponse) {\n            var response = checkForErrors(data, url, params, options, originalAuthError);\n            if (originalAuthError) {\n                /* If the request was made to an unfederated service that\n                didn't require authentication, add the base url and a dummy token\n                to the list of trusted servers to avoid another federation check\n                in the event of a repeat request */\n                var truncatedUrl = url\n                    .toLowerCase()\n                    .split(/\\/rest(\\/admin)?\\/services\\//)[0];\n                options.authentication.federatedServers[truncatedUrl] = {\n                    token: [],\n                    // default to 24 hours\n                    expires: new Date(Date.now() + 86400 * 1000),\n                };\n                originalAuthError = null;\n            }\n            return response;\n        }\n        else {\n            return data;\n        }\n    });\n}\n\nexport { ArcGISAuthError as A, NODEJS_DEFAULT_REFERER_HEADER as N, __assign as _, encodeQueryString as e, request as r };\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","arguments","length","prototype","call","apply","this","requiresFormData","params","keys","some","key","value","toParam","constructor","name","processParams","newParams","forEach","_a","_b","param","firstElementType","JSON","stringify","join","valueOf","isArray","encodeParam","map","arrayElem","encodeURIComponent","encodeQueryString","ArcGISRequestError","message","code","response","url","options","originalMessage","create","Error","NODEJS_DEFAULT_REFERER_HEADER","DEFAULT_ARCGIS_REQUEST_OPTIONS","httpMethod","f","ArcGISAuthError","_super","_this","__","__extends","retry","getSession","retryLimit","tries","retryRequest","resolve","reject","then","session","newOptions","authentication","request","catch","e","Promise","requestOptions","headers","missingGlobals","recommendedPackages","fetch","push","bind","Function","FormData","rawResponse","originalAuthError","fetchOptions","method","credentials","indexOf","getToken","err","token","getDomainCredentials","requestHeaders","hideToken","window","urlWithQueryString","maxUrlLength","forceFormData","RegExp","test","body","useFormData","formData_1","Blob","filename","append","encodeFormData","referer","ok","status_1","status","statusText","json","text","blob","data","error","messageCode","errorCode","parse","statusMessage","checkForErrors","truncatedUrl","toLowerCase","split","federatedServers","expires","Date","now"],"sourceRoot":""}