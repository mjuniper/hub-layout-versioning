"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[99322],{99322:function(t,e,a){a.r(e),a.d(e,{arcgis_hub_date_range_picker:function(){return c}});var n=a(74165),s=a(15861),i=a(15671),o=a(43144),r=a(5692),u=a(13129),l=a(54825),c=(a(7597),function(){function t(e){(0,i.Z)(this,t),(0,r.r)(this,e),this.arcgisHubDateRangePickerSelect=(0,r.c)(this,"arcgisHubDateRangePickerSelect",7),(0,l.b)("handleCalciteInputDatePickerRef")}return(0,o.Z)(t,[{key:"handleSelectedValueChange",value:function(){(!this.isCustom||this.customStartDate&&this.customEndDate)&&this.arcgisHubDateRangePickerSelect.emit({name:this.selectedValue,startDate:this.startDate,endDate:this.endDate})}},{key:"handleCalciteDrodownSelect",value:function(){this.selectedValue=this.dropdownEl.selectedItems[0].dataset.value}},{key:"handleCalciteDatePickerRangeChange",value:function(t){var e=t.detail,a=e.startDate,n=e.endDate;this.customStartDate=a,this.customEndDate=n}},{key:"setDropdownEl",value:function(t){this.dropdownEl=t}},{key:"isCustom",get:function(){return"custom"===this.selectedValue}},{key:"startDate",get:function(){var t;return null===(t=this.dateRangeOptions[this.selectedValue])||void 0===t?void 0:t.startDate}},{key:"endDate",get:function(){var t;return(null===(t=this.dateRangeOptions[this.selectedValue])||void 0===t?void 0:t.endDate)||new Date}},{key:"dateRangeOptions",get:function(){var t=(new Date).getDate(),e=(new Date).getMonth();return{today:{startDate:new Date((new Date).setHours(0,0,0,0))},yesterday:{startDate:new Date(new Date((new Date).setDate(t-1)).setHours(0,0,0,0)),endDate:new Date(new Date((new Date).setDate(t-1)).setHours(23,59,59,999))},last7Days:{startDate:new Date((new Date).setDate(t-7))},last30Days:{startDate:new Date((new Date).setDate(t-30))},thisMonth:{startDate:new Date(new Date((new Date).setDate(1)).setHours(0,0,0,0))},lastMonth:{startDate:new Date(new Date(new Date((new Date).setMonth(e-1)).setDate(1)).setHours(0,0,0,0)),endDate:new Date(new Date((new Date).setDate(0)).setHours(23,59,59,999))},pastYear:{startDate:new Date((new Date).setMonth(e-12))},custom:{startDate:this.customStartDate,endDate:this.customEndDate}}}},{key:"componentWillLoad",value:function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.i.loadIntlForComponent(this.element);case 2:this.intl=t.sent,"string"===typeof this.value?(this.selectedValue=this.value,this.isCustom&&(this.customStartDate=null,this.customEndDate=null)):(null===(e=this.value)||void 0===e?void 0:e.length)&&(this.selectedValue="custom",this.customStartDate=new Date(this.value[0]),this.customEndDate=new Date(this.value[1]));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleCalciteInputDatePickerRef",value:function(t){if(t.shadowRoot&&!t.shadowRoot.querySelector("style[data-hub]")){var e=document.createElement("style");e.dataset.hub="",e.innerHTML=".menu-container { pointer-events: auto !important; }",t.shadowRoot.appendChild(e)}}},{key:"renderDropdown",value:function(){var t=this;return(0,r.h)("calcite-dropdown",{ref:this.setDropdownEl.bind(this)},(0,r.h)("calcite-button",{"icon-end":"caret-down",slot:"dropdown-trigger"},this.isCustom?null:this.intl.t("".concat(this.selectedValue||"default"))),(0,r.h)("calcite-dropdown-group",{"selection-mode":"single"},Object.keys(this.dateRangeOptions).map((function(e){return(0,r.h)("calcite-dropdown-item",{active:e===t.selectedValue,"data-value":e,key:e},t.intl.t("".concat(e)))}))))}},{key:"render",value:function(){return(0,r.h)(r.H,{"data-element":"date-range-picker"},this.isCustom?(0,r.h)(r.F,null,(0,r.h)("calcite-input-date-picker",{endAsDate:this.customEndDate,"intl-next-month":this.intl.t("nextMonth"),"intl-prev-month":this.intl.t("previousMonth"),"intl-year":this.intl.t("year"),locale:this.intl.locale,max:this.max,min:this.min,range:!0,ref:this.handleCalciteInputDatePickerRef,role:"application",startAsDate:this.customStartDate}),this.renderDropdown()):this.renderDropdown())}},{key:"element",get:function(){return(0,r.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{selectedValue:["handleSelectedValueChange"],customStartDate:["handleSelectedValueChange"],customEndDate:["handleSelectedValueChange"]}}}]),t}());c.style=":host{display:flex}:host calcite-input-date-picker{width:auto}"},54825:function(t,e,a){a.d(e,{b:function(){return n}});var n=function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];a.forEach((function(e){if("function"!==typeof t[e])throw new Error("Cannot bind context. ".concat(e," must be a function"));t[e]=t[e].bind(t)}))}}}]);
//# sourceMappingURL=99322.2dad763a.chunk.js.map