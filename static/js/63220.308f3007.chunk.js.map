{"version":3,"file":"static/js/63220.308f3007.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/vec4f64.js","../node_modules/@arcgis/core/renderers/support/heatmapUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t){const r=n(),e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function i(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const l=a(),_=o(),N=s(),O=i(),T=c(),U=f(),b=Object.freeze(Object.defineProperty({__proto__:null,ONES:_,UNIT_W:U,UNIT_X:N,UNIT_Y:O,UNIT_Z:T,ZEROS:l,clone:t,create:n,createView:u,fromArray:e,fromValues:r,ones:o,unitW:f,unitX:s,unitY:i,unitZ:c,zeros:a},Symbol.toStringTag,{value:\"Module\"}));export{_ as O,N as U,l as Z,u as a,e as b,n as c,t as d,i as e,r as f,c as g,f as h,O as i,T as j,U as k,o,s as u,b as v,a as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{px2pt as r,pt2px as n}from\"../../core/screenUtils.js\";import{l as o}from\"../../chunks/vec4.js\";import{c as e}from\"../../chunks/vec4f64.js\";const a=2.4;function i(t){return r(t*a)}function c(t){return n(t)/a}function f(r,n,e,a){let{color:i,ratio:c}=n,{color:f,ratio:u}=e;if(u===c){const t=1e-6;1===u?c-=t:u+=t}const s=t((a-c)/(u-c),0,1);o(r,i.toArray(),f.toArray(),s)}function u(t){const r=512,n=new Uint8ClampedArray(4*r);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return n;let o=t[0],a=t[0],i=1;const c=e();for(let e=0;e<r;e++){const u=(e+.5)/r;for(;u>a.ratio&&i<t.length;)o=a,a=t[i++];f(c,o,a,u),n.set(c,4*e)}return n}function s(t,r,o,e){const{radius:a,fieldOffset:i,field:c}=r,f=Math.round(n(a)),u=new Float64Array(o*e);let s,l=Number.NEGATIVE_INFINITY;const h=d(c,i),y=new Set;for(const n of t){const t=n.getCursor();for(;t.next();){const r=t.getObjectId();if(y.has(r))continue;y.add(r);const n=t.readLegacyPointGeometry(),a=128;if(n.x<-a||n.x>=o+a||n.y<-a||n.y>e+a)continue;const i=+h(t),c=Math.max(0,Math.round(n.x)-f),d=Math.max(0,Math.round(n.y)-f),g=Math.min(e,Math.round(n.y)+f),A=Math.min(o,Math.round(n.x)+f);for(let t=d;t<g;t++)for(let r=c;r<A;r++){const e=t*o+r,a=m(n.x-r,n.y-t,f);s=u[e]+=a*i,s>l&&(l=s)}}}return{matrix:u.buffer,max:l}}function l(t,r,n,o,e,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);const i=t.getImageData(0,0,r,r);n&&o&&i.data.set(new Uint8ClampedArray(h(r,n,o,e,a))),t.putImageData(i,0,0)}function h(r,n,o,e,a){const i=new Uint32Array(r*r),c=\"buffer\"in n?n:new Float64Array(n),f=\"buffer\"in o?new Uint32Array(o.buffer):new Uint32Array(new Uint8Array(o).buffer),u=f.length/(a-e);for(let s=0;s<c.length;s++){const r=c[s],n=Math.floor((r-e)*u);i[s]=f[t(n,0,f.length-1)]}return i.buffer}function m(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function y(t,r){return\"function\"==typeof t?t:t?\"string\"==typeof r?r=>-1*+r[t]:n=>+n[t]+r:()=>1}function d(t,r){return null!=t?\"string\"==typeof r?r=>-1*+r.readAttribute(t):n=>+n.readAttribute(t)+r:t=>1}export{a as MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR,s as calculateHeatmapIntensityInfoReaders,h as createHeatmapImageData,y as createValueFunction,d as createValueFunctionCursor,l as drawHeatmap,m as evaluateDensityKernel,i as gaussianBlurRadiusPxToKernelDensityRadiusPt,u as generateGradient,c as kernelDensityRadiusPtToGaussianBlurRadiusPx};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get(\"tileStore.tileScheme.spatialReference\");return e&&e.toJSON()||null}};e([r({readOnly:!0})],s.prototype,\"supportsTileUpdates\",null),e([r({constructOnly:!0})],s.prototype,\"remoteClient\",void 0),e([r({constructOnly:!0})],s.prototype,\"service\",void 0),e([r()],s.prototype,\"spatialReference\",null),e([r({constructOnly:!0})],s.prototype,\"tileInfo\",void 0),e([r({constructOnly:!0})],s.prototype,\"tileStore\",void 0),s=e([o(\"esri.views.2d.layers.features.processors.BaseProcessor\")],s);const p=s;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t,applySome as s}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{diff as i}from\"../../../../../core/accessorSupport/diffUtils.js\";import{calculateHeatmapIntensityInfoReaders as o}from\"../../../../../renderers/support/heatmapUtils.js\";import{TILE_SIZE as a}from\"../../../engine/webgl/definitions.js\";import n from\"./BaseProcessor.js\";import{getPow2NeighborKey as d}from\"../support/tileUtils.js\";class p{constructor(e,t){this.offset=e,this.extent=t}}function c(e){const t=e.key,s=new Map,r=256,i=a,o=e.tileInfoView.tileInfo.isWrappable;return s.set(d(t,-1,-1,o).id,new p([-i,-i],[i-r,i-r,i,i])),s.set(d(t,0,-1,o).id,new p([0,-i],[0,i-r,i,i])),s.set(d(t,1,-1,o).id,new p([i,-i],[0,i-r,r,i])),s.set(d(t,-1,0,o).id,new p([-i,0],[i-r,0,i,i])),s.set(d(t,1,0,o).id,new p([i,0],[0,0,r,i])),s.set(d(t,-1,1,o).id,new p([-i,i],[i-r,0,i,r])),s.set(d(t,0,1,o).id,new p([0,i],[0,0,i,r])),s.set(d(t,1,1,o).id,new p([i,i],[0,0,r,r])),s}let l=class extends n{constructor(){super(...arguments),this.type=\"heatmap\",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on(\"update\",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];if(\"heatmap\"!==s.type)return;i(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t})}async onTileMessage(e,r,i){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const a=this._tileKeyToFeatureSets.get(e.key.id);if(a&&t(r.addOrUpdate)&&r.addOrUpdate.hasFeatures&&a.set(r.addOrUpdate.instance,r),r.end){const t=[],r=c(e);this._tileKeyToFeatureSets.forEach(((i,o)=>{if(o===e.key.id)i.forEach((e=>s(e.addOrUpdate,(e=>t.push(e)))));else if(r.has(o)){const e=r.get(o),[a,n]=e.offset;i.forEach((e=>s(e.addOrUpdate,(e=>{const s=e.transform(a,n,1,1);t.push(s)}))))}}));const a=o(t,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:a},d=[a.matrix];return this.remoteClient.invoke(\"tileRenderer.onTileData\",n,{...i,transferList:d})}}onTileError(e,t,s){return this.remoteClient.invoke(\"tileRenderer.onTileError\",{tileKey:e.id,error:t},s)}};l=e([r(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")],l);const h=l;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}export{o as getPow2NeighborKey};\n"],"names":["n","t","r","e","Math","min","length","u","Float64Array","a","o","s","i","c","f","l","_","N","O","T","U","Object","freeze","defineProperty","__proto__","ONES","UNIT_W","UNIT_X","UNIT_Y","UNIT_Z","ZEROS","clone","create","createView","fromArray","fromValues","ones","unitW","unitX","unitY","unitZ","zeros","Symbol","toStringTag","value","color","ratio","toArray","Uint8ClampedArray","filter","sort","map","max","set","radius","fieldOffset","field","round","Number","NEGATIVE_INFINITY","h","readAttribute","d","y","Set","getCursor","next","getObjectId","has","add","readLegacyPointGeometry","x","g","A","m","matrix","buffer","canvas","width","height","clearRect","getImageData","data","Uint32Array","Uint8Array","floor","putImageData","sqrt","PI","get","this","toJSON","readOnly","prototype","constructOnly","p","offset","extent","key","Map","tileInfoView","tileInfo","isWrappable","id","arguments","type","_tileKeyToFeatureSets","handles","tileStore","on","onTileUpdate","bind","schema","processors","_schema","mesh","removed","delete","remoteClient","invoke","tileKey","clear","addOrUpdate","hasFeatures","instance","end","forEach","push","transform","intensityInfo","transferList","error","level","col","w","row","world"],"sourceRoot":""}