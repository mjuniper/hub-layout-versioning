{"version":3,"file":"static/js/80010.76a16ec1.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/assetEditingSupport.js","../node_modules/@arcgis/core/layers/support/infoFor3D.js","../node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nvar E;!function(E){E[E.PROJECT_VERTICES=1]=\"PROJECT_VERTICES\"}(E||(E={}));export{E as AssetMapEditFlags};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nvar _;!function(_){_.GLTF_BINARY=\"3D_glb\",_.GLTF_JSON=\"3D_gltf\"}(_||(_={}));export{_ as AssetType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import{isSome as s,isNone as i}from\"../../core/maybe.js\";import{dataComponents as o}from\"../../core/urlUtils.js\";import{generateUUID as n}from\"../../core/uuid.js\";import{normalizeCentralMeridian as d}from\"../../geometry/support/normalizeUtils.js\";import{AssetMapEditFlags as l}from\"./assetEditingSupport.js\";import{isEditBusLayer as u,editEventBus as p}from\"../mixins/EditBusLayer.js\";import{AssetType as c}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as h,getEffectiveLayerCapabilities as m}from\"../support/layerUtils.js\";function y(e){return e&&null!=e.applyEdits}async function f(e,t,a,s={}){let i,o;const n={edits:a,result:new Promise(((e,t)=>{i=e,o=t}))};e.emit(\"apply-edits\",n);try{const{results:o,edits:n}=await g(e,t,a,s),d=e=>e.filter((e=>!e.error)).map(r),l={edits:n,addedFeatures:d(o.addFeatureResults),updatedFeatures:d(o.updateFeatureResults),deletedFeatures:d(o.deleteFeatureResults),addedAttachments:d(o.addAttachmentResults),updatedAttachments:d(o.updateAttachmentResults),deletedAttachments:d(o.deleteAttachmentResults),exceededTransferLimit:!1};return o.editedFeatureResults?.length&&(l.editedFeatures=o.editedFeatureResults),(l.addedFeatures.length||l.updatedFeatures.length||l.deletedFeatures.length||l.addedAttachments.length||l.updatedAttachments.length||l.deletedAttachments.length)&&(e.emit(\"edits\",l),u(e)&&p.emit(\"edits\",{layer:e,event:l})),i(l),o}catch(d){throw o(d),d}}async function g(e,t,r,s){if(await e.load(),!y(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!h(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:o}=await b(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,o)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function b(e,r,i){const o=r&&(r.addFeatures||r.updateFeatures||r.deleteFeatures),n=r&&(r.addAttachments||r.updateAttachments||r.deleteAttachments),d=s(e.infoFor3D);if(!r||!o&&!n)throw new a(`${e.type}-layer:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");const l=m(e);if(!l.data.isVersioned&&i?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!l.editing.supportsRollbackOnFailure&&i?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");if(!l.editing.supportsGlobalId&&i?.globalIdUsed)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!l.editing.supportsGlobalId&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!i?.globalIdUsed&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");const u={...i};if(null!=u.rollbackOnFailureEnabled||l.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),!1===u.rollbackOnFailureEnabled&&\"original-and-current-features\"===u.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.\");if(!l.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(u.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==u.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const p={...r};if(p.addFeatures=r&&t.isCollection(r.addFeatures)?r.addFeatures.toArray():p.addFeatures||[],p.updateFeatures=r&&t.isCollection(r.updateFeatures)?r.updateFeatures.toArray():p.updateFeatures||[],p.deleteFeatures=r&&t.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():p.deleteFeatures||[],p.addFeatures.length&&!l.operations.supportsAdd)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support adding features.\");if(p.updateFeatures.length&&!l.operations.supportsUpdate)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support updating features.\");if(p.deleteFeatures.length&&!l.operations.supportsDelete)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support deleting features.\");p.addAttachments=p.addAttachments||[],p.updateAttachments=p.updateAttachments||[],p.deleteAttachments=p.deleteAttachments||[],p.addFeatures=p.addFeatures.map(S),p.updateFeatures=p.updateFeatures.map(S),p.addAssets=[];const c=i?.globalIdUsed||d;p.addFeatures.forEach((t=>F(t,e,c))),p.updateFeatures.forEach((t=>v(t,e,c))),p.deleteFeatures.forEach((t=>A(t,e,c))),p.addAttachments.forEach((t=>I(t,e))),p.updateAttachments.forEach((t=>I(t,e))),d&&await $(p,e);return{edits:await E(p),options:u}}function w(e,t,r){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Feature should have 'globalId' when 'globalIdUsed' is true\");if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(\"geometry\"in e&&s(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function F(e,t,a){w(e,t,a)}function A(e,t,a){w(e,t,a)}function v(e,t,r){w(e,t,r);const i=m(t);if(\"geometry\"in e&&s(e.geometry)&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function I(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=o(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}async function E(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await d(r),i=t.length,o=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+o).forEach(((e,t)=>a[t].geometry=e)),e}function S(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function $(e,t){if(i(t.infoFor3D))return;const{infoFor3D:a}=t;let r=!1;for(const i of a.editFormats)if(i===c.GLTF_BINARY){r=!0;break}const s=[];for(const i of e.addFeatures??[])s.push(R(i,e,t,r));for(const i of e.updateFeatures??[])s.push(R(i,e,t,r));const o=await Promise.allSettled(s);for(const i of o)if(\"rejected\"===i.status)throw i.reason}async function R(e,t,r,o){if(i(e.geometry)||\"mesh\"!==e.geometry.type)return;const d=e.geometry,u=r.globalIdField;if(s(r.parsedUrl)&&s(d.external)&&Array.isArray(d.external.source)&&1===d.external.source.length&&\"source\"in d.external.source[0]&&\"string\"==typeof d.external.source[0].source&&d.external.source[0].source.startsWith(r.parsedUrl.path))return;if(!o)throw new a(`${r.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");const p=await d.toBinaryGLTF({ignoreLocalTransform:!0}),h=await p.buffer(),m=`{${n()}}`,y=`${m}.glb`;t.addAssets?.push({featureGlobalId:e.getAttribute(u),assetMapGlobalId:m,assetName:y,flags:s(d.transform)&&d.transform.geographic?l.PROJECT_VERTICES:0,data:h.data,mimeType:h.type,assetType:c.GLTF_BINARY,feature:e})}export{f as applyEdits};\n"],"names":["E","PROJECT_VERTICES","_","GLTF_BINARY","GLTF_JSON","y","e","applyEdits","f","t","a","s","n","edits","result","Promise","i","o","emit","g","results","d","filter","error","map","r","l","addedFeatures","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","exceededTransferLimit","editedFeatureResults","length","editedFeatures","u","p","layer","event","load","type","h","b","options","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","m","data","isVersioned","gdbVersion","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsGlobalId","globalIdUsed","returnServiceEditsOption","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","S","addAssets","c","forEach","F","v","A","I","$","w","attributes","globalIdField","globalId","geometry","hasZ","capabilities","supportsZ","hasM","supportsM","supportsGeometryUpdate","feature","attachment","uploadId","File","name","supportsUploadWithItemId","isBase64","concat","slice","editFormats","push","R","allSettled","status","reason","parsedUrl","external","Array","isArray","source","startsWith","path","toBinaryGLTF","ignoreLocalTransform","buffer","featureGlobalId","getAttribute","assetMapGlobalId","assetName","flags","transform","geographic","mimeType","assetType"],"sourceRoot":""}