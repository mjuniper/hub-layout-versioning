"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[24832],{44925:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:function(){return n}})},84397:function(e,t,r){r.d(t,{c:function(){return n},g:function(){return i}});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},77178:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(37762),i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=r(80987),c=r(92026),d=(r(93169),r(10064),r(32718),r(3073),r(27088)),y=r(49861),p=(r(25243),r(63780),r(69912)),f=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).getCollections=null,n}return(0,o.Z)(r,[{key:"initialize",value:function(){var e=this;this.own((0,d.EH)((function(){return e._refresh()})))}},{key:"destroy",value:function(){this.getCollections=null}},{key:"_refresh",value:function(){var e=(0,c.pC)(this.getCollections)?this.getCollections():null;if((0,c.Wi)(e))this.removeAll();else{var t,r=0,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;(0,c.pC)(o)&&(r=this._processCollection(r,o))}}catch(a){i.e(a)}finally{i.f()}this.splice(r,this.length)}}},{key:"_createNewInstance",value:function(e){return new u.Z(e)}},{key:"_processCollection",value:function(e,t){if(!t)return e;var r,i=this.itemFilterFunction?this.itemFilterFunction:function(e){return!!e},o=(0,n.Z)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a){if(i(a)){var l=this.indexOf(a,e);l>=0?l!==e&&this.reorder(a,e):this.add(a,e),++e}if(this.getChildrenFunction){var s=this.getChildrenFunction(a);if(Array.isArray(s)){var u,c=(0,n.Z)(s);try{for(c.s();!(u=c.n()).done;){var d=u.value;e=this._processCollection(e,d)}}catch(y){c.e(y)}finally{c.f()}}else e=this._processCollection(e,s)}}}}catch(y){o.e(y)}finally{o.f()}return e}}]),r}(u.Z);(0,s._)([(0,y.Cb)()],f.prototype,"getCollections",void 0),(0,s._)([(0,y.Cb)()],f.prototype,"getChildrenFunction",void 0),(0,s._)([(0,y.Cb)()],f.prototype,"itemFilterFunction",void 0);var v=f=(0,s._)([(0,p.j)("esri.core.CollectionFlattener")],f)},49901:function(e,t,r){r.d(t,{G:function(){return l}});var n=r(29439),i=r(15671),o=r(43144),a=r(10064),l=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";(0,i.Z)(this,e),this.major=t,this.minor=r,this._context=n}return(0,o.Z)(e,[{key:"lessThan",value:function(e,t){return this.major<e||e===this.major&&this.minor<t}},{key:"since",value:function(e,t){return!this.lessThan(e,t)}},{key:"validate",value:function(e){if(this.major!==e.major){var t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new a.Z(t+"unsupported-version","Required major ".concat(r,"version is '").concat(this.major,"', but got '${version.major}.${version.minor}'"),{version:e})}}},{key:"clone",value:function(){return new e(this.major,this.minor,this._context)}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("."),o=(0,n.Z)(i,2),l=o[0],s=o[1],u=/^\s*\d+\s*$/;if(!l||!l.match||!l.match(u))throw new a.Z((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s||!s.match||!s.match(u))throw new a.Z((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});var c=parseInt(l,10),d=parseInt(s,10);return new e(c,d,r)}}]),e}()},48732:function(e,t,r){r.d(t,{Hg:function(){return b},V7:function(){return h},uD:function(){return v},xb:function(){return m}});var n=r(4942),i=r(37762),o=r(85015),a=r(80987),l=r(92026),s=r(23879),u=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function c(e){return e instanceof o.Z}function d(e){return e instanceof a.Z?Object.keys(e.items):c(e)?(0,s.vw)(e).keys():e?Object.keys(e):[]}function y(e,t){return e instanceof a.Z?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function f(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=d(e),a=d(t);if(0!==o.length||0!==a.length){if(!o.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var s,v=a.filter((function(e){return!o.includes(e)})),h=o.filter((function(e){return!a.includes(e)})),b=o.filter((function(r){return a.includes(r)&&y(e,r)!==y(t,r)})).concat(v,h).sort(),m=p(e);if(m&&u.includes(m)&&b.length)return{type:"complete",oldValue:e,newValue:t};var g,S=c(e)&&c(t),w=(0,i.Z)(b);try{for(w.s();!(g=w.n()).done;){var _=g.value,Z=y(e,_),I=y(t,_),C=void 0;if((S||"function"!=typeof Z&&"function"!=typeof I)&&Z!==I&&(null!=Z||null!=I)){if(r&&r[_]&&"function"==typeof r[_])C=r[_](Z,I);else if(Z instanceof Date&&I instanceof Date){if(Z.getTime()===I.getTime())continue;C={type:"complete",oldValue:Z,newValue:I}}else C="object"==typeof Z&&"object"==typeof I&&p(Z)===p(I)?f(Z,I):{type:"complete",oldValue:Z,newValue:I};(0,l.pC)(C)&&((0,l.pC)(s)?s.diff[_]=C:s={type:"partial",diff:(0,n.Z)({},_,C)})}}}catch(k){w.e(k)}finally{w.f()}return s}}function v(e,t){if((0,l.Wi)(e))return!1;var r,n=t.split("."),o=e,a=(0,i.Z)(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var u=o.diff[s];if(!u)return!1;o=u}}catch(c){a.e(c)}finally{a.f()}return!0}function h(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(v(e,r.value))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}function b(e,t){if(!("function"==typeof e||"function"==typeof t||(0,l.Wi)(e)&&(0,l.Wi)(t)))return(0,l.Wi)(e)||(0,l.Wi)(t)||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:f(e,t)}function m(e){if((0,l.Wi)(e))return!0;switch(e.type){case"complete":return!1;case"collection":var t,r=e,n=(0,i.Z)(r.added);try{for(n.s();!(t=n.n()).done;){if(!m(t.value))return!1}}catch(d){n.e(d)}finally{n.f()}var o,a=(0,i.Z)(r.removed);try{for(a.s();!(o=a.n()).done;){if(!m(o.value))return!1}}catch(d){a.e(d)}finally{a.f()}var s,u=(0,i.Z)(r.changed);try{for(u.s();!(s=u.n()).done;){if(!m(s.value))return!1}}catch(d){u.e(d)}finally{u.f()}return!0;case"partial":for(var c in e.diff)if(!m(e.diff[c]))return!1;return!0}}},93002:function(e,t,r){r.d(t,{G:function(){return c},w:function(){return y}});var n=r(93433),i=r(74165),o=r(15861),a=r(14921),l=r(80987),s=r(54472),u=r(92026);function c(e,t){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:return e.abrupt("return",y(t,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return p.apply(this,arguments)}function p(){return p=(0,o.Z)((0,i.Z)().mark((function e(t,r){var c,d,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],d=function e(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var d=a[o];(0,u.Wi)(d)||(Array.isArray(d)?e.apply(void 0,(0,n.Z)(d)):l.Z.isCollection(d)?d.forEach((function(t){return e(t)})):s.Z.isLoadable(d)&&c.push(d))}},r(d),y=null,e.next=5,(0,a.UI)(c,function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.q6)(f(t)?t.loadAll():t.load());case 2:!1!==(r=e.sent).ok||y||(y=r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:if(!y){e.next=7;break}throw y.error;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return"loadAll"in e&&"function"==typeof e.loadAll}},6741:function(e,t,r){r.d(t,{O:function(){return _}});var n=r(37762),i=r(1413),o=r(74165),a=r(15861),l=r(15671),s=r(43144),u=r(60136),c=r(92572),d=r(27366),y=r(76200),p=r(66978),f=r(35995),v=r(49901),h=r(49861),b=(r(25243),r(63780),r(38511)),m=r(69912),g=r(53866),S=r(78952),w=r(70361),_=function(e){var t=function(e){(0,u.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,l.Z)(this,r),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=void 0,e._allLayersAndTablesPromise=null,e._allLayersAndTablesMap=null,e}return(0,s.Z)(r,[{key:"readCapabilities",value:function(e,t){var r,n,i=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!i)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var o=this.type,a="tile"!==o&&!!t.supportsDynamicLayers,l=i.includes("query"),s=i.includes("map"),u=!!t.exportTilesAllowed,c=i.includes("tilemap"),d=i.includes("data"),y="tile"!==o&&(!t.tileInfo||a),p="tile"!==o&&(!t.tileInfo||a),f="tile"!==o,h=t.cimVersion&&v.G.parse(t.cimVersion),b=null!==(r=null===h||void 0===h?void 0:h.since(1,4))&&void 0!==r&&r,m=null!==(n=null===h||void 0===h?void 0:h.since(2,0))&&void 0!==n&&n;return{operations:{supportsExportMap:s,supportsExportTiles:u,supportsIdentify:l,supportsQuery:d,supportsTileMap:c},exportMap:s?{supportsArcadeExpressionForLabeling:b,supportsSublayersChanges:f,supportsDynamicLayers:a,supportsSublayerVisibility:y,supportsSublayerDefinitionExpression:p,supportsCIMSymbols:m}:null,exportTiles:u?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}},{key:"fetchSublayerInfo",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLayersAndTables(r);case 2:return e.abrupt("return",null===(n=this._allLayersAndTablesMap)||void 0===n?void 0:n.get(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,a=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:return this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=(0,y.default)((0,f.mN)(this.url).path+"/layers",{responseType:"json",query:(0,i.Z)((0,i.Z)({f:"json"},this.customParameters),{},{token:this.apiKey})}).then((function(e){a._allLayersAndTablesMap=new Map;var t,r=(0,n.Z)(e.data.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;a._allLayersAndTablesMap.set(i.id,i)}}catch(o){r.e(o)}finally{r.f()}return{result:e.data}}),(function(e){return{error:e}}))),e.next=5,this._allLayersAndTablesPromise;case 5:if(r=e.sent,(0,p.k_)(t),!("result"in r)){e.next=8;break}return e.abrupt("return",r.result);case 8:throw r.error;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(e);return(0,d._)([(0,h.Cb)({readOnly:!0})],t.prototype,"capabilities",void 0),(0,d._)([(0,b.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),(0,d._)([(0,h.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,d._)([(0,h.Cb)({type:g.Z})],t.prototype,"fullExtent",void 0),(0,d._)([(0,h.Cb)(w.id)],t.prototype,"id",void 0),(0,d._)([(0,h.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),(0,d._)([(0,h.Cb)(w.C_)],t.prototype,"popupEnabled",void 0),(0,d._)([(0,h.Cb)({type:S.Z})],t.prototype,"spatialReference",void 0),(0,d._)([(0,h.Cb)({readOnly:!0})],t.prototype,"version",void 0),(0,d._)([(0,b.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=(0,d._)([(0,m.j)("esri.layers.mixins.ArcGISMapService")],t)}},18870:function(e,t,r){r.d(t,{x:function(){return k}});var n=r(37762),i=r(4942),o=r(15671),a=r(43144),l=r(11752),s=r(61120),u=r(60136),c=r(92572),d=r(27366),y=r(80987),p=r(77178),f=r(10064),v=r(32718),h=r(94172),b=r(49861),m=(r(25243),r(63780),r(23879)),g=r(69912),S=r(25265),w=r(77990),_=r(58132),Z=v.Z.getLogger("esri.layers.TileLayer");var I=y.Z.ofType(w.Z);function C(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&C(e.sublayers,t)}))}var k=function(e){var t=function(e){(0,u.Z)(r,e);var t=(0,c.Z)(r);function r(){var e,n;(0,o.Z)(this,r);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(n=t.call.apply(t,[this].concat(l))).allSublayers=new p.Z({getCollections:function(){return[n.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),n.sublayersSourceJSON=(e={},(0,i.Z)(e,S.s3.SERVICE,{}),(0,i.Z)(e,S.s3.PORTAL_ITEM,{}),(0,i.Z)(e,S.s3.WEB_SCENE,{}),(0,i.Z)(e,S.s3.WEB_MAP,{}),e),n.addHandles((0,h.YP)((function(){return n.sublayers}),(function(e,t){return n._handleSublayersChange(e,t)}),h.Z_)),n}return(0,a.Z)(r,[{key:"readSublayers",value:function(e,t){if(t&&e){var r=this.sublayersSourceJSON,n=(0,S.M9)(t.origin);if(!(n<S.s3.SERVICE)&&(r[n]={context:t,visibleLayers:e.visibleLayers||r[n].visibleLayers,layers:e.layers||r[n].layers},!(n>S.s3.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),o=i.sublayers,a=i.origin,l=(0,m.vw)(this);l.setDefaultOrigin(a),this._set("sublayers",new I(o)),l.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,r,i=(0,S.M9)("web-document"===e?"web-map":e),o=S.s3.SERVICE,a=this.sublayersSourceJSON[S.s3.SERVICE].layers,l=this.sublayersSourceJSON[S.s3.SERVICE].context,s=null,u=[S.s3.PORTAL_ITEM,S.s3.WEB_SCENE,S.s3.WEB_MAP].filter((function(e){return e<=i})),c=(0,n.Z)(u);try{for(c.s();!(r=c.n()).done;){var d=r.value,y=this.sublayersSourceJSON[d];(0,_.ac)(y.layers)&&(o=d,a=y.layers,l=y.context,y.visibleLayers&&(s={visibleLayers:y.visibleLayers,context:y.context}))}}catch(P){c.e(P)}finally{c.f()}var p,f=[S.s3.PORTAL_ITEM,S.s3.WEB_SCENE,S.s3.WEB_MAP].filter((function(e){return e>o&&e<=i})),v=null,h=(0,n.Z)(f);try{for(h.s();!(p=h.n()).done;){var b=p.value,m=this.sublayersSourceJSON[b],g=m.layers,Z=m.visibleLayers,k=m.context;g&&(v={layers:g,context:k}),Z&&(s={visibleLayers:Z,context:k})}}catch(P){h.e(P)}finally{h.f()}var x=function(e,t){var r=[],n={};return e?(e.forEach((function(e){var i=new w.Z;if(i.read(e,t),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var o=n[e.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(i)}else r.unshift(i)})),r):r}(a,l),F=new Map,O=new Set;if(v){var T,E=(0,n.Z)(v.layers);try{for(E.s();!(T=E.n()).done;){var L=T.value;F.set(L.id,L)}}catch(P){E.e(P)}finally{E.f()}}if(null!==(t=s)&&void 0!==t&&t.visibleLayers){var j,D=(0,n.Z)(s.visibleLayers);try{for(D.s();!(j=D.n()).done;){var V=j.value;O.add(V)}}catch(P){D.e(P)}finally{D.f()}}return C(x,(function(e){v&&e.read(F.get(e.id),v.context),s&&e.read({defaultVisibility:O.has(e.id)},s.context)})),{origin:(0,S.x3)(o),sublayers:new I({items:x})}}},{key:"read",value:function(e,t){(0,l.Z)((0,s.Z)(r.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.remove("sublayers-owner")),e&&(e.forEach((function(e){e.parent=r,e.layer=r})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",(function(e){Z.error(new f.Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})),"sublayers-owner"))}}]),r}(e);return(0,d._)([(0,b.Cb)({readOnly:!0})],t.prototype,"allSublayers",void 0),(0,d._)([(0,b.Cb)({readOnly:!0,type:y.Z.ofType(w.Z)})],t.prototype,"serviceSublayers",void 0),(0,d._)([(0,b.Cb)({value:null,type:I,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),(0,d._)([(0,b.Cb)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=(0,d._)([(0,g.j)("esri.layers.mixins.SublayersOwner")],t),t}},9114:function(e,t,r){r.d(t,{u:function(){return y}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=r(46784),c=r(49861),d=(r(25243),r(63780),r(69912)),y=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(u.wq);(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,s._)([(0,c.Cb)({type:[String,Number],json:{write:!0}})],y.prototype,"code",void 0),y=n=(0,s._)([(0,d.j)("esri.layers.support.CodedValue")],y)},52175:function(e,t,r){r.d(t,{Z:function(){return h}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=r(84652),c=r(49861),d=(r(25243),r(27135)),y=r(69912),p=r(9114),f=r(64538),v=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new n({codedValues:(0,u.d9)(this.codedValues),name:this.name})}}]),r}(f.Z);(0,s._)([(0,c.Cb)({type:[p.u],json:{write:!0}})],v.prototype,"codedValues",void 0),(0,s._)([(0,d.J)({codedValue:"coded-value"})],v.prototype,"type",void 0);var h=v=n=(0,s._)([(0,y.j)("esri.layers.support.CodedValueDomain")],v)},64538:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(43144),i=r(15671),o=r(60136),a=r(92572),l=r(27366),s=r(43404),u=r(46784),c=r(49861),d=(r(25243),r(63780),r(27135)),y=r(69912),p=new s.X({inherited:"inherited",codedValue:"coded-value",range:"range"}),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return(0,n.Z)(r)}(u.wq);(0,l._)([(0,c.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,l._)([(0,d.J)(p)],f.prototype,"type",void 0);var v=f=(0,l._)([(0,y.j)("esri.layers.support.Domain")],f)},87165:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),l=r(27366),s=r(11582),u=r(46784),c=r(49861),d=(r(25243),r(63780),r(38511)),y=r(69912),p=r(31201),f=r(67755),v=r(12224),h=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return(0,i.Z)(r,[{key:"readDomains",value:function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t[i]=(0,f.im)(e[i])}return t}},{key:"writeDomains",value:function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o,a=i[n];e[a]&&(r[a]=null===(o=e[a])||void 0===o?void 0:o.toJSON())}t.domains=r}}]),r}((0,s.J)(u.wq));(0,l._)([(0,c.Cb)({json:{write:!0}})],h.prototype,"id",void 0),(0,l._)([(0,c.Cb)({json:{write:!0}})],h.prototype,"name",void 0),(0,l._)([(0,c.Cb)({json:{write:!0}})],h.prototype,"domains",void 0),(0,l._)([(0,d.r)("domains")],h.prototype,"readDomains",null),(0,l._)([(0,p.c)("domains")],h.prototype,"writeDomains",null),(0,l._)([(0,c.Cb)({type:[v.Z],json:{write:!0}})],h.prototype,"templates",void 0);var b=h=(0,l._)([(0,y.j)("esri.layers.support.FeatureType")],h)},83040:function(e,t,r){r.d(t,{Z:function(){return S}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=r(43404),c=r(46784),d=r(49861),y=r(25243),p=(r(63780),r(27135)),f=r(38511),v=r(69912),h=r(67755),b=r(85249),m=new u.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),g=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(r,[{key:"readDescription",value:function(e,t){var r,n,i=t.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(r=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==r?r:null}},{key:"readValueType",value:function(e,t){var r=t.description,n=null;try{n=r?JSON.parse(r):null}catch(i){}return n?m.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),r}(c.wq);(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],g.prototype,"alias",void 0),(0,s._)([(0,d.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],g.prototype,"defaultValue",void 0),(0,s._)([(0,d.Cb)()],g.prototype,"description",void 0),(0,s._)([(0,f.r)("description")],g.prototype,"readDescription",null),(0,s._)([(0,d.Cb)({types:h.V5,json:{read:{reader:h.im},write:!0}})],g.prototype,"domain",void 0),(0,s._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"editable",void 0),(0,s._)([(0,d.Cb)({type:y.z8,json:{write:!0}})],g.prototype,"length",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,s._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"nullable",void 0),(0,s._)([(0,p.J)(b.v)],g.prototype,"type",void 0),(0,s._)([(0,d.Cb)()],g.prototype,"valueType",void 0),(0,s._)([(0,f.r)("valueType",["description"])],g.prototype,"readValueType",null),(0,s._)([(0,d.Cb)({type:Boolean,json:{read:!1}})],g.prototype,"visible",void 0);var S=g=n=(0,s._)([(0,v.j)("esri.layers.support.Field")],g)},52410:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(37762),i=r(15671),o=r(43144),a=r(80031);function l(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function s(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function u(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,i.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o=[],c=(0,n.Z)(t);try{for(c.s();!(r=c.n()).done;){var p=r.value,f=null===p||void 0===p?void 0:p.name,v=y(null===p||void 0===p?void 0:p.name);if(f&&v){var h=d(f);this._fieldsMap.set(f,p),this._fieldsMap.set(h,p),this._normalizedFieldsMap.set(v,p),o.push(h),l(p)?(this.dateFields.push(p),this._dateFieldsSet.add(p)):(0,a.H7)(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p)),s(p)||u(p)||(p.editable=null==p.editable||!!p.editable,p.nullable=null==p.nullable||!!p.nullable)}}}catch(b){c.e(b)}finally{c.f()}o.sort(),this.uid=o.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,n.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;s(r)||u(r)||r.nullable||void 0!==(0,a.os)(r)||this._requiredFields.push(r)}}catch(i){t.e(i)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(d(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(y(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function d(e){return e.trim().toLowerCase()}function y(e){var t,r;return null!==(t=null===(r=(0,a.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},56754:function(e,t,r){r.d(t,{Z:function(){return p}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=(r(32718),r(25243),r(63780),r(10064),r(93169),r(27135)),c=r(69912),d=r(64538),y=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="inherited",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n}}]),r}(d.Z);(0,s._)([(0,u.J)({inherited:"inherited"})],y.prototype,"type",void 0);var p=y=n=(0,s._)([(0,c.j)("esri.layers.support.InheritedDomain")],y)},30539:function(e,t,r){r.d(t,{Z:function(){return f}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(92572),s=r(27366),u=r(49861),c=(r(25243),r(63780),r(27135)),d=r(69912),y=r(64538),p=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(y.Z);(0,s._)([(0,u.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],p.prototype,"maxValue",void 0),(0,s._)([(0,u.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],p.prototype,"minValue",void 0),(0,s._)([(0,c.J)({range:"range"})],p.prototype,"type",void 0);var f=p=n=(0,s._)([(0,d.j)("esri.layers.support.RangeDomain")],p)},77990:function(e,t,r){r.d(t,{Z:function(){return ae}});var n,i=r(37762),o=r(74165),a=r(1413),l=r(15861),s=r(15671),u=r(43144),c=r(60136),d=r(92572),y=r(27366),p=(r(59486),r(44055)),f=(r(94931),r(78451),r(98689),r(57823),r(32066),r(49018),r(34999),r(28189),r(9014),r(40464)),v=r(76200),h=r(51508),b=r(80987),m=r(10064),g=r(41691),S=r(93169),w=r(79056),_=r(84652),Z=r(54472),I=r(32718),C=r(92026),k=r(97642),x=r(76672),F=r(35995),O=r(49861),T=r(89125),E=r(38511),L=r(69912),j=r(31201),D=r(25243),V=r(25265),P=r(23879),A=r(77188),M=r(87165),N=r(83040),R=r(52410),q=r(77748),J=r(85116),U=r(71065),z=r(94582),G=r(64020),B=r(23505),W=r(99837),Q=r(21149),X=r(81085),H=r(53866),$=r(27823);function Y(e){return null!=e&&"esriSMS"===e.type}function K(e,t,r){var n,i=this.originIdOf(t)>=(0,V.M9)(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&"map-image"===(null===(n=r.layer)||void 0===n?void 0:n.type)&&(r.writeSublayerStructure||i)}}function ee(e,t,r){var n;return{enabled:!!r&&"tile"===(null===(n=r.layer)||void 0===n?void 0:n.type)&&this._isOverridden(t)}}function te(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function re(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=(0,V.M9)(r.origin))}}var ne=0,ie=new Set;ie.add("layer"),ie.add("parent"),ie.add("loaded"),ie.add("loadStatus"),ie.add("loadError"),ie.add("loadWarnings");var oe=n=function(e){(0,c.Z)(y,e);var t=(0,d.Z)(y);function y(e){var r;return(0,s.Z)(this,y),(r=t.call(this,e)).capabilities=void 0,r.fields=null,r.fullExtent=null,r.geometryType=null,r.globalIdField=null,r.legendEnabled=!0,r.objectIdField=null,r.popupEnabled=!0,r.popupTemplate=null,r.sourceJSON=null,r.title=null,r.typeIdField=null,r.types=null,r._lastParsedUrl=null,r}return(0,u.Z)(y,[{key:"load",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise((0,l.Z)((0,o.Z)().mark((function e(){var n,i,l,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.layer,i=r.source,l=r.url,n||l){e.next=3;break}throw new m.Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});case 3:if(s=null,n&&!(r.originIdOf("url")>V.s3.SERVICE)&&"data-layer"!==(null===i||void 0===i?void 0:i.type)){e.next=10;break}return e.next=7,(0,v.default)(l,(0,a.Z)({responseType:"json",query:{f:"json"}},t));case 7:s=e.sent.data,e.next=15;break;case 10:return u=r.id,"map-layer"===(null===i||void 0===i?void 0:i.type)&&(u=i.mapLayerId),e.next=14,n.fetchSublayerInfo(u,t);case 14:s=e.sent;case 15:s&&(r.sourceJSON=s,r.read({layerDefinition:s},{origin:"service"}));case 16:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){t=t.layerDefinition||t;var r=(0,z.h)(t,this.url),n=r.operations,i=n.supportsQuery,o=n.supportsQueryAttachments,a=r.query.supportsFormatPBF,l=r.data.supportsAttachment;return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:o},data:{supportsAttachment:l},query:{supportsFormatPBF:a}}}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"fieldsIndex",get:function(){return new R.Z(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,n=(0,i.Z)(t.fields);try{for(n.s();!(r=n.n()).done;){var o=r.value;if("esriFieldTypeGlobalID"===o.type)return o.name}}catch(a){n.e(a)}finally{n.f()}}}},{key:"id",get:function(){var e=this._get("id");return null!==e&&void 0!==e?e:ne++},set:function(e){var t,r,n;this._get("id")!==e&&(!1!==(null===(t=this.layer)||void 0===t||null===(r=t.capabilities)||void 0===r||null===(n=r.exportMap)||void 0===n?void 0:n.supportsDynamicLayers)?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},n)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,n=(0,i.Z)(t.fields);try{for(n.s();!(r=n.n()).done;){var o=r.value;if("esriFieldTypeOID"===o.type)return o.name}}catch(a){n.e(a)}finally{n.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var r,n,i=t.layerDefinition;return 1-.01*(null!==(r=null!=(null===i||void 0===i?void 0:i.transparency)?i.transparency:null===i||void 0===i||null===(n=i.drawingInfo)||void 0===n?void 0:n.transparency)&&void 0!==r?r:0)}},{key:"writeOpacity",value:function(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=(0,D.vU)(this.parent.id):t.parentLayerId=-1}},{key:"queryTask",get:function(){var e,t;if(!this.layer)return null;var r=this.layer.spatialReference,n="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,i=this.capabilities,o=this.fieldsIndex,a=(0,S.Z)("featurelayer-pbf")&&(null===i||void 0===i?void 0:i.query.supportsFormatPBF),l=null!==(e=null===i||void 0===i||null===(t=i.operations)||void 0===t?void 0:t.supportsQueryAttachments)&&void 0!==e&&e;return new A.Z({url:this.url,pbfSupported:a,fieldsIndex:o,gdbVersion:n,sourceSpatialReference:r,queryAttachmentsSupported:l})}},{key:"renderer",set:function(e){if(e){var t,r=(0,i.Z)(e.getSymbols());try{for(r.s();!(t=r.n()).done;){var n=t.value;if((0,h.dU)(n)){I.Z.getLogger(this.declaredClass).warn("Sublayer renderer should use 2D symbols");break}}}catch(o){r.e(o)}finally{r.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new B.R({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return(0,D.se)(b.Z.ofType(n),e)}},{key:"writeSublayers",value:function(e,t,r){var n;(null===(n=this.sublayers)||void 0===n?void 0:n.length)&&(t[r]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return r}},{key:"url",get:function(){var e,t,r=null!==(e=null===(t=this.layer)||void 0===t?void 0:t.parsedUrl)&&void 0!==e?e:this._lastParsedUrl,n=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null===n||void 0===n?void 0:n.type))return"".concat(r.path,"/").concat(n.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(r.path,"/dynamicLayer?").concat((0,F.B7)(i))},set:function(e){this._overrideIfSome("url",e)}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=(0,P.vw)(this).store,t=new n;return(0,P.vw)(t).store=e.clone(ie),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return(0,X.eZ)(this,e)}},{key:"createQuery",value:function(){return new Q.Z({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t,n,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return n=this.layer,i=null===n||void 0===n?void 0:n.parsedUrl,e.next=7,Promise.all([r.e(99779),r.e(31009),r.e(41906),r.e(10337),r.e(21293),r.e(16354)]).then(r.bind(r,64326));case 7:return e.t0=e.sent.default,e.t1={url:null===i||void 0===i?void 0:i.path},a=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=(null===n||void 0===n?void 0:n.refreshInterval)&&(a.refreshInterval=n.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.floorInfo&&(a.floorInfo=(0,_.d9)(this.floorInfo)),this.originIdOf("labelingInfo")>V.s3.SERVICE&&(a.labelingInfo=(0,_.d9)(this.labelingInfo)),this.originIdOf("labelsVisible")>V.s3.DEFAULTS&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>V.s3.DEFAULTS&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>V.s3.DEFAULTS&&(a.visible=this.visible),this.originIdOf("minScale")>V.s3.DEFAULTS&&(a.minScale=this.minScale),this.originIdOf("maxScale")>V.s3.DEFAULTS&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>V.s3.DEFAULTS&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>V.s3.DEFAULTS&&(a.popupTemplate=(0,_.d9)(this.popupTemplate)),this.originIdOf("renderer")>V.s3.SERVICE&&(a.renderer=(0,_.d9)(this.renderer)),"data-layer"===(null===(t=this.source)||void 0===t?void 0:t.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>V.s3.DEFAULTS&&(a.title=this.title),"map-image"===(null===n||void 0===n?void 0:n.type)&&n.originIdOf("customParameters")>V.s3.DEFAULTS&&(a.customParameters=n.customParameters),"tile"===(null===n||void 0===n?void 0:n.type)&&n.originIdOf("customParameters")>V.s3.DEFAULTS&&(a.customParameters=n.customParameters),a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return null!==r&&void 0!==r&&r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryAttachments",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,l,s,u,c,d,y,p,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=W.Z.from(t),null!==(a=this.capabilities)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.supportsAttachment){e.next=6;break}throw new m.Z("queryAttachments:not-supported","this layer doesn't support attachments");case 6:if(s=(l=t).attachmentTypes,u=l.objectIds,c=l.globalIds,d=l.num,y=l.size,p=l.start,f=l.where,null!==a&&void 0!==a&&null!==(i=a.operations)&&void 0!==i&&i.supportsQueryAttachments){e.next=10;break}if(!((null===s||void 0===s?void 0:s.length)>0||(null===c||void 0===c?void 0:c.length)>0||(null===y||void 0===y?void 0:y.length)>0||d||p||f)){e.next=10;break}throw new m.Z("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);case 10:if(null!==u&&void 0!==u&&u.length||null!==c&&void 0!==c&&c.length||f){e.next=12;break}throw new m.Z("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);case 12:return e.abrupt("return",this.queryTask.executeAttachmentQuery(t,r));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t,r,n,l,s,u,c,d=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>0&&void 0!==d[0]?d[0]:this.createQuery(),l=d.length>1?d[1]:void 0,e.next=4,this.load();case 4:if(this.capabilities.operations.supportsQuery){e.next=6;break}throw new m.Z("queryFeatures:not-supported","this layer doesn't support queries.");case 6:if(this.url){e.next=8;break}throw new m.Z("queryFeatures:not-supported","this layer has no url.");case 8:return e.next=10,this.queryTask.execute(n,(0,a.Z)((0,a.Z)({},l),{},{query:(0,a.Z)((0,a.Z)({},null===(t=this.layer)||void 0===t?void 0:t.customParameters),{},{token:null===(r=this.layer)||void 0===r?void 0:r.apiKey})}));case 10:if(null!==(s=e.sent)&&void 0!==s&&s.features){u=(0,i.Z)(s.features);try{for(u.s();!(c=u.n()).done;)c.value.sourceLayer=this}catch(o){u.e(o)}finally{u.f()}}return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var t,r=this,n={id:this.id,source:(null===(t=this.source)||void 0===t?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=(0,x._)(e,this.definitionExpression);(0,C.pC)(i)&&(n.definitionExpression=i);var o=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,t){return e[t]=r.originIdOf(t),e}),{}),a=Object.keys(o).some((function(e){return o[e]>V.s3.SERVICE}));if(a){var l=n.drawingInfo={};if(o.renderer>V.s3.SERVICE&&(l.renderer=this.renderer?this.renderer.toJSON():null),o.labelsVisible>V.s3.SERVICE&&(l.showLabels=this.labelsVisible),this.labelsVisible&&o.labelingInfo>V.s3.SERVICE){!this.loaded&&this.labelingInfo.some((function(e){return!e.labelPlacement}))&&I.Z.getLogger(this.declaredClass).warnOnce("A Sublayer (title: ".concat(this.title,", id: ").concat(this.id,") has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type."),{sublayer:this});var s=this.labelingInfo;(0,C.pC)(this.geometryType)&&(s=(0,J.a)(this.labelingInfo,$.M.toJSON(this.geometryType))),l.labelingInfo=s.filter((function(e){return e.labelPlacement})).map((function(e){return e.toJSON({origin:"service",layer:r.layer})})),l.showLabels=!0}o.opacity>V.s3.SERVICE&&(l.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(l.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var r,n,o=null!==(r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)&&void 0!==r?r:[],a=(0,i.Z)(o);try{for(a.s();!(n=a.n()).done;){var l=n.value;Y(l.symbol)&&t(l.symbol)}}catch(s){a.e(s)}finally{a.f()}"symbol"in e&&Y(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&Y(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var r,n,i=this.layer,o=this._get(e);switch(e){case"definitionExpression":case"floorInfo":r="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers",n="supportsModification"}var a=(0,P.vw)(this).getDefaultOrigin();if("service"!==a){var l,s,u,c;if(r&&!1===(null===(l=this.layer)||void 0===l||null===(s=l.capabilities)||void 0===s||null===(u=s.exportMap)||void 0===u?void 0:u[r]))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(r,"'"));if(n&&!1===(null===(c=this.capabilities)||void 0===c?void 0:c.exportMap[n]))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(n,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==a&&o!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=r,e.layer=r.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t,n,i,o=null===(t=r.layer)||void 0===t||null===(n=t.capabilities)||void 0===n||null===(i=n.exportMap)||void 0===i?void 0:i.supportsSublayersChanges;null==o||o||(I.Z.getLogger(r.declaredClass).error(new m.Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:r,layer:r.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){var r=this.layer,n=this.declaredClass;I.Z.getLogger(n).error(new m.Z("sublayer:locked","Property '".concat(String(e),"' can't be changed on Sublayer from the layer '").concat(null===r||void 0===r?void 0:r.id,"'"),{reason:t,sublayer:this,layer:r}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),y}((0,g.p)((0,k.R)((0,w.IG)(Z.Z))));oe.test={isMapImageLayerOverridePolicy:function(e){return e===te||e===K},isTileImageLayerOverridePolicy:function(e){return e===ee}},(0,y._)([(0,O.Cb)({readOnly:!0})],oe.prototype,"capabilities",void 0),(0,y._)([(0,E.r)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],oe.prototype,"readCapabilities",null),(0,y._)([(0,O.Cb)()],oe.prototype,"defaultPopupTemplate",null),(0,y._)([(0,O.Cb)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:K}}})],oe.prototype,"definitionExpression",null),(0,y._)([(0,O.Cb)({type:[N.Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],oe.prototype,"fields",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],oe.prototype,"fieldsIndex",null),(0,y._)([(0,O.Cb)({type:U.Z,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:K},origins:{"web-scene":{read:!1,write:!1}}}})],oe.prototype,"floorInfo",null),(0,y._)([(0,O.Cb)({type:H.Z,json:{read:{source:"layerDefinition.extent"}}})],oe.prototype,"fullExtent",void 0),(0,y._)([(0,O.Cb)({type:$.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:$.M.read}}}}})],oe.prototype,"geometryType",void 0),(0,y._)([(0,O.Cb)({type:String})],oe.prototype,"globalIdField",void 0),(0,y._)([(0,E.r)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],oe.prototype,"readGlobalIdFieldFromService",null),(0,y._)([(0,O.Cb)({type:D.z8,json:{write:{ignoreOrigin:!0}}})],oe.prototype,"id",null),(0,y._)([(0,O.Cb)({value:null,type:[q.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:te}}})],oe.prototype,"labelingInfo",null),(0,y._)([(0,j.c)("labelingInfo")],oe.prototype,"writeLabelingInfo",null),(0,y._)([(0,O.Cb)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:te}}})],oe.prototype,"labelsVisible",null),(0,y._)([(0,O.Cb)({value:null})],oe.prototype,"layer",null),(0,y._)([(0,O.Cb)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:re}}})],oe.prototype,"legendEnabled",void 0),(0,y._)([(0,O.Cb)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],oe.prototype,"listMode",null),(0,y._)([(0,O.Cb)({type:Number,value:0,json:{write:{overridePolicy:te}}})],oe.prototype,"minScale",null),(0,y._)([(0,E.r)("minScale",["minScale","layerDefinition.minScale"])],oe.prototype,"readMinScale",null),(0,y._)([(0,O.Cb)({type:Number,value:0,json:{write:{overridePolicy:te}}})],oe.prototype,"maxScale",null),(0,y._)([(0,E.r)("maxScale",["maxScale","layerDefinition.maxScale"])],oe.prototype,"readMaxScale",null),(0,y._)([(0,O.Cb)({readOnly:!0})],oe.prototype,"effectiveScaleRange",null),(0,y._)([(0,O.Cb)({type:String})],oe.prototype,"objectIdField",void 0),(0,y._)([(0,E.r)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],oe.prototype,"readObjectIdFieldFromService",null),(0,y._)([(0,O.Cb)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:te}}})],oe.prototype,"opacity",null),(0,y._)([(0,E.r)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],oe.prototype,"readOpacity",null),(0,y._)([(0,j.c)("opacity")],oe.prototype,"writeOpacity",null),(0,y._)([(0,O.Cb)({json:{type:D.z8,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:te}}})],oe.prototype,"parent",void 0),(0,y._)([(0,j.c)("parent")],oe.prototype,"writeParent",null),(0,y._)([(0,O.Cb)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:re,writer:function(e,t,r){t[r]=!e}}}})],oe.prototype,"popupEnabled",void 0),(0,y._)([(0,O.Cb)({type:p.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:re}}})],oe.prototype,"popupTemplate",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],oe.prototype,"queryTask",null),(0,y._)([(0,O.Cb)({types:f.A,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:te},origins:{"web-scene":{types:f.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:te}}}}})],oe.prototype,"renderer",null),(0,y._)([(0,O.Cb)({types:{key:"type",base:null,typeMap:{"data-layer":G.n,"map-layer":B.R}},cast:function(e){if(e){if("mapLayerId"in e)return(0,D.TJ)(B.R,e);if("dataSource"in e)return(0,D.TJ)(G.n,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:te}}})],oe.prototype,"source",null),(0,y._)([(0,O.Cb)()],oe.prototype,"sourceJSON",void 0),(0,y._)([(0,O.Cb)({value:null,json:{type:[D.z8],write:{target:"subLayerIds",allowNull:!0,overridePolicy:te}}})],oe.prototype,"sublayers",null),(0,y._)([(0,T.p)("sublayers")],oe.prototype,"castSublayers",null),(0,y._)([(0,j.c)("sublayers")],oe.prototype,"writeSublayers",null),(0,y._)([(0,O.Cb)({type:String,json:{name:"name",write:{overridePolicy:re}}})],oe.prototype,"title",void 0),(0,y._)([(0,O.Cb)({type:String})],oe.prototype,"typeIdField",void 0),(0,y._)([(0,E.r)("typeIdField",["layerDefinition.typeIdField"])],oe.prototype,"readTypeIdField",null),(0,y._)([(0,O.Cb)({type:[M.Z],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],oe.prototype,"types",void 0),(0,y._)([(0,O.Cb)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:ee}}})],oe.prototype,"url",null),(0,y._)([(0,O.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:te}}})],oe.prototype,"visible",null),(0,y._)([(0,j.c)("visible")],oe.prototype,"writeVisible",null);var ae=oe=n=(0,y._)([(0,L.j)("esri.layers.support.Sublayer")],oe)},67755:function(e,t,r){r.d(t,{V5:function(){return l},im:function(){return s}});r(93169);var n=r(52175),i=r(64538),o=r(56754),a=r(30539),l={key:"type",base:i.Z,typeMap:{range:a.Z,"coded-value":n.Z,inherited:o.Z}};function s(e){if(!e||!e.type)return null;switch(e.type){case"range":return a.Z.fromJSON(e);case"codedValue":return n.Z.fromJSON(e);case"inherited":return o.Z.fromJSON(e)}return null}},85249:function(e,t,r){r.d(t,{v:function(){return n}});var n=new(r(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},83690:function(e,t,r){r.d(t,{g:function(){return a}});var n=r(74165),i=r(15861),o=r(10064);function a(e,t){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,createImageBitmap(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new o.Z("request:server","Unable to load ".concat(r),{url:r,error:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),l.apply(this,arguments)}},58132:function(e,t,r){r.d(t,{FN:function(){return l},QV:function(){return a},ac:function(){return u}});var n=r(37762),i=r(92026),o=r(25265);function a(e,t,r){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r}))||!s(e,t))}function l(e,t,r){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&((0,i.Wi)(t.gdbVersion)||t.gdbVersion===r))||e.originIdOf("renderer")>o.s3.SERVICE||e.originIdOf("labelingInfo")>o.s3.SERVICE||e.originIdOf("opacity")>o.s3.SERVICE||e.originIdOf("labelsVisible")>o.s3.SERVICE}))||!s(e,t)}function s(e,t){if(!e||!e.length||(0,i.Wi)(t))return!0;var r=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>r.length)return!1;var o,a=0,l=r.length,s=(0,n.Z)(e);try{for(s.s();!(o=s.n()).done;){for(var u=o.value.id;a<l&&r[a]!==u;)a++;if(a>=l)return!1}}catch(c){s.e(c)}finally{s.f()}return!0}function u(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},80724:function(e,t,r){var n,i;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function a(e){return null!=e&&!isNaN(e)&&isFinite(e)}function l(e){return e.valueExpression?n.Expression:e.field&&"string"==typeof e.field?n.Field:n.Unknown}function s(e,t){var r=t||l(e),o=e.valueUnit||"unknown";return r===n.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}r.d(t,{PS:function(){return l},QW:function(){return s},RY:function(){return n},hL:function(){return i},iY:function(){return o},qh:function(){return a}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(n||(n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},68620:function(e,t,r){r.d(t,{p:function(){return a}});var n=r(37762),i=r(92026),o=r(93501);function a(e,t,r){if(r&&r.features&&r.hasZ){var a=(0,o.k)(r.geometryType,t,e.outSpatialReference);if(!(0,i.Wi)(a)){var l,s=(0,n.Z)(r.features);try{for(s.s();!(l=s.n()).done;){a(l.value.geometry)}}catch(u){s.e(u)}finally{s.f()}}}}},49818:function(e,t,r){r.d(t,{Z:function(){return k}});var n,i=r(29439),o=r(37762),a=r(15671),l=r(43144),s=r(60136),u=r(92572),c=r(27366),d=r(59486),y=r(52639),p=r(43404),f=r(46784),v=r(84652),h=r(92026),b=r(49861),m=(r(25243),r(38511)),g=r(69912),S=r(31201),w=r(78952),_=r(77981),Z=r(83040),I=new p.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),C=n=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,l.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=w.Z.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],a=y.Z.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;(0,h.pC)(a.geometry)&&!l&&(a.geometry.spatialReference=r);var s=o.aggregateGeometries,u=a.aggregateGeometries;if(s&&(0,h.pC)(u))for(var c in u){var d,p=u[c],f=null===(d=s[c])||void 0===d?void 0:d.spatialReference;(0,h.pC)(p)&&!f&&(p.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)I.write(e,t,r,n);else{var i=this.features;if(i){var a,l=(0,o.Z)(i);try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s&&(0,h.pC)(s.geometry))return void I.write(s.geometry.type,t,r,n)}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,_.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=w.Z.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=(0,o.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&(0,h.pC)(a.geometry)&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(l){i.e(l)}finally{i.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),r=t[0],n=t[1],o=(0,i.Z)(e.translate,2),a=o[0],l=o[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((l-e)/n)})),c=0,d=s.length;c<d;c++)(null===u||void 0===u?void 0:u((0,h.Wg)(s[c].geometry)))||(s.splice(c,1),c--,d--);return this.transform=e,this}},{key:"unquantize",value:function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;var n,a=(0,i.Z)(r.translate,2),l=a[0],s=a[1],u=(0,i.Z)(r.scale,2),c=u[0],d=u[1],y=this._getHydrationFunction(e,(function(e){return e*c+l}),(function(e){return s-e*d})),p=(0,o.Z)(t);try{for(p.s();!(n=p.n()).done;){var f=n.value.geometry;(0,h.pC)(f)&&y&&y(f)}}catch(v){p.e(v)}finally{p.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,o=[],a=0,l=e.length;a<l;a++){var s=e[a];if(a>0){var u=t(s[0]),c=r(s[1]);u===n&&c===i||(o.push([u-n,c-i]),n=u,i=c)}else n=t(s[0]),i=r(s[1]),o.push([n,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,_.oU)(e)?e.rings:e.paths,o=[],a=0,l=i.length;a<l;a++){var s=i[a],u=n._quantizePoints(s,t,r);u&&o.push(u)}return o.length>0?((0,_.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=(0,_.oU)(e)?e.rings:e.paths,a=0,l=o.length;a<l;a++)for(var s=o[a],u=0,c=s.length;u<c;u++){var d=s[u];u>0?(n+=d[0],i+=d[1]):(n=d[0],i=d[1]),d[0]=t(n),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,l=o.length;a<l;a++){var s=o[a];a>0?(n+=s[0],i+=s[1]):(n=s[0],i=s[1]),s[0]=t(n),s[1]=r(i)}}:null}}]),r}(f.wq);(0,c._)([(0,b.Cb)({type:String,json:{write:!0}})],C.prototype,"displayFieldName",void 0),(0,c._)([(0,b.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"exceededTransferLimit",void 0),(0,c._)([(0,b.Cb)({type:[y.Z],json:{write:!0}})],C.prototype,"features",void 0),(0,c._)([(0,m.r)("features")],C.prototype,"readFeatures",null),(0,c._)([(0,b.Cb)({type:[Z.Z],json:{write:!0}})],C.prototype,"fields",void 0),(0,c._)([(0,b.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:I.read}}})],C.prototype,"geometryType",void 0),(0,c._)([(0,S.c)("geometryType")],C.prototype,"writeGeometryType",null),(0,c._)([(0,b.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"hasM",void 0),(0,c._)([(0,b.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"hasZ",void 0),(0,c._)([(0,b.Cb)({types:d.qM,json:{write:!0}})],C.prototype,"queryGeometry",void 0),(0,c._)([(0,m.r)("queryGeometry")],C.prototype,"readQueryGeometry",null),(0,c._)([(0,b.Cb)({type:w.Z,json:{write:!0}})],C.prototype,"spatialReference",void 0),(0,c._)([(0,S.c)("spatialReference")],C.prototype,"writeSpatialReference",null),(0,c._)([(0,b.Cb)({json:{write:!0}})],C.prototype,"transform",void 0),(C=n=(0,c._)([(0,g.j)("esri.rest.support.FeatureSet")],C)).prototype.toJSON.isDefaultToJSON=!0;var k=C},76115:function(e,t,r){r.d(t,{ET:function(){return a},I4:function(){return o},SQ:function(){return n},X1:function(){return i},eG:function(){return u},lF:function(){return l},lj:function(){return d},qP:function(){return s},wW:function(){return c}});var n=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},s={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=24832.3eb1f028.chunk.js.map