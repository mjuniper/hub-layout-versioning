{"version":3,"file":"static/js/41736.183850a1.chunk.js","mappings":"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","sources":["../node_modules/@esri/hub-components/dist/esm/arcgis-hub-discussions-map-integrator.entry.js","../node_modules/@esri/hub-components/dist/esm/call-when-744df66d.js","../node_modules/@esri/hub-components/dist/esm/debounce-e9be81f1.js","../node_modules/@arcgis/core/chunks/_commonjsHelpers.js","../node_modules/@arcgis/core/core/HandleOwner.js","../node_modules/@arcgis/core/core/support/OwningCollection.js","../node_modules/@arcgis/core/core/support/WatchUpdatingTracking.js","../node_modules/@arcgis/core/core/watchUtils.js","../node_modules/@arcgis/core/geometry/geometryAdapters/hydrated.js","../node_modules/@arcgis/core/geometry/geometryEngine.js","../node_modules/@arcgis/core/layers/GraphicsLayer.js","../node_modules/@arcgis/core/layers/support/fromPortalItem.js","../node_modules/@arcgis/core/layers/Layer.js","../node_modules/@arcgis/core/layers/mixins/BlendLayer.js","../node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js","../node_modules/@arcgis/core/renderers/support/lengthUtils.js","../node_modules/@arcgis/core/support/GraphicsCollection.js","../node_modules/@arcgis/core/symbols/support/FeatureExpressionInfo.js","../node_modules/@arcgis/core/symbols/support/ElevationInfo.js","../node_modules/@arcgis/core/symbols/support/unitConversionUtils.js"],"sourcesContent":["import { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-0d95d9d4.js';\nimport { b as bind } from './context-7d8f7366.js';\nimport { p as postsToFeatureCollection, P as PostSort, S as SortOrder, b as searchPostAggregates, d as postToFeatures, g as arcgisToGeoJSON, h as fetchSubjectDetails, i as parseDiscussionURI, j as geojsonToArcGIS, k as convertGeometryTypeToTelemetryString } from './discussions-c83a0f6c.js';\nimport { generalize } from '@arcgis/core/geometry/geometryEngine.js';\nimport { D as DebounceDecoratorFactory } from './debounce-e9be81f1.js';\nimport { C as CallWhenFactory } from './call-when-744df66d.js';\nimport { i as intlManager } from './intl-manager-821aea3b.js';\nimport { d as dist } from './index-910a8794.js';\nimport GraphicsLayer from '@arcgis/core/layers/GraphicsLayer.js';\nimport { watch } from '@arcgis/core/core/watchUtils.js';\nimport { webMercatorToGeographic } from '@arcgis/core/geometry/support/webMercatorUtils.js';\nimport Extent from '@arcgis/core/geometry/Extent.js';\nimport Graphic from '@arcgis/core/Graphic.js';\nimport { isAbortError } from '@arcgis/core/core/promiseUtils.js';\nimport { l as loadArcGisCss, g as getFirstHitGraphic } from './arcgis-f6051073.js';\nimport './getPortalBaseFromOrgUrl-6a5781aa.js';\nimport './tslib.es6-3669ad41.js';\nimport './get-portal-url-423a76f5.js';\nimport './clean-url-be7c0879.js';\nimport './request-c15cc2af.js';\nimport './get-859a2960.js';\nimport './append-custom-params-fd9b7e72.js';\nimport './get-portal-06f7947b.js';\nimport './query-15c2c6ed.js';\nimport './tslib.es6-b2e8cdb8.js';\nimport './fetch-e59da0af.js';\nimport './tslib.es6-e75776ba.js';\nimport './_enrichments-7716cdcc.js';\nimport './util-3c40fe6c.js';\nimport './get-prop-d82e4fa6.js';\nimport './get-with-default-6db049d8.js';\nimport './_internal-89d3dc92.js';\nimport './extent-0f42acfc.js';\nimport './helpers-a80c0291.js';\nimport './OperationError-85fd80c7.js';\nimport './get-f2cd18e7.js';\nimport './getService-49b539e3.js';\nimport './slugs-150ad0db.js';\nimport './is-guid-8127621d.js';\nimport './request-f9ca03b5.js';\nimport './api-196fe0e3.js';\nimport './get-portal-api-url-ccd8fd10.js';\nimport './compose-bfd77ec4.js';\nimport './get-structured-license-d1e63636.js';\nimport './get-item-thumbnail-url-7e5ae2fd.js';\nimport './get-item-home-url-9ff2898b.js';\nimport './update-fec93fc5.js';\nimport './index-4e91769f.js';\nimport './_commonjsHelpers-11ca3be1.js';\nimport '@arcgis/core/kernel.js';\n\n/**\n * Optional map states for symbol\n */\nvar SYMBOL_STATE;\n(function (SYMBOL_STATE) {\n  SYMBOL_STATE[\"ACTIVE\"] = \"active\";\n  SYMBOL_STATE[\"HOVER\"] = \"hover\";\n  SYMBOL_STATE[\"DEFAULT\"] = \"default\";\n})(SYMBOL_STATE || (SYMBOL_STATE = {}));\n/**\n * Generalization (simplify) operation\n * @param {Object} geometry - Esri geometry to simplify\n * @param {Object} view - Esri view\n * @param {number} maxDeviation - Maximum allowed deviation from original geometry\n * @returns {object} Object - Simplified geometry object\n */\nfunction simplify(geometry, view, maxDeviation = 3.5) {\n  const { resolution } = view;\n  return generalize(geometry, resolution * maxDeviation, false);\n}\n\nfunction callout (state, properties = defaultLayerThemeOptions.callout, count) {\n  const { backgroundColor, textColor, hoverColor, activeColor, width, isOffset, is3D } = properties;\n  const totalCount = count + 1;\n  let strokeColor = [255, 255, 255];\n  if (state === SYMBOL_STATE.HOVER) {\n    strokeColor = hoverColor;\n  }\n  else if (state === SYMBOL_STATE.ACTIVE) {\n    strokeColor = activeColor;\n  }\n  return {\n    type: 'cim',\n    data: {\n      type: \"CIMSymbolReference\",\n      symbol: {\n        type: \"CIMPointSymbol\",\n        symbolLayers: [{\n            // TEXT SYMBOL\n            type: \"CIMVectorMarker\",\n            enable: true,\n            size: 30,\n            frame: { xmin: -4, ymin: -4, xmax: 4, ymax: 4 },\n            markerGraphics: [\n              {\n                type: \"CIMMarkerGraphic\",\n                geometry: {\n                  x: isOffset ? 4.5 : 4,\n                  y: isOffset ? (is3D ? 9 : 11) : 4\n                },\n                symbol: {\n                  type: \"CIMTextSymbol\",\n                  fontFamilyName: \"Arial\",\n                  fontStyleName: \"Bold\",\n                  height: 3.25,\n                  horizontalAlignment: \"Center\",\n                  symbol: {\n                    type: \"CIMPolygonSymbol\",\n                    symbolLayers: [\n                      {\n                        type: \"CIMSolidFill\",\n                        enable: true,\n                        color: [\n                          ...textColor,\n                          255\n                        ]\n                      }\n                    ]\n                  },\n                  verticalAlignment: \"Center\",\n                },\n                textString: totalCount > 99 ? '99+' : `${totalCount}`\n              }\n            ],\n            scaleSymbolsProportionally: true\n          }, {\n            type: \"CIMVectorMarker\",\n            enable: true,\n            size: 30,\n            frame: {\n              xmin: isOffset ? -5 : -4,\n              ymin: isOffset ? (is3D ? -9 : -11) : -4,\n              xmax: isOffset ? 3 : 4,\n              ymax: isOffset ? (is3D ? -1 : -3) : 4\n            },\n            markerGraphics: [{\n                type: \"CIMMarkerGraphic\",\n                geometry: {\n                  rings: [\n                    [[0, 0], [4, 0], [4.35, 0.02], [4.69, 0.06],\n                      [5.04, 0.14], [5.37, 0.24], [5.69, 0.37], [6, 0.54],\n                      [6.29, 0.72], [6.57, 0.94], [6.83, 1.17], [7.06, 1.43],\n                      [7.28, 1.71], [7.46, 2], [7.63, 2.31], [7.76, 2.63],\n                      [7.86, 2.96], [7.94, 3.31], [7.98, 3.65], [8, 4],\n                      [7.98, 4.35], [7.94, 4.69], [7.86, 5.04], [7.76, 5.37],\n                      [7.63, 5.69], [7.46, 6], [7.28, 6.29], [7.06, 6.57],\n                      [6.83, 6.83], [6.57, 7.06], [6.29, 7.28], [6, 7.46],\n                      [5.69, 7.63], [5.37, 7.76], [5.04, 7.86], [4.69, 7.94],\n                      [4.35, 7.98], [4, 8], [3.65, 7.98], [3.31, 7.94],\n                      [2.96, 7.86], [2.63, 7.76], [2.31, 7.63], [2, 7.46],\n                      [1.71, 7.28], [1.43, 7.06], [1.17, 6.83], [0.94, 6.57],\n                      [0.72, 6.29], [0.54, 6], [0.37, 5.69], [0.24, 5.37],\n                      [0.14, 5.04], [0.06, 4.69], [0.02, 4.35], [0, 4], [0, 0]]\n                  ]\n                },\n                symbol: {\n                  type: \"CIMPolygonSymbol\",\n                  symbolLayers: [\n                    {\n                      type: \"CIMSolidStroke\",\n                      enable: true,\n                      capStyle: \"Round\",\n                      joinStyle: \"Round\",\n                      lineStyle3D: \"Strip\",\n                      miterLimit: 10,\n                      width: width,\n                      color: [\n                        ...strokeColor,\n                        255\n                      ]\n                    },\n                    {\n                      type: \"CIMSolidFill\",\n                      enable: true,\n                      color: [\n                        ...backgroundColor,\n                        255\n                      ]\n                    }\n                  ]\n                }\n              }]\n          }]\n      }\n    }\n  };\n}\n\nfunction point (properties = defaultLayerThemeOptions.point) {\n  const { color } = properties;\n  return {\n    type: 'text',\n    color: [\n      ...color,\n      0.9\n    ],\n    text: `\\ue61d`,\n    font: {\n      size: 24,\n      family: 'CalciteWebCoreIcons'\n    }\n  };\n}\n\nfunction polyline (properties = defaultLayerThemeOptions.polyline) {\n  const { color, width } = properties;\n  return {\n    type: 'simple-line',\n    color: [\n      ...color,\n      1\n    ],\n    width,\n    style: 'solid'\n  };\n}\n\nfunction polygon (properties = defaultLayerThemeOptions.polygon) {\n  const { color, width } = properties;\n  return {\n    type: 'simple-fill',\n    color: [\n      ...color,\n      0.15\n    ],\n    outline: {\n      color: [\n        ...color,\n        1\n      ],\n      width\n    }\n  };\n}\n\n// Geometry Defaults\nconst DEFAULT_GEOM_COLOR = [115, 96, 167];\nconst DEFAULT_GEOM_STROKE_WIDTH = 2;\n// Callout Defaults\nconst DEFAULT_CALLOUT_BACKGROUND_COLOR = [255, 255, 255];\nconst DEFAULT_CALLOUT_HOVER_COLOR = [169, 169, 169];\nconst DEFAULT_CALLOUT_ACTIVE_COLOR = [39, 129, 153];\nconst DEFAULT_CALLOUT_TEXT_COLOR = [0, 0, 0];\nconst DEFAULT_CALLOUT_STROKE_WIDTH = 2;\n/**\n * Default theme options\n */\nconst defaultLayerThemeOptions = {\n  point: {\n    color: DEFAULT_GEOM_COLOR\n  },\n  polyline: {\n    color: DEFAULT_GEOM_COLOR,\n    width: DEFAULT_GEOM_STROKE_WIDTH\n  },\n  polygon: {\n    color: DEFAULT_GEOM_COLOR,\n    width: DEFAULT_GEOM_STROKE_WIDTH\n  },\n  callout: {\n    backgroundColor: DEFAULT_CALLOUT_BACKGROUND_COLOR,\n    textColor: DEFAULT_CALLOUT_TEXT_COLOR,\n    hoverColor: DEFAULT_CALLOUT_HOVER_COLOR,\n    activeColor: DEFAULT_CALLOUT_ACTIVE_COLOR,\n    width: DEFAULT_CALLOUT_STROKE_WIDTH,\n    isOffset: false\n  }\n};\nconst symbols = {\n  callout,\n  point,\n  polyline,\n  polygon\n};\n\n// A world geometry object for filtering to any extent\nconst geometry = {\n  \"type\": \"Polygon\",\n  \"coordinates\": [\n    [[180, -90], [180, 90], [-180, 90], [-180, -90], [180, -90]]\n  ]\n};\n/**\n * A wait function for thottling\n * @param ms Time in MilliSeconds\n */\nconst wait = (ms) => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n/**\n * Dynamically calculates a throttle wait time in MilliSeconds to reduce load\n * on Discussions API\n * @param totalResults The total number of results to fetch\n * @param batchSize The number of results per request\n * @param totalWaitTime The total cumulative wait time for all requests to be fired\n * @param numRequestsThreshold The max number of requests to allow at dynamice throttle.  If number\n * of requests exceed this threshold, all requests will be thottled to fixed 500ms.\n * @returns Dynamic thottle time in MilliSeconds\n */\nconst getThrottleMS = (totalResults, batchSize, totalWaitTime, numRequestsThreshold, thresholdExceededWaitTime) => {\n  const numRequests = Math.ceil(totalResults / batchSize);\n  if (numRequests > numRequestsThreshold) {\n    console.warn(`Discussions requests exceeds desired threshold, throttling to ${thresholdExceededWaitTime}ms per batch.`);\n    return thresholdExceededWaitTime;\n  }\n  return totalWaitTime / numRequests;\n};\n/**\n *\n * @param discussion Discussion URI\n * @param hubRequestOptions IHubRequestOptions (serialized)\n * @param token Token\n * @param batchSize Total number of results per paginated post request (Default: 10)\n * @param throttle Optional throttling of requests (Default: true)\n * @returns\n */\nconst getPostsWithLocation = async (discussion, hubRequestOptions, batchSize = 10, throttle = true) => {\n  const searchPosts = async ({ discussion = null, geometry = null, start = 1 }) => {\n    const options = Object.assign(Object.assign(Object.assign({ discussion }, (geometry && { geometry })), { parents: [], sortBy: PostSort.UPDATED_AT, sortOrder: SortOrder.DESC, start, num: batchSize }), hubRequestOptions);\n    const result = searchPostAggregates(options);\n    if (start === 1) {\n      // first request must be synchronous to get total\n      const { total } = await result;\n      let nextStart = start + batchSize;\n      const results = [result];\n      const throttleMS = throttle\n        ? getThrottleMS(total, batchSize, 2500, 10, 250)\n        : 0;\n      while (nextStart <= total) {\n        await wait(throttleMS);\n        results.push(...await searchPosts({\n          discussion,\n          geometry,\n          start: nextStart\n        }));\n        nextStart = nextStart + batchSize;\n      }\n      return results;\n    }\n    return [result];\n  };\n  try {\n    const pagedResponses = await Promise.all([\n      // posts with related features\n      ...await searchPosts({\n        discussion: `${discussion}%?id=%`\n      }),\n      // posts with geometry\n      ...await searchPosts({\n        discussion: `${discussion}%`,\n        geometry: JSON.stringify(geometry)\n      })\n    ]);\n    const getPost = (postAggregate) => {\n      const { postDetails, replyDetails, channelDetails } = postAggregate;\n      const post = replyDetails ? replyDetails.post : postDetails.post;\n      const parentId = replyDetails ? postDetails.postId : null;\n      const channelId = channelDetails.channelId;\n      return Object.assign(Object.assign({}, post), { channelId,\n        parentId });\n    };\n    const uniquePostIds = [];\n    const posts = pagedResponses\n      .map(({ items }) => {\n      return items.map((postAggregate) => {\n        return getPost(postAggregate);\n      });\n    })\n      .flat()\n      .filter((post) => {\n      if (!uniquePostIds.includes(post.id)) {\n        uniquePostIds.push(post.id);\n        return true;\n      }\n      return false;\n    });\n    return postsToFeatureCollection(posts);\n  }\n  catch (error) {\n    const { message } = error;\n    console.error('Could not fetch on-map discussions:', message);\n  }\n};\n\nconst arcgisHubDiscussionsMapIntegratorCss = \".sc-arcgis-hub-discussions-map-integrator-h{display:block}@media only screen and (min-width: 640px){arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{width:25rem}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{padding:0px}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{top:calc(var(--top-offset) + 4.5rem);left:calc(var(--left-offset) - 5rem - 25rem);max-height:calc(var(--panel-height) - 6rem)}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{width:25rem}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{top:calc(var(--top-offset));left:calc(var(--left-offset))}}@media only screen and (max-width: 640px){arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{width:calc(var(--panel-width) + 0.05rem);top:calc(var(--top-offset) + var(--panel-height) * .5);max-height:calc(var(--panel-height) * .5);height:calc(var(--panel-height) * .5);left:0.95rem}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{width:calc(var(--panel-width) - 0.95rem);top:calc(var(--panel-height) + 3.2rem);left:0.5rem}}\";\n\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst ArcgisHubDiscussionsMapIntegrator = class {\n  /**\n   * Constructor function, pre-binds context to relevant methods\n   */\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.arcgisHubMapPopoverOpen = createEvent(this, \"arcgisHubMapPopoverOpen\", 7);\n    this.arcgisHubMapPopoverClear = createEvent(this, \"arcgisHubMapPopoverClear\", 7);\n    this.hubTelemetry = createEvent(this, \"hubTelemetry\", 7);\n    /**\n     * True when esri modules are loaded and layers are added to the view\n     */\n    this.initialized = false;\n    /**\n     * Cache of Discussion post features\n     */\n    this.cachedFeatures = [];\n    /**\n     * Unsaved original geometry used when editing original geometry on a post\n     */\n    this.unsavedExistingGeometry = [];\n    /**\n     * Cache of feature layer geometries used to avoid duplicate queries\n     * to feature service\n     */\n    this.cachedRelatedFeatureGeometry = {};\n    /**\n     * Unique ID's for discussion layers\n     */\n    this.layerIds = [];\n    /**\n     * Staged attribute to signal graphic should persist on map\n     */\n    this.persistAttribute = '__persist__';\n    /**\n     * Options to configure symbol styles to hosting app theme\n     */\n    this.theme = {};\n    /**\n     * Whether the discussions element is displaying in preview mode\n     */\n    this.preview = true;\n    bind(this, 'makeGraphic', 'makeCalloutGraphic', 'getRelatedFeature', 'setCalloutSymbolOnPointerMove', 'handleMapClickDiscussions', 'handleViewSizeChange', 'handleMapDrawSelect', 'addRelatedFeature', 'removeRelatedFeature', 'renderAddLocation', 'renderRemoveLocation', 'calculateOffsets');\n  }\n  /**\n   * Component will load lifecycle method, handles initial JSAPI initialization\n   */\n  async componentWillLoad() {\n    this.initialize();\n    this.intl = await intlManager.loadIntlForComponent(this.element);\n    loadArcGisCss();\n  }\n  /**\n   * Disconnected callback lifecycle method, handles teardown of\n   * layers on map to return to original state.  Also removes any\n   * outstanding map handlers for garbage collection.\n   */\n  disconnectedCallback() {\n    this.teardown();\n  }\n  /**\n   * Determines if target of an event originated from the connected discussions component or floating\n   * discussions map panel\n   * @param event An event\n   * @returns True if target is a reference to connected discussions component or floating discussions map panel\n   */\n  eventTargetIsDiscussionsRef(event) {\n    return (event.target === this.discussionsRef) || (event.target === this.onMapDiscussionsRef) || (event.target === this.onMapDiscussionsPreviewRef);\n  }\n  emitHubTelemetry(telemetry) {\n    this.hubTelemetry.emit(Object.assign(Object.assign({}, telemetry), { postId: this.sketchPostId, channelId: this.currentDiscussionsRef.channelId }));\n  }\n  /**\n   * Handles initial JSAPI initialization in instances where MapView is not available\n   * during componentWillLoad lifecycle method.  If a different MapView is\n   * provided, it will teardown the old MapView and initialize the new one\n   * @param view JSAPI MapView\n   * @param prevView Old JSAPI MapView\n   */\n  attachView(view, prevView) {\n    const { initialized } = this;\n    if (view && view !== prevView) {\n      if (initialized) {\n        this.teardown();\n      }\n      // initialize with new view\n      this.initialize();\n    }\n    else if (!view && initialized) {\n      // view detached - so gracefully teardown\n      this.teardown();\n    }\n  }\n  /**\n   * Setup and teardown of map when discussions is connected / disconnected\n   * @param discussionsRef HTML Element reference to discussions component\n   */\n  attachdiscussionsRef(discussionsRef) {\n    const { initialized } = this;\n    if (discussionsRef && !initialized) {\n      this.initialize();\n    }\n  }\n  /**\n   * Preserve drawRef props when it's connected\n   */\n  handleDrawRefUpdate() {\n    this.saveInitialDrawOptions();\n  }\n  /**\n   * Calculates position offsets for discussions element\n   */\n  calculateOffsets() {\n    const { view, preview, graphicGeometry, isOffset, previewHeight, activeMapDiscussion } = this;\n    if (view && activeMapDiscussion && graphicGeometry) {\n      const { container } = view;\n      const { top, left, right } = container.getBoundingClientRect();\n      const graphicScreenPos = view.toScreen(graphicGeometry);\n      const graphicLeft = isOffset ? graphicScreenPos.x + 5 : graphicScreenPos.x;\n      const graphicTop = isOffset ? graphicScreenPos.y - 34 : graphicScreenPos.y;\n      this.leftOffset = preview ? graphicLeft + left : right;\n      this.topOffset = preview ? graphicTop + top - previewHeight : top;\n    }\n  }\n  /**\n   * Gets height of preview element\n   * @param evt CustomEvent\n   */\n  handlePreviewDidLoad(evt) {\n    const { detail: height } = evt;\n    this.previewHeight = 0;\n    this.previewHeight = height;\n  }\n  /**\n   * Expands the discussions component\n   */\n  handlePreviewExpanded() {\n    this.preview = false;\n  }\n  /**\n   * Handles request to ease to current discussions graphics\n   */\n  handleGeometryGoTo(event) {\n    const { detail: thread } = event;\n    const graphics = [...this.geometryGraphicsLayer.graphics.toArray(), ...this.calloutGraphicsLayer.graphics.toArray()];\n    let activeGraphics = [];\n    if (thread) {\n      const postParentId = thread.postDetails.postId;\n      const postId = (thread.replyDetails) ? thread.replyDetails.postId : thread.postDetails.postId;\n      activeGraphics = graphics.filter(({ attributes: { id, parentId } }) => {\n        return (id === postId) || (postParentId && parentId === postParentId);\n      });\n    }\n    else {\n      const { activeMapDiscussion: { locationId } } = this;\n      activeGraphics = graphics.filter(({ attributes: { relatedFeatureId } }) => {\n        return relatedFeatureId === locationId;\n      });\n    }\n    if (activeGraphics.length) {\n      this.goTo(activeGraphics);\n    }\n  }\n  handleGeometryFeature(event) {\n    const { detail: { post, create } } = event;\n    this.unsavedExistingGeometry = [];\n    this.cachedFeatures = this.cachedFeatures.filter(({ properties: { id } }) => {\n      return id !== post.id;\n    });\n    const newFeatures = postToFeatures(post);\n    if (newFeatures) {\n      this.cachedFeatures = [...this.cachedFeatures, ...postToFeatures(post)];\n      if (create) {\n        this.cachedFeatures.map((feature) => {\n          const { properties: { id } } = feature;\n          const { parentId } = post;\n          if (id === parentId) {\n            if (!('replyCount' in feature.properties)) {\n              feature.properties.replyCount = 0;\n            }\n            feature.properties.replyCount += 1;\n          }\n          return feature;\n        });\n      }\n      this.refreshFeatures(this.cachedFeatures);\n      this.clearHoverActiveGraphics(true);\n    }\n  }\n  handleGeometryFeatureDeleted(event) {\n    const { detail: { id: deletedPostId, parentId: deletedPostParentId } } = event;\n    this.cachedFeatures = this.cachedFeatures.filter(({ properties: { id } }) => {\n      return id !== deletedPostId;\n    }).map((feature) => {\n      const { properties: { id } } = feature;\n      if (id === deletedPostParentId) {\n        feature.properties.replyCount -= 1;\n      }\n      return feature;\n    });\n    this.refreshFeatures(this.cachedFeatures);\n    this.clearHoverActiveGraphics(true);\n  }\n  /**\n   * Handles event that requests that a feature be selected on the map\n   * @param event\n   */\n  handleGeometryFeatureSelect(event) {\n    const { detail: { properties: { id, relatedFeatureId, index, unsaved } } } = event;\n    if (unsaved) {\n      let target = this.unsavedGeometryGraphicsLayer.graphics.getItemAt(index);\n      if (relatedFeatureId) {\n        target = this.makeGraphic(event.detail);\n      }\n      this.goTo(target);\n    }\n    else {\n      const graphic = this.calloutGraphicsLayer.graphics.find((graphic) => {\n        const { attributes: { relatedFeatureId: _relatedFeatureId, id: postId, __index__: postIndex } } = graphic;\n        return relatedFeatureId\n          ? relatedFeatureId == _relatedFeatureId\n          : postId == id && (postIndex === null || index == postIndex);\n      });\n      if (graphic) {\n        this.addHighlightGraphic(graphic, SYMBOL_STATE.ACTIVE, false);\n        const target = relatedFeatureId\n          ? this.cachedRelatedFeatureGeometry[relatedFeatureId].arcgis\n          : this.getGraphicById(id, index);\n        this.goTo(target);\n      }\n    }\n  }\n  /**\n   * Handles event that requests that a feature be highlighted on the map\n   * @param event\n   */\n  handleGeometryFeatureHighlight(event) {\n    const { detail: { properties: { id, relatedFeatureId, index, unsaved } } } = event;\n    if (unsaved) {\n      this.clearHoverActiveGraphics();\n    }\n    else {\n      const graphic = this.calloutGraphicsLayer.graphics.find((graphic) => {\n        const { attributes: { relatedFeatureId: _relatedFeatureId, id: postId, __index__: postIndex } } = graphic;\n        return relatedFeatureId\n          ? relatedFeatureId == _relatedFeatureId\n          : postId == id && (postIndex === null || index == postIndex);\n      });\n      if (graphic) {\n        this.addHighlightGraphic(graphic, SYMBOL_STATE.HOVER, false);\n      }\n    }\n  }\n  /**\n   * During a post editing session, removes unsaved features or related features\n   */\n  handleFeatureRemove(event) {\n    const { detail: { properties: { id, relatedFeatureId, index, unsaved } } } = event;\n    const { currentDiscussionsRef: { unsavedFeatures, unsavedRelatedFeatures } } = this;\n    if (unsaved) {\n      if (relatedFeatureId) {\n        this.currentDiscussionsRef.unsavedRelatedFeatures = [\n          ...unsavedRelatedFeatures.slice(0, index),\n          ...unsavedRelatedFeatures.slice(index + 1, unsavedRelatedFeatures.length)\n        ];\n      }\n      else {\n        this.currentDiscussionsRef.unsavedFeatures = [\n          ...unsavedFeatures.slice(0, index),\n          ...unsavedFeatures.slice(index + 1, unsavedFeatures.length)\n        ];\n        const graphic = this.unsavedGeometryGraphicsLayer.graphics.getItemAt(index);\n        this.unsavedGeometryGraphicsLayer.graphics.remove(graphic);\n      }\n    }\n    else {\n      const findMatch = (graphic) => {\n        const { attributes: { relatedFeatureId: _relatedFeatureId, id: postId, __index__: postIndex } } = graphic;\n        return relatedFeatureId\n          ? relatedFeatureId == _relatedFeatureId\n          : postId == id && (postIndex === null || index == postIndex);\n      };\n      const calloutGraphic = this.calloutGraphicsLayer.graphics.find(findMatch);\n      if (calloutGraphic) {\n        calloutGraphic.visible = false;\n      }\n      const geometryGraphic = this.geometryGraphicsLayer.graphics.find(findMatch);\n      if (geometryGraphic) {\n        geometryGraphic.visible = false;\n      }\n    }\n    this.clearHoverActiveGraphics(true);\n  }\n  handleGeometryDrawCreate(event) {\n    const { detail: postId } = event;\n    this.sketchPostId = postId;\n    this.drawRef.buffer = false;\n    this.drawRef.disablePrimaryOptions = true;\n    this.drawRef.disableEditOptions = true;\n  }\n  handleGeometryDrawTypeSelect(event) {\n    this.mapActionNoticeActive = true;\n    this.drawRef.setActiveTool(event.detail);\n  }\n  handleGeometryDrawDone() {\n    this.mapActionNoticeActive = false;\n    this.drawRef.setActiveTool(undefined);\n  }\n  /**\n   * Handles event that requests that a feature's drawn geometry\n   * be edited\n   * @param event\n   */\n  handleGeometryDrawEdit(event) {\n    const { drawRef } = this;\n    const { detail: { properties: { id, index, unsaved } } } = event;\n    const { geometry } = unsaved\n      ? this.unsavedGeometryGraphicsLayer.graphics.getItemAt(index)\n      : this.getGraphicById(id, index);\n    this.hideLayers();\n    this.goTo(geometry);\n    this.sketchPostId = id;\n    this.sketchIndex = index;\n    this.sketchIsUnsaved = unsaved;\n    drawRef.geometry = geometry;\n    drawRef.disablePrimaryOptions = true;\n    drawRef.buffer = false;\n  }\n  /**\n   * Handles event to stop a current edit session\n   * @param event\n   */\n  handleGeometryDrawEditCancel() {\n    this.currentDiscussionsRef.unsavedFeatures = [\n      ...this.currentDiscussionsRef.unsavedFeatures\n    ];\n    this.drawRef.forceReset();\n    this.showLayers();\n  }\n  handleDrawGraphicsChange(event) {\n    const { detail: { graphics, save, canceled, unsaved } } = event;\n    const { sketchPostId, sketchIndex, sketchIsUnsaved } = this;\n    const graphic = graphics.getItemAt(0);\n    graphic.geometry = simplify(graphic.geometry.clone(), this.view);\n    if (save && this.drawRef.disablePrimaryOptions) {\n      // Editing existing unsaved or saved graphics\n      const geographicGeom = webMercatorToGeographic(graphic.geometry);\n      const geometry = arcgisToGeoJSON(geographicGeom);\n      if (sketchIsUnsaved) {\n        // Unsaved / New graphics on post\n        const updateStagedFeatures = this.currentDiscussionsRef.unsavedFeatures.map((feature, index) => {\n          if (index === this.sketchIndex) {\n            feature.geometry = geometry;\n          }\n          return feature;\n        });\n        this.currentDiscussionsRef.unsavedFeatures = updateStagedFeatures;\n        this.unsavedGeometryGraphicsLayer.graphics.getItemAt(this.sketchIndex).geometry = graphic.geometry;\n      }\n      else {\n        // Saving edits to existing graphic on post\n        const feature = this.postToGeoJSON(geometry, {\n          index: sketchIndex,\n          id: sketchPostId\n        });\n        this.currentDiscussionsRef.unsavedExistingFeatures = [\n          ...this.currentDiscussionsRef.unsavedExistingFeatures.filter(({ properties: { index } }) => index !== sketchIndex),\n          feature\n        ];\n        const originalGraphic = this.getGraphicById(sketchPostId, sketchIndex);\n        const unsavedExistingGeometryExists = this.unsavedExistingGeometry.filter(({ id, index }) => {\n          return id === sketchPostId && index === sketchIndex;\n        });\n        if (!unsavedExistingGeometryExists.length) {\n          this.unsavedExistingGeometry.push({\n            id: sketchPostId,\n            index: sketchIndex,\n            geometry: originalGraphic.geometry.clone()\n          });\n        }\n        originalGraphic.geometry = graphic.geometry;\n      }\n      this.drawRef.forceReset();\n      this.showLayers();\n      const type = convertGeometryTypeToTelemetryString(geometry);\n      this.emitHubTelemetry(dist.dictionary.category.content.action.update.label.location.details[type]);\n    }\n    else if (canceled) {\n      // Cancelling edits\n      this.currentDiscussionsRef.unsavedFeatures = [\n        ...this.currentDiscussionsRef.unsavedFeatures\n      ];\n      this.drawRef.forceReset();\n      this.showLayers();\n    }\n    else if (unsaved) {\n      // Adding new unsaved graphics\n      this.drawRef.forceReset();\n      graphic.symbol = symbols[graphic.geometry.type](this.themeWithDefaults[graphic.geometry.type]);\n      this.addGraphicsToGraphicsLayer(this.unsavedGeometryGraphicsLayer, [graphic]);\n      const features = [];\n      graphics.forEach((graphic) => {\n        const geographicGeom = webMercatorToGeographic(graphic.geometry);\n        const geometry = arcgisToGeoJSON(geographicGeom);\n        features.push({\n          type: 'Feature',\n          geometry,\n          properties: {\n            id: this.sketchPostId\n          }\n        });\n        const type = convertGeometryTypeToTelemetryString(geometry);\n        this.emitHubTelemetry(dist.dictionary.category.content.action.create.label.location.details[type]);\n      });\n      this.currentDiscussionsRef.unsavedFeatures = [\n        ...this.currentDiscussionsRef.unsavedFeatures,\n        ...features\n      ];\n    }\n  }\n  /**\n   * Handles event to force drawing tools to reset\n   * @param event\n   */\n  handleGeometryDrawReset() {\n    this.currentDiscussionsRef.unsavedFeatures = [\n      ...this.currentDiscussionsRef.unsavedFeatures\n    ];\n    this.restoreInitialDrawOptions();\n    this.showLayers();\n  }\n  handleGeometryClearAll() {\n    this.resetStagedFeatures();\n    this.restoreInitialDrawOptions();\n    this.showLayers();\n    this.unsavedGeometryGraphicsLayer.graphics.removeAll();\n    const makeVisible = (graphic) => { graphic.visible = true; };\n    this.geometryGraphicsLayer.graphics.forEach(makeVisible);\n    this.calloutGraphicsLayer.graphics.forEach(makeVisible);\n    this.mapActionNoticeActive = false;\n  }\n  addRelatedFeature() {\n    const objectIdField = this.selectedGraphic.layer.objectIdField;\n    const objectId = this.selectedGraphic.attributes[objectIdField];\n    this.selectedGraphic.geometry = webMercatorToGeographic(this.selectedGraphic.geometry);\n    const relatedFeature = {\n      postId: this.sketchPostId,\n      objectId,\n      feature: arcgisToGeoJSON(this.selectedGraphic.toJSON())\n    };\n    this.currentDiscussionsRef.unsavedRelatedFeatures = [\n      ...this.currentDiscussionsRef.unsavedRelatedFeatures,\n      relatedFeature\n    ];\n    this.highlightGraphic();\n    this.arcgisHubMapPopoverClear.emit();\n    this.emitHubTelemetry(dist.dictionary.category.interaction.action.select.label.content);\n  }\n  removeRelatedFeature() {\n    const { currentDiscussionsRef: { unsavedRelatedFeatures } } = this;\n    const objectIdField = this.selectedGraphic.layer.objectIdField;\n    const objectId = this.selectedGraphic.attributes[objectIdField];\n    const index = this.currentDiscussionsRef.unsavedRelatedFeatures.findIndex((feature) => feature.objectId == objectId);\n    this.currentDiscussionsRef.unsavedRelatedFeatures = [\n      ...unsavedRelatedFeatures.slice(0, index),\n      ...unsavedRelatedFeatures.slice(index + 1, unsavedRelatedFeatures.length)\n    ];\n    this.arcgisHubMapPopoverClear.emit();\n    this.clearHighlights();\n    this.emitHubTelemetry(dist.dictionary.category.interaction.action.deselect.label.content);\n  }\n  renderAddLocation() {\n    return (h(\"calcite-action-pad\", { \"expand-disabled\": true, expanded: true, layout: \"horizontal\" }, h(\"calcite-action\", { icon: \"pin-plus\", onClick: this.addRelatedFeature, text: this.intl.t('location.add'), textEnabled: true })));\n  }\n  renderRemoveLocation() {\n    return (h(\"calcite-action-pad\", { \"expand-disabled\": true, expanded: true, layout: \"horizontal\" }, h(\"calcite-action\", { icon: \"trash\", onClick: this.removeRelatedFeature, text: this.intl.t('location.remove'), textEnabled: true })));\n  }\n  async handleMapDrawSelect(event) {\n    const { detail } = event;\n    const { targetLayer } = this;\n    const { results } = await this.view.hitTest(detail, { include: targetLayer });\n    const result = getFirstHitGraphic(results);\n    if ((result === null || result === void 0 ? void 0 : result.graphic) && this.drawRef.disableEditOptions) {\n      const { graphic } = result;\n      const objectIdField = graphic.layer.objectIdField;\n      const objectId = graphic.attributes[objectIdField];\n      if (!graphic.attributes.hasOwnProperty(targetLayer.displayField)) {\n        // It is not guaranteed that the targetLayer was configured with necessary outFields\n        // prior to being added to the view.  If not, perform additional query to the service \n        // to obtain additional fields.\n        const { features: [feature] } = await targetLayer.queryFeatures({ objectIds: [objectId], outFields: ['*'], returnGeometry: false });\n        if (feature) {\n          graphic.attributes = feature.attributes;\n        }\n      }\n      // check if objectID exists in current unsaved features\n      const unsavedRelatedFeatureIds = this.currentDiscussionsRef.unsavedRelatedFeatures.map((feature) => feature.objectId);\n      let renderFn = this.renderAddLocation;\n      if (unsavedRelatedFeatureIds.includes(objectId)) {\n        renderFn = this.renderRemoveLocation;\n      }\n      this.selectedGraphic = graphic;\n      this.arcgisHubMapPopoverOpen.emit({\n        geometry: graphic.geometry,\n        view: this.view,\n        render: renderFn\n      });\n      this.highlightGraphic(graphic);\n    }\n    else {\n      this.selectedGraphic = null;\n      this.highlightGraphic();\n    }\n  }\n  handleDiscussionsClose(event) {\n    if (event.target === this.onMapDiscussionsRef || event.target === this.onMapDiscussionsPreviewRef) {\n      // clear current active discussion\n      this.activeMapDiscussion = undefined;\n      this.clearHoverActiveGraphics(true);\n    }\n  }\n  /**\n   * Used to inform connected discussions component if map is available\n   * @param hasMap Boolean - if map is available\n   */\n  setDiscussionsRefHasMap(hasMap) {\n    if (this.discussionsRef) {\n      this.discussionsRef.hasMap = hasMap;\n    }\n  }\n  /**\n   * Initialization - loads JSAPI modules and adds necessary layers\n   */\n  async initialize() {\n    const { view, context } = this;\n    this.saveInitialDrawOptions();\n    if (view && context) {\n      await view.when();\n      this.addGeometryGraphicsLayer();\n      this.addStagedGeometryGraphicsLayer();\n      this.addCalloutGraphicsLayer();\n      this.addHighlightGraphicsLayer();\n      this.fetchSubject();\n      this.fetchPosts();\n      this.handleViewSizeChange();\n      if (this.cachedFeatures.length) {\n        try {\n          await this.refreshFeatures(this.cachedFeatures);\n        }\n        catch (e) {\n          console.warn('Cannot add discussions features to the map', e.message);\n        }\n      }\n      this.setDiscussionsRefHasMap(true);\n      this.mapViewSizeChangeHandler = watch(view, 'size', this.handleViewSizeChange);\n      this.mapViewCenterChangeHandler = watch(view, 'center', this.calculateOffsets);\n      this.initialized = true;\n    }\n  }\n  /**\n   * Teardown of component to return map to original state\n   * and remove map handlers\n   */\n  teardown() {\n    this.initialized = false;\n    this.clearHighlights();\n    this.removeViewHandlers();\n    this.removeLayers();\n    this.resetSelect();\n    this.setDiscussionsRefHasMap(false);\n  }\n  /**\n   * Pre-fetches subject details for faster initial discussions\n   * on-map panel load time\n   */\n  fetchSubject() {\n    const { discussion, context } = this;\n    fetchSubjectDetails(Object.assign({ discussion }, context.hubRequestOptions));\n  }\n  /**\n   * Fetches all posts with location to load onto map for\n   * current discussion\n  */\n  fetchPosts() {\n    getPostsWithLocation(this.discussion, this.context.hubRequestOptions).then((featureCollection) => {\n      if (featureCollection === null || featureCollection === void 0 ? void 0 : featureCollection.features) {\n        this.cachedFeatures = featureCollection.features;\n        if (this.initialized) {\n          this.refreshFeatures(featureCollection.features);\n        }\n      }\n    });\n  }\n  /**\n   * Add graphics layer that will hold post graphics\n   */\n  addGeometryGraphicsLayer() {\n    this.geometryGraphicsLayer = new GraphicsLayer({\n      graphics: [],\n      elevationInfo: {\n        mode: 'on-the-ground'\n      }\n    });\n    this.view.map.add(this.geometryGraphicsLayer);\n    this.layerIds.push(this.geometryGraphicsLayer.id);\n  }\n  /**\n   * Adds graphics layer that will temporarily hold graphics for post that is being edited\n   */\n  addStagedGeometryGraphicsLayer() {\n    this.unsavedGeometryGraphicsLayer = new GraphicsLayer({\n      graphics: [],\n      elevationInfo: {\n        mode: 'on-the-ground'\n      }\n    });\n    this.view.map.add(this.unsavedGeometryGraphicsLayer);\n    this.layerIds.push(this.geometryGraphicsLayer.id);\n  }\n  // Add Callout Graphic Layer that will hold callout graphics\n  addCalloutGraphicsLayer() {\n    this.calloutGraphicsLayer = new GraphicsLayer({\n      graphics: [],\n      effect: 'drop-shadow(0px, 2px, 8px, rgba(0, 0, 0, .20))',\n      elevationInfo: {\n        mode: 'relative-to-ground'\n      }\n    });\n    this.view.map.add(this.calloutGraphicsLayer);\n    this.layerIds.push(this.calloutGraphicsLayer.id);\n    // Set hover graphic symbol state\n    this.mapPointerMoveHandler = this.view.on('pointer-move', this.setCalloutSymbolOnPointerMove);\n    this.mapClickDiscussionsHandler = this.view.on('click', this.handleMapClickDiscussions);\n  }\n  // Add Highlight Graphics Layer that will hold active graphic highlights\n  addHighlightGraphicsLayer() {\n    this.highlightGraphicsLayer = new GraphicsLayer({\n      graphics: [],\n      elevationInfo: {\n        mode: 'relative-to-ground'\n      }\n    });\n    this.view.map.add(this.highlightGraphicsLayer);\n    this.layerIds.push(this.highlightGraphicsLayer.id);\n  }\n  /**\n   * Add graphic to highlight layer and clear non-persisted graphics\n   * @param graphic An Esri JSAPI Graphic\n   * @param state SYMBOL_STATE\n   * @param persist If graphic should stay active until overwritten\n   */\n  addHighlightGraphic(graphic, state, persist) {\n    var _a, _b;\n    const { themeWithDefaults, highlightGraphicsLayer, persistAttribute, is3D } = this;\n    const graphicCopy = graphic.clone();\n    graphicCopy.symbol = symbols.callout(state, Object.assign(Object.assign({}, themeWithDefaults.callout), { isOffset: (_a = graphic === null || graphic === void 0 ? void 0 : graphic.attributes) === null || _a === void 0 ? void 0 : _a.isOffset, is3D }), (_b = graphicCopy.attributes) === null || _b === void 0 ? void 0 : _b.totalCount);\n    graphicCopy.attributes[persistAttribute] = persist;\n    this.clearHoverActiveGraphics(persist);\n    highlightGraphicsLayer.add(graphicCopy);\n  }\n  /**\n   * Add styled hover graphic for post callouts when the mouse intersects an existing callout\n   * @param event Esri JSAPI ViewPointerMoveEvent\n   */\n  setCalloutSymbolOnPointerMove(event) {\n    this.view.hitTest(event, { include: this.calloutGraphicsLayer }).then((r) => {\n      if (r.results.length) {\n        const result = getFirstHitGraphic(r.results);\n        const { graphic } = result;\n        this.addHighlightGraphic(graphic, SYMBOL_STATE.HOVER, false);\n      }\n      else {\n        this.clearHoverActiveGraphics(false);\n      }\n    });\n  }\n  /**\n   * Remove layers from the map\n   */\n  removeLayers() {\n    [this.geometryGraphicsLayer, this.unsavedGeometryGraphicsLayer, this.calloutGraphicsLayer, this.highlightGraphicsLayer]\n      .forEach(layer => this.removeLayer(layer));\n  }\n  /**\n   * Hide layers on the map by setting opacity to .10\n   */\n  hideLayers() {\n    [this.geometryGraphicsLayer, this.unsavedGeometryGraphicsLayer, this.calloutGraphicsLayer, this.highlightGraphicsLayer]\n      .forEach(layer => layer.opacity = 0.10);\n  }\n  /**\n   * Show layers on the map by setting opacity to 1\n   */\n  showLayers() {\n    [this.geometryGraphicsLayer, this.unsavedGeometryGraphicsLayer, this.calloutGraphicsLayer, this.highlightGraphicsLayer]\n      .forEach(layer => layer.opacity = 1);\n  }\n  /**\n   * Remove a layer from the map\n   * @param layer Esri JSAPI GraphicsLayer\n   */\n  removeLayer(layer) {\n    if (layer) {\n      layer.destroy();\n    }\n  }\n  /**\n   * Empties any graphics from existing graphics layers\n   */\n  emptyFeatures() {\n    [this.geometryGraphicsLayer, this.unsavedGeometryGraphicsLayer, this.calloutGraphicsLayer].forEach(layer => layer.removeAll());\n  }\n  /**\n   * Adds graphics to a specified graphics layer\n   * @param layer Esri JSAPI GraphicsLayer\n   * @param graphics Array of Esri JSAPI Graphics\n   */\n  addGraphicsToGraphicsLayer(layer, graphics) {\n    layer.addMany(graphics);\n  }\n  /**\n   * Takes array of GeoJSON features and adds them to the map, replacing all previous features\n   * @param features An array of GeoJSON Features\n   */\n  async refreshFeatures(features) {\n    this.emptyFeatures();\n    this.resetSelect();\n    features.forEach((feature) => { var _a; return feature.properties.totalCount = (_a = feature.properties.replyCount) !== null && _a !== void 0 ? _a : 0; });\n    // create graphics for underlying geometry and callout CIM symbol\n    const hasGeometry = ({ geometry }) => Boolean(geometry);\n    const postGraphics = features.map(this.makeGraphic).filter(hasGeometry);\n    const geometryCallout = features.map(this.makeCalloutGraphic).filter(hasGeometry);\n    // Build cache of post related feature geometries by feature ID\n    const hasFeatures = ({ properties }) => Boolean(parseDiscussionURI(properties.discussion).features);\n    const postsWithRelatedFeatures = features.filter(hasFeatures);\n    const relatedFeatureIds = Array.from(new Set(postsWithRelatedFeatures\n      .map(({ properties: { discussion } }) => parseDiscussionURI(discussion).features.map(id => id))\n      .flat()));\n    await this.cacheRelatedFeatureGeometry(relatedFeatureIds);\n    // Build related feature array and update callout counts\n    const relatedFeatures = [];\n    const postIds = [];\n    for (const post of postsWithRelatedFeatures) {\n      if (postIds.includes(post.properties.id)) {\n        // a single post can be divided for n + 1 geometries, but only increment once\n        continue;\n      }\n      else {\n        postIds.push(post.properties.id);\n      }\n      const { properties: postProperties } = post;\n      const { features } = parseDiscussionURI(postProperties.discussion);\n      postProperties.totalCount = 0;\n      features.forEach((postFeatureId) => {\n        var _a;\n        const matchesFeatureId = ({ properties: { relatedFeatureId } }) => {\n          return relatedFeatureId == postFeatureId;\n        };\n        const existingFeature = relatedFeatures.find(matchesFeatureId);\n        if (existingFeature) {\n          // the related feature has already been found, so increment count\n          const { properties: featureProperties } = existingFeature;\n          const postTotalCount = ((_a = postProperties.totalCount) !== null && _a !== void 0 ? _a : 0) + 1;\n          featureProperties.totalCount += postTotalCount;\n        }\n        else {\n          try {\n            // get post related feature from cache\n            const feature = this.getRelatedFeature(postFeatureId);\n            // add reference to related feature ID\n            feature.properties = Object.assign(Object.assign({}, post.properties), { relatedFeatureId: postFeatureId });\n            relatedFeatures.push(feature);\n          }\n          catch (error) {\n            // related features referenced by a post may have been removed from service\n            console.warn(`Failed to access post related feature:`, error.message);\n          }\n        }\n      });\n    }\n    const relatedFeaturesCallout = relatedFeatures.map(this.makeCalloutGraphic);\n    const calloutGraphics = [...geometryCallout, ...relatedFeaturesCallout];\n    // Add graphics to map\n    this.addGraphicsToGraphicsLayer(this.geometryGraphicsLayer, postGraphics);\n    this.addGraphicsToGraphicsLayer(this.calloutGraphicsLayer, calloutGraphics);\n  }\n  /**\n   * Creates an extent from a point, used for determining zoom level\n   * @param geometry Esri JSAPI Point Geometry\n   * @param tolerance Number in Degrees to expand point extent\n   * @returns\n   */\n  pointToExtent(geometry, tolerance = 0.0025) {\n    const { x, y, spatialReference } = geometry;\n    const extent = new Extent({\n      xmin: x - tolerance,\n      ymin: y - tolerance,\n      xmax: x + tolerance,\n      ymax: y + tolerance,\n      spatialReference\n    });\n    return extent;\n  }\n  /**\n   * Eases map to given location\n   * @param target Target location / viewpoint to navigate to\n   */\n  goTo(goToTarget) {\n    if (!this.view) {\n      return;\n    }\n    let target = goToTarget;\n    if (target.geometry && target.geometry.type === 'point') {\n      target = this.pointToExtent(target.geometry);\n    }\n    if (target.extent) {\n      target = target.extent.clone().expand(2);\n    }\n    this.view.goTo({\n      target\n    }, {\n      duration: 1000,\n      easing: 'ease'\n    }).catch((error) => {\n      if (!isAbortError(error)) {\n        console.error(`Failed to zoom map to target feature or extent:`, error.message);\n      }\n    });\n  }\n  /**\n   * Constructs a valid GeoJSON object given a geometry type and properties object\n   * @param geometry GeoJSON geometry type string\n   * @param properties GeoJSON properties object\n   * @returns GeoJSON Feature\n   */\n  postToGeoJSON(geometry, properties) {\n    return {\n      type: 'Feature',\n      geometry,\n      properties\n    };\n  }\n  /**\n   * Construct an Esri Graphic from a GeoJSON Feature\n   * @param feature GeoJSON Feature\n   * @returns Esri JSAPI Graphic\n   */\n  makeGraphic(feature) {\n    var _a;\n    const arcgisJson = geojsonToArcGIS(feature);\n    const graphic = Graphic.fromJSON(arcgisJson);\n    if ((_a = graphic === null || graphic === void 0 ? void 0 : graphic.geometry) === null || _a === void 0 ? void 0 : _a.type) {\n      graphic.symbol = symbols[graphic.geometry.type](this.themeWithDefaults[graphic.geometry.type]);\n    }\n    return graphic;\n  }\n  /**\n   * Construct an Esri Graphic that is a callout icon for the underlying GeoJSON Feature\n   * @param feature GeoJSON Feature\n   * @returns Esri JSAPI Graphic\n   */\n  makeCalloutGraphic(feature) {\n    var _a;\n    const { is3D } = this;\n    const { callout } = symbols;\n    const { geometry, properties } = feature;\n    // IMPROVEMENT: we should think about where callout should be placed, currently just grabs first coord\n    const [x, y] = geometry.coordinates.flat(Infinity);\n    const isOffset = !properties.relatedFeatureId && feature.geometry.type === 'Point';\n    const arcgisJson = geojsonToArcGIS({\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [x, y]\n      },\n      properties: Object.assign(Object.assign({}, properties), { replyCount: properties.replyCount || 0, isOffset })\n    });\n    const graphic = Graphic.fromJSON(arcgisJson);\n    graphic.symbol = callout(SYMBOL_STATE.DEFAULT, Object.assign(Object.assign({}, this.themeWithDefaults.callout), { isOffset,\n      is3D }), (_a = feature.properties) === null || _a === void 0 ? void 0 : _a.totalCount);\n    return graphic;\n  }\n  /**\n   * Queries feature service for related feature geometry and constructs GeoJSON feature\n   * @param feature GeoJSON Feature\n   * @returns Promise that resolves with a GeoJSON Feature\n   */\n  getRelatedFeature(objectId) {\n    const geometry = this.cachedRelatedFeatureGeometry[objectId].geojson;\n    return {\n      type: 'Feature',\n      geometry,\n      properties: {}\n    };\n  }\n  /**\n   * Caches realted feature geometry in single optimized query\n   * @param objectIds Array of feature service object ids\n   */\n  async cacheRelatedFeatureGeometry(objectIds) {\n    // determine which features are currently not cached and cache them\n    const { cachedRelatedFeatureGeometry, targetLayer } = this;\n    if (!targetLayer) {\n      // TODO: We should, as an improvement, not require the underlying discussions \n      // service layer to already exist on the map.  Rather, we should check if the service\n      // exists on the map, and if not add it (featching service from item ID)\n      console.warn('Discussions service layer not defined; ingnoring related features');\n      return;\n    }\n    const cachedIds = Object.keys(cachedRelatedFeatureGeometry);\n    const nonCachedIds = objectIds.filter((id) => !cachedIds.includes(`${id}`));\n    if (nonCachedIds.length) {\n      const query = { where: \"1=1\", objectIds: nonCachedIds.map(id => +id), returnGeometry: true, outSpatialReference: { wkid: 4326 }, outFields: [this.targetLayer.objectIdField, this.targetLayer.displayField] };\n      const { features } = await this.targetLayer.queryFeatures(query);\n      features.forEach(({ geometry, attributes }) => {\n        const geometryGeoJSON = arcgisToGeoJSON(geometry);\n        this.cachedRelatedFeatureGeometry[attributes[this.targetLayer.objectIdField]] = {\n          arcgis: geometry,\n          geojson: geometryGeoJSON\n        };\n      });\n    }\n  }\n  /**\n   * Query graphics layer for existing graphic matching post ID\n   * @param id Unique identifier of feature (post id)\n   * @returns\n   */\n  getGraphicById(id, index) {\n    const graphic = this.geometryGraphicsLayer.graphics.find(({ attributes: { id: postId, __index__: postIndex } }) => {\n      const matchIndex = index !== null ? index == postIndex : true;\n      return postId === id && matchIndex;\n    });\n    return graphic;\n  }\n  /**\n   * Highlight a feature on the map\n   * @param graphic Esri JSAPI Graphic to highlight\n   * @returns\n   */\n  highlightGraphic(graphic) {\n    this.clearHighlights();\n    if (!graphic) {\n      return;\n    }\n    this.clearHighlights();\n    this.view.whenLayerView(graphic.layer).then((layerView) => {\n      this.highlightHandle = layerView.highlight(graphic);\n    });\n  }\n  /**\n   * Clear any existing highlighted graphics\n   */\n  clearHighlights() {\n    if (this.highlightHandle) {\n      this.highlightHandle.remove();\n      this.highlightHandle = null;\n    }\n  }\n  /**\n   * Clear any existing active or hover graphics\n   */\n  clearHoverActiveGraphics(all) {\n    const { persistAttribute, highlightGraphicsLayer } = this;\n    if (all) {\n      highlightGraphicsLayer.removeAll();\n    }\n    else {\n      const tempGraphics = highlightGraphicsLayer.graphics.filter(({ attributes }) => {\n        return !attributes[persistAttribute];\n      });\n      highlightGraphicsLayer.removeMany(tempGraphics.toArray());\n    }\n  }\n  /**\n   * Remove MapView handlers for garbage collection\n   */\n  removeViewHandlers() {\n    [this.mapPointerMoveHandler, this.mapClickDiscussionsHandler, this.mapViewSizeChangeHandler, this.mapViewCenterChangeHandler].forEach((handler) => {\n      if (handler) {\n        handler.remove();\n        handler = null;\n      }\n    });\n  }\n  /**\n   * Remove map click handler used for selecting related features\n   */\n  resetSelect() {\n    this.clearHighlights();\n  }\n  saveInitialDrawOptions() {\n    const { drawRef: { buffer, disableEditOptions, disablePrimaryOptions } } = this;\n    this.initialDrawOptions = {\n      buffer,\n      disableEditOptions,\n      disablePrimaryOptions\n    };\n  }\n  restoreInitialDrawOptions() {\n    const { initialDrawOptions: { buffer, disableEditOptions, disablePrimaryOptions } } = this;\n    this.drawRef.buffer = buffer;\n    this.drawRef.disableEditOptions = disableEditOptions;\n    this.drawRef.disablePrimaryOptions = disablePrimaryOptions;\n    this.drawRef.setActiveTool(undefined);\n    this.drawRef.forceReset();\n  }\n  resetStagedFeatures() {\n    this.currentDiscussionsRef.unsavedFeatures = [];\n    this.currentDiscussionsRef.unsavedRelatedFeatures = [];\n    this.currentDiscussionsRef.unsavedExistingFeatures = [];\n    this.unsavedExistingGeometry.forEach(({ id, index, geometry }) => {\n      // revert edits on existing geometry\n      const graphic = this.getGraphicById(id, index);\n      graphic.geometry = geometry;\n    });\n    this.unsavedExistingGeometry = [];\n  }\n  /**\n   * When map is clicked on discussions geometries, set active discussion for on map discussions panel\n   * @param event Esri JSAPI ViewClickEvent\n   */\n  handleMapClickDiscussions(event) {\n    this.view.hitTest(event, { include: [this.calloutGraphicsLayer] }).then((r) => {\n      if (r.results.length) {\n        this.preview = true;\n        const result = getFirstHitGraphic(r.results);\n        const { graphic } = result;\n        this.graphicGeometry = graphic.geometry;\n        this.isOffset = graphic.attributes.isOffset;\n        const { attributes: { parentId, channelId, id, relatedFeatureId } } = graphic;\n        if (relatedFeatureId) {\n          const locationId = relatedFeatureId;\n          this.activeMapDiscussion = { channelId, locationId };\n        }\n        else {\n          const postId = !parentId\n            ? id\n            : parentId;\n          const replyId = parentId\n            ? id\n            : undefined;\n          this.activeMapDiscussion = { channelId, postId, replyId };\n        }\n        // Set active graphic\n        this.addHighlightGraphic(graphic, SYMBOL_STATE.ACTIVE, true);\n      }\n    });\n  }\n  handleViewSizeChange() {\n    const { view: { height, width } } = this;\n    this.viewHeight = height;\n    this.viewWidth = width;\n  }\n  get currentDiscussionsRef() {\n    return this.activeMapDiscussion ? this.onMapDiscussionsRef : this.discussionsRef;\n  }\n  /**\n   * Returns default theme mixed with any custom theme options\n   */\n  get themeWithDefaults() {\n    const { theme } = this;\n    const _themeWithDefaults = {};\n    ['point', 'polyline', 'polygon', 'callout'].forEach((type) => {\n      _themeWithDefaults[type] = Object.assign(Object.assign({}, defaultLayerThemeOptions[type]), theme[type]);\n    });\n    return _themeWithDefaults;\n  }\n  /**\n   * Returns true if current view is a SceneView\n   */\n  get is3D() {\n    const { view } = this;\n    return view.hasOwnProperty('camera');\n  }\n  /**\n   * The primary feature layer for current discussion\n   */\n  get targetLayer() {\n    return this.view.map.allLayers.filter((layer) => {\n      return (layer.type === 'feature' && (!this.layerIds.includes(layer.id)));\n    }).getItemAt(0);\n  }\n  get styles() {\n    const { view, viewWidth, viewHeight, leftOffset, topOffset, previewHeight, preview } = this;\n    let styles = {};\n    if (view) {\n      const { container } = view;\n      const { top, left, right, bottom } = container.getBoundingClientRect();\n      styles = {\n        '--left-offset': `${leftOffset}px`,\n        '--top-offset': `${topOffset}px`,\n        '--panel-left': `${left}px`,\n        '--panel-height': `${preview ? (viewHeight - previewHeight) : (bottom - top)}px`,\n        '--panel-width': `${right - left}px`,\n        '--view-width': `${viewWidth}px`,\n        '--view-height': `${viewHeight}px`\n      };\n    }\n    return styles;\n  }\n  renderMapDiscussion() {\n    const { activeMapDiscussion, context, discussion, isHub } = this;\n    return this.preview\n      ? (h(\"arcgis-hub-discussions-map-preview\", { channelId: activeMapDiscussion.channelId, context: context, discussion: discussion, locationId: activeMapDiscussion.locationId, postId: activeMapDiscussion.postId, ref: (element) => { this.onMapDiscussionsPreviewRef = element; }, replyId: activeMapDiscussion.replyId }))\n      : (h(\"arcgis-hub-discussions\", { channelId: activeMapDiscussion.channelId, context: context, disableNavigation: !activeMapDiscussion.locationId, discussion: discussion, dismissible: true, enableGoTo: true, hasMap: true, isHub: isHub, locationId: activeMapDiscussion.locationId, postId: activeMapDiscussion.postId, ref: (element) => { this.onMapDiscussionsRef = element; }, replyId: activeMapDiscussion.replyId }));\n  }\n  render() {\n    const { activeMapDiscussion, styles, view, mapActionNoticeActive } = this;\n    return (h(Host, { \"data-element\": \"discussions-map-integrator\", style: styles }, activeMapDiscussion && this.renderMapDiscussion(), view && mapActionNoticeActive &&\n      h(\"arcgis-hub-discussions-map-action-notice\", { view: view })));\n  }\n  static get assetsDirs() { return [\"locales\"]; }\n  get element() { return getElement(this); }\n  static get watchers() { return {\n    \"view\": [\"attachView\"],\n    \"discussionsRef\": [\"attachdiscussionsRef\"],\n    \"drawRef\": [\"handleDrawRefUpdate\"],\n    \"preview\": [\"calculateOffsets\"],\n    \"previewHeight\": [\"calculateOffsets\"],\n    \"context\": [\"initialize\"]\n  }; }\n};\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryGoTo\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryFeature\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryFeatureDeleted\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryFeatureSelect\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryFeatureHighlight\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleFeatureRemove\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryDrawCreate\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryDrawTypeSelect\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryDrawEdit\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryDrawEditCancel\", null);\n__decorate([\n  CallWhenFactory({ when(event) {\n      return event.target === this.drawRef;\n    } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleDrawGraphicsChange\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryDrawReset\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleGeometryClearAll\", null);\n__decorate([\n  CallWhenFactory({ when(event) { return this.eventTargetIsDiscussionsRef(event); } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleDiscussionsClose\", null);\n__decorate([\n  CallWhenFactory({ when(features) { return features; } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"refreshFeatures\", null);\n__decorate([\n  CallWhenFactory({ when() { return this.drawRef; } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"saveInitialDrawOptions\", null);\n__decorate([\n  CallWhenFactory({ when() { return this.drawRef && this.initialDrawOptions; } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"restoreInitialDrawOptions\", null);\n__decorate([\n  CallWhenFactory({ when() { return this.currentDiscussionsRef; } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"resetStagedFeatures\", null);\n__decorate([\n  CallWhenFactory({ when() { return !this.mapActionNoticeActive; } })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleMapClickDiscussions\", null);\n__decorate([\n  DebounceDecoratorFactory({ timeout: 50 })\n], ArcgisHubDiscussionsMapIntegrator.prototype, \"handleViewSizeChange\", null);\nArcgisHubDiscussionsMapIntegrator.style = arcgisHubDiscussionsMapIntegratorCss;\n\nexport { ArcgisHubDiscussionsMapIntegrator as arcgis_hub_discussions_map_integrator };\n","/**\n * A method decorator factory function for the callWhen decorator\n * @param params An ICallWhenDecoratorParams object\n * @returns The callWhen method decorator function\n */\nfunction CallWhenFactory(params) {\n  /**\n   * A decorator function that conditionally call a method if when function returns truthy\n   *\n   * @param _target A reference to the class prototype\n   * @param _propertyKey The name of the method being decorated\n   * @param descriptor A PropertyDescriptor for the method being decorated\n   * @returns A new PropertyDescriptor that aguments the decorated method with conditional call behavior\n   */\n  function callWhen(_target, _propertyKey, descriptor) {\n    const { value: original } = descriptor;\n    const { when } = params;\n    const value = function callWhen(...args) {\n      const isTruthy = when.apply(this, args);\n      if (isTruthy) {\n        // when() condition passed, so call method\n        return original.apply(this, args);\n      }\n    };\n    return Object.assign(Object.assign({}, descriptor), { value });\n  }\n  return callWhen;\n}\n\nexport { CallWhenFactory as C };\n","/**\n * A util to debounce another function. It will return a function\n * that, as long as it continues to be invoked, will not be triggered\n * until the designated timeout has passed.\n */\nfunction debounce(fn, timeout = 300) {\n  let timeoutId;\n  return function (context, ...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn.apply(context, args), timeout);\n  };\n}\n\nfunction DebounceDecoratorFactory(params) {\n  function DebounceDecorator(_target, propertyKey, descriptor) {\n    const { value: original } = descriptor;\n    const debouncedKey = `${propertyKey.toString()}Debounced`;\n    const value = function (...args) {\n      if (!this[debouncedKey]) {\n        Object.defineProperty(this, debouncedKey, {\n          value: debounce(original, params.timeout),\n        });\n      }\n      this[debouncedKey](this, ...args);\n    };\n    return Object.assign(Object.assign({}, descriptor), { value });\n  }\n  return DebounceDecorator;\n}\n\nexport { DebounceDecoratorFactory as D };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nvar e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}export{e as c,o as g};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import s from\"./Accessor.js\";import t from\"./Handles.js\";import{property as r}from\"./accessorSupport/decorators/property.js\";import{subclass as o}from\"./accessorSupport/decorators/subclass.js\";import{WatchUpdatingTracking as n}from\"./support/WatchUpdatingTracking.js\";const a=s=>{let a=class extends s{destroy(){this.destroyed||(this._get(\"handles\")?.destroy(),this._get(\"updatingHandles\")?.destroy())}get handles(){return this._get(\"handles\")||new t}get updatingHandles(){return this._get(\"updatingHandles\")||new n}};return e([r({readOnly:!0})],a.prototype,\"handles\",null),e([r({readOnly:!0})],a.prototype,\"updatingHandles\",null),a=e([o(\"esri.core.HandleOwner\")],a),a};let d=class extends(a(s)){};d=e([o(\"esri.core.HandleOwner\")],d);export{d as HandleOwner,a as HandleOwnerMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../Collection.js\";import{castForReferenceSetter as s,referenceSetter as o}from\"../collectionUtils.js\";import{HandleOwnerMixin as r}from\"../HandleOwner.js\";import\"../has.js\";import\"../Logger.js\";import{isNone as i}from\"../maybe.js\";import{property as n}from\"../accessorSupport/decorators/property.js\";import\"../accessorSupport/ensureType.js\";import\"../arrayUtils.js\";import{subclass as p}from\"../accessorSupport/decorators/subclass.js\";let l=class extends(r(t)){constructor(e){super(e),this.handles.add([this.on(\"before-add\",(e=>{i(e.item)&&e.preventDefault()})),this.on(\"after-add\",(e=>this._own(e.item))),this.on(\"after-remove\",(e=>this._release(e.item)))])}get owner(){return this._get(\"owner\")}set owner(e){e!==this._get(\"owner\")&&(this._releaseAll(),this._set(\"owner\",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(t.ofType(this.itemType.Type))(e):new t(e)}};function a(e,t){return{type:e,cast:s,set(s){const r=o(s,this._get(t),e);r.owner=this,this._set(t,r)}}}e([n()],l.prototype,\"owner\",null),l=e([p(\"esri.core.support.OwningCollection\")],l);export{l as OwningCollection,a as owningCollectionProperty};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import s from\"../Accessor.js\";import t from\"../Handles.js\";import{isNone as i}from\"../maybe.js\";import{watch as n,when as d,on as a,sync as r}from\"../reactiveUtils.js\";import{schedule as h}from\"../scheduling.js\";import{property as o}from\"../accessorSupport/decorators/property.js\";import{subclass as l}from\"../accessorSupport/decorators/subclass.js\";let c=class extends s{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new t,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,s,t={}){return this._installWatch(e,s,t,n)}addWhen(e,s,t={}){return this._installWatch(e,s,t,d)}addOnCollectionChange(e,s,{initial:t=!1,final:i=!1}={}){const n=++this._handleId;return this._handles.add([a(e,\"after-changes\",this._createSyncUpdatingCallback(),r),a(e,\"change\",s,{onListenerAdd:t?e=>s({added:e.toArray(),removed:[]}):void 0,onListenerRemove:i?e=>s({added:[],removed:e.toArray()}):void 0})],n),{remove:()=>this._handles.remove(n)}}addPromise(e){if(i(e))return e;const s=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(0!==this._pendingPromises.size||this._handles.has(_)||this._set(\"updating\",!1))}},s),this._pendingPromises.add(e),this._set(\"updating\",!0);const t=()=>this._handles.remove(s);return e.then(t,t),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set(\"updating\",!1)}_installWatch(e,s,t={},i){const n=++this._handleId;t.sync||this._installSyncUpdatingWatch(e,n);const d=i(e,s,t);return this._handles.add(d,n),{remove:()=>this._handles.remove(n)}}_installSyncUpdatingWatch(e,s){const t=this._createSyncUpdatingCallback(),i=n(e,t,{sync:!0,equals:()=>!1});return this._handles.add(i,s),i}_createSyncUpdatingCallback(){return()=>{this._handles.remove(_),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get(\"updating\")||this._set(\"updating\",!0),this._handles.add(h((()=>{e===this._scheduleHandleId&&(this._set(\"updating\",this._pendingPromises.size>0),this._handles.remove(_))})),_)}}};e([o({readOnly:!0})],c.prototype,\"updating\",void 0),c=e([l(\"esri.core.support.WatchUpdatingTracking\")],c);const _=-42;export{c as WatchUpdatingTracking};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{deprecatedModule as n}from\"./deprecate.js\";import{isEventTarget as t,on as r}from\"./events.js\";import{equals as e}from\"./lang.js\";import o from\"./Logger.js\";import{createDeferred as c,onAbort as u,createAbortError as i}from\"./promiseUtils.js\";n(o.getLogger(\"esri.core.watchUtils\"),\"esri/core/watchUtils\",{see:\"https://arcg.is/1LTnuf\",replacement:\"esri/core/reactiveUtils\",warnOnce:!0,version:\"4.24\"});const s=/\\?(\\.|$)/g;function f(n,t,r,e){const o=Array.isArray(t)?t:t.includes(\",\")?t.split(\",\"):[t],c=l(n,t,r,e);for(const u of o){const t=u.trim().replace(s,\"$1\"),e=n.get(t);r.call(n,e,e,t,n)}return c}function l(n,t,r,e){return n.watch(t,r,e)}function a(n,t,r,e){return N(n,t,null,r,e)}function m(n,t,r,e){return z(n,t,T,r,e)}function p(n,t,r,e){return N(n,t,T,r,e)}function g(n,t,r,e){return z(n,t,V,r,e)}function v(n,t,r,e){return N(n,t,V,r,e)}function h(n,t,r,e){return z(n,t,k,r,e)}function d(n,t,r,e){return N(n,t,k,r,e)}function j(n,t,r,e){return z(n,t,q,r,e)}function y(n,t,r,e){return N(n,t,q,r,e)}function w(n,t,r,e){return z(n,t,B,r,e)}function b(n,t,r,e){return N(n,t,B,r,e)}function A(n,t,r,e){return z(n,t,C,r,e)}function U(n,t,r,e){return N(n,t,C,r,e)}function L(n,t,r,o,c){return z(n,t,(n=>e(r,n)),o,c)}function O(n,t,r,o,c){return N(n,t,(n=>e(r,n)),o,c)}function $(n,t,r,e){let o=!1;const c=n.watch(t,((t,e,c,u)=>{o||r.call(n,t,e,c,u)}),e);return{remove(){c.remove()},pause(){o=!0},resume(){o=!1}}}function x(n,e,o,c,u,i,s){const l={};function a(t){const r=l[t];r&&(i&&i(r.target,t,n,o),r.handle.remove(),delete l[t])}const m=f(n,e,((e,i,s)=>{a(s),t(e)&&(l[s]={handle:r(e,o,c),target:e},u&&u(e,s,n,o))}),s);return{remove(){m.remove();for(const n in l)a(n)}}}function z(n,t,r,e,o){const c=n.watch(t,((t,o,c,u)=>{r&&!r(t)||e?.call(n,t,o,c,u)}),o);if(Array.isArray(t))for(const u of t){const o=n.get(u);r&&r(o)&&e?.call(n,o,o,t,n)}else{const o=n.get(t);r&&r(o)&&e?.call(n,o,o,t,n)}return c}function N(n,t,r,e,o){const s=\"function\"==typeof e?e:null,f=\"object\"==typeof e?e:null;\"boolean\"==typeof e&&(o=e);let l,a=!1;function m(){l&&(l.remove(),l=null)}const p=c();u(f,(()=>{m(),p.reject(i())}));const g={then:p.promise.then.bind(p.promise),catch:p.promise.catch.bind(p.promise),remove:m};return Object.freeze(g),l=z(n,t,r,((t,r,e,o)=>{a=!0,m(),s&&s.call(n,t,r,e,o),p.resolve({value:t,oldValue:r,propertyName:e,target:o})}),o),a&&m(),g}function T(n){return!!n}function V(n){return!n}function k(n){return!0===n}function q(n){return!1===n}function B(n){return void 0!==n}function C(n){return void 0===n}export{f as init,x as on,a as once,$ as pausable,l as watch,m as when,w as whenDefined,b as whenDefinedOnce,L as whenEqual,O as whenEqualOnce,j as whenFalse,y as whenFalseOnce,g as whenNot,v as whenNotOnce,p as whenOnce,h as whenTrue,d as whenTrueOnce,A as whenUndefined,U as whenUndefinedOnce,N as whenValidOnce};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../Extent.js\";import n from\"../Multipoint.js\";import t from\"../Point.js\";import o from\"../Polygon.js\";import i from\"../Polyline.js\";const r={convertToGEGeometry:s,exportPoint:a,exportPolygon:c,exportPolyline:h,exportMultipoint:m,exportExtent:x};function s(e,n){if(null==n)return null;let t=\"cache\"in n?n.cache._geVersion:void 0;return null==t&&(t=e.convertJSONToGeometry(n),\"cache\"in n&&(n.cache._geVersion=t)),t}function a(e,n,o){const i=e.hasZ(n),r=e.hasM(n),s=new t({x:e.getPointX(n),y:e.getPointY(n),spatialReference:o});return i&&(s.z=e.getPointZ(n)),r&&(s.m=e.getPointM(n)),s.cache._geVersion=n,s}function c(e,n,t){const i=new o({rings:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return i.cache._geVersion=n,i}function h(e,n,t){const o=new i({paths:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return o.cache._geVersion=n,o}function m(e,t,o){const i=new n({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:o});return i.cache._geVersion=t,i}function x(n,t,o){const i=n.hasZ(t),r=n.hasM(t),s=new e({xmin:n.getXMin(t),ymin:n.getYMin(t),xmax:n.getXMax(t),ymax:n.getYMax(t),spatialReference:o});if(i){const e=n.getZExtent(t);s.zmin=e.vmin,s.zmax=e.vmax}if(r){const e=n.getMExtent(t);s.mmin=e.vmin,s.mmax=e.vmax}return s.cache._geVersion=t,s}export{r as hydratedAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{G as n}from\"../chunks/geometryEngineBase.js\";import{hydratedAdapter as e}from\"./geometryAdapters/hydrated.js\";function t(n){return Array.isArray(n)?n[0].spatialReference:n&&n.spatialReference}function r(e){return n.extendedSpatialReferenceInfo(e)}function u(r,u){return n.clip(e,t(r),r,u)}function i(r,u){return n.cut(e,t(r),r,u)}function c(r,u){return n.contains(e,t(r),r,u)}function o(r,u){return n.crosses(e,t(r),r,u)}function f(r,u,i){return n.distance(e,t(r),r,u,i)}function s(r,u){return n.equals(e,t(r),r,u)}function a(r,u){return n.intersects(e,t(r),r,u)}function l(r,u){return n.touches(e,t(r),r,u)}function p(r,u){return n.within(e,t(r),r,u)}function d(r,u){return n.disjoint(e,t(r),r,u)}function m(r,u){return n.overlaps(e,t(r),r,u)}function g(r,u,i){return n.relate(e,t(r),r,u,i)}function h(r){return n.isSimple(e,t(r),r)}function w(r){return n.simplify(e,t(r),r)}function R(r,u=!1){return n.convexHull(e,t(r),r,u)}function x(r,u){return n.difference(e,t(r),r,u)}function y(r,u){return n.symmetricDifference(e,t(r),r,u)}function S(r,u){return n.intersect(e,t(r),r,u)}function A(r,u=null){return n.union(e,t(r),r,u)}function D(r,u,i,c,o,f){return n.offset(e,t(r),r,u,i,c,o,f)}function j(r,u,i,c=!1){return n.buffer(e,t(r),r,u,i,c)}function E(r,u,i,c,o,f){return n.geodesicBuffer(e,t(r),r,u,i,c,o,f)}function J(r,u,i=!0){return n.nearestCoordinate(e,t(r),r,u,i)}function L(r,u){return n.nearestVertex(e,t(r),r,u)}function N(r,u,i,c){return n.nearestVertices(e,t(r),r,u,i,c)}function O(n){return\"xmin\"in n?\"center\"in n?n.center:null:\"x\"in n?n:\"extent\"in n?n.extent?.center??null:null}function T(e,t,r){if(null==e)throw new F;const u=e.spatialReference;if(null==(r=r??O(e)))throw new F;const i=e.constructor.fromJSON(n.rotate(e,t,r));return i.spatialReference=u,i}function V(e,t){if(null==e)throw new F;const r=e.spatialReference;if(null==(t=t??O(e)))throw new F;const u=e.constructor.fromJSON(n.flipHorizontal(e,t));return u.spatialReference=r,u}function v(e,t){if(null==e)throw new F;const r=e.spatialReference;if(null==(t=t??O(e)))throw new F;const u=e.constructor.fromJSON(n.flipVertical(e,t));return u.spatialReference=r,u}function z(r,u,i,c){return n.generalize(e,t(r),r,u,i,c)}function B(r,u,i){return n.densify(e,t(r),r,u,i)}function H(r,u,i,c=0){return n.geodesicDensify(e,t(r),r,u,i,c)}function I(r,u){return n.planarArea(e,t(r),r,u)}function b(r,u){return n.planarLength(e,t(r),r,u)}function k(r,u,i){return n.geodesicArea(e,t(r),r,u,i)}function q(r,u,i){return n.geodesicLength(e,t(r),r,u,i)}function C(r,u){return n.intersectLinesToPoints(e,t(r),r,u)}function G(e,t){n.changeDefaultSpatialReferenceTolerance(e,t)}function P(e){n.clearDefaultSpatialReferenceTolerance(e)}class F extends Error{constructor(){super(\"Illegal Argument Exception\")}}export{j as buffer,G as changeDefaultSpatialReferenceTolerance,P as clearDefaultSpatialReferenceTolerance,u as clip,c as contains,R as convexHull,o as crosses,i as cut,B as densify,x as difference,d as disjoint,f as distance,s as equals,r as extendedSpatialReferenceInfo,V as flipHorizontal,v as flipVertical,z as generalize,k as geodesicArea,E as geodesicBuffer,H as geodesicDensify,q as geodesicLength,S as intersect,C as intersectLinesToPoints,a as intersects,h as isSimple,J as nearestCoordinate,L as nearestVertex,N as nearestVertices,D as offset,m as overlaps,I as planarArea,b as planarLength,g as relate,T as rotate,w as simplify,y as symmetricDifference,l as touches,A as union,p as within};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{subclass as o}from\"../core/accessorSupport/decorators/subclass.js\";import{owningCollectionProperty as s}from\"../core/support/OwningCollection.js\";import t from\"./Layer.js\";import{BlendLayer as i}from\"./mixins/BlendLayer.js\";import{ScaleRangeLayer as p}from\"./mixins/ScaleRangeLayer.js\";import{GraphicsCollection as a}from\"../support/GraphicsCollection.js\";import n from\"../symbols/support/ElevationInfo.js\";let c=class extends(i(p(t))){constructor(r){super(r),this.elevationInfo=null,this.graphics=new a,this.screenSizePerspectiveEnabled=!0,this.type=\"graphics\",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(r){return this.graphics.add(r),this}addMany(r){return this.graphics.addMany(r),this}removeAll(){return this.graphics.removeAll(),this}remove(r){this.graphics.remove(r)}removeMany(r){this.graphics.removeMany(r)}on(r,e){return super.on(r,e)}graphicChanged(r){this.emit(\"graphic-update\",r)}};r([e({type:n})],c.prototype,\"elevationInfo\",void 0),r([e(s(a,\"graphics\"))],c.prototype,\"graphics\",void 0),r([e({type:[\"show\",\"hide\"]})],c.prototype,\"listMode\",void 0),r([e()],c.prototype,\"screenSizePerspectiveEnabled\",void 0),r([e({readOnly:!0})],c.prototype,\"type\",void 0),r([e({constructOnly:!0})],c.prototype,\"internal\",void 0),c=r([o(\"esri.layers.GraphicsLayer\")],c);const h=c;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport r from\"../../config.js\";import t from\"../../core/Logger.js\";async function o(o){const a=\"portalItem\"in o?o:{portalItem:o},e=await import(\"../../portal/support/portalLayers.js\");try{return await e.fromItem(a)}catch(p){const o=a&&a.portalItem,e=o&&o.id||\"unset\",l=o&&o.portal&&o.portal.url||r.portalUrl;throw t.getLogger(\"esri.layers.support.fromPortalItem\").error(\"#fromPortalItem()\",\"Failed to create layer from portal item (portal: '\"+l+\"', id: '\"+e+\"')\",p),p}}export{o as fromPortalItem};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import e from\"../request.js\";import r from\"../core/Error.js\";import o from\"../core/Evented.js\";import{IdentifiableMixin as i}from\"../core/Identifiable.js\";import s from\"../core/Loadable.js\";import a from\"../core/Logger.js\";import{isAbortError as l}from\"../core/promiseUtils.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{fromPortalItem as d}from\"./support/fromPortalItem.js\";import u from\"../geometry/Extent.js\";import c from\"../geometry/SpatialReference.js\";let m=0,h=class extends(o.EventedMixin(i(s))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new u(-180,-90,180,90,c.WGS84),this.id=Date.now().toString(16)+\"-layer-\"+m++,this.legendEnabled=!0,this.listMode=\"show\",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=c.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const e=\"string\"==typeof t?{url:t}:t;return(await import(\"./support/arcgisLayers.js\")).fromUrl(e)}static fromPortalItem(t){return d(t)}initialize(){this.when().catch((t=>{l(t)||a.getLogger(this.declaredClass).error(\"#load()\",`Failed to load layer (title: '${this.title??\"no title\"}', id: '${this.id??\"no id\"}')`,{error:t})}))}destroy(){if(this.parent){const t=this,e=this.parent;\"layers\"in e&&e.layers.includes(t)?e.layers.remove(t):\"tables\"in e&&e.tables.includes(t)?e.tables.remove(t):\"baseLayers\"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):\"baseLayers\"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return n(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t){return(await e(t,{query:{f:\"json\"},responseType:\"json\"})).data}throw new r(\"layer:no-attribution-data\",\"Layer does not have attribution data\")}};t([p({type:String})],h.prototype,\"attributionDataUrl\",void 0),t([p({type:u})],h.prototype,\"fullExtent\",void 0),t([p({readOnly:!0})],h.prototype,\"hasAttributionData\",null),t([p({type:String,clonable:!1})],h.prototype,\"id\",void 0),t([p({type:Boolean,nonNullable:!0})],h.prototype,\"legendEnabled\",void 0),t([p({type:[\"show\",\"hide\",\"hide-children\"]})],h.prototype,\"listMode\",void 0),t([p({type:Number,range:{min:0,max:1},nonNullable:!0})],h.prototype,\"opacity\",void 0),t([p({clonable:!1})],h.prototype,\"parent\",void 0),t([p({readOnly:!0})],h.prototype,\"parsedUrl\",null),t([p({type:Boolean})],h.prototype,\"popupEnabled\",void 0),t([p({type:Boolean})],h.prototype,\"attributionVisible\",void 0),t([p({type:c})],h.prototype,\"spatialReference\",void 0),t([p({type:String})],h.prototype,\"title\",void 0),t([p({readOnly:!0,json:{read:!1}})],h.prototype,\"type\",void 0),t([p()],h.prototype,\"url\",void 0),t([p({type:Boolean,nonNullable:!0})],h.prototype,\"visible\",void 0),h=t([y(\"esri.layers.Layer\")],h);const b=h;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{read as t,write as s}from\"../effects/jsonUtils.js\";const i={read:{reader:t},write:{allowNull:!0,writer:s}},n=t=>{let s=class extends t{constructor(){super(...arguments),this.blendMode=\"normal\",this.effect=null}};return e([r({type:[\"average\",\"color-burn\",\"color-dodge\",\"color\",\"darken\",\"destination-atop\",\"destination-in\",\"destination-out\",\"destination-over\",\"difference\",\"exclusion\",\"hard-light\",\"hue\",\"invert\",\"lighten\",\"lighter\",\"luminosity\",\"minus\",\"multiply\",\"normal\",\"overlay\",\"plus\",\"reflect\",\"saturation\",\"screen\",\"soft-light\",\"source-atop\",\"source-in\",\"source-out\",\"vivid-light\",\"xor\"],nonNullable:!0,json:{read:!1,write:!1,origins:{\"web-map\":{read:!0,write:!0},\"portal-item\":{read:!0,write:!0}}}})],s.prototype,\"blendMode\",void 0),e([r({json:{read:!1,write:!1,origins:{\"web-map\":i,\"portal-item\":i}}})],s.prototype,\"effect\",void 0),s=e([o(\"esri.layers.mixins.BlendLayer\")],s),s};export{n as BlendLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";const t=t=>{let l=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},a=this.parent;a&&\"effectiveScaleRange\"in a&&r(e,a.effectiveScaleRange);const c=this._get(\"effectiveScaleRange\");return c&&c.minScale===e.minScale&&c.maxScale===e.maxScale?c:e}};return e([a({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,\"minScale\",void 0),e([a({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,\"maxScale\",void 0),e([a({readOnly:!0})],l.prototype,\"effectiveScaleRange\",null),l=e([c(\"esri.layers.mixins.ScaleRangeLayer\")],l),l};function r(e,a){return e.minScale=e.minScale>0?a.minScale>0?Math.min(e.minScale,a.minScale):e.minScale:a.minScale,e.maxScale=e.maxScale>0?a.maxScale>0?Math.max(e.maxScale,a.maxScale):e.maxScale:a.maxScale,e}export{t as ScaleRangeLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{convertUnit as e,lengthToDegrees as s}from\"../../core/unitUtils.js\";import{earth as t}from\"../../geometry/support/Ellipsoid.js\";const m={inches:e(1,\"meters\",\"inches\"),feet:e(1,\"meters\",\"feet\"),\"us-feet\":e(1,\"meters\",\"us-feet\"),yards:e(1,\"meters\",\"yards\"),miles:e(1,\"meters\",\"miles\"),\"nautical-miles\":e(1,\"meters\",\"nautical-miles\"),millimeters:e(1,\"meters\",\"millimeters\"),centimeters:e(1,\"meters\",\"centimeters\"),decimeters:e(1,\"meters\",\"decimeters\"),meters:e(1,\"meters\",\"meters\"),kilometers:e(1,\"meters\",\"kilometers\"),\"decimal-degrees\":1/s(1,\"meters\",t.radius)};export{m as meterIn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import o from\"../Graphic.js\";import\"../core/Logger.js\";import{ensureType as e}from\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/Error.js\";import\"../core/has.js\";import{shared as s}from\"../core/accessorSupport/decorators/shared.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import{OwningCollection as p}from\"../core/support/OwningCollection.js\";let i=class extends p{_own(r){r.layer&&\"remove\"in r.layer&&r.layer!==this.owner&&r.layer.remove(r),r.layer=this.owner}_release(r){r.layer===this.owner&&(r.layer=null)}};r([s({Type:o,ensureType:e(o)})],i.prototype,\"itemType\",void 0),i=r([t(\"esri.support.GraphicsCollection\")],i);export{i as GraphicsCollection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{collectArcadeFieldNames as o}from\"../../layers/support/fieldUtils.js\";var i;let p=i=class extends e{constructor(r){super(r)}async collectRequiredFields(r,e){return o(r,e,this.expression)}clone(){return new i({expression:this.expression,title:this.title})}equals(r){return this.expression===r.expression&&this.title===r.title}};r([s({type:String,json:{write:!0}})],p.prototype,\"expression\",void 0),r([s({type:String,json:{write:!0}})],p.prototype,\"title\",void 0),p=i=r([t(\"esri.layers.support.FeatureExpressionInfo\")],p);const c=p;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{strict as r,JSONMap as o}from\"../../core/jsonMap.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{isSome as s,equalsMaybe as i}from\"../../core/maybe.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as p}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import f from\"./FeatureExpressionInfo.js\";import{supportedUnits as l}from\"./unitConversionUtils.js\";var m;const d=r()({onTheGround:\"on-the-ground\",relativeToGround:\"relative-to-ground\",relativeToScene:\"relative-to-scene\",absoluteHeight:\"absolute-height\"}),c=new o({foot:\"feet\",kilometer:\"kilometers\",meter:\"meters\",mile:\"miles\",\"us-foot\":\"us-feet\",yard:\"yards\"});let h=m=class extends t{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,r){return null!=e?e:r.featureExpression&&0===r.featureExpression.value?{expression:\"0\"}:void 0}writeFeatureExpressionInfo(e,r,o,t){r[o]=e.write({},t),\"0\"===e.expression&&(r.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:r}=this;return this._isOverridden(\"mode\")?this._get(\"mode\"):s(e)||r?\"relative-to-ground\":\"on-the-ground\"}set mode(e){this._override(\"mode\",e)}set unit(e){this._set(\"unit\",e)}write(e,r){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,r):null}clone(){return new m({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&i(this.featureExpressionInfo,e.featureExpressionInfo)}};e([n({type:f,json:{write:!0}})],h.prototype,\"featureExpressionInfo\",void 0),e([p(\"featureExpressionInfo\",[\"featureExpressionInfo\",\"featureExpression\"])],h.prototype,\"readFeatureExpressionInfo\",null),e([a(\"featureExpressionInfo\",{featureExpressionInfo:{type:f},\"featureExpression.value\":{type:[0]}})],h.prototype,\"writeFeatureExpressionInfo\",null),e([n({type:d.apiValues,nonNullable:!0,json:{type:d.jsonValues,read:d.read,write:{writer:d.write,isRequired:!0}}})],h.prototype,\"mode\",null),e([n({type:Number,json:{write:!0}})],h.prototype,\"offset\",void 0),e([n({type:l,json:{type:String,read:c.read,write:c.write}})],h.prototype,\"unit\",null),h=m=e([u(\"esri.layers.support.ElevationInfo\")],h);const x=h;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{meterIn as t}from\"../../renderers/support/lengthUtils.js\";function n(n){return!!n&&null!=t[n]}function r(n){return 1/(t[n]||1)}function e(){const n=Object.keys(t);return n.sort(),n}const o=e();export{r as getMetersPerUnit,o as supportedUnits,n as supportsUnit};\n"],"names":["SYMBOL_STATE","DEFAULT_GEOM_COLOR","defaultLayerThemeOptions","point","color","polyline","width","polygon","callout","backgroundColor","textColor","hoverColor","activeColor","isOffset","symbols","state","properties","count","is3D","totalCount","strokeColor","HOVER","ACTIVE","type","data","symbol","symbolLayers","enable","size","frame","xmin","ymin","xmax","ymax","markerGraphics","geometry","x","y","fontFamilyName","fontStyleName","height","horizontalAlignment","verticalAlignment","textString","scaleSymbolsProportionally","rings","capStyle","joinStyle","lineStyle3D","miterLimit","text","font","family","style","outline","wait","ms","Promise","resolve","setTimeout","getThrottleMS","totalResults","batchSize","totalWaitTime","numRequestsThreshold","thresholdExceededWaitTime","numRequests","Math","ceil","console","warn","getPostsWithLocation","discussion","hubRequestOptions","throttle","searchPosts","start","options","Object","assign","parents","sortBy","PostSort","sortOrder","SortOrder","num","result","searchPostAggregates","total","nextStart","results","throttleMS","push","JSON","stringify","all","pagedResponses","getPost","postAggregate","postDetails","replyDetails","channelDetails","post","parentId","postId","channelId","uniquePostIds","posts","map","items","flat","filter","includes","id","postsToFeatureCollection","message","error","__decorate","decorators","target","key","desc","d","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","ArcgisHubDiscussionsMapIntegrator","hostRef","registerInstance","this","arcgisHubMapPopoverOpen","createEvent","arcgisHubMapPopoverClear","hubTelemetry","initialized","cachedFeatures","unsavedExistingGeometry","cachedRelatedFeatureGeometry","layerIds","persistAttribute","theme","preview","bind","initialize","intlManager","element","intl","loadArcGisCss","teardown","event","discussionsRef","onMapDiscussionsRef","onMapDiscussionsPreviewRef","telemetry","emit","sketchPostId","currentDiscussionsRef","view","prevView","saveInitialDrawOptions","graphicGeometry","previewHeight","activeMapDiscussion","container","getBoundingClientRect","top","left","right","graphicScreenPos","toScreen","graphicLeft","graphicTop","leftOffset","topOffset","evt","detail","thread","graphics","geometryGraphicsLayer","toArray","calloutGraphicsLayer","activeGraphics","postParentId","attributes","locationId","relatedFeatureId","goTo","create","postToFeatures","feature","replyCount","refreshFeatures","clearHoverActiveGraphics","deletedPostId","deletedPostParentId","index","unsaved","unsavedGeometryGraphicsLayer","getItemAt","makeGraphic","graphic","find","_relatedFeatureId","postIndex","__index__","addHighlightGraphic","arcgis","getGraphicById","unsavedFeatures","unsavedRelatedFeatures","slice","remove","findMatch","calloutGraphic","visible","geometryGraphic","drawRef","buffer","disablePrimaryOptions","disableEditOptions","mapActionNoticeActive","setActiveTool","undefined","hideLayers","sketchIndex","sketchIsUnsaved","forceReset","showLayers","save","canceled","maxDeviation","resolution","generalize","simplify","clone","geographicGeom","webMercatorToGeographic","arcgisToGeoJSON","updateStagedFeatures","postToGeoJSON","unsavedExistingFeatures","originalGraphic","convertGeometryTypeToTelemetryString","emitHubTelemetry","dist","themeWithDefaults","addGraphicsToGraphicsLayer","features","forEach","restoreInitialDrawOptions","resetStagedFeatures","removeAll","makeVisible","objectIdField","selectedGraphic","layer","objectId","relatedFeature","toJSON","highlightGraphic","findIndex","clearHighlights","h","expanded","layout","icon","onClick","addRelatedFeature","t","textEnabled","removeRelatedFeature","targetLayer","hitTest","include","getFirstHitGraphic","hasOwnProperty","displayField","queryFeatures","objectIds","outFields","returnGeometry","unsavedRelatedFeatureIds","renderFn","renderAddLocation","renderRemoveLocation","render","hasMap","context","when","addGeometryGraphicsLayer","addStagedGeometryGraphicsLayer","addCalloutGraphicsLayer","addHighlightGraphicsLayer","fetchSubject","fetchPosts","handleViewSizeChange","setDiscussionsRefHasMap","mapViewSizeChangeHandler","watch","mapViewCenterChangeHandler","calculateOffsets","removeViewHandlers","removeLayers","resetSelect","fetchSubjectDetails","then","featureCollection","GraphicsLayer","elevationInfo","mode","add","effect","mapPointerMoveHandler","on","setCalloutSymbolOnPointerMove","mapClickDiscussionsHandler","handleMapClickDiscussions","highlightGraphicsLayer","persist","_a","_b","graphicCopy","removeLayer","opacity","destroy","addMany","emptyFeatures","hasGeometry","Boolean","postGraphics","geometryCallout","makeCalloutGraphic","hasFeatures","parseDiscussionURI","postsWithRelatedFeatures","relatedFeatureIds","Array","from","Set","cacheRelatedFeatureGeometry","relatedFeatures","postIds","postProperties","postFeatureId","existingFeature","featureProperties","postTotalCount","getRelatedFeature","relatedFeaturesCallout","calloutGraphics","tolerance","spatialReference","extent","Extent","goToTarget","pointToExtent","expand","duration","easing","catch","isAbortError","arcgisJson","geojsonToArcGIS","Graphic","coordinates","Infinity","DEFAULT","geojson","cachedIds","keys","nonCachedIds","query","where","outSpatialReference","wkid","geometryGeoJSON","whenLayerView","layerView","highlightHandle","highlight","tempGraphics","removeMany","handler","initialDrawOptions","replyId","viewHeight","viewWidth","_themeWithDefaults","allLayers","styles","bottom","isHub","ref","disableNavigation","dismissible","enableGoTo","Host","renderMapDiscussion","getElement","CallWhenFactory","eventTargetIsDiscussionsRef","prototype","DebounceDecoratorFactory","timeout","params","_target","_propertyKey","descriptor","original","value","args","isTruthy","apply","debounce","fn","timeoutId","clearTimeout","propertyKey","debouncedKey","toString","e","globalThis","window","global","self","o","__esModule","call","default","a","s","destroyed","_get","get","n","readOnly","l","handles","item","preventDefault","_own","_release","set","_releaseAll","_set","_ownAll","itemType","Type","cast","owner","p","updating","_handleId","_handles","_scheduleHandleId","_pendingPromises","_installWatch","initial","final","_createSyncUpdatingCallback","onListenerAdd","added","removed","onListenerRemove","delete","has","_","clear","sync","_installSyncUpdatingWatch","equals","see","replacement","warnOnce","version","convertToGEGeometry","cache","_geVersion","convertJSONToGeometry","exportPoint","hasZ","hasM","getPointX","getPointY","z","getPointZ","m","getPointM","exportPolygon","exportPaths","exportPolyline","paths","exportMultipoint","points","exportPoints","exportExtent","getXMin","getYMin","getXMax","getYMax","getZExtent","zmin","vmin","zmax","vmax","getMExtent","mmin","mmax","isArray","u","f","g","w","R","S","A","D","j","E","J","L","N","O","center","T","F","constructor","fromJSON","V","v","B","H","I","b","k","q","C","G","P","Error","screenSizePerspectiveEnabled","internal","constructOnly","portalItem","fromItem","portal","url","attributionDataUrl","fullExtent","Date","now","legendEnabled","listMode","parent","popupEnabled","attributionVisible","title","declaredClass","layers","tables","baseLayers","referenceLayers","hasAttributionData","responseType","fromUrl","String","clonable","nonNullable","Number","range","min","max","json","read","reader","write","allowNull","writer","blendMode","origins","minScale","maxScale","effectiveScaleRange","inches","feet","yards","miles","millimeters","centimeters","decimeters","meters","kilometers","ensureType","expression","onTheGround","relativeToGround","relativeToScene","absoluteHeight","foot","kilometer","meter","mile","yard","offset","featureExpression","featureExpressionInfo","_isOverridden","_override","unit","apiValues","jsonValues","isRequired","sort"],"sourceRoot":""}