/*! For license information please see 34931.416b6b3a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[34931,65905],{75462:function(e,t,n){n.d(t,{H:function(){return o},c:function(){return a}});var i=n(1413),r=n(5692);function a(e){return Math.min(Math.max(Math.ceil(e),1),6)}var o=function(e,t){var n="h".concat(e.level);return delete e.level,(0,r.h)(n,(0,i.Z)({},e),t)}},13889:function(e,t,n){n.r(t),n.d(t,{arcgis_boundary_picker_ui:function(){return Ue},arcgis_hub_map_widget_container:function(){return Ve},arcgis_hub_map_widget_draw:function(){return Ne},arcgis_hub_map_widget_zoom:function(){return Be},calcite_pick_list:function(){return Ye},calcite_pick_list_group:function(){return qe}});var i=n(4942),r=n(93433),a=n(29439),o=n(74165),s=n(15861),c=n(15671),l=n(43144),u=n(5692),p=n(4541),d=n(2001),h=n(54825),f=n(13129),v=n(79861),y=n(81753),m=n(51444),g=n(23872),b=n(8537),_=n(93655),k=n(1413),w=n(37762),x=n(60136),Z=n(92572),E=n(27366),C=n(51508),O=n(80987),S=n(10064),G=n(91505),T=n(100),P=n(32718),M=n(92026),D=n(66978),I=n(94172),R=n(49861),A=(n(25243),n(63780),n(69912)),H=n(83448),L=n(79803),U=n(69662),z=n(92975),V=n(77498),j=n(57889),W=n(46684),F=(n(93169),n(74509));function N(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return V.e.GRAPHICS_LAYER_MISSING;if((0,M.Wi)(e.geometry))return V.e.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return V.e.SUPPORTED;default:return V.e.GEOMETRY_TYPE_UNSUPPORTED}var n=(0,M.pC)(e.symbol)&&"point-3d"===e.symbol.type&&e.symbol.symbolLayers;return n&&n.length>0&&n.some((function(e){return"object"===e.type}))?"on-the-ground"!==(0,F.vu)(e)&&(0,F.Lt)(e)?V.e.ELEVATION_MODE_UNSUPPORTED:V.e.SUPPORTED:V.e.SYMBOL_TYPE_UNSUPPORTED}var B=n(83089),Y=n(1614),q=n(87888),J=n(52349),K=n(77560),X=n(38856),Q=n(98173),$=n(64674),ee=n(74923),te=n(72612),ne=n(41644),ie=function(e){(0,x.Z)(n,e);var t=(0,Z.Z)(n);function n(e){var i;return(0,c.Z)(this,n),(i=t.call(this,e)).cancelled=!1,i.history={undo:[],redo:[]},i.type=null,i}return(0,l.Z)(n,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:(0,ne.Bg)(this.activeComponent)}return null}},{key:"addToHistory",value:function(e){this.history.redo=[],this.history.undo.push(e)}},{key:"resetHistory",value:function(){this.history.redo=[],this.history.undo=[]}},{key:"canUndo",value:function(){return this.history.undo.length>0}},{key:"canRedo",value:function(){return this.history.redo.length>0}},{key:"complete",value:function(){this._reset(),this.onEnd(),this.emit("complete")}},{key:"cancel",value:function(){this.cancelled=!0,this.complete()}},{key:"_reset",value:function(){var e;null===(e=this.activeComponent)||void 0===e||e.reset()}},{key:"refreshComponent",value:function(){var e=this.activeComponent;e&&("box"!==e.type&&"reshape"!==e.type&&"graphic-mover"!==e.type||e.refresh())}},{key:"undo",set:function(e){var t=this;this._set("undo",(function(){t.canUndo()&&e()}))}},{key:"redo",set:function(e){var t=this;this._set("redo",(function(){t.canRedo()&&e()}))}}]),n}(G.Z.EventedAccessor);(0,E._)([(0,R.Cb)()],ie.prototype,"activeComponent",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"cancelled",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"history",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"tool",null),(0,E._)([(0,R.Cb)()],ie.prototype,"type",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"canUndo",null),(0,E._)([(0,R.Cb)()],ie.prototype,"canRedo",null),(0,E._)([(0,R.Cb)()],ie.prototype,"onEnd",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"undo",null),(0,E._)([(0,R.Cb)()],ie.prototype,"redo",null),(0,E._)([(0,R.Cb)()],ie.prototype,"toggleTool",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"addToSelection",void 0),(0,E._)([(0,R.Cb)()],ie.prototype,"removeFromSelection",void 0);var re=function(e){(0,x.Z)(n,e);var t=(0,Z.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(ie=(0,E._)([(0,A.j)("esri.widgets.Sketch.support.OperationHandle")],ie));(0,E._)([(0,R.Cb)()],re.prototype,"activeComponent",void 0),re=(0,E._)([(0,A.j)("esri.widgets.Sketch.support.CreateOperationHandle")],re);var ae=function(e){(0,x.Z)(n,e);var t=(0,Z.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n)}(ie);(0,E._)([(0,R.Cb)()],ae.prototype,"activeComponent",void 0),ae=(0,E._)([(0,A.j)("esri.widgets.Sketch.support.UpdateOperationHandle")],ae);var oe=n(16072),se=n(61459),ce=n(16851),le={defaultZ:0},ue={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"},pe=function(e){(0,x.Z)(i,e);var t=(0,Z.Z)(i);function i(e){var n;return(0,c.Z)(this,i),(n=t.call(this,e))._numUpdating=0,n._handles=new T.Z,n._internalGraphicsLayer=new _.Z({listMode:"hide",internal:!0,title:"SVM Internal"}),n._operationHandle=null,n._viewHandles=new T.Z,n.activeFillSymbol=null,n.activeLineSymbol=null,n.activeVertexSymbol=null,n.allowDeleteKey=!0,n.labelOptions=new J.Z,n.layer=null,n.pointSymbol=new oe.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n.polygonSymbol=new se.Z({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),n.polylineSymbol=new ce.Z({color:[130,130,130,1],width:2}),n._snappingManager=null,n.tooltipOptions=new K.Z,n.updateGraphics=new O.Z,n.updateOnGraphicClick=!0,n.updatePointSymbol=new oe.Z({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),n.updatePolygonSymbol=new se.Z({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),n.updatePolylineSymbol=new ce.Z({color:[12,207,255],width:2}),n.vertexSymbol=new oe.Z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),n._moduleLoaderAbortController=null,n._viewReadyAbortController=null,n._originalAutoOpenEnabled=null,n.defaultCreateOptions=le,n.defaultUpdateOptions=ue,n.snappingOptions=new Q.Z,n}return(0,l.Z)(i,[{key:"initialize",value:function(){var e=this;this._handles.add([(0,I.on)((function(){var t,n;return null===(t=e.view)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.layers}),"change",(function(t){t.removed.includes(e.layer)&&e.cancel()})),(0,I.on)((function(){var t;return null===(t=e.layer)||void 0===t?void 0:t.graphics}),"change",(function(t){if((0,M.pC)(e._operationHandle)){var n,i=(0,w.Z)(t.removed);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.updateGraphics.includes(r)&&(e.updateGraphics.length>1?e._operationHandle.removeFromSelection(r):e._operationHandle.cancel())}}catch(a){i.e(a)}finally{i.f()}}})),(0,I.YP)((function(){var t,n;return null!==(t=null===(n=e.layer)||void 0===n?void 0:n.elevationInfo)&&void 0!==t?t:null}),(function(t){t!==e._internalGraphicsLayer.elevationInfo&&(e.cancel(),e._internalGraphicsLayer.elevationInfo=t)}),I.tX),(0,I.YP)((function(){return e.view}),(function(t){(0,M.SC)(e._snappingManager),t&&(e._snappingManager=new X.N({view:t,options:e.snappingOptions}),"2d"===t.type?Promise.all([n.e(93463),n.e(32456),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(23307),n.e(71004),n.e(16669),n.e(34327),n.e(36133),n.e(29899)]).then(n.bind(n,10461)):"3d"===t.type&&(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)),Promise.all([n.e(51378),n.e(79857),n.e(62029),n.e(9014),n.e(21149),n.e(56717),n.e(93463),n.e(41170),n.e(25158),n.e(55652),n.e(49729),n.e(21236),n.e(37186),n.e(9900),n.e(80143),n.e(66505),n.e(47858),n.e(36271),n.e(84993)]).then(n.bind(n,79240))))}),I.tX),(0,I.YP)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.spatialReference}),(function(t,n){t&&n&&!t.equals(n)&&e.cancel()}))]),(0,$.Ob)(this)}},{key:"destroy",value:function(){this.cancel(),this._handles=(0,M.SC)(this._handles),this._viewHandles=(0,M.SC)(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=(0,M.SC)(this._snappingManager),this._set("view",null),this.emit("destroy")}},{key:"_defaultUpdateTool",get:function(){var e;return"3d"===(null===(e=this.view)||void 0===e?void 0:e.type)?"move":"transform"}},{key:"updating",get:function(){return this._numUpdating>0||(0,M.pC)(this._snappingManager)&&this._snappingManager.updating}},{key:"activeTool",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.tool)&&void 0!==e?e:null}},{key:"activeComponent",get:function(){var e,t;return null!==(e=null===(t=this._operationHandle)||void 0===t?void 0:t.activeComponent)&&void 0!==e?e:null}},{key:"createGraphic",get:function(){return!(0,M.pC)(this.activeComponent)||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):(0,M.Wg)(this.activeComponent.graphic)}},{key:"defaultCreateOptions",get:function(){return this._get("defaultCreateOptions")},set:function(e){this._set("defaultCreateOptions",(0,k.Z)((0,k.Z)({},le),e))}},{key:"defaultUpdateOptions",get:function(){return this._get("defaultUpdateOptions")},set:function(e){this._set("defaultUpdateOptions",(0,k.Z)((0,k.Z)((0,k.Z)({},ue),e),{},{reshapeOptions:(0,k.Z)((0,k.Z)({},ue.reshapeOptions),null===e||void 0===e?void 0:e.reshapeOptions)}))}},{key:"snappingOptions",set:function(e){(0,M.pC)(this._snappingManager)&&(this._snappingManager.options=e),this._set("snappingOptions",e)}},{key:"state",get:function(){var e,t=!(null===(e=this.view)||void 0===e||!e.ready||!this.layer),n=this._operationHandle;return t&&n?"active":t?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this,n=this._get("view");if(n){var i=n.container,r=n.map;i&&(n.cursor=null),r&&r.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}var a="view-ready";this._handles.remove(a),e&&this._handles.add((0,I.gx)((function(){return e.ready}),(function(n){t._viewHandles.removeAll(),n&&t._viewHandles.add(t._generateViewHandles(e))}),I.tX),a),this._set("view",e)}},{key:"cancel",value:function(){this._moduleLoaderAbortController=(0,M.IM)(this._moduleLoaderAbortController),this._viewReadyAbortController=(0,M.IM)(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}},{key:"complete",value:function(){this._operationHandle&&this._operationHandle.complete()}},{key:"delete",value:function(){var e=this.state,t=this.updateGraphics;if("active"===e&&t.length){var n=this.activeTool,i=this.layer,r=t.toArray();i.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:n})}}},{key:"duplicate",value:function(){if("active"===this.state&&this.updateGraphics.length){var e=this.updateGraphics.map((function(e){return e.clone()})).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}},{key:"create",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,r,a,s,c=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(i=this.view,r=this.layer,i&&"disabled"!==this.state){e.next=6;break}throw r||this._logMissingLayer(),(0,D.zE)();case 6:if((0,M.pC)(i.activeTool)&&(i.activeTool=null),t){e.next=8;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'tool'."));case 8:return(0,B.p)(i,this._internalGraphicsLayer),e.next=11,this._setupCreateOperation(t,n);case 11:if(a=e.sent,!(0,M.Wi)(a)&&!this.destroyed){e.next=14;break}return e.abrupt("return",void i.map.remove(this._internalGraphicsLayer));case 14:s=function(){if(a===c._operationHandle){var e=c.createGraphic,n=c._operationHandle.cancelled;c._operationHandle.destroy(),c._operationHandle=null,c._set("createGraphic",null),c.view&&c.view.map&&c.view.map.remove(c._internalGraphicsLayer),a.cancelled||null==e||r.add(e),c.emit("create",{graphic:e,state:n?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}},a.on("complete",s),this._operationHandle=a,i.ready&&i.focus();case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,r,a,s,c,l=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cancel(),e.next=3,this._waitViewReady();case 3:if(i=this.layer,r=this.view,a=this.state,r&&"disabled"!==a){e.next=6;break}throw i||this._logMissingLayer(),(0,D.zE)();case 6:if((0,M.pC)(r.activeTool)&&(r.activeTool=null),s=Array.isArray(t)?t:[t],null!=t&&s&&s.length){e.next=10;break}return e.abrupt("return",void this._logError("sketch:missing-parameter","Missing parameter 'graphics'."));case 10:if(!s.some((function(e){return e.layer!==i?(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!(0,M.Wi)(e.geometry)&&(l._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)}))){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,this._setupUpdateOperation(s,n);case 14:c=e.sent,this.destroyed||(0,M.Wi)(c)||be(c)||((0,B.p)(r,this._internalGraphicsLayer),this._setUpdateOperationHandle(c,n),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:c.tool,toolEventInfo:null,type:"update"}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_updateSpatialReference",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,i,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.view)){e.next=28;break}this._beginAsyncOperation(),t=Array.isArray(t)?t:[t],i=(0,w.Z)(t),e.prev=4,i.s();case 6:if((r=i.n()).done){e.next=17;break}if(a=r.value,e.t0=(0,M.pC)(a.geometry)&&"mesh"!==a.geometry.type&&!(0,z.fS)(a.geometry.spatialReference,n.spatialReference),!e.t0){e.next=15;break}if(e.t1=(0,L.Up)(a.geometry.spatialReference,n.spatialReference)||(0,L.kR)(),e.t1){e.next=14;break}return e.next=14,(0,L.zD)();case 14:a.geometry=(0,L.iV)(a.geometry,n.spatialReference);case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t2=e.catch(4),i.e(e.t2);case 22:return e.prev=22,i.f(),e.finish(22);case 25:this._endAsyncOperation(),e.next=29;break;case 28:this._logMissingView();case 29:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"undo",value:function(){var e;this.canUndo()&&(null===(e=this._operationHandle)||void 0===e||e.undo())}},{key:"redo",value:function(){var e;this.canRedo()&&(null===(e=this._operationHandle)||void 0===e||e.redo())}},{key:"canUndo",value:function(){return!(!this._operationHandle||!this._operationHandle.canUndo())}},{key:"canRedo",value:function(){return!(!this._operationHandle||!this._operationHandle.canRedo())}},{key:"toggleUpdateTool",value:function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}},{key:"_getFirstHit",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,i,r,a,s,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:if("2d"!==n.type){e.next=10;break}return i=[],n.map.allLayers.forEach((function(e){"vector-tile"!==e.type&&"imagery"!==e.type||i.push(e)})),e.next=8,n.hitTest(t,{exclude:i});case 8:return r=e.sent,e.abrupt("return",(0,ee.qm)(r.results));case 10:return a=[n.map.ground],n.map.allLayers.forEach((function(e){"integrated-mesh"===e.type&&a.push(e)})),e.next=14,n.hitTest(t,{exclude:a});case 14:if(!((s=e.sent).results.length>0)){e.next=19;break}if(c=s.results[0],!((0,M.pC)(c)&&"graphic"===c.type&&c.graphic&&(!s.ground.mapPoint||n.map.ground.opacity<1||s.ground.distance-(0,M.Pt)(c.distance,0)>-Math.min(3*s.ground.distance,"global"===n.viewingMode?(0,H.Iu)(n.renderCoordsHelper.spatialReference).radius/n.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))){e.next=19;break}return e.abrupt("return",c);case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_generateViewHandles",value:function(e){var t=this;return[e.on("immediate-click",function(){var n=(0,s.Z)((0,o.Z)().mark((function n(i){var r,a,s,c,l;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a="active"===t.state&&"create"===(null===(r=t._operationHandle)||void 0===r?void 0:r.type),"disabled"!==t.state&&!a&&t.updateOnGraphicClick){n.next=3;break}return n.abrupt("return");case 3:return t._beginAsyncOperation(),n.next=6,i.async((function(){return t._getFirstHit((0,te.vT)(i))}));case 6:if(s=n.sent,c=null,(0,M.pC)(s)?(l=s.graphic,t.updateGraphics.includes(l)||l.layer===t.layer?(i.stopPropagation(),c=l):"2d"!==e.type||t._isComponentGraphic(l)||"active"!==t.state||t.cancel()):"active"===t.state&&t.cancel(),n.t0=(0,M.pC)(c)&&!t.updateGraphics.includes(c),!n.t0){n.next=13;break}return n.next=13,t.update([c],(0,k.Z)((0,k.Z)({},t.defaultUpdateOptions),{},{reshapeOptions:(0,k.Z)({},t.defaultUpdateOptions.reshapeOptions)}));case 13:t._endAsyncOperation();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Y.f.WIDGET)]}},{key:"_setupCreateOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:return r=(0,k.Z)((0,k.Z)({hasZ:"3d"===i.type},this.defaultCreateOptions),n),e.next=6,this._setupDrawGraphicTool(t,i,r);case 6:return a=e.sent,e.abrupt("return",(0,M.Wi)(a)?null:(i.tools.add(a),i.activeTool=a,this._setupCreateOperationHandle(a)));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupDrawGraphicTool",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("multipoint"!==t||"3d"!==n.type){e.next=2;break}return e.abrupt("return",(this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null));case 2:if(n){e.next=4;break}return e.abrupt("return",(this._logMissingView(),null));case 4:return r="rectangle"!==t,a="rectangle"!==t,s=(0,k.Z)((0,k.Z)({view:n,mode:"rectangle"===t||"circle"===t?"hybrid":"click"},i),{},{snapToScene:!1,geometryType:t,graphicSymbol:this._getGraphicSymbolFromTool(t),snappingManager:this._snappingManager,forceUniformSize:a,centered:r}),e.abrupt("return","2d"===n.type?this._makeDrawGraphicTool2D(s):this._makeDrawGraphicTool3D(s));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool2D",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(93463),n.e(32456),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(23307),n.e(71004),n.e(16669),n.e(34327),n.e(36133),n.e(29899)]).then(n.bind(n,10461)));case 2:return i=e.sent,e.abrupt("return",be(i)||this.destroyed?null:new i.module.DrawGraphicTool2D((0,k.Z)((0,k.Z)({},t),{},{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:fe(t.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_makeDrawGraphicTool3D",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var i,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)));case 2:if(!be(i=e.sent)&&!this.destroyed){e.next=5;break}return e.abrupt("return",null);case 5:return r=this.layer.elevationInfo,e.abrupt("return",new i.module.DrawGraphicTool3D((0,k.Z)((0,k.Z)({},t),{},{elevationInfo:r,snapToScene:!(0,M.pC)(r)||"absolute-height"===r.mode,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupCreateOperationHandle",value:function(e){var t=this,n=this.view;if(!n)return this._logMissingView(),null;var i=null,r=e.forceUniformSize,a=e.centered,o=[n.on("key-down",(function(t){if(t.key===q.j.pan)t.stopPropagation(),t.repeat||(e.enabled=!1);else if(t.key===q.j.complete)t.stopPropagation(),e.completeCreateOperation();else if(t.key!==q.j.vertexAdd||t.repeat)t.key===q.j.undo?(t.stopPropagation(),s.undo()):t.key===q.j.redo?(t.stopPropagation(),s.redo()):t.key!==q.j.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType||t.repeat?t.key===q.j.center&&(t.repeat||(e.centered=!a,t.stopPropagation())):(e.forceUniformSize=!r,t.stopPropagation());else{var n=e.drawOperation.geometryType;"polyline"!==n&&"polygon"!==n&&"multipoint"!==n||(t.stopPropagation(),e.drawOperation.commitStagedVertex())}}),Y.f.WIDGET),n.on("key-up",(function(t){t.key===q.j.pan?e.enabled=!0:t.key!==q.j.constraint||"rectangle"!==e.geometryType&&"circle"!==e.geometryType?t.key===q.j.center&&(e.centered=a,t.stopPropagation()):(e.forceUniformSize=r,t.stopPropagation())}),Y.f.WIDGET),e.on("vertex-add",(function(n){switch(i=(0,M.Wi)(i)?"start":"active",n.operation){case"apply":t.emit("create",{graphic:(0,M.Wg)(e.graphic),state:i,tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[(0,M.Wg)(e.graphic)],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[(0,M.Wg)(e.graphic)],tool:e.geometryType})}})),e.on("cursor-update",(function(n){e.drawOperation.numCommittedVertices>0&&t.emit("create",{graphic:(0,M.Wg)(e.graphic),state:"active",tool:t.activeTool,toolEventInfo:{coordinates:n.vertices[0].coordinates,type:"cursor-update"},type:"create"})})),e.on("vertex-remove",(function(n){switch(n.operation){case"apply":t.emit("create",{graphic:(0,M.Wg)(e.graphic),state:"active",tool:t.activeTool,toolEventInfo:n,type:"create"});break;case"undo":t._emitUndoEvent({graphics:[(0,M.Wg)(e.graphic)],tool:e.geometryType});break;case"redo":t._emitRedoEvent({graphics:[(0,M.Wg)(e.graphic)],tool:e.geometryType})}})),e.on("complete",(function(e){t._set("createGraphic",(0,M.Wg)(e.graphic)),i="complete",e.aborted?s&&s.cancel():s&&s.complete()})),(0,I.YP)((function(){return t._getGraphicSymbolFromTool(e.geometryType)}),(function(t){e.graphicSymbol=t}))],s=new re({activeComponent:e,tool:e.geometryType,type:"create",onEnd:function(){var t;o.forEach((function(e){return e.remove()})),o.length=0,null===(t=n.tools)||void 0===t||t.remove(e)},undo:function(){e.canUndo&&e.undo()},redo:function(){e.canRedo&&e.redo()},canUndo:function(){return e.canUndo},canRedo:function(){return e.canRedo}});return s}},{key:"_getGraphicSymbolFromTool",value:function(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol}}},{key:"_setupUpdateOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var i,r,a,s,c,l,u,p,d,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.layer,r=this.view){e.next=3;break}return e.abrupt("return",(this._logMissingView(),null));case 3:a=(0,k.Z)((0,k.Z)((0,k.Z)({tool:this._defaultUpdateTool},this.defaultUpdateOptions),n),{},{reshapeOptions:(0,k.Z)((0,k.Z)({},this.defaultUpdateOptions.reshapeOptions),null===n||void 0===n?void 0:n.reshapeOptions)}),s=a.tool,c=(0,w.Z)(t);try{for(c.s();!(l=c.n()).done;)u=l.value,i.remove(u),i.add(u)}catch(o){c.e(o)}finally{c.f()}if("3d"!==r.type){e.next=19;break}if(0!==t.length){e.next=10;break}return e.abrupt("return",null);case 10:e.t0=s,e.next="move"===e.t0?13:"reshape"===e.t0?14:"transform"===e.t0?18:19;break;case 13:return e.abrupt("return",this._setupMove3DOperation(t,a,r,s));case 14:if(!(t.length>1)){e.next=16;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 16:return p=(0,W.P)(t[0]),e.abrupt("return",p===V.e.SUPPORTED?this._setupReshape3DOperation(t[0],a,r):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,V.Z)(p),").")),null));case 18:return e.abrupt("return",this._setupGraphicTransform3DOperation(t,a,r));case 19:e.t1=s,e.next="move"===e.t1?22:"reshape"===e.t1?23:"transform"===e.t1?27:29;break;case 22:return e.abrupt("return",this._setupMove2DOperation(t,a,r));case 23:if(!(t.length>1)){e.next=25;break}return e.abrupt("return",(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null));case 25:return d=(0,W.P)(t[0]),e.abrupt("return",d===V.e.SUPPORTED?this._setupTransformOrReshape2DOperation(t,s,a,r):(this._logError("sketch:reshape","Reshape operation not supported for provided graphic(s) (".concat((0,V.Z)(d),").")),null));case 27:return 1===t.length&&("point"!==(h=(0,M.U2)(t[0].geometry,"type"))&&"multipoint"!==h||(s="reshape")),e.abrupt("return",this._setupTransformOrReshape2DOperation(t,s,a,r));case 29:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_setupMove3DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,a,c){var l,u,p,d,h,f,v,y,m,g=this,b=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=b.length>4&&void 0!==b[4]&&b[4],u=(0,w.Z)(t),e.prev=2,u.s();case 4:if((p=u.n()).done){e.next=11;break}if(d=p.value,(h=(0,j.P)(d))===V.e.SUPPORTED){e.next=9;break}return e.abrupt("return",(this._logError("sketch:move","Move operation not supported for provided graphic(s) (".concat((0,V.Z)(h),").")),null));case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),u.e(e.t0);case 16:return e.prev=16,u.f(),e.finish(16);case 19:return e.next=21,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)));case 21:if(!be(f=e.sent)){e.next=24;break}return e.abrupt("return",f);case 24:return v=new f.module.GraphicMoveTool({view:a,enableZ:i.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions}),a.tools.add(v),v.graphics.addMany(t),l||this.updateGraphics.addMany(t),y=[],m=new ae({activeComponent:v,tool:c,type:"update",onEnd:function(){var e;y.forEach((function(e){return e.remove()})),y.length=0,null!==(e=a.tools)&&void 0!==e&&e.remove(v),v.destroyed||v.destroy()},undo:function(){ve(m,g.updateGraphics.toArray()),g._emitUndoEvent({graphics:g.updateGraphics.toArray(),tool:c})},redo:function(){ye(m,g.updateGraphics.toArray()),g._emitRedoEvent({graphics:g.updateGraphics.toArray(),tool:c})},addToSelection:function(e){g.updateGraphics.push(e),v.graphics.push(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[e],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:function(e){var t=g.updateGraphics.indexOf(e);m.history.undo.forEach((function(e){return e.updates.splice(t,1)})),m.history.redo.forEach((function(e){return e.updates.splice(t,1)})),g.updateGraphics.remove(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==g.updateGraphics.length?v.graphics.remove(e):m.complete()},toggleTool:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===g.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if("transform"===c){e.next=4;break}return e.abrupt("return");case 4:if(t=g.updateGraphics.getItemAt(0),(0,W.P)(t)===V.e.SUPPORTED){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,g._setupReshape3DOperation(t,i,a,!0);case 9:be(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(y.push.apply(y,(0,r.Z)(this._getHandlesForComponent(m,i)).concat([a.on("immediate-click",(function(e){return g._getCommonUpdateOperationClickHandlers(m,e,i)}),Y.f.WIDGET),a.on("key-down",(function(e){g._getCommonUpdateOperationKeyDownHandlers(m,e)}),Y.f.WIDGET)])),m));case 28:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_setupGraphicTransform3DOperation",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(1===e.length&&N(e[0])===V.e.SUPPORTED){var r=e[0],a=r.geometry;if((0,M.pC)(a)&&("point"===a.type||"mesh"===a.type))return this._setupPointTransform3DOperation(r,t,n);if((0,M.pC)(a)&&("polygon"===a.type||"polyline"===a.type))return this._setupPolyTransform3DOperation(r,t,n,i)}return this._setupMove3DOperation(e,t,n,"transform",i)}},{key:"_setupPointTransform3DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,a){var c,l,u,p,d,h,f,v,y=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="transform",l=i.enableRotation,u=i.enableScaling,p=i.enableZ,e.next=6,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)));case 6:if(!be(d=e.sent)){e.next=9;break}return e.abrupt("return",d);case 9:return h=new d.module.GraphicTransformTool({graphic:t,view:a,enableRotation:l,enableScaling:u,enableZ:p,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions}),a.tools.add(h),this.updateGraphics.add(t),f=[],v=new ae({activeComponent:h,tool:c,type:"update",onEnd:function(){var e;f.forEach((function(e){return e.remove()})),f.length=0,null!==(e=a.tools)&&void 0!==e&&e.remove(h),h.destroyed||h.destroy()},undo:function(){ve(v,y.updateGraphics.toArray()),y._emitUndoEvent({graphics:y.updateGraphics.toArray(),tool:c})},redo:function(){ye(v,y.updateGraphics.toArray()),y._emitRedoEvent({graphics:y.updateGraphics.toArray(),tool:c})},addToSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.updateGraphics.add(t),y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,y._setupMove3DOperation(y.updateGraphics.toArray(),i,a,"transform",!0);case 3:be(n=e.sent)||(v.onEnd(),v.destroy(),y._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){y.updateGraphics.remove(e),y.emit("update",{graphics:y.updateGraphics.toArray(),state:"active",aborted:!1,tool:y.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),v.complete()},toggleTool:function(){}}),e.abrupt("return",(f.push.apply(f,(0,r.Z)(this._getHandlesForComponent(v,i)).concat([a.on("immediate-click",(function(e){return y._getCommonUpdateOperationClickHandlers(v,e,i)}),Y.f.WIDGET),a.on("key-down",(function(e){y._getCommonUpdateOperationKeyDownHandlers(v,e)}),Y.f.WIDGET)])),v));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_setupPolyTransform3DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,a){var c,l,u,p,d,h,f,v,y,m,g=this,b=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=b.length>3&&void 0!==b[3]&&b[3],l="transform",u=i.enableRotation,p=i.enableScaling,d=i.enableZ,h=i.preserveAspectRatio,e.next=8,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)));case 8:if(!be(f=e.sent)){e.next=11;break}return e.abrupt("return",f);case 11:return v=new f.module.ExtentTransformTool({graphic:t,view:a,enableRotation:u,enableScaling:p,enableZ:d,preserveAspectRatio:h,tooltipOptions:this.tooltipOptions}),a.tools.add(v),c||this.updateGraphics.add(t),y=[],m=new ae({activeComponent:v,tool:l,type:"update",onEnd:function(){var e;y.forEach((function(e){return e.remove()})),y.length=0,null!==(e=a.tools)&&void 0!==e&&e.remove(v),v.destroyed||v.destroy()},canUndo:function(){return v.canUndo},undo:function(){v.undo(),g._emitUndoEvent({graphics:g.updateGraphics.toArray(),tool:l})},canRedo:function(){return v.canRedo},redo:function(){v.redo(),g._emitRedoEvent({graphics:g.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.updateGraphics.add(t),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,g._setupMove3DOperation(g.updateGraphics.toArray(),i,a,"transform",!0);case 3:be(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){g.updateGraphics.remove(e),g.emit("update",{graphics:g.updateGraphics.toArray(),state:"active",aborted:!1,tool:g.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),m.complete()},toggleTool:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===g.updateGraphics.length&&!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:if(t=g.updateGraphics.getItemAt(0),(0,W.P)(t)===V.e.SUPPORTED){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,g._setupReshape3DOperation(t,i,a,!0);case 7:be(n=e.sent)||(m.onEnd(),m.destroy(),g._setUpdateOperationHandle(n,i));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(y.push.apply(y,(0,r.Z)(this._getHandlesForComponent(m,i)).concat([a.on("immediate-click",(function(e){return g._getCommonUpdateOperationClickHandlers(m,e,i)}),Y.f.WIDGET),a.on("key-down",(function(e){return g._getCommonUpdateOperationKeyDownHandlers(m,e)}),Y.f.WIDGET),a.on("key-down",(function(e){e.key!==q.j.constraint||e.repeat||(v.preserveAspectRatio=!v.preserveAspectRatio,e.stopPropagation())}),Y.f.WIDGET),a.on("key-up",(function(e){e.key===q.j.constraint&&(v.preserveAspectRatio=!v.preserveAspectRatio,e.stopPropagation())}),Y.f.WIDGET)])),m));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_setupMove2DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,i){var a,c,l,u,p,d,h=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="move",this.updateGraphics.addMany(t),e.next=4,this._updateSpatialReference(t);case 4:return e.next=6,this._getGraphicMover(t,n,i);case 6:if(!be(c=e.sent)){e.next=9;break}return e.abrupt("return",c);case 9:return l=new ae({activeComponent:c,tool:a,type:"update",onEnd:function(){var e;h._displayDefaultCursor(),d.forEach((function(e){return e.remove()})),p.forEach((function(e){return e.remove()})),d=[],p=[],c.destroy(),null===(e=h._internalGraphicsLayer)||void 0===e||e.removeMany((0,r.Z)(h.updateGraphics.toArray()))},undo:function(){var e=h.updateGraphics.toArray();ve(l,e),l.refreshComponent(),h._emitUndoEvent({graphics:e,tool:a})},redo:function(){var e=h.updateGraphics.toArray();ye(l,e),l.refreshComponent(),h._emitRedoEvent({graphics:e,tool:a})},addToSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h._updateSpatialReference(t);case 2:h.updateGraphics.push(t),c.graphics=h.updateGraphics.toArray(),h.emit("update",{graphics:h.updateGraphics.toArray(),state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){var t=h.updateGraphics.indexOf(e);l.history.undo.forEach((function(e){return e.updates.splice(t,1)})),l.history.redo.forEach((function(e){return e.updates.splice(t,1)})),h.updateGraphics.remove(e);var n=h.updateGraphics.toArray();h.emit("update",{graphics:n,state:"active",aborted:!1,tool:h.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),0!==h.updateGraphics.length?c.graphics=n:l.complete()}}),u=!1,p=[i.on("immediate-click",(function(e){return h._getCommonUpdateOperationClickHandlers(l,e,n)}),Y.f.WIDGET),i.on("key-down",(function(e){h._getCommonUpdateOperationKeyDownHandlers(l,e),e.key!==q.j.constraint||e.repeat||(u=!0,c.enableMoveAllGraphics=!c.enableMoveAllGraphics)}),Y.f.WIDGET),i.on("key-up",(function(e){e.key===q.j.constraint&&u&&(u=!1,c.enableMoveAllGraphics=!c.enableMoveAllGraphics)}),Y.f.WIDGET)],d=this._getHandlesForComponent(l,n),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_setupReshape3DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,a){var c,l,u,p,d,h,f,v=this,y=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=y.length>3&&void 0!==y[3]&&y[3],l="reshape",e.next=4,this._requireModule(Promise.all([n.e(51378),n.e(62029),n.e(93463),n.e(32456),n.e(25158),n.e(55652),n.e(49729),n.e(1103),n.e(90170),n.e(21236),n.e(37186),n.e(23307),n.e(83639),n.e(66505),n.e(13762),n.e(32050),n.e(71004),n.e(16669),n.e(93507),n.e(38978),n.e(81),n.e(63050)]).then(n.bind(n,56136)));case 4:if(!be(u=e.sent)){e.next=7;break}return e.abrupt("return",u);case 7:return p=i.reshapeOptions,d=new u.module.GraphicReshapeTool({view:a,graphic:t,enableZVertex:i.enableZ&&"move"===(null===p||void 0===p?void 0:p.vertexOperation),enableZShape:i.enableZ&&"move"===(null===p||void 0===p?void 0:p.shapeOperation),enableMoveGraphic:"move"===(null===p||void 0===p?void 0:p.shapeOperation)||"move-xy"===(null===p||void 0===p?void 0:p.shapeOperation),enableMidpoints:"split"===(null===p||void 0===p?void 0:p.edgeOperation),enableEdgeOffset:"offset"===(null===p||void 0===p?void 0:p.edgeOperation),snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions}),a.tools.add(d),c||this.updateGraphics.add(t),h=[],f=new ae({activeComponent:d,tool:l,type:"update",onEnd:function(){var e;h.forEach((function(e){return e.remove()})),h.length=0,null!==(e=a.tools)&&void 0!==e&&e.remove(d),d.destroyed||d.destroy()},canUndo:function(){return d.canUndo},undo:function(){d.undo(),v._emitUndoEvent({graphics:v.updateGraphics.toArray(),tool:l})},canRedo:function(){return d.canRedo},redo:function(){d.redo(),v._emitRedoEvent({graphics:v.updateGraphics.toArray(),tool:l})},addToSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.updateGraphics.add(t),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"}),e.next=3,v._setupMove3DOperation(v.updateGraphics.toArray(),i,a,"transform",!0);case 3:be(n=e.sent)||(f.onEnd(),f.destroy(),v._setUpdateOperationHandle(n,i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(e){v.updateGraphics.remove(e),v.emit("update",{graphics:v.updateGraphics.toArray(),state:"active",aborted:!1,tool:v.activeTool,toolEventInfo:{added:[],removed:[e],type:"selection-change"},type:"update"}),f.complete()},toggleTool:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==i.toggleToolOnClick){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v._setupGraphicTransform3DOperation(v.updateGraphics.toArray(),i,a,!0);case 4:be(t=e.sent)||(f.onEnd(),f.destroy(),v._setUpdateOperationHandle(t,i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),e.abrupt("return",(h.push.apply(h,(0,r.Z)(this._getHandlesForComponent(f,i)).concat([a.on("immediate-click",(function(e){return v._getCommonUpdateOperationClickHandlers(f,e,i)}),Y.f.WIDGET),a.on("key-down",(function(e){v._getCommonUpdateOperationKeyDownHandlers(f,e)}),Y.f.WIDGET)])),f));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_setupTransformOrReshape2DOperation",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,i,a){var c,l,u,p,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateGraphics.addMany(t),e.next=3,this._updateSpatialReference(t);case 3:if("transform"!==n){e.next=9;break}return e.next=6,this._getBox(t,i,a);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this._getReshape(t,i,a);case 11:e.t0=e.sent;case 12:if(!be(c=e.t0)){e.next=15;break}return e.abrupt("return",c);case 15:return l=new ae({activeComponent:c,type:"update",onEnd:function(){p.forEach((function(e){return e.remove()})),u.forEach((function(e){return e.remove()})),p=[],u=[],l.activeComponent&&!l.activeComponent.destroyed&&l.activeComponent.destroy(),d._internalGraphicsLayer.removeMany(d.updateGraphics.toArray())},undo:function(){ve(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitUndoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},redo:function(){ye(l,d.updateGraphics.toArray()),l.refreshComponent(),d._emitRedoEvent({graphics:d.updateGraphics.toArray(),tool:l.tool})},addToSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,s,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reshape"!==(null===(n=l.activeComponent)||void 0===n?void 0:n.type)){e.next=12;break}return s=[].concat((0,r.Z)(d.updateGraphics),[t]),d.updateGraphics.removeAll(),e.next=6,d._setupMove2DOperation(s,i,a);case 6:if(!be(c=e.sent)){e.next=9;break}return e.abrupt("return");case 9:l.onEnd(),l.destroy(),d._setUpdateOperationHandle(c,i),e.next=13;break;case 12:d.updateGraphics.add(t),n.graphics=d.updateGraphics.toArray(),n.refresh(),l.resetHistory();case 13:d.emit("update",{graphics:d.updateGraphics.toArray(),state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[t],removed:[],type:"selection-change"},type:"update"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeFromSelection:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,i,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.updateGraphics.indexOf(t),l.history.undo.forEach((function(e){return e.updates.splice(n,1)})),l.history.redo.forEach((function(e){return e.updates.splice(n,1)})),d.updateGraphics.remove(t),0===(i=d.updateGraphics.toArray()).length?l.complete():(r=i[0].geometry,1!==i.length||!(0,M.pC)(r)||"point"!==r.type&&"multipoint"!==r.type?l.activeComponent.graphics=i:l.toggleTool()),d.emit("update",{graphics:i,state:"active",aborted:!1,tool:d.activeTool,toolEventInfo:{added:[],removed:[t],type:"selection-change"},type:"update"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleTool:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d.updateGraphics.length>1)){e.next=2;break}return e.abrupt("return");case 2:if(n=d.updateGraphics.getItemAt(0),r=n.geometry,!(0,M.pC)(r)||("reshape"!==l.tool||"point"!==r.type&&"multipoint"!==r.type)&&("transform"!==l.tool||"extent"!==r.type)){e.next=5;break}return e.abrupt("return");case 5:if(s=null,"transform"!==l.tool){e.next=12;break}return e.next=9,d._getReshape([n],i,a);case 9:s=e.sent,e.next=17;break;case 12:if(e.t0="reshape"===l.tool,!e.t0){e.next=17;break}return e.next=16,d._getBox([n],i,a);case 16:s=e.sent;case 17:be(s)||(null!==(t=l.activeComponent)&&void 0!==t&&t.destroy(),l.activeComponent=s,l.activeComponent&&(p.forEach((function(e){return e.remove()})),p=d._getHandlesForComponent(l,i)));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=[a.on("immediate-click",(function(e){return d._getCommonUpdateOperationClickHandlers(l,e,i)}),Y.f.WIDGET),a.on("key-down",(function(e){if(d._getCommonUpdateOperationKeyDownHandlers(l,e),e.key===q.j.constraint&&!e.repeat&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),Y.f.WIDGET),a.on("key-up",(function(e){if(e.key===q.j.constraint&&l){var t=l.activeComponent;t&&"box"===t.type&&(t.preserveAspectRatio=!t.preserveAspectRatio)}}),Y.f.WIDGET)],p=this._getHandlesForComponent(l,i),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_getGraphicMover",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,r){var a,s,c=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.enableMoveAllGraphics,e.next=3,this._requireModule(Promise.all([n.e(53503),n.e(2346)]).then(n.bind(n,53503)));case 3:return s=e.sent,e.abrupt("return",be(s)?s:new s.module.default({enableMoveAllGraphics:a,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:t,view:r,callbacks:{onGraphicMoveStart:function(e){var t=e.dx,n=e.dy,i=e.graphic;c._displayGrabbingCursor(),c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:"move-start"},type:"update"})},onGraphicMove:function(e){var t=e.dx,n=e.dy,i=e.graphic;return c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:"move"},type:"update"})},onGraphicMoveStop:function(e){var t=e.dx,n=e.dy,i=e.graphic;c._displayPointerCursor(),c.emit("update",{graphics:c.updateGraphics.toArray(),state:"active",aborted:!1,tool:c.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:"move-stop"},type:"update"})},onGraphicPointerOver:function(){return c._displayPointerCursor()},onGraphicPointerOut:function(){return c._displayDefaultCursor()}}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_getBox",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,r){var a,s,c,l,u=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.enableRotation,s=i.enableScaling,c=i.preserveAspectRatio,e.next=5,this._requireModule(Promise.all([n.e(32456),n.e(23307),n.e(53503),n.e(49232),n.e(51534)]).then(n.bind(n,96306)));case 5:return l=e.sent,e.abrupt("return",be(l)?l:new l.module.default({graphics:t,enableRotation:a,enableScaling:s,preserveAspectRatio:c,layer:this._internalGraphicsLayer,view:r,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onMove:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onMoveStop:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onScaleStart:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onScale:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onScaleStop:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onRotateStart:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onRotate:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onRotateStop:function(e){return u.emit("update",{graphics:u.updateGraphics.toArray(),state:"active",aborted:!1,tool:u.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})}}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_getReshape",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,i,r){var a,s,c,l,u,p=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="split"===(null===(a=i.reshapeOptions)||void 0===a?void 0:a.edgeOperation),l="move"===(null===(s=i.reshapeOptions)||void 0===s?void 0:s.shapeOperation),e.next=4,this._requireModule(Promise.all([n.e(32456),n.e(55652),n.e(1103),n.e(23307),n.e(53503),n.e(34327),n.e(34141),n.e(29247)]).then(n.bind(n,83362)));case 4:return u=e.sent,e.abrupt("return",be(u)?u:new u.module.default({enableMidpoints:c,enableMovement:l,graphic:t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:r,callbacks:{onReshapeStart:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onReshape:function(e){return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:(0,k.Z)({},e),type:"update"})},onReshapeStop:function(e){var t=e.mover,n=e.type;return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{mover:t,type:n},type:"update"})},onMoveStart:function(e){var t=e.dx,n=e.dy,i=e.mover,r=e.type;return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:r},type:"update"})},onMove:function(e){var t=e.dx,n=e.dy,i=e.mover,r=e.type;return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:r},type:"update"})},onMoveStop:function(e){var t=e.dx,n=e.dy,i=e.mover,r=e.type;return p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{dx:t,dy:n,mover:i,type:r},type:"update"})},onVertexAdd:function(e){var t=e.added,n=e.type,i=e.vertices,r=t.map((function(e){return(0,U.nA)(e.geometry)}));p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{added:r,vertices:i,type:n},type:"update"})},onVertexRemove:function(e){var t=e.removed,n=e.type,i=e.vertices,r=t.map((function(e){return(0,U.nA)(e.geometry)}));p.emit("update",{graphics:p.updateGraphics.toArray(),state:"active",aborted:!1,tool:p.activeTool,toolEventInfo:{removed:r,vertices:i,type:n},type:"update"})}}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_getHandlesForComponent",value:function(e,t){var n=this,i=e.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",(function(t){var n,i=t.graphic,r=t.viewEvent;(null===(n=r.native)||void 0===n?void 0:n.shiftKey)&&(r.stopPropagation(),e.removeFromSelection(i))})),i.on("graphic-move-start",(function(t){return e.addToHistory(ge(t.allGraphics))}))];case"box":return[i.on("graphic-click",(function(i){return n._onTransformOrReshape2DGraphicClick(e,t,i)})),i.on("move-start",(function(t){return e.addToHistory(ge(t.graphics))})),i.on("rotate-start",(function(t){return e.addToHistory(ge(t.graphics))})),i.on("scale-start",(function(t){return e.addToHistory(ge(t.graphics))}))];case"reshape":return[i.on("graphic-click",(function(i){return n._onTransformOrReshape2DGraphicClick(e,t,i)})),i.on("move-start",(function(t){return e.addToHistory(ge([t.mover]))})),i.on("reshape-start",(function(t){return e.addToHistory(ge([t.graphic]))})),i.on("vertex-add",(function(t){return e.addToHistory(ge([t.oldGraphic]))})),i.on("vertex-remove",(function(t){return e.addToHistory(ge([t.oldGraphic]))}))];case"move-3d":return[i.on("graphic-move-start",(function(t){e.addToHistory(ge(t.allGraphics)),n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:t.allGraphics.length>0?t.allGraphics[0]:null,type:"move-start"},type:"update"})})),i.on("graphic-move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:e.dx,dy:e.dy,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move"},type:"update"})})),i.on("graphic-move-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{dx:0,dy:0,mover:e.allGraphics.length>0?e.allGraphics[0]:null,type:"move-stop"},type:"update"})})),i.on("immediate-click",(function(i){i.shiftKey?n._toggleSelection([i.graphic],e,t):e.toggleTool()}))];case"transform-3d":return[i.on("record-undo",(function(t){var n=t.record;e.addToHistory({updates:[n]})})),i.on("graphic-translate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-start"},type:"update"})})),i.on("graphic-translate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move-stop"},type:"update"})})),i.on("graphic-rotate-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-start"},type:"update"})})),i.on("graphic-rotate-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate-stop"},type:"update"})})),i.on("graphic-scale-start",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-start"},type:"update"})})),i.on("graphic-scale-stop",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale-stop"},type:"update"})})),i.on("graphic-translate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,dx:e.dxScreen,dy:e.dyScreen,type:"move"},type:"update"})})),i.on("graphic-rotate",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,angle:e.angle,type:"rotate"},type:"update"})})),i.on("graphic-scale",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:{mover:e.graphic,xScale:e.xScale,yScale:e.yScale,type:"scale"},type:"update"})})),i.on("immediate-click",(function(i){i.shiftKey?n._toggleSelection([i.graphic],e,t):e.toggleTool()}))];case"reshape-3d":return[i.on("reshape",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),i.on("move",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),i.on("vertex-add",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),i.on("vertex-remove",(function(e){n.emit("update",{graphics:n.updateGraphics.toArray(),state:"active",aborted:!1,tool:n.activeTool,toolEventInfo:e,type:"update"})})),i.on("immediate-click",(function(i){i.shiftKey?n._toggleSelection([i.graphic],e,t):e.toggleTool()}))]}}},{key:"_onTransformOrReshape2DGraphicClick",value:function(e,t,n){var i,r=n.graphic,a=n.viewEvent;return null!==(i=a.native)&&void 0!==i&&i.shiftKey&&r.layer===this.layer?(a.stopPropagation(),e.removeFromSelection(r)):t.toggleToolOnClick?(a.stopPropagation(),e.toggleTool()):void 0}},{key:"_setUpdateOperationHandle",value:function(e,t){var n,i=this;this._operationHandle=e;var r=null===(n=this.view)||void 0===n?void 0:n.map;this._disablePopup(t);e.on("complete",(function(){if(e===i._operationHandle){var n=i.updateGraphics.toArray(),a=i._operationHandle.tool;i._operationHandle.destroy(),i._operationHandle=null,i._internalGraphicsLayer.removeMany(i.updateGraphics.toArray()),i.updateGraphics.removeAll(),r&&r.remove(i._internalGraphicsLayer),i._restorePopup(t),i.emit("update",{graphics:n,state:"complete",aborted:e.cancelled,tool:a,toolEventInfo:null,type:"update"})}}))}},{key:"_getCommonUpdateOperationClickHandlers",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,i){var r,a,s=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,te.vT)(n),e.next=3,n.async((function(){return s._getFirstHit(r)}));case 3:if(a=e.sent,!(0,M.Wi)(a)){e.next=6;break}return e.abrupt("return",void t.complete());case 6:if(!n.native.shiftKey||!this._toggleSelection([a.graphic],t,i)){e.next=8;break}return e.abrupt("return",void n.stopPropagation());case 8:this.updateGraphics.includes(a.graphic)?n.stopPropagation():t.complete();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_toggleSelection",value:function(e,t,n){var i=this,r=!!n.multipleSelectionEnabled;return e.some((function(e){return null!=e&&!(!r||e.layer!==i.layer)&&(i.updateGraphics.includes(e)?t.removeFromSelection(e):t.addToSelection(e),!0)}))}},{key:"_getCommonUpdateOperationKeyDownHandlers",value:function(e,t){if(e){var n=t.key;n===q.j.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===q.j.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===q.j.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&q.j.delete.includes(n)&&this._onDeleteKey(t)}}},{key:"_onDeleteKey",value:function(e){if(this._operationHandle&&"update"===this._operationHandle.type){var t=this.activeComponent,n=this.updateGraphics.toArray();(0,M.Wi)(t)||"reshape-3d"===t.type||("reshape"!==t.type||1===n.length&&"point"===(0,M.U2)(n[0].geometry,"type"))&&(e.stopPropagation(),this.delete())}}},{key:"_removeDefaultLayer",value:function(){var e,t;this._internalGraphicsLayer&&(null!==(e=this.view)&&void 0!==e&&null!==(t=e.map)&&void 0!==t&&t.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=(0,M.SC)(this._internalGraphicsLayer))}},{key:"_isComponentGraphic",value:function(e){var t=this.activeComponent;return!(!e||(0,M.Wi)(t))&&(e.attributes&&e.attributes.esriSketchTool||"draw-2d"===t.type&&t.graphic===e||("box"===t.type||"reshape"===t.type)&&t.isUIGraphic(e))}},{key:"_displayPointerCursor",value:function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}},{key:"_displayGrabbingCursor",value:function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}},{key:"_displayDefaultCursor",value:function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)}},{key:"_logError",value:function(e,t,n){P.Z.getLogger(this.declaredClass).error(new S.Z(e,t,n))}},{key:"_requireModule",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,this._moduleLoaderAbortController=n,e.next=4,t;case 4:return i=e.sent,e.abrupt("return",this._moduleLoaderAbortController!==n||n.signal.aborted?{requireError:"aborted"}:{module:i});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitUndoEvent",value:function(e){this.emit("undo",(0,k.Z)((0,k.Z)({},e),{},{type:"undo"}))}},{key:"_emitRedoEvent",value:function(e){this.emit("redo",(0,k.Z)((0,k.Z)({},e),{},{type:"redo"}))}},{key:"_emitDeleteEvent",value:function(e){this.emit("delete",(0,k.Z)((0,k.Z)({},e),{},{type:"delete"}))}},{key:"test",get:function(){return{operationHandle:this._operationHandle,defaultUpdateOptions:ue}}},{key:"wait",value:function(){var e=this;return(0,I.N1)((function(){return!e.updating}))}},{key:"_beginAsyncOperation",value:function(){this._numUpdating+=1,this.notifyChange("updating")}},{key:"_endAsyncOperation",value:function(){this._numUpdating-=1,this.notifyChange("updating")}},{key:"_disablePopupEnabled",value:function(e){var t,n,i;return"3d"!==(null===(t=this.view)||void 0===t?void 0:t.type)||this.updateOnGraphicClick||null!==(n=null===(i=(0,M.Wg)(e))||void 0===i?void 0:i.toggleToolOnClick)&&void 0!==n&&n}},{key:"_disablePopup",value:function(e){var t;if(this._disablePopupEnabled(e)){var n=null===(t=this.view)||void 0===t?void 0:t.popup;n&&(0,M.Wi)(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=n.autoOpenEnabled,n.autoOpenEnabled=!1)}}},{key:"_restorePopup",value:function(e){var t;if(this._disablePopupEnabled(e)){var n=null===(t=this.view)||void 0===t?void 0:t.popup;n&&(0,M.pC)(this._originalAutoOpenEnabled)&&(n.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}}},{key:"_waitViewReady",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.view)){e.next=8;break}return(0,M.IM)(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,e.next=6,(0,D.Hl)((0,I.N1)((function(){return null===t||void 0===t?void 0:t.ready})),this._viewReadyAbortController.signal);case 6:e.next=9;break;case 8:this._logMissingView();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_logMissingView",value:function(){this._logError("sketch:missing-property",he("view"))}},{key:"_logMissingLayer",value:function(){this._logError(de,he("layer"))}}]),i}(G.Z.EventedAccessor);(0,E._)([(0,R.Cb)()],pe.prototype,"updating",null),(0,E._)([(0,R.Cb)()],pe.prototype,"_operationHandle",void 0),(0,E._)([(0,R.Cb)({readOnly:!0})],pe.prototype,"activeTool",null),(0,E._)([(0,R.Cb)()],pe.prototype,"activeFillSymbol",void 0),(0,E._)([(0,R.Cb)()],pe.prototype,"activeLineSymbol",void 0),(0,E._)([(0,R.Cb)()],pe.prototype,"activeVertexSymbol",void 0),(0,E._)([(0,R.Cb)()],pe.prototype,"allowDeleteKey",void 0),(0,E._)([(0,R.Cb)({readOnly:!0})],pe.prototype,"createGraphic",null),(0,E._)([(0,R.Cb)()],pe.prototype,"defaultCreateOptions",null),(0,E._)([(0,R.Cb)()],pe.prototype,"defaultUpdateOptions",null),(0,E._)([(0,R.Cb)({type:J.Z,nonNullable:!0})],pe.prototype,"labelOptions",void 0),(0,E._)([(0,R.Cb)()],pe.prototype,"layer",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"pointSymbol",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"polygonSymbol",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"polylineSymbol",void 0),(0,E._)([(0,R.Cb)({type:Q.Z,nonNullable:!0})],pe.prototype,"snappingOptions",null),(0,E._)([(0,R.Cb)()],pe.prototype,"_snappingManager",void 0),(0,E._)([(0,R.Cb)({readOnly:!0})],pe.prototype,"state",null),(0,E._)([(0,R.Cb)({type:K.Z,nonNullable:!0})],pe.prototype,"tooltipOptions",void 0),(0,E._)([(0,R.Cb)({readOnly:!0})],pe.prototype,"updateGraphics",void 0),(0,E._)([(0,R.Cb)()],pe.prototype,"updateOnGraphicClick",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"updatePointSymbol",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"updatePolygonSymbol",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"updatePolylineSymbol",void 0),(0,E._)([(0,R.Cb)({types:C.LB})],pe.prototype,"vertexSymbol",void 0),(0,E._)([(0,R.Cb)({value:null})],pe.prototype,"view",null),pe=(0,E._)([(0,A.j)("esri.widgets.Sketch.SketchViewModel")],pe);var de="sketch:missing-property",he=function(e){return"Property '".concat(e,"' is missing on SketchViewModel.")};function fe(e){return"polygon"===e||"rectangle"===e||"circle"===e}function ve(e,t){me("undo",e.history.undo,e.history.redo,t)}function ye(e,t){me("redo",e.history.redo,e.history.undo,t)}function me(e,t,n,i){var r=t.pop();if(r){var a=r.updates,o=[];i.forEach((function(t,n){var i=a[n];null!=i&&("geometry"in i&&(0,M.pC)(i.geometry)&&(o.push({geometry:t.geometry}),t.geometry=i.geometry),"symbol"in i&&(0,M.pC)(i.symbol)&&(o.push({symbol:t.symbol}),t.symbol=i.symbol),"undo"in i&&(o.push(i),i[e](t)))})),n.push({updates:o})}}function ge(e){return{updates:e.map((function(e){return{geometry:e.geometry}}))}}function be(e){return"requireError"in e&&"aborted"===e.requireError}var _e,ke=pe,we=n(52639),xe=n(80885),Ze=n(32238),Ee=n(53866),Ce=n(2170),Oe=n(87718),Se=n(58266),Ge=n(24269),Te=n(80718),Pe=n(1118),Me=n(57203),De=n(3511),Ie=n(75462),Re=n(29259),Ae=(n(95101),n(7597),n(19545),n(73736),n(45548),function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o});!function(e){e.circle="circle",e.square="square",e.grip="grip"}(_e||(_e={}));var He="none",Le=function(e,t){return e.action===t.action&&e.category===t.category&&e.label===t.label},Ue=function(){function e(t){(0,c.Z)(this,e),(0,u.r)(this,t),this.arcgisBoundaryPickerUpdate=(0,u.c)(this,"arcgisBoundaryPickerUpdate",7),this.arcgisBoundaryPickerCancel=(0,u.c)(this,"arcgisBoundaryPickerCancel",7),this.arcgisBoundaryPickerSave=(0,u.c)(this,"arcgisBoundaryPickerSave",7),this.authenticated=!1,this.resetDrawingToolsOnDisconnect=!0,(0,h.b)(this,"handleSave","handleCancel","handleEditClick","handleCancelEditClick","handleSaveEditClick","_setMapDrawElement")}return(0,l.Z)(e,[{key:"_editing",get:function(){return!!this._editGeometry}},{key:"_selectedGraphic",get:function(){var e;return null===(e=this._selected)||void 0===e?void 0:e.graphic}},{key:"_selectedGraphics",get:function(){var e=this._selectedGraphic;return e&&!e.symbol&&e.geometry&&e.geometry.type&&(e.symbol=(0,v.g)()),this._editing?[]:[e]}},{key:"_selectedValue",get:function(){var e;return null===(e=this._selected)||void 0===e?void 0:e.value}},{key:"_isNone",get:function(){return this._selectedValue===He}},{key:"_initialSelection",get:function(){var e;return null===(e=this.sources)||void 0===e?void 0:e.find((function(e){return e.selected}))}},{key:"_isGeometryDirty",get:function(){return!!this._updatedGeometry}},{key:"_isDirty",get:function(){var e;return this._selectedValue!==(null===(e=this._initialSelection)||void 0===e?void 0:e.value)||this._isGeometryDirty}},{key:"_isLoadingOrSaving",get:function(){return"loading"===this.state||"saving"===this.state}},{key:"_canSave",get:function(){return this.authenticated&&this._isDirty&&!this._isLoadingOrSaving}},{key:"_noneOption",get:function(){var e;return null===(e=this.sources)||void 0===e?void 0:e.find((function(e){return e.value===He}))}},{key:"_otherOptions",get:function(){var e;return null===(e=this.sources)||void 0===e?void 0:e.filter((function(e){return e.value!==He}))}},{key:"_saveGeometry",get:function(){return this._isGeometryDirty?"item"===this._selectedValue?(0,y.Sx)(this._updatedGeometry.extent):this._updatedGeometry:this._selectedGraphic.geometry}},{key:"_saveSource",get:function(){var e=this._selectedGraphic,t=this._saveGeometry,n=Object.assign(Object.assign({},e),{geometry:t});return Object.assign(Object.assign({},this._selected),{graphic:n})}},{key:"_overlayMessage",get:function(){var e;if(!this._editing)return this._isNone?this.intl.t("noLocationSet"):"item"!==this._selectedValue||(null===(e=this._selectedGraphic)||void 0===e?void 0:e.geometry)?void 0:this.intl.t("clickEditAndDraw")}},{key:"_getDefaultLabel",value:function(e){return[He,"item"].includes(e)?this.intl.t("item"===e?"itemsCurrentExtent":e):void 0}},{key:"_cancelEditGeometry",value:function(){this._editGeometry=null,this._updatedGeometry=null,this._mapDrawElement.forceReset()}},{key:"_setMapDrawElement",value:function(e){this._mapDrawElement=e}},{key:"_emitGeometryUpdate",value:function(){this.arcgisBoundaryPickerUpdate.emit(this._saveSource)}},{key:"componentWillLoad",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.i.loadIntlForComponent(this.element);case 2:this.intl=e.sent,this.onSourcesUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onSourcesUpdate",value:function(){this._selected=this._initialSelection}},{key:"handleMapViewReady",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),n=t.detail.view,e.next=4,n.when();case 4:n.ui.components=[],this._view=n;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleListChange",value:function(e){var t;e.stopPropagation(),this._cancelEditGeometry();var n=e.detail.keys().next().value,i=null===(t=this.sources)||void 0===t?void 0:t.find((function(e){return e.value===n}));this._savedEditState&&i.value===this._savedEditState.value&&(i=this._savedEditState),this._selected=Object.assign(Object.assign({},i),{selected:!0}),this.arcgisBoundaryPickerUpdate.emit(this._selected)}},{key:"handleGraphicsChange",value:function(e){var t,n=e.detail.graphics;this._updatedGeometry=null===(t=n.getItemAt(0))||void 0===t?void 0:t.geometry,this._emitGeometryUpdate()}},{key:"handleTelemetry",value:function(e){var t=e.detail,n=p.d.dictionary.category.interaction.action;(Le(t,n.search.label.filter)||Le(t,n.enable.label.draw.details.update)||Le(t,n.disable.label.draw.details.update))&&e.stopPropagation()}},{key:"cancelEditGeometry",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._cancelEditGeometry();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(e){e.preventDefault(),this.arcgisBoundaryPickerSave.emit(this._saveSource)}},{key:"handleCancel",value:function(e){e.preventDefault(),this.arcgisBoundaryPickerCancel.emit(),this._cancelEditGeometry()}},{key:"handleEditClick",value:function(e){var t;e.preventDefault();var n=null===(t=this._selectedGraphic)||void 0===t?void 0:t.geometry;n?this._editGeometry=n:(this._editGeometry=this._view.extent.expand(1/1.5),this._updatedGeometry=this._editGeometry,this.arcgisBoundaryPickerUpdate.emit(this._saveSource))}},{key:"handleCancelEditClick",value:function(e){e.preventDefault(),this._cancelEditGeometry(),this.arcgisBoundaryPickerUpdate.emit(this._selected)}},{key:"handleSaveEditClick",value:function(e){e.preventDefault(),this._savedEditState=this._saveSource,this._selected=this._saveSource,this._cancelEditGeometry(),this._emitGeometryUpdate()}},{key:"renderEditConfirmButton",value:function(){if(this._editing)return(0,u.h)("calcite-action",{icon:"check",onClick:this.handleSaveEditClick,slot:"actions-end",text:""})}},{key:"render",value:function(){var e,t=this;return(0,u.h)(u.H,null,(0,u.h)("div",{class:"row"},(0,u.h)("arcgis-hub-map",{basemap:"gray-vector",expand:1.5,extent:this.extent,graphics:this._selectedGraphics},(0,u.h)("arcgis-hub-map-widget-container",{"expand-disabled":!0,scale:"s",view:this._view,"view-position":"top-right"},(0,u.h)("arcgis-hub-map-widget-zoom",{scale:"s",view:this._view})),(0,u.h)("arcgis-hub-map-widget-container",{scale:"s","view-position":"top-right"},(0,u.h)("arcgis-hub-map-widget-draw",{geometry:this._editGeometry,ref:this._setMapDrawElement,resetOnDisconnect:this.resetDrawingToolsOnDisconnect,tools:[],view:this._view})),this._overlayMessage?(0,u.h)("div",{class:"arcgis-boundary-map-overlay"},(0,u.h)("div",{class:"arcgis-boundary-none-message"},this._overlayMessage)):null),(0,u.h)("calcite-pick-list",{"aria-busy":"false","aria-disabled":this._isLoadingOrSaving,disabled:this._isLoadingOrSaving,role:"menu"},this._noneOption?(0,u.h)("calcite-pick-list-item",{icon:_e.circle,label:this._noneOption.label||this._getDefaultLabel(this._noneOption.value),selected:this._noneOption.selected,tabindex:"-1",value:this._noneOption.value}):null,(0,u.h)("calcite-pick-list-group",{"group-title":this.intl.t("startFrom")},null===(e=this._otherOptions)||void 0===e?void 0:e.map((function(e){return(0,u.h)("calcite-pick-list-item",{icon:_e.circle,key:e.value,label:e.label||t._getDefaultLabel(e.value),selected:e.selected,value:e.value},t.renderEditConfirmButton(),(0,u.h)("calcite-action",{disabled:t._selectedValue!==e.value,icon:t._editing?"x":"pencil",onClick:t._editing?t.handleCancelEditClick:t.handleEditClick,slot:"actions-end",text:""}))}))))),this.authenticated&&(0,u.h)("div",{class:"buttons"},(0,u.h)("calcite-button",{appearance:"solid",color:"blue",disabled:!this._canSave,loading:"saving"===this.state,onClick:this.handleSave,scale:"m",type:"button",width:"auto"},this.intl.t("save")),(0,u.h)("calcite-button",{appearance:"outline",color:"blue",disabled:this._isLoadingOrSaving,onClick:this.handleCancel,scale:"m",type:"button",width:"auto"},this.intl.t("cancel"))))}},{key:"element",get:function(){return(0,u.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{sources:["onSourcesUpdate"]}}}]),e}();Ae([(0,d.D)({timeout:300})],Ue.prototype,"_emitGeometryUpdate",null),Ue.style=".sc-arcgis-boundary-picker-ui-h{display:block}@media (min-width: 640px){.row.sc-arcgis-boundary-picker-ui{display:flex}.row.sc-arcgis-boundary-picker-ui{flex-direction:row-reverse}}arcgis-hub-map.sc-arcgis-boundary-picker-ui{height:300px;position:relative;margin-bottom:1rem;width:100%}@media (min-width: 640px){arcgis-hub-map.sc-arcgis-boundary-picker-ui{margin-bottom:0px}}arcgis-hub-map.sc-arcgis-boundary-picker-ui .arcgis-boundary-map-overlay.sc-arcgis-boundary-picker-ui{position:absolute;top:0px;left:0px;z-index:10;display:flex;height:100%;width:100%;flex-direction:column;justify-content:center;background-color:#0000004d;color:var(--calcite-ui-text-inverse)}.arcgis-boundary-none-message.sc-arcgis-boundary-picker-ui{text-align:center}calcite-pick-list.sc-arcgis-boundary-picker-ui{width:100%;background-color:var(--calcite-ui-foreground-3);padding:1rem;color:var(--calcite-ui-text-3)}@media (min-width: 640px){calcite-pick-list.sc-arcgis-boundary-picker-ui{max-width:20rem}}.buttons.sc-arcgis-boundary-picker-ui{display:flex;justify-content:flex-end;padding:1rem}.buttons.sc-arcgis-boundary-picker-ui calcite-button.sc-arcgis-boundary-picker-ui{margin-left:0.5rem}";var ze,Ve=function(){function e(t){(0,c.Z)(this,e),(0,u.r)(this,t),this.viewPosition="top-right",this.scale="m",(0,h.b)(this,"toggleExpanded")}return(0,l.Z)(e,[{key:"position",get:function(){return this.viewPosition.includes("right")?"end":"start"}},{key:"componentWillLoad",value:function(){var e=this.view,t=this.el,n=this.viewPosition;e&&e.ui&&e.ui.add(t,n)}},{key:"disconnectedCallback",value:function(){var e=this.view,t=this.el;e&&e.ui&&e.ui.remove(t)}},{key:"addWidgetToView",value:function(e,t){e&&e.ui&&e!==t&&this.view.ui.add(this.el,this.viewPosition)}},{key:"toggleExpanded",value:function(){this.expanded=!this.expanded}},{key:"render",value:function(){var e=this.expandDisabled,t=this.expanded,n=this.position,i=this.scale;return(0,u.h)(u.H,null,this.view&&(0,u.h)("calcite-action-pad",{expandDisabled:e,expanded:t,onCalciteActionPadToggle:this.toggleExpanded,position:n,scale:i},(0,u.h)("slot",null)))}},{key:"el",get:function(){return(0,u.g)(this)}}],[{key:"watchers",get:function(){return{view:["addWidgetToView"]}}}]),e}();Ve.style=":host{display:flex;justify-content:flex-end;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host-context(div.esri-ui-inner-container.esri-ui-corner-container){box-shadow:none !important}",function(e){e.START="start",e.ACTIVE="active",e.COMPLETE="complete",e.CANCEL="cancel"}(ze||(ze={}));var je=function(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},We=["select","point","polyline","polygon","circle","rectangle"],Fe={select:{icon:"select"},point:{icon:"pin"},polyline:{icon:"freehand"},polygon:{icon:"freehand-area"},rectangle:{icon:"rectangle"},circle:{icon:"circle"}},Ne=function(){function e(t){(0,c.Z)(this,e),(0,u.r)(this,t),this.arcgisHubMapDrawGraphicsChange=(0,u.c)(this,"arcgisHubMapDrawGraphicsChange",7),this.arcgisHubMapDrawGraphicsClear=(0,u.c)(this,"arcgisHubMapDrawGraphicsClear",7),this.arcgisHubMapDrawSelect=(0,u.c)(this,"arcgisHubMapDrawSelect",7),this.arcgisHubDrawDone=(0,u.c)(this,"arcgisHubDrawDone",7),this.arcgisHubMapPopoverOpen=(0,u.c)(this,"arcgisHubMapPopoverOpen",7),this.arcgisHubMapPopoverClear=(0,u.c)(this,"arcgisHubMapPopoverClear",7),this.hubTelemetry=(0,u.c)(this,"hubTelemetry",7),this.mode="hybrid",this.tools=We,this.color=[0,0,0],this.resetOnDisconnect=!0,this.bottomOffset=0,this.topOffset=0,this.handles=[],(0,h.b)(this,"applyFilter","cancelEdits","clearFilter","deleteDrawing","handleSetBufferWidgetRef","handleSketchOnCreate","handleSketchOnUpdate","handleViewClick","handleViewExtentChange","handleViewPointerMoveOrDown","renderPrimaryOptions","renderEditOptions","renderEditingOptions","setPanelHeight","startEditing","saveEdits","setOptionsEl")}return(0,l.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.el,e.next=3,f.i.loadIntlForComponent(t);case 3:return this.intl=e.sent,this.createGraphicsLayers(),e.next=7,this.connectViewModel();case 7:this.addWatchHandles(),this.setViewPosition(),(0,Oe.l)();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this.addWatchHandles()}},{key:"disconnectedCallback",value:function(){this.resetOnDisconnect&&this.reset(),this.removeWatchHandles()}},{key:"handleMapDrawFilter",value:function(e){var t=this.hubTelemetry,n=this.isFiltered,i=e.detail,r=(0,a.Z)(i.graphics,1)[0],o=i.save;if(r&&o&&n){var s=r.geometry.type;t.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.search.label.filter),{details:(0,m.c)(s)}))}}},{key:"handleWidgetSelected",value:function(e){var t=this.activeTool,n=this.isEditing,i=e.target.icon,r="minus-circle"===i?t:Object.entries(Fe).find((function(e){return(0,a.Z)(e,2)[1].icon===i}))[0];"select"!==r?this.reset():n&&this.cancelEdits(),this.activeTool=t===r?void 0:r,this.open=!1}},{key:"handleWidgetDrawBufferChanged",value:function(e){var t=e.detail;this.bufferDetails=t}},{key:"handleWidgetDrawBufferReset",value:function(){var e=this.bufferGraphicsLayer;e&&(this.bufferDetails=void 0,e.removeAll())}},{key:"handleWidgetDrawBufferClosed",value:function(){this.bufferPanelVisible=!1}},{key:"handleWidgetPanelToggled",value:function(e){var t=this,n=e.target,i=e.detail,r=this.bufferWidgetEl;n===r||i?n!==r||i||setTimeout((function(){t.setPanelHeight()}),0):this.bufferPanelVisible=!1}},{key:"handleActiveToolChange",value:function(e,t){var n=this.hubTelemetry,i=this.sketchViewModel,r=this.isEditing;i&&(i.cancel(),e&&"select"!==e&&!r?i.create(e):e||(this.isEditing=!1));var a="select"===e?"select":"draw";n.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action[e?"enable":"disable"].label[a]),{details:(0,m.c)(e||t)}))}},{key:"handleGraphicsChange",value:function(){var e=this.geometry,t=this.bufferWidgetEl;e?(this.addGeometryToGraphicsLayer(),this.startEditing()):(this.reset(),null===t||void 0===t||t.forceReset(),this.activeTool=void 0)}},{key:"handleIsEditingChange",value:function(){this.isEditing||(this.activeTool=void 0),this.setBufferPanelVisible()}},{key:"handleIsFilteredChange",value:function(){var e=this.isFiltered,t=this.graphicsLayer.graphics.getItemAt(0);if(e&&t){var n=t.geometry.type,i=this["".concat(n,"Symbol")];t.symbol=i}this.setBufferPanelVisible()}},{key:"handleViewChange",value:function(e,t){var n=this;e&&e!==t&&(this.removeWatchHandles(),this.connectViewModel().then((function(){n.addWatchHandles()})))}},{key:"handleBufferDetailsChanged",value:function(){var e=this.arcgisHubMapDrawGraphicsChange,t=this.bufferPolygonSymbol,n=this.graphicsLayer,i=this.bufferGraphicsLayer,r=this.bufferDetails,o=this.isEditing,s=n.graphics,c=(0,a.Z)(s,1)[0],l=i.graphics;if(r&&c){var u=r.distance,p=r.unit,d=(0,Ce.buffer)(null===c||void 0===c?void 0:c.geometry,u,p.split(" ").join("-"),!0),h=new we.Z({geometry:d,symbol:t});i.removeAll(),i.add(h),e.emit({graphics:s.clone(),bufferGraphics:l.clone(),save:!o})}}},{key:"forceReset",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reset();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setActiveTool",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.activeTool=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSetBufferWidgetRef",value:function(e){e&&(this.bufferWidgetEl=e)}},{key:"createGraphicsLayers",value:function(){var e=this.graphicsLayer,t=this.bufferGraphicsLayer;_.Z&&(e||(this.graphicsLayer=new _.Z({elevationInfo:{mode:"on-the-ground"}}),this.addGeometryToGraphicsLayer()),t||(this.bufferGraphicsLayer=new _.Z({elevationInfo:{mode:"on-the-ground"}})))}},{key:"handleSketchOnCreate",value:function(e){var t=this,n=e.state,i=e.graphic,r=this.activeTool,a=this.arcgisHubMapPopoverOpen,o=this.bufferGraphicsLayer,s=this.graphicsLayer,c=this.hubTelemetry,l=this.view;n===ze.START&&c.emit(p.d.dictionary.category.interaction.action.draw.label.start.details[r]),n===ze.COMPLETE&&(l.map.reorder(s,99),l.map.reorder(o,100),this.isEditing=!1,this.activeTool=void 0,setTimeout((function(){a.emit({geometry:null===i||void 0===i?void 0:i.geometry,view:l,render:t.renderPrimaryOptions})}),150),c.emit(p.d.dictionary.category.interaction.action.draw.label.complete.details[r]),this.disableEditOptions&&this.disablePrimaryOptions&&this.arcgisHubMapDrawGraphicsChange.emit({graphics:s.graphics.clone(),unsaved:!0})),n===ze.CANCEL&&(this.isEditing=!1,this.activeTool=void 0,this.arcgisHubDrawDone.emit())}},{key:"handleSketchOnUpdate",value:function(e){var t=e.state,n=this.arcgisHubMapPopoverClear,i=this.arcgisHubMapDrawGraphicsChange,r=this.graphicsLayer.graphics,a=this.bufferGraphicsLayer.graphics;t===ze.ACTIVE&&(n.emit(),i.emit({graphics:r.clone(),bufferGraphics:a.clone()}),this.handleBufferDetailsChanged())}},{key:"handleViewClick",value:function(e){var t=this.activeTool,n=this.arcgisHubMapPopoverClear,i=this.hubTelemetry;n.emit(),"select"===t?(i.emit(p.d.dictionary.category.interaction.action.select.label.content.details.selectTool),this.arcgisHubMapDrawSelect.emit(e)):i.emit(p.d.dictionary.category.interaction.action.select.label.content)}},{key:"handleViewPointerMoveOrDown",value:function(e){var t=this,n=this.view,i=this.graphicsLayer;n.hitTest(e,{include:i}).then((function(e){var i,r,a,o=t.isFiltered,s=t.isEditing,c=t.arcgisHubMapPopoverOpen;if(e.results.length){var l=(0,Oe.g)(e.results);o&&!s?c.emit({geometry:null===(i=l.graphic)||void 0===i?void 0:i.geometry,view:n,render:t.renderEditOptions}):s?c.emit({geometry:null===(r=l.graphic)||void 0===r?void 0:r.geometry,view:n,render:t.renderEditingOptions}):c.emit({geometry:null===(a=l.graphic)||void 0===a?void 0:a.geometry,view:n,render:t.renderPrimaryOptions})}}))}},{key:"handleViewExtentChange",value:function(){this.arcgisHubMapPopoverClear.emit()}},{key:"handleToolsOpened",value:function(){this.open=!0,this.hubTelemetry.emit(p.d.dictionary.category.interaction.action.open.label.popover.details.options)}},{key:"handleToolsClosed",value:function(){this.open=!1,this.hubTelemetry.emit(p.d.dictionary.category.interaction.action.close.label.popover.details.options)}},{key:"connectViewModel",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,i,r,a,s,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bufferGraphicsLayer,n=this.graphicsLayer,i=this.mode,r=this.sketchViewModel,a=this.view,s=this.pointSymbol,c=this.polygonSymbol,l=this.polylineSymbol,!a||r||!ke){e.next=7;break}return e.next=4,a.when();case 4:a.map.addMany([n,t]),this.sketchViewModel=new ke({view:a,layer:n,defaultCreateOptions:{mode:i},updateOnGraphicClick:!1,polygonSymbol:c,polylineSymbol:l,pointSymbol:s}),(0,b.YP)(a,"size",this.setPanelHeight);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addWatchHandles",value:function(){var e=this.handles,t=this.sketchViewModel,n=this.view;n&&b.YP&&t&&e.push(n.on("pointer-down",this.handleViewClick),n.on(["pointer-move","pointer-down"],this.handleViewPointerMoveOrDown),(0,b.YP)(n,"extent",this.handleViewExtentChange),t.on("create",this.handleSketchOnCreate),t.on("update",this.handleSketchOnUpdate))}},{key:"removeWatchHandles",value:function(){this.handles.forEach((function(e){e.remove()})),this.handles=[]}},{key:"addGeometryToGraphicsLayer",value:function(){var e=this.geometry,t=this.graphicsLayer,n=this.sketchViewModel;if(e&&t&&this.sketchViewModel){this.reset(),this.isFiltered=!0;var i=this.processGeometry(e),r=new we.Z({geometry:i,symbol:n["".concat(i.type,"Symbol")]});t.add(r)}}},{key:"applyFilter",value:function(){var e=this.arcgisHubMapDrawGraphicsChange,t=this.arcgisHubMapPopoverClear,n=this.graphicsLayer.graphics,i=this.bufferGraphicsLayer.graphics;this.isFiltered=!0,e.emit({graphics:n.clone(),bufferGraphics:i.clone(),save:!0}),t.emit()}},{key:"deleteDrawing",value:function(){var e=(0,a.Z)(this.graphicsLayer.graphics,1)[0],t=this.hubTelemetry,n=this.bufferWidgetEl;if(e){var i=e.geometry.type;t.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.draw.label.delete.details[i]),{response:"Success"})),this.reset(),this.activeTool=void 0,null===n||void 0===n||n.forceReset()}}},{key:"clearFilter",value:function(){var e=this.arcgisHubMapDrawGraphicsClear,t=this.hubTelemetry;this.deleteDrawing(),e.emit(),t.emit(p.d.dictionary.category.interaction.action.search.label.filter.details.clear)}},{key:"startEditing",value:function(){var e=this.arcgisHubMapPopoverClear,t=this.graphicsLayer.graphics,n=this.bufferGraphicsLayer.graphics,i=this.hubTelemetry,r=this.sketchViewModel,a=this.geometryIsExtent;e.emit(),this.isEditing=!0,this.cachedGraphics=t.clone(),this.cachedBufferGraphics=n.clone();var o=t.getItemAt(0);this.activeTool=o.geometry.type;var s="reshape",c=!0,l=!0;a&&(s="transform",c=!1,l=!1),r.update(t.getItemAt(0),{tool:s,enableRotation:c,toggleToolOnClick:l}),i.emit(p.d.dictionary.category.interaction.action.enable.label.draw.details.update)}},{key:"cancelEdits",value:function(){var e=this.arcgisHubMapPopoverClear,t=this.arcgisHubMapDrawGraphicsChange,n=this.cachedGraphics,i=this.cachedBufferGraphics,r=this.graphicsLayer.graphics,a=this.bufferGraphicsLayer.graphics,o=this.hubTelemetry;n&&i&&(this.graphicsLayer.graphics=n.clone(),this.cachedGraphics=null,this.bufferGraphicsLayer.graphics=i.clone(),this.cachedBufferGraphics=null),this.isEditing=!1,e.emit(),t.emit({graphics:r.clone(),bufferGraphics:a.clone(),canceled:!0}),o.emit(p.d.dictionary.category.interaction.action.disable.label.draw.details.update)}},{key:"saveEdits",value:function(){var e=this.activeTool,t=this.arcgisHubMapDrawGraphicsChange,n=this.arcgisHubMapPopoverClear,i=this.graphicsLayer.graphics,r=this.bufferGraphicsLayer.graphics,a=this.hubTelemetry;this.sketchViewModel.complete(),t.emit({graphics:i.clone(),bufferGraphics:r.clone(),save:!0}),n.emit(),this.isEditing=!1,a.emit(p.d.dictionary.category.interaction.action.draw.label.update.details[e]),this.open=!1}},{key:"reset",value:function(){var e=this.bufferGraphicsLayer,t=this.graphicsLayer,n=this.arcgisHubMapPopoverClear,i=this.bufferWidgetEl;t&&e&&(this.isEditing=!1,this.isFiltered=!1,this.cachedGraphics=null,this.cachedBufferGraphics=null,this.geometryIsExtent=!1,this.geometry=null,t.removeAll(),e.removeAll(),n.emit(),null===i||void 0===i||i.forceReset())}},{key:"processGeometry",value:function(e){var t=this.view,n=e;return e.clone||(n="extent"===e.type?Ee.Z.fromJSON(n):Ze.Z.fromJSON(n)),"extent"===e.type?(this.geometryIsExtent=!0,n=xe.Z.fromExtent(n)):this.geometryIsExtent=!1,n.spatialReference!==t.spatialReference&&(n=(0,y.iV)(n,t.spatialReference)),n}},{key:"setBufferPanelVisible",value:function(){var e=this.isEditing,t=this.isFiltered;this.bufferPanelVisible=e||t}},{key:"setPanelHeight",value:function(){var e=this.bufferWidgetEl,t=this.view,n=t.size,i=t.container;if(e){var r=(0,a.Z)(n,1)[0];this.viewWidth=r;var o=i.getBoundingClientRect(),s=o.top,c=o.bottom,l=e.getBoundingClientRect(),u=l.top,p=l.bottom;this.topOffset=u-s,this.bottomOffset=c-p}}},{key:"setViewPosition",value:function(){var e=this.el,t=e&&e.closest("arcgis-hub-map-widget-container");this.viewPosition=null===t||void 0===t?void 0:t.viewPosition}},{key:"setOptionsEl",value:function(e){this.optionsEl=e}},{key:"pointSymbol",get:function(){var e=this.color;return{type:"text",color:[].concat((0,r.Z)(e),[.9]),text:"\ue61d",font:{size:24,family:"CalciteWebCoreIcons"}}}},{key:"polylineSymbol",get:function(){var e=this.lineStyle,t=this.color;return{style:e,color:[].concat((0,r.Z)(t),[1]),width:2,type:"simple-line"}}},{key:"polygonSymbol",get:function(){var e=this.color;return{type:"simple-fill",style:"solid",color:[0,0,0,0],outline:{style:this.lineStyle,color:[].concat((0,r.Z)(e),[1]),width:2}}}},{key:"lineStyle",get:function(){return this.isFiltered?"solid":"short-dash"}},{key:"bufferPolygonSymbol",get:function(){var e=this.color;return{type:"simple-fill",style:"cross",color:[].concat((0,r.Z)(e),[.1]),outline:{style:"short-dash",color:[].concat((0,r.Z)(e),[1]),width:2}}}},{key:"positionClass",get:function(){var e=this.viewPosition;if(e)return"hub-widget-draw ".concat(e.split("-").join(" "))}},{key:"styles",get:function(){var e=this.viewWidth,t=this.bottomOffset,n=this.topOffset,i=this.bufferPanelVisible;return{"--view-width":"".concat(e,"px"),"--bottom-offset":"".concat(t,"px"),"--top-offset":"".concat(n,"px"),"--mobile-display":i?"flex":"none"}}},{key:"renderPrimaryOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"polygon",t=this.disablePrimaryOptions,n=this.intl.t("filter.".concat(e)),i=this.intl.t("delete");return t?this.renderEditOptions():(0,u.h)(u.F,null,(0,u.h)("calcite-action",{icon:"selection-filter",onClick:this.applyFilter,text:n,"text-enabled":!0}),(0,u.h)("calcite-action",{icon:"trash",onClick:this.deleteDrawing,text:i,"text-enabled":!0}))}},{key:"renderEditOptions",value:function(){var e=this.intl.t("update"),t=this.intl.t("delete");return(0,u.h)("calcite-action-pad",{"expand-disabled":!0,layout:"horizontal"},(0,u.h)("calcite-action",{icon:"pencil",onClick:this.startEditing,text:e}),(0,u.h)("calcite-action",{icon:"trash",onClick:this.clearFilter,text:t}))}},{key:"renderEditingOptions",value:function(){var e=this.intl.t("cancel"),t=this.intl.t("save");return(0,u.h)(u.F,null,(0,u.h)("calcite-action",{icon:"undo",onClick:this.cancelEdits,text:e,"text-enabled":!0}),(0,u.h)("calcite-action",{icon:"check",onClick:this.saveEdits,text:t,"text-enabled":!0}))}},{key:"renderDrawBuffer",value:function(){var e=this.buffer,t=this.positionClass,n=this.handleSetBufferWidgetRef,i=this.bufferPanelVisible;if(e)return(0,u.h)("arcgis-hub-map-widget-draw-buffer",{class:t,ref:n,visible:i})}},{key:"renderDrawToolWidgets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.tools,i=this.activeTool;return We.reduce((function(a,o){return n.includes(o)?[].concat((0,r.Z)(a),[(0,u.h)("arcgis-hub-map-widget-generic",{active:i===o,icon:Fe[o].icon,key:o,text:e.intl.t(o),textEnabled:t})]):a}),[])}},{key:"renderDrawingOptionsAction",value:function(){var e,t,n=this.open,i=this.isEditing,r=this.activeTool,a=this.intl,o=n||i;return e=i?"pencil":r?Fe[r].icon:"pencil-mark-plus",t=i?a.t("updating"):n?a.t("close"):a.t("open"),(0,u.h)("calcite-action",{active:o,icon:e,ref:this.setOptionsEl,text:t})}},{key:"renderDrawingOptionsPopoverContent",value:function(){var e=this.isEditing,t=this.open,n=this.activeTool,i=this.intl;return e?(0,u.h)("calcite-action",{onClick:this.saveEdits,text:i.t("finish"),"text-enabled":!0}):(0,u.h)(u.F,null,this.renderDrawToolWidgets(!0),n&&t&&(0,u.h)("arcgis-hub-map-widget-generic",{icon:"minus-circle",text:i.t("stop"),"text-enabled":!0}))}},{key:"renderCondensedDrawTools",value:function(){var e=this.open,t=this.intl,n=this.optionsEl;return(0,u.h)(u.F,null,this.renderDrawingOptionsAction(),this.renderDrawBuffer(),(0,u.h)("calcite-popover",{"auto-close":!0,"disable-pointer":!0,label:t.t("options"),offsetDistance:15,open:e,placement:"left-start",referenceElement:n},this.renderDrawingOptionsPopoverContent()))}},{key:"renderDrawTools",value:function(){return(0,u.h)(u.F,null,this.renderDrawBuffer(),this.renderDrawToolWidgets())}},{key:"render",value:function(){return(0,u.h)(u.H,{"data-element":"map-widget-draw",style:this.styles},this.condensed?this.renderCondensedDrawTools():this.renderDrawTools())}},{key:"el",get:function(){return(0,u.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{activeTool:["handleActiveToolChange"],geometry:["handleGraphicsChange"],isEditing:["handleIsEditingChange"],isFiltered:["handleIsFilteredChange"],view:["handleViewChange"],bufferDetails:["handleBufferDetailsChanged"]}}}]),e}();je([(0,g.C)({when:function(){return!this.disableEditOptions}})],Ne.prototype,"renderEditOptions",null),Ne.style=":host{display:block}.hub-widget-draw{min-width:none !important;max-width:none !important;padding:0px}arcgis-hub-map-widget-generic:nth-of-type(5){border-left-width:0px;border-right-width:0px;border-top-width:1px;border-bottom-width:0px;border-style:solid;border-color:var(--calcite-ui-border-1)}@media only screen and (min-width: 640px){.hub-widget-draw.top{position:absolute}.hub-widget-draw.top{width:25rem}.hub-widget-draw.top{padding:0px}.hub-widget-draw.right{right:100%}.hub-widget-draw.right{margin-right:1rem}.hub-widget-draw.left{left:100%}.hub-widget-draw.left{margin-left:1rem}.hub-widget-draw.bottom.left{margin-left:0.5rem}.hub-widget-draw.bottom.right{margin-right:0.5rem}}@media only screen and (max-width: 640px){.hub-widget-draw.top{position:absolute}.hub-widget-draw.top{z-index:50}.hub-widget-draw.top{padding:0px}.hub-widget-draw.top{top:calc(var(--top-offset) + var(--bottom-offset));width:calc(var(--view-width) + 1px);display:var(--mobile-display)}.hub-widget-draw.right{right:-1rem}.hub-widget-draw.left{left:-1rem}}";var Be=function(){function e(t){(0,c.Z)(this,e),(0,u.r)(this,t),this.hubTelemetry=(0,u.c)(this,"hubTelemetry",7),this.scale="m",this.handles=[],(0,h.b)(this,"zoomIn","zoomOut","updateCanZoomIn","updateCanZoomOut")}return(0,l.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.el,e.next=3,f.i.loadIntlForComponent(t);case 3:return this.intl=e.sent,e.next=6,this.connectViewModel();case 6:this.connectWatch(),(0,Oe.l)();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this.connectWatch()}},{key:"disconnectedCallback",value:function(){this.removeWatch()}},{key:"handleViewChange",value:function(e,t){var n=this;e&&e!==t&&(this.removeWatch(),this.connectViewModel().then((function(){n.connectWatch()})))}},{key:"connectWatch",value:function(){var e=this.view,t=this.handles,n=this.zoomViewModel;e&&n&&t.push((0,b.YP)(n,"canZoomIn",this.updateCanZoomIn),(0,b.YP)(n,"canZoomOut",this.updateCanZoomOut))}},{key:"removeWatch",value:function(){this.handles.forEach((function(e){e.remove()})),this.handles=[]}},{key:"connectViewModel",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,i,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,n=this.zoomViewModel,!t||n){e.next=8;break}return e.next=4,t.when();case 4:this.zoomViewModel=new Se.Z({view:t}),i=this.zoomViewModel,r=i.canZoomIn,a=i.canZoomOut,this.canZoomIn=r,this.canZoomOut=a;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCanZoomIn",value:function(e){this.canZoomIn=e}},{key:"updateCanZoomOut",value:function(e){this.canZoomOut=e}},{key:"zoomIn",value:function(){var e=this.zoomViewModel,t=this.canZoomIn,n=this.view;e&&t&&(e.zoomIn(),this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.zoom.label.in),{details:n.zoom})))}},{key:"zoomOut",value:function(){var e=this.zoomViewModel,t=this.canZoomOut,n=this.view;e&&t&&(this.zoomViewModel.zoomOut(),this.hubTelemetry.emit(Object.assign(Object.assign({},p.d.dictionary.category.interaction.action.zoom.label.out),{details:n.zoom})))}},{key:"render",value:function(){var e=this.zoomIn,t=this.zoomOut,n=this.canZoomIn,i=this.canZoomOut,r=this.scale,a=this.intl.t("zoomIn"),o=this.intl.t("zoomOut");return(0,u.h)(u.H,{"data-element":"map-widget-zoom"},(0,u.h)("arcgis-hub-map-widget-generic",{disabled:!n,icon:"plus",onClick:e,scale:r,text:a}),(0,u.h)("arcgis-hub-map-widget-generic",{disabled:!i,icon:"minus",onClick:t,scale:r,text:o}))}},{key:"el",get:function(){return(0,u.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{view:["handleViewChange"]}}}]),e}();Be.style="";var Ye=function(){function e(t){var n=this;(0,c.Z)(this,e),(0,u.r)(this,t),this.calciteListChange=(0,u.c)(this,"calciteListChange",6),this.disabled=!1,this.filterEnabled=!1,this.loading=!1,this.multiple=!1,this.selectionFollowsFocus=!1,this.selectedValues=new Map,this.dataForFilter=[],this.lastSelectedItem=null,this.mutationObserver=(0,Pe.c)("mutation",Te.m.bind(this)),this.setFilterEl=function(e){n.filterEl=e},this.deselectRemovedItems=Te.d.bind(this),this.deselectSiblingItems=Te.a.bind(this),this.selectSiblings=Te.s.bind(this),this.handleFilter=Te.h.bind(this),this.getItemData=Te.g.bind(this),this.keyDownHandler=Te.k.bind(this)}return(0,l.Z)(e,[{key:"connectedCallback",value:function(){Te.i.call(this),Te.b.call(this)}},{key:"disconnectedCallback",value:function(){Te.c.call(this)}},{key:"componentDidRender",value:function(){(0,Me.u)(this)}},{key:"calciteListItemRemoveHandler",value:function(e){Te.r.call(this,e)}},{key:"calciteListItemChangeHandler",value:function(e){Te.e.call(this,e)}},{key:"calciteInternalListItemPropsChangeHandler",value:function(e){e.stopPropagation(),this.setUpFilter()}},{key:"calciteInternalListItemValueChangeHandler",value:function(e){Te.f.call(this,e),e.stopPropagation()}},{key:"calciteListFocusOutHandler",value:function(e){Te.j.call(this,e)}},{key:"setUpItems",value:function(){Te.l.call(this,"calcite-pick-list-item")}},{key:"setUpFilter",value:function(){this.filterEnabled&&(this.dataForFilter=this.getItemData())}},{key:"getSelectedItems",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.selectedValues);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setFocus",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te.n.call(this,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIconType",value:function(){return this.multiple?Ge.I.square:Ge.I.circle}},{key:"render",value:function(){return(0,u.h)(Te.L,{onKeyDown:this.keyDownHandler,props:this})}},{key:"el",get:function(){return(0,u.g)(this)}}]),e}();Ye.style="@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;box-sizing:border-box;display:flex;flex-shrink:0;flex-grow:1;flex-direction:column;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}:host *{box-sizing:border-box}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([filter-enabled]) header{-webkit-margin-after:0.25rem;margin-block-end:0.25rem;display:flex;align-items:stretch;justify-content:flex-end;background-color:var(--calcite-ui-foreground-1);--tw-shadow:0 1px 0 var(--calcite-ui-border-3);--tw-shadow-colored:0 1px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([filter-enabled]) header.sticky-pos{position:-webkit-sticky;position:sticky;inset-block-start:0px;z-index:1}calcite-filter{-webkit-margin-after:0px;margin-block-end:0px}:host([loading][disabled]){min-block-size:2rem}";var qe=function(){function e(t){(0,c.Z)(this,e),(0,u.r)(this,t)}return(0,l.Z)(e,[{key:"connectedCallback",value:function(){(0,Re.c)(this)}},{key:"disconnectedCallback",value:function(){(0,Re.d)(this)}},{key:"render",value:function(){var e,t,n=this.el,r=this.groupTitle,a=this.headingLevel,o=null!==(0,De.b)(n,Te.S.parentItem),s=(e={},(0,i.Z)(e,Te.C.container,!0),(0,i.Z)(e,Te.C.indented,o),e),c=r,l=null===(t=n.closest("calcite-pick-list"))||void 0===t?void 0:t.headingLevel,p=l?(0,Ie.c)(l+1):null,d=a||p||Te.H;return(0,u.h)(u.F,null,c?(0,u.h)(Ie.H,{class:Te.C.heading,level:d},c):null,(0,u.h)("slot",{name:Te.S.parentItem}),(0,u.h)("section",{class:s},(0,u.h)("slot",null)))}},{key:"el",get:function(){return(0,u.g)(this)}}]),e}();qe.style="@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{-webkit-margin-after:0.25rem;margin-block-end:0.25rem;box-sizing:border-box;display:block;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-ui-text-2)}:host *{box-sizing:border-box}:host(:last-child){-webkit-margin-after:0px;margin-block-end:0px}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.heading{margin-block:0.5rem;margin-inline:1rem;font-size:var(--calcite-font-size--1);line-height:1.375;color:var(--calcite-ui-text-3)}.container--indented{-webkit-margin-start:1.5rem;margin-inline-start:1.5rem}"},23872:function(e,t,n){function i(e){return function(t,n,i){var r=i.value,a=e.when;return Object.assign(Object.assign({},i),{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=a.apply(this,t);if(i)return r.apply(this,t)}})}}n.d(t,{C:function(){return i}})},2001:function(e,t,n){function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];clearTimeout(t),t=setTimeout((function(){return e.apply(i,a)}),n)}}function r(e){return function(t,n,r){var a=r.value,o="".concat(n.toString(),"Debounced");return Object.assign(Object.assign({},r),{value:function(){this[o]||Object.defineProperty(this,o,{value:i(a,e.timeout)});for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this[o].apply(this,[this].concat(n))}})}}n.d(t,{D:function(){return r}})},57203:function(e,t,n){function i(){}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.disabled)return e.el.setAttribute("tabindex","-1"),e.el.setAttribute("aria-disabled","true"),e.el.contains(document.activeElement)&&document.activeElement.blur(),void(e.el.click=i);e.el.click=HTMLElement.prototype.click,"function"===typeof t?e.el.setAttribute("tabindex",t.call(e)?"0":"-1"):!0===t?e.el.setAttribute("tabindex","0"):!1===t&&e.el.removeAttribute("tabindex"),e.el.removeAttribute("aria-disabled")}n.d(t,{u:function(){return r}})},79861:function(e,t,n){n.d(t,{g:function(){return a}});var i={color:[93,173,221,.1],outline:{color:[255,255,255,1],width:1,type:"simple-line",style:"solid"},type:"simple-fill",style:"solid"},r={color:[93,173,221,.25],outline:{color:[155,155,155,1],width:4,type:"simple-line",style:"solid"},type:"simple-fill",style:"solid"},a=function(e){return e?r:i}},1118:function(e,t,n){n.d(t,{c:function(){return l}});var i=n(15671),r=n(43144),a=n(11752),o=n(61120),s=n(60136),c=n(92572);function l(e,t,n){var l=function(e){var t=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).observedEntry=[],r.callback=e,r}return(0,r.Z)(n,[{key:"observe",value:function(e,t){return this.observedEntry.push({target:e,options:t}),(0,a.Z)((0,o.Z)(n.prototype),"observe",this).call(this,e,t)}},{key:"unobserve",value:function(e){var t=this,i=this.observedEntry.filter((function(t){return t.target!==e}));this.observedEntry=[],this.callback((0,a.Z)((0,o.Z)(n.prototype),"takeRecords",this).call(this),this),this.disconnect(),i.forEach((function(e){return t.observe(e.target,e.options)}))}}]),n}(window.MutationObserver);return"intersection"===e?window.IntersectionObserver:"mutation"===e?t:window.ResizeObserver}(e);return new l(t,n)}},65905:function(e,t,n){n.d(t,{V:function(){return u},b:function(){return l}});var i=n(42265),r=n(76200),a=n(10064),o=n(32718),s=n(35995),c=o.Z.getLogger("esri.assets");function l(e,t){return(0,r.default)(u(e),t)}function u(e){if(!i.Z.assetsPath)throw c.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(i.Z.assetsPath,e)}},84397:function(e,t,n){n.d(t,{c:function(){return i},g:function(){return r}});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},41691:function(e,t,n){n.d(t,{p:function(){return h},r:function(){return f}});var i=n(15671),r=n(43144),a=n(60136),o=n(92572),s=n(27366),c=n(85015),l=n(100),u=n(49861),p=n(69912),d=n(61826),h=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new l.Z}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new d.t}}]),n}(e);return(0,s._)([(0,u.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,s._)([(0,u.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,s._)([(0,p.j)("esri.core.HandleOwner")],t),t},f=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(h(c.Z));f=(0,s._)([(0,p.j)("esri.core.HandleOwner")],f)},59026:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(15671),r=n(43144),a=n(18759),o=function(){function e(t,n){(0,i.Z)(this,e),this._storage=new a.WJ,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return(0,r.Z)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}()},18759:function(e,t,n){n.d(t,{WJ:function(){return d},Xq:function(){return p},an:function(){return u},lN:function(){return i}});var i,r=n(29439),a=n(37762),o=n(15671),s=n(43144),c=n(92026),l=n(27546),u=-3;!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(i||(i={}));var p=function(){function e(t,n,i){(0,o.Z)(this,e),this._namespace=t,this._storage=n,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}return(0,s.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,n,i)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,o.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}return(0,s.Z)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,n,r){var a=this._db.get(e);if(a&&(this._size-=a.size,this._db.delete(e),a.entry!==t&&this._notifyRemove(e,a.entry,i.ALL)),n>this._maxSize)this._notifyRemove(e,t,i.ALL);else if(void 0!==t)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var o=1+Math.max(r,u)-u;this._db.set(e,{entry:t,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,n){var r=this._db.get(e);if(r&&r.entry===t){for(this._size-=r.size;n>this._maxSize;){var a=this._notifyRemove(e,t,i.SOME);if(!((0,c.pC)(a)&&a>0))return void this._db.delete(e);n=a}r.size=n,this._size+=n,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},i=new Array;this._db.forEach((function(t,r){var a=t.lifetime;i[a]=(i[a]||0)+t.size,e._users.forAll((function(e){var i=e.namespace;if(r.startsWith(i)){var a=n[i]||0;n[i]=a+t.size}}))}));var r={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var i=n[t]||0;n[t]=i,r[t]=Math.round(100*e.hitRate)+"%"}else r[t]="0%"}));var a=Object.keys(n);a.sort((function(e,t){return n[t]-n[e]})),a.forEach((function(e){return t[e]=Math.round(n[e]/Math.pow(2,20))+"MB / "+r[e]}));for(var o=i.length-1;o>=0;--o){var s=i[o];s&&(t["Priority "+(o+u-1)]=Math.round(s/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(n,r){r.startsWith(e)&&(t._size-=n.size,t._db.delete(r),t._notifyRemove(r,n.entry,i.ALL))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,n){return e._notifyRemove(n,t.entry,i.ALL)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,n){var i;return this._removeFuncs.some((function(r){if(e.startsWith(r[0])){var a=r[1](t,n);return"number"==typeof a&&(i=a),!0}return!1})),i}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=(0,a.Z)(this._db);try{for(t.s();!(e=t.n()).done;){var n=(0,r.Z)(e.value,2),o=n[0],s=n[1];if(this._db.delete(o),s.lives<=1){this._size-=s.size;var l=this._notifyRemove(o,s.entry,i.SOME);(0,c.pC)(l)&&l>0&&(this._size+=l,s.lives=s.lifetime,s.size=l,this._db.set(o,s))}else--s.lives,this._db.set(o,s);if(this._size<=.9*this.maxSize)return}}catch(u){t.e(u)}finally{t.f()}}}}]),e}()},43e3:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(37762),r=n(15671),a=n(43144),o=n(92026),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e.values().next().value};(0,r.Z)(this,e),this._peeker=t,this._items=new Set}return(0,a.Z)(e,[{key:"length",get:function(){return this._items.size}},{key:"clear",value:function(){this._items.clear()}},{key:"last",value:function(){if(0!==this._items.size){var e,t,n=(0,i.Z)(this._items);try{for(n.s();!(t=n.n()).done;)e=t.value}catch(r){n.e(r)}finally{n.f()}return e}}},{key:"peek",value:function(){if(0!==this._items.size)return this._peeker(this._items)}},{key:"push",value:function(e){this.contains(e)||this._items.add(e)}},{key:"contains",value:function(e){return this._items.has(e)}},{key:"pop",value:function(){if(0!==this.length){var e=this.peek();return this._items.delete((0,o.j0)(e)),e}}},{key:"popLast",value:function(){if(0!==this.length){var e=this.last();return this._items.delete((0,o.j0)(e)),e}}},{key:"remove",value:function(e){this._items.delete(e)}},{key:"filter",value:function(e){var t=this;return this._items.forEach((function(n){e(n)||t._items.delete(n)})),this}}]),e}()},93963:function(e,t,n){n.d(t,{f:function(){return s}});var i=n(15671),r=n(43144),a=n(39052),o=n(56885),s=function(){function e(t){(0,i.Z)(this,e),this._observable=new o.s,this._value=t}return(0,r.Z)(e,[{key:"get",value:function(){return(0,a.it)(this._observable),this._value}},{key:"set",value:function(e){e!==this._value&&(this._value=e,this._observable.notify())}}]),e}()},41644:function(e,t,n){n.d(t,{Bg:function(){return i},sM:function(){return r}});n(93169);function i(e){}function r(e){return function(){return e}}},61826:function(e,t,n){n.d(t,{t:function(){return v}});var i=n(15671),r=n(43144),a=n(60136),o=n(92572),s=n(27366),c=n(85015),l=n(100),u=n(92026),p=n(94172),d=n(99346),h=n(49861),f=n(69912),v=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._handles=new l.Z,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this._handles.destroy()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,p.YP)}},{key:"addWhen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,n,p.gx)}},{key:"addOnCollectionChange",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.initial,a=void 0!==r&&r,o=i.final,s=void 0!==o&&o,c=++this._handleId;return this._handles.add([(0,p.on)(e,"after-changes",this._createSyncUpdatingCallback(),p.Z_),(0,p.on)(e,"change",t,{onListenerAdd:a?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:s?function(e){return t({added:[],removed:e.toArray()})}:void 0})],c),{remove:function(){return n._handles.remove(c)}}}},{key:"addPromise",value:function(e){var t=this;if((0,u.Wi)(e))return e;var n=++this._handleId;this._handles.add({remove:function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t._handles.has(y)||t._set("updating",!1))}},n),this._pendingPromises.add(e),this._set("updating",!0);var i=function(){return t._handles.remove(n)};return e.then(i,i),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,a=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,a);var o=r(e,t,i);return this._handles.add(o,a),{remove:function(){return n._handles.remove(a)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var n=this._createSyncUpdatingCallback(),i=(0,p.YP)(e,n,{sync:!0,equals:function(){return!1}});return this._handles.add(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e._handles.remove(y),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e._handles.add((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e._handles.remove(y))})),y)}}}]),n}(c.Z);(0,s._)([(0,h.Cb)({readOnly:!0})],v.prototype,"updating",void 0),v=(0,s._)([(0,f.j)("esri.core.support.WatchUpdatingTracking")],v);var y=-42},8537:function(e,t,n){n.d(t,{YP:function(){return a}});var i=n(44927),r=(n(98928),n(84652),n(32718));n(66978);(0,i.K)(r.Z.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});function a(e,t,n,i){return e.watch(t,n,i)}},42137:function(e,t,n){n.d(t,{Z:function(){return w}});var i,r=n(1413),a=n(15671),o=n(43144),s=n(11752),c=n(61120),l=n(60136),u=n(92572),p=n(27366),d=n(68860),h=n(49861),f=(n(25243),n(63780),n(69912)),v=n(83448),y=n(585),m=n(80885),g=n(15559),b=n(81753),_=n(89093),k=i=function(e){(0,l.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).center=null,e.geodesic=!1,e.numberOfPoints=60,e.radius=1e3,e.radiusUnit="meters",e}return(0,o.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t){var i;if(e&&e.center)i=e;else{if(e&&e.rings)return(0,s.Z)((0,c.Z)(n.prototype),"normalizeCtorArgs",this).call(this,e,t);i={center:e}}return(0,r.Z)((0,r.Z)((0,r.Z)({},(0,s.Z)((0,c.Z)(n.prototype),"normalizeCtorArgs",this).call(this)),i),t)}},{key:"initialize",value:function(){var e,t=this.center,n=this.numberOfPoints;if(this.hasZ=null!==(e=null===t||void 0===t?void 0:t.hasZ)&&void 0!==e&&e,0===this.rings.length&&t){var i,r=(0,d.En)(this.radius,this.radiusUnit,"meters"),a=t.spatialReference,o="geographic";if(a.isWebMercator?o="webMercator":(null!=(a.wkid&&_.Z[a.wkid])||a.wkt&&0===a.wkt.indexOf("PROJCS"))&&(o="projected"),this.geodesic){var s;switch(o){case"webMercator":s=(0,b.Sx)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":s=t}i=this._createGeodesicCircle(s,r,n),"webMercator"===o&&(i=(0,b.$)(i))}else{var c;"webMercator"===o||"projected"===o?c=r/this._convert2Meters(1,t.spatialReference):"geographic"===o&&(c=(0,d.ty)(r,"meters",(0,v.Iu)(t.spatialReference).radius)),i=this._createPlanarCircle(t,c,n)}this.spatialReference=i.spatialReference,this.addRing(i.rings[0])}}},{key:"clone",value:function(){var e=this.center,t=this.numberOfPoints,n=this.radius,r=this.radiusUnit,a=this.geodesic;return new i({center:null===e||void 0===e?void 0:e.clone(),numberOfPoints:t,radius:n,radiusUnit:r,geodesic:a})}},{key:"_createGeodesicCircle",value:function(e,t,n){for(var i=0,r=[];i<360;){var a=[0,0],o=[e.x,e.y];(0,g.TB)(a,o,i,t),this.hasZ&&a.push(e.z),r.push(a),i+=360/n}return r.push(r[0]),new m.Z(r)}},{key:"_createPlanarCircle",value:function(e,t,n){for(var i=[],r=2*Math.PI/n,a=0;a<n;++a){var o=r*a,s=[e.x+Math.cos(-o)*t,e.y+Math.sin(-o)*t];this.hasZ&&s.push(e.z),i.push(s)}return i.push(i[0]),new m.Z({spatialReference:e.spatialReference,rings:[i]})}},{key:"_convert2Meters",value:function(e,t){var n;if(t.wkid&&null!=_.Z[t.wkid])n=_.Z.values[_.Z[t.wkid]];else{var i=t.wkt,r=i.lastIndexOf(",")+1,a=i.lastIndexOf("]]");n=parseFloat(i.substring(r,a))}return e*n}}]),n}(m.Z);(0,p._)([(0,h.Cb)({type:y.Z})],k.prototype,"center",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"geodesic",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"numberOfPoints",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"radius",void 0),(0,p._)([(0,h.Cb)()],k.prototype,"radiusUnit",void 0);var w=k=i=(0,p._)([(0,f.j)("esri.geometry.Circle")],k)},58971:function(e,t,n){n.d(t,{G6:function(){return E},Ie:function(){return Z},J9:function(){return w},RF:function(){return g},U1:function(){return x},vY:function(){return l},ym:function(){return k}});var i=n(29439),r=n(92026),a=n(77981);var o=function(e,t,n){return[t,n]},s=function(e,t,n){return[t,n,e[2]]},c=function(e,t,n){return[t,n,e[2],e[3]]};function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,r.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function u(e,t){var n=e.scale,i=e.translate;return Math.round((t-i[0])/n[0])}function p(e,t){var n=e.scale,i=e.translate;return Math.round((i[1]-t)/n[1])}function d(e,t,n){for(var i,r,a,o,s=[],c=0;c<n.length;c++){var l=n[c];c>0?(a=u(e,l[0]),o=p(e,l[1]),a===i&&o===r||(s.push(t(l,a-i,o-r)),i=a,r=o)):(i=u(e,l[0]),r=p(e,l[1]),s.push(t(l,i,r)))}return s.length>0?s:null}function h(e,t){var n=e.scale,i=e.translate;return t*n[0]+i[0]}function f(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function v(e,t,n){var r=new Array(n.length);if(!n.length)return r;var a=(0,i.Z)(e.scale,2),o=a[0],s=a[1],c=h(e,n[0][0]),l=f(e,n[0][1]);r[0]=t(n[0],c,l);for(var u=1;u<n.length;u++){var p=n[u];c+=p[0]*o,l-=p[1]*s,r[u]=t(p,c,l)}return r}function y(e,t,n){for(var i=new Array(n.length),r=0;r<n.length;r++)i[r]=v(e,t,n[r]);return i}function m(e,t,n,i,r){var a;return t.points=null!==(a=function(e,t,n,i){return d(e,n?i?c:s:i?s:o,t)}(e,n.points,i,r))&&void 0!==a?a:[],t}function g(e,t,n,i,r){return t.x=u(e,n.x),t.y=p(e,n.y),t!==n&&(i&&(t.z=n.z),r&&(t.m=n.m)),t}function b(e,t,n,i,r){var a=function(e,t,n,i){for(var r=[],a=n?i?c:s:i?s:o,l=0;l<t.length;l++){var u=d(e,a,t[l]);u&&u.length>=3&&r.push(u)}return r.length?r:null}(e,n.rings,i,r);return a?(t.rings=a,t):null}function _(e,t,n,i,r){var a=function(e,t,n,i){for(var r=[],a=n?i?c:s:i?s:o,l=0;l<t.length;l++){var u=d(e,a,t[l]);u&&u.length>=2&&r.push(u)}return r.length?r:null}(e,n.paths,i,r);return a?(t.paths=a,t):null}function k(e,t){return e&&t?(0,a.wp)(t)?g(e,{},t,!1,!1):(0,a.l9)(t)?_(e,{},t,!1,!1):(0,a.oU)(t)?b(e,{},t,!1,!1):(0,a.aW)(t)?m(e,{},t,!1,!1):(0,a.YX)(t)?function(e,t,n,i,r){return t.xmin=u(e,n.xmin),t.ymin=p(e,n.ymin),t.xmax=u(e,n.xmax),t.ymax=p(e,n.ymax),t!==n&&(i&&(t.zmin=n.zmin,t.zmax=n.zmax),r&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function w(e,t,n,i,a){return(0,r.pC)(n)&&(t.points=function(e,t,n,i){return v(e,n?i?c:s:i?s:o,t)}(e,n.points,i,a)),t}function x(e,t,n,i,a){return(0,r.Wi)(n)||(t.x=h(e,n.x),t.y=f(e,n.y),t!==n&&(i&&(t.z=n.z),a&&(t.m=n.m))),t}function Z(e,t,n,i,a){return(0,r.pC)(n)&&(t.rings=function(e,t,n,i){return y(e,n?i?c:s:i?s:o,t)}(e,n.rings,i,a)),t}function E(e,t,n,i,a){return(0,r.pC)(n)&&(t.paths=function(e,t,n,i){return y(e,n?i?c:s:i?s:o,t)}(e,n.paths,i,a)),t}},93655:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(15671),r=n(43144),a=n(11752),o=n(61120),s=n(60136),c=n(92572),l=n(27366),u=n(49861),p=(n(25243),n(63780),n(69912)),d=n(68748),h=n(30651),f=n(6693),v=n(56811),y=n(78983),m=n(64575),g=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).elevationInfo=null,r.graphics=new y.J,r.screenSizePerspectiveEnabled=!0,r.type="graphics",r.internal=!1,r}return(0,r.Z)(n,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return(0,a.Z)((0,o.Z)(n.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),n}((0,f.h)((0,v.M)(h.Z)));(0,l._)([(0,u.Cb)({type:m.Z})],g.prototype,"elevationInfo",void 0),(0,l._)([(0,u.Cb)((0,d.z)(y.J,"graphics"))],g.prototype,"graphics",void 0),(0,l._)([(0,u.Cb)({type:["show","hide"]})],g.prototype,"listMode",void 0),(0,l._)([(0,u.Cb)()],g.prototype,"screenSizePerspectiveEnabled",void 0),(0,l._)([(0,u.Cb)({readOnly:!0})],g.prototype,"type",void 0),(0,l._)([(0,u.Cb)({constructOnly:!0})],g.prototype,"internal",void 0);var b=g=(0,l._)([(0,p.j)("esri.layers.GraphicsLayer")],g)},34311:function(e,t,n){function i(e,t,n){return{objectId:e,target:t,distance:n,type:"vertex"}}function r(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{objectId:e,target:t,distance:n,type:"edge",start:i,end:r,draped:a}}n.d(t,{p:function(){return r},u:function(){return i}})},70178:function(e,t,n){n.d(t,{f:function(){return l},k:function(){return s}});n(93169);var i=n(92026),r=n(92975);function a(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var i=e[n],r=t[n];if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(i[a]!==r[a])return!1}return!0}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;return!0}function s(e,t){return e===t||(0,i.pC)(e)&&(0,i.pC)(t)&&(0,r.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function c(e,t){if(e===t)return!0;if((0,i.Wi)(e)||(0,i.Wi)(t))return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return s(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.fS)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.fS)(e.spatialReference,t.spatialReference)&&o(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.fS)(e.spatialReference,t.spatialReference)&&o(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,r.fS)(e.spatialReference,t.spatialReference)&&a(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function l(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!c(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0,a=n;r<a.length;r++){var o=a[r];if(e[o]!==t[o])return!1}return!0}(e.attributes,t.attributes)}},65618:function(e,t,n){n.d(t,{FS:function(){return E},MS:function(){return O},PA:function(){return b},Pj:function(){return g},R3:function(){return x},S6:function(){return m},TF:function(){return C},Tx:function(){return k},Wh:function(){return y},Xw:function(){return w},dF:function(){return Z}});var i=n(37762),r=n(43144),a=n(15671),o=n(59896),s=(n(93169),n(92026)),c=n(18722),l=n(95439),u=n(78952),p=n(41414),d=n(65156),h=n(58971),f=n(27823),v=n(83040),y=(n(70178),(0,r.Z)((function e(t,n,i){(0,a.Z)(this,e),this.uid=t,this.geometry=n,this.attributes=i,this.visible=!0,this.objectId=null,this.centroid=null})));function m(e){return(0,s.pC)(e.geometry)}var g=(0,r.Z)((function e(){(0,a.Z)(this,e),this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}));function b(e){var t,n,i=f.M.fromJSON(e.geometryType),r=u.Z.fromJSON(e.spatialReference),a=e.transform,o=e.features.map((function(t){var n=function(e,t,n,i){return{uid:(0,l.D)(),objectId:i&&e.attributes?e.attributes[i]:null,attributes:e.attributes,geometry:_(e.geometry,t,n),visible:!0}}(t,i,r,e.objectIdFieldName),o=n.geometry;if((0,s.pC)(o)&&a)switch(o.type){case"point":n.geometry=(0,h.U1)(a,o,o,o.hasZ,o.hasM);break;case"multipoint":n.geometry=(0,h.J9)(a,o,o,!!o.hasZ,!!o.hasM);break;case"polygon":n.geometry=(0,h.Ie)(a,o,o,!!o.hasZ,!!o.hasM);break;case"polyline":n.geometry=(0,h.G6)(a,o,o,!!o.hasZ,!!o.hasM);break;case"extent":case"mesh":n.geometry=o}return n}));return{geometryType:i,features:o,spatialReference:r,fields:null!==(t=null===(n=e.fields)||void 0===n?void 0:n.map((function(e){return v.Z.fromJSON(e)})))&&void 0!==t?t:[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function _(e,t,n){if((0,s.Wi)(e))return null;switch(t){case"point":var i=e;return{x:i.x,y:i.y,z:i.z,m:i.m,hasZ:null!=i.z,hasM:null!=i.m,type:"point",spatialReference:n};case"polyline":var r=e;return{paths:r.paths,hasZ:!!r.hasZ,hasM:!!r.hasM,type:"polyline",spatialReference:n};case"polygon":var a=e;return{rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polygon",spatialReference:n};case"multipoint":var o=e;return{points:o.points,hasZ:!!o.hasZ,hasM:!!o.hasM,type:"multipoint",spatialReference:n}}}function k(e,t,n,i){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}function w(e){var t=32;return t+=(0,o.f2)(e.attributes),t+=3,t+=8+function(e){if((0,s.Wi)(e))return 0;var t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":var n,r=0,a=2+(e.hasZ?1:0)+(e.hasM?1:0),o="polyline"===e.type?e.paths:e.rings,l=(0,i.Z)(o);try{for(l.s();!(n=l.n()).done;)r+=n.value.length}catch(d){l.e(d)}finally{l.f()}t+=8*r*a+64,t+=128*r,t+=34,t+=32*(o.length+1);break;case"multipoint":var u=2+(e.hasZ?1:0)+(e.hasM?1:0),p=e.points.length;t+=8*p*u+64,t+=128*p,t+=34,t+=32;break;case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=(0,c.Xw)(e.vertexAttributes.position),t+=(0,c.Xw)(e.vertexAttributes.normal),t+=(0,c.Xw)(e.vertexAttributes.uv),t+=(0,c.Xw)(e.vertexAttributes.tangent)}return t}(e.geometry),t}function x(e){if((0,s.Wi)(e))return 0;switch(e.type){case"point":return 1;case"polyline":var t,n=0,r=(0,i.Z)(e.paths);try{for(r.s();!(t=r.n()).done;){n+=t.value.length}}catch(u){r.e(u)}finally{r.f()}return n;case"polygon":var a,o=0,c=(0,i.Z)(e.rings);try{for(c.s();!(a=c.n()).done;){o+=a.value.length}}catch(u){c.e(u)}finally{c.f()}return o;case"multipoint":return e.points.length;case"extent":return 2;case"mesh":var l=e.vertexAttributes&&e.vertexAttributes.position;return l?l.length/3:0;default:return}}function Z(e){if((0,s.Wi)(e))return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":var t,n=(0,i.Z)(e.paths);try{for(n.s();!(t=n.n()).done;){if(t.value.length>0)return!0}}catch(o){n.e(o)}finally{n.f()}return!1;case"polygon":var r,a=(0,i.Z)(e.rings);try{for(a.s();!(r=a.n()).done;){if(r.value.length>0)return!0}}catch(o){a.e(o)}finally{a.f()}return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function E(e,t){switch((0,p.cS)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(var n=0;n<e.paths.length;n++)(0,p.Wi)(t,e.paths[n],!!e.hasZ);break;case"polygon":for(var i=0;i<e.rings.length;i++)(0,p.Wi)(t,e.rings[i],!!e.hasZ);break;case"multipoint":(0,p.Wi)(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function C(e,t){switch((0,d.cS)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(var n=0;n<e.paths.length;n++)(0,d.Wi)(t,e.paths[n]);break;case"polygon":for(var i=0;i<e.rings.length;i++)(0,d.Wi)(t,e.rings[i]);break;case"multipoint":(0,d.Wi)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function O(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}},6693:function(e,t,n){n.d(t,{h:function(){return d}});var i=n(43144),r=n(15671),a=n(60136),o=n(92572),s=n(27366),c=n(49861),l=(n(25243),n(63780),n(69912)),u=n(60676),p={read:{reader:u.ij},write:{allowNull:!0,writer:u.cW}},d=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return(0,i.Z)(n)}(e);return(0,s._)([(0,c.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,s._)([(0,c.Cb)({json:{read:!1,write:!1,origins:{"web-map":p,"portal-item":p}}})],t.prototype,"effect",void 0),t=(0,s._)([(0,l.j)("esri.layers.mixins.BlendLayer")],t)}},56811:function(e,t,n){n.d(t,{M:function(){return u}});var i=n(15671),r=n(43144),a=n(60136),o=n(92572),s=n(27366),c=n(49861),l=(n(25243),n(63780),n(69912)),u=function(e){var t=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return(0,r.Z)(n,[{key:"effectiveScaleRange",get:function(){var e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);var n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}}]),n}(e);return(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,s._)([(0,c.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,s._)([(0,l.j)("esri.layers.mixins.ScaleRangeLayer")],t)}},9114:function(e,t,n){n.d(t,{u:function(){return d}});var i,r=n(15671),a=n(43144),o=n(60136),s=n(92572),c=n(27366),l=n(46784),u=n(49861),p=(n(25243),n(63780),n(69912)),d=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).name=null,i.code=null,i}return(0,a.Z)(n,[{key:"clone",value:function(){return new i({name:this.name,code:this.code})}}]),n}(l.wq);(0,c._)([(0,u.Cb)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,c._)([(0,u.Cb)({type:[String,Number],json:{write:!0}})],d.prototype,"code",void 0),d=i=(0,c._)([(0,p.j)("esri.layers.support.CodedValue")],d)},52175:function(e,t,n){n.d(t,{Z:function(){return y}});var i,r=n(15671),a=n(43144),o=n(60136),s=n(92572),c=n(27366),l=n(84652),u=n(49861),p=(n(25243),n(27135)),d=n(69912),h=n(9114),f=n(64538),v=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).codedValues=null,i.type="coded-value",i}return(0,a.Z)(n,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var n=String(e);this.codedValues.some((function(e){return String(e.code)===n&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new i({codedValues:(0,l.d9)(this.codedValues),name:this.name})}}]),n}(f.Z);(0,c._)([(0,u.Cb)({type:[h.u],json:{write:!0}})],v.prototype,"codedValues",void 0),(0,c._)([(0,p.J)({codedValue:"coded-value"})],v.prototype,"type",void 0);var y=v=i=(0,c._)([(0,d.j)("esri.layers.support.CodedValueDomain")],v)},64538:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(43144),r=n(15671),a=n(60136),o=n(92572),s=n(27366),c=n(43404),l=n(46784),u=n(49861),p=(n(25243),n(63780),n(27135)),d=n(69912),h=new c.X({inherited:"inherited",codedValue:"coded-value",range:"range"}),f=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).name=null,i.type=null,i}return(0,i.Z)(n)}(l.wq);(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,s._)([(0,p.J)(h)],f.prototype,"type",void 0);var v=f=(0,s._)([(0,d.j)("esri.layers.support.Domain")],f)},83040:function(e,t,n){n.d(t,{Z:function(){return _}});var i,r=n(15671),a=n(43144),o=n(60136),s=n(92572),c=n(27366),l=n(43404),u=n(46784),p=n(49861),d=n(25243),h=(n(63780),n(27135)),f=n(38511),v=n(69912),y=n(67755),m=n(85249),g=new l.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),b=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).alias=null,i.defaultValue=void 0,i.description=null,i.domain=null,i.editable=!0,i.length=-1,i.name=null,i.nullable=!0,i.type=null,i.valueType=null,i.visible=!0,i}return(0,a.Z)(n,[{key:"readDescription",value:function(e,t){var n,i,r=t.description,a=null;try{a=r?JSON.parse(r):null}catch(o){}return null!==(n=null===(i=a)||void 0===i?void 0:i.value)&&void 0!==n?n:null}},{key:"readValueType",value:function(e,t){var n=t.description,i=null;try{i=n?JSON.parse(n):null}catch(r){}return i?g.fromJSON(i.fieldValueType):null}},{key:"clone",value:function(){return new i({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),n}(u.wq);(0,c._)([(0,p.Cb)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),(0,c._)([(0,p.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),(0,c._)([(0,p.Cb)()],b.prototype,"description",void 0),(0,c._)([(0,f.r)("description")],b.prototype,"readDescription",null),(0,c._)([(0,p.Cb)({types:y.V5,json:{read:{reader:y.im},write:!0}})],b.prototype,"domain",void 0),(0,c._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),(0,c._)([(0,p.Cb)({type:d.z8,json:{write:!0}})],b.prototype,"length",void 0),(0,c._)([(0,p.Cb)({type:String,json:{write:!0}})],b.prototype,"name",void 0),(0,c._)([(0,p.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),(0,c._)([(0,h.J)(m.v)],b.prototype,"type",void 0),(0,c._)([(0,p.Cb)()],b.prototype,"valueType",void 0),(0,c._)([(0,f.r)("valueType",["description"])],b.prototype,"readValueType",null),(0,c._)([(0,p.Cb)({type:Boolean,json:{read:!1}})],b.prototype,"visible",void 0);var _=b=i=(0,c._)([(0,v.j)("esri.layers.support.Field")],b)},56754:function(e,t,n){n.d(t,{Z:function(){return h}});var i,r=n(15671),a=n(43144),o=n(60136),s=n(92572),c=n(27366),l=(n(32718),n(25243),n(63780),n(10064),n(93169),n(27135)),u=n(69912),p=n(64538),d=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).type="inherited",i}return(0,a.Z)(n,[{key:"clone",value:function(){return new i}}]),n}(p.Z);(0,c._)([(0,l.J)({inherited:"inherited"})],d.prototype,"type",void 0);var h=d=i=(0,c._)([(0,u.j)("esri.layers.support.InheritedDomain")],d)},30539:function(e,t,n){n.d(t,{Z:function(){return f}});var i,r=n(15671),a=n(43144),o=n(60136),s=n(92572),c=n(27366),l=n(49861),u=(n(25243),n(63780),n(27135)),p=n(69912),d=n(64538),h=i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).maxValue=null,i.minValue=null,i.type="range",i}return(0,a.Z)(n,[{key:"clone",value:function(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),n}(d.Z);(0,c._)([(0,l.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,n){t[n]=[this.minValue||0,e]}}}})],h.prototype,"maxValue",void 0),(0,c._)([(0,l.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,n){t[n]=[e,this.maxValue||0]}}}})],h.prototype,"minValue",void 0),(0,c._)([(0,u.J)({range:"range"})],h.prototype,"type",void 0);var f=h=i=(0,c._)([(0,p.j)("esri.layers.support.RangeDomain")],h)},67755:function(e,t,n){n.d(t,{V5:function(){return s},im:function(){return c}});n(93169);var i=n(52175),r=n(64538),a=n(56754),o=n(30539),s={key:"type",base:r.Z,typeMap:{range:o.Z,"coded-value":i.Z,inherited:a.Z}};function c(e){if(!e||!e.type)return null;switch(e.type){case"range":return o.Z.fromJSON(e);case"codedValue":return i.Z.fromJSON(e);case"inherited":return a.Z.fromJSON(e)}return null}},49229:function(e,t,n){n.d(t,{a:function(){return a}});var i=n(68860),r=n(22186),a={inches:(0,i.En)(1,"meters","inches"),feet:(0,i.En)(1,"meters","feet"),"us-feet":(0,i.En)(1,"meters","us-feet"),yards:(0,i.En)(1,"meters","yards"),miles:(0,i.En)(1,"meters","miles"),"nautical-miles":(0,i.En)(1,"meters","nautical-miles"),millimeters:(0,i.En)(1,"meters","millimeters"),centimeters:(0,i.En)(1,"meters","centimeters"),decimeters:(0,i.En)(1,"meters","decimeters"),meters:(0,i.En)(1,"meters","meters"),kilometers:(0,i.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,i.ty)(1,"meters",r.sv.radius)}},74509:function(e,t,n){n.d(t,{Jn:function(){return l},Lt:function(){return d},Ou:function(){return f},RL:function(){return p},VW:function(){return c},W_:function(){return _},Zz:function(){return o},jG:function(){return k},mF:function(){return s},tR:function(){return w},tq:function(){return g},vQ:function(){return v},vu:function(){return u},zx:function(){return y}});var i=n(92026),r=n(88152);function a(e){return e?k:w}function o(e,t){return(0,i.Wi)(t)||!t.mode?a(e).mode:t.mode}function s(e,t){return(0,i.pC)(t)?t:a(e)}function c(e,t){return o(!!(0,i.pC)(e)&&e.hasZ,t)}function l(e,t){return s(!!(0,i.pC)(e)&&!!e.hasZ,t)}function u(e){var t=h(e);return c(e.geometry,t)}function p(e){var t=h(e),n=c(e.geometry,t);return{mode:n,offset:(0,i.pC)(t)&&"on-the-ground"!==n?(0,i.Pt)(t.offset,0)*(0,r.Z7)((0,i.Pt)(t.unit,"meters")):0}}function d(e){if("on-the-ground"===u(e))return!1;var t=h(e),n=(0,i.pC)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||"0"===n)}function h(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function f(e,t,n){if(!(0,i.Wi)(n)&&n.mode){var r=e.hasZ?e.z:0,a=(0,i.pC)(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return r-a;case"on-the-ground":return 0;case"relative-to-ground":return r-((0,i.Pt)(t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground"),0)+a);case"relative-to-scene":return r-((0,i.Pt)(t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene"),0)+a)}}}function v(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return m(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,i)}function y(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return m(e,t[0],t[1],t.length>2?t[2]:0,n,i,r)}function m(e,t,n,r,a,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!(0,i.Wi)(o)){var c=(0,i.pC)(s)?s.mode:"absolute-height";if("on-the-ground"===c)return 0;var l=g(t,n,r,a,e,o),u=l.absoluteZ;return b(u,t,n,r,a,e,s,c)}}function g(e,t,n,r,a,o){var s=(0,i.pC)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":var c=(0,i.Pt)(a.elevationProvider.getElevation(e,t,0,r,"ground"),0);return{absoluteZ:c,elevation:c};case"relative-to-ground":var l=(0,i.Pt)(a.elevationProvider.getElevation(e,t,n,r,"ground"),0);return{absoluteZ:n+l+s,elevation:l};case"relative-to-scene":var u=(0,i.Pt)(a.elevationProvider.getElevation(e,t,n,r,"scene"),0);return{absoluteZ:n+u+s,elevation:u}}}function b(e,t,n,r,a,o,s,c){var l=(0,i.pC)(s)&&(0,i.pC)(s.offset)?s.offset:0;switch(c){case"absolute-height":return e-l;case"relative-to-ground":return e-((0,i.Pt)(o.elevationProvider.getElevation(t,n,r,a,"ground"),0)+l);case"relative-to-scene":return e-((0,i.Pt)(o.elevationProvider.getElevation(t,n,r,a,"scene"),0)+l)}}function _(e,t){if((0,i.Wi)(t))return!1;var n=t.mode;return(0,i.pC)(n)&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}var k={mode:"absolute-height",offset:0},w={mode:"on-the-ground",offset:null}},64575:function(e,t,n){n.d(t,{Z:function(){return S}});var i,r=n(15671),a=n(43144),o=n(11752),s=n(61120),c=n(60136),l=n(92572),u=n(27366),p=n(43404),d=n(46784),h=n(92026),f=n(49861),v=(n(25243),n(63780),n(38511)),y=n(69912),m=n(31201),g=n(74165),b=n(15861),_=n(80031),k=i=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return(0,a.Z)(n,[{key:"collectRequiredFields",value:function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,n){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.io)(t,n,this.expression));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new i({expression:this.expression,title:this.title})}},{key:"equals",value:function(e){return this.expression===e.expression&&this.title===e.title}}]),n}(d.wq);(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],k.prototype,"expression",void 0),(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],k.prototype,"title",void 0);var w,x=k=i=(0,u._)([(0,y.j)("esri.layers.support.FeatureExpressionInfo")],k),Z=n(88152),E=(0,p.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),C=new p.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),O=w=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).offset=null,i}return(0,a.Z)(n,[{key:"readFeatureExpressionInfo",value:function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}},{key:"writeFeatureExpressionInfo",value:function(e,t,n,i){t[n]=e.write({},i),"0"===e.expression&&(t.featureExpression={value:0})}},{key:"mode",get:function(){var e=this.offset,t=this.featureExpressionInfo;return this._isOverridden("mode")?this._get("mode"):(0,h.pC)(e)||t?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)}},{key:"unit",set:function(e){this._set("unit",e)}},{key:"write",value:function(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?(0,o.Z)((0,s.Z)(n.prototype),"write",this).call(this,e,t):null}},{key:"clone",value:function(){return new w({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}},{key:"equals",value:function(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,h._W)(this.featureExpressionInfo,e.featureExpressionInfo)}}]),n}(d.wq);(0,u._)([(0,f.Cb)({type:x,json:{write:!0}})],O.prototype,"featureExpressionInfo",void 0),(0,u._)([(0,v.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],O.prototype,"readFeatureExpressionInfo",null),(0,u._)([(0,m.c)("featureExpressionInfo",{featureExpressionInfo:{type:x},"featureExpression.value":{type:[0]}})],O.prototype,"writeFeatureExpressionInfo",null),(0,u._)([(0,f.Cb)({type:E.apiValues,nonNullable:!0,json:{type:E.jsonValues,read:E.read,write:{writer:E.write,isRequired:!0}}})],O.prototype,"mode",null),(0,u._)([(0,f.Cb)({type:Number,json:{write:!0}})],O.prototype,"offset",void 0),(0,u._)([(0,f.Cb)({type:Z.f9,json:{type:String,read:C.read,write:C.write}})],O.prototype,"unit",null);var S=O=w=(0,u._)([(0,y.j)("esri.layers.support.ElevationInfo")],O)},88152:function(e,t,n){n.d(t,{Z7:function(){return a},f9:function(){return o},lt:function(){return r}});var i=n(49229);function r(e){return!!e&&null!=i.a[e]}function a(e){return 1/(i.a[e]||1)}var o=function(){var e=Object.keys(i.a);return e.sort(),e}()},77498:function(e,t,n){n.d(t,{Z:function(){return r},e:function(){return i}});var i;n(93169);function r(e){switch(e){case i.SUPPORTED:break;case i.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case i.GEOMETRY_MISSING:return"no geometry";case i.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case i.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case i.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}!function(e){e[e.SUPPORTED=0]="SUPPORTED",e[e.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",e[e.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",e[e.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",e[e.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",e[e.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"}(i||(i={}))},57889:function(e,t,n){n.d(t,{P:function(){return o}});n(93169);var i=n(92026),r=n(74509),a=n(77498);function o(e){var t;if("graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type))return a.e.GRAPHICS_LAYER_MISSING;if((0,i.Wi)(e.geometry))return a.e.GEOMETRY_MISSING;switch(e.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return a.e.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==(0,r.vu)(e)&&(0,r.Lt)(e)?a.e.ELEVATION_MODE_UNSUPPORTED:a.e.SUPPORTED}},46684:function(e,t,n){n.d(t,{P:function(){return s},b:function(){return c}});var i=n(92026),r=n(42137),a=n(74509),o=n(77498);function s(e){return l(e).result}function c(e){return l(e).geometry}function l(e){var t;return"graphics"!==(null===(t=e.layer)||void 0===t?void 0:t.type)?{result:o.e.GRAPHICS_LAYER_MISSING,geometry:null}:(0,i.Wi)(e.geometry)?{result:o.e.GEOMETRY_MISSING,geometry:null}:"on-the-ground"!==(0,a.vu)(e)&&(0,a.Lt)(e)?{result:o.e.ELEVATION_MODE_UNSUPPORTED,geometry:null}:"point"!==e.geometry.type&&"polyline"!==e.geometry.type&&("polygon"!==e.geometry.type||e.geometry instanceof r.Z)?{result:o.e.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:o.e.SUPPORTED,geometry:e.geometry}}},83089:function(e,t,n){n.d(t,{j:function(){return a},p:function(){return r}});var i=n(92026);function r(e,t,n){if(t&&e&&e.map){var i=e.map,r=i.layers.find((function(e){return e===t}));r||i.add(t,n),r&&null!=n&&i.layers.reorder(r,n)}}function a(e,t){return e.allLayerViews.find((function(e){var n=e.layer;return n===t||"sublayers"in n&&(0,i.pC)(n.sublayers)&&n.sublayers.includes(t)}))}},52349:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(43144),r=n(15671),a=n(60136),o=n(92572),s=n(27366),c=n(85015),l=n(49861),u=(n(25243),n(63780),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).enabled=!1,i}return(0,i.Z)(n)}(c.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],p.prototype,"enabled",void 0);var d=p=(0,s._)([(0,u.j)("esri.views.interactive.sketch.SketchLabelOptions")],p)},77560:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(15671),r=n(43144),a=n(60136),o=n(92572),s=n(27366),c=n(85015),l=n(49861),u=(n(25243),n(63780),n(69912)),p=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).mode="absolute-height",r}return(0,r.Z)(n,[{key:"toJSON",value:function(){return{mode:this.mode}}}]),n}(c.Z);(0,s._)([(0,l.Cb)({type:String,nonNullable:!0})],p.prototype,"mode",void 0),p=(0,s._)([(0,u.j)("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],p);var d=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.apply(this,arguments)).distance=!0,e.elevation=!0,e.size=!0,e.scale=!0,e.rotation=!0,e.orientation=!0,e.totalLength=!0,e.area=!0,e.radius=!0,e.helpMessage=!1,e}return(0,r.Z)(n,[{key:"toJSON",value:function(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}}]),n}(c.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"distance",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"size",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"scale",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"rotation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"orientation",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"totalLength",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"area",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"radius",void 0),(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],d.prototype,"helpMessage",void 0),d=(0,s._)([(0,u.j)("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],d);var h=function(e){(0,a.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).enabled=!1,r.elevation=new p,r.visibleElements=new d,r.visualVariables=null,r}return(0,r.Z)(n,[{key:"toJSON",value:function(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}}]),n}(c.Z);(0,s._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],h.prototype,"enabled",void 0),(0,s._)([(0,l.Cb)({type:p,nonNullable:!0})],h.prototype,"elevation",void 0),(0,s._)([(0,l.Cb)({type:d,nonNullable:!0})],h.prototype,"visibleElements",void 0),(0,s._)([(0,l.Cb)()],h.prototype,"visualVariables",void 0);var f=h=(0,s._)([(0,u.j)("esri.widgets.Sketch.SketchTooltipOptions")],h)},74923:function(e,t,n){n.d(t,{ZV:function(){return o},qm:function(){return u}});var i=n(74165),r=n(15861),a=n(92026);function o(e,t){return s.apply(this,arguments)}function s(){return s=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,o,s,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("2d"!==t.type){e.next=2;break}return e.abrupt("return",t.hitTest(n));case 2:return e.next=4,t.hitTest(n);case 4:if(0!==(o=e.sent).results.length){e.next=7;break}return e.abrupt("return",o);case 7:return s=o.results[0],l=(null!==(r=(0,a.Wg)(s.distance))&&void 0!==r?r:0)*(1+c),u=o.results.findIndex((function(e){var t;return(null!==(t=e.distance)&&void 0!==t?t:0)>l})),e.abrupt("return",(-1!==u&&(o.results=o.results.slice(0,u)),o));case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var c=.05;function l(e){return(0,a.pC)(e)&&"graphic"===e.type}function u(e){var t;return null!==(t=e.find(l))&&void 0!==t?t:null}}}]);
//# sourceMappingURL=34931.416b6b3a.chunk.js.map