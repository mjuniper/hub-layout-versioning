"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[45263,20519],{30651:function(e,r,t){t.d(r,{Z:function(){return G}});var a=t(74165),n=t(15861),i=t(15671),u=t(43144),o=t(60136),l=t(92572),s=t(27366),c=(t(59486),t(76200)),y=t(10064),p=t(91505),d=t(79056),f=t(54472),v=t(32718),L=t(66978),S=t(35995),b=t(49861),m=(t(25243),t(63780),t(69912)),h=t(42265);function g(){return g=(0,n.Z)((0,a.Z)().mark((function e(r){var n,i,u,o,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="portalItem"in r?r:{portalItem:r},e.next=3,Promise.all([t.e(79803),t.e(98995),t.e(46727),t.e(43139),t.e(6356)]).then(t.bind(t,43139));case 3:return i=e.sent,e.prev=4,e.next=7,i.fromItem(n);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),u=n&&n.portalItem,o=u&&u.id||"unset",l=u&&u.portal&&u.portal.url||h.Z.portalUrl,v.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),g.apply(this,arguments)}var I=t(53866),w=t(78952),T=0,Z=function(e){(0,o.Z)(s,e);var r=(0,l.Z)(s);function s(){var e;return(0,i.Z)(this,s),(e=r.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new I.Z(-180,-90,180,90,w.Z.WGS84),e.id=Date.now().toString(16)+"-layer-"+T++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=w.Z.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,u.Z)(s,[{key:"initialize",value:function(){var e=this;this.when().catch((function(r){var t,a;(0,L.D_)(r)||v.Z.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(t=e.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(a=e.id)&&void 0!==a?a:"no id","')"),{error:r})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,r=this.parent;"layers"in r&&r.layers.includes(e)?r.layers.remove(e):"tables"in r&&r.tables.includes(e)?r.tables.remove(e):"baseLayers"in r&&r.baseLayers.includes(e)?r.baseLayers.remove(e):"baseLayers"in r&&r.referenceLayers.includes(e)&&r.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){return(0,S.mN)(this.url)}},{key:"fetchAttributionData",value:function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.attributionDataUrl,!this.hasAttributionData||!r){e.next=5;break}return e.next=4,(0,c.default)(r,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new y.Z("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,n.Z)((0,a.Z)().mark((function e(r){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof r?{url:r}:r,e.next=3,Promise.all([t.e(46727),t.e(94650)]).then(t.bind(t,94650));case 3:return e.abrupt("return",e.sent.fromUrl(n));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return g.apply(this,arguments)}(e)}}]),s}(p.Z.EventedMixin((0,d.IG)(f.Z)));(0,s._)([(0,b.Cb)({type:String})],Z.prototype,"attributionDataUrl",void 0),(0,s._)([(0,b.Cb)({type:I.Z})],Z.prototype,"fullExtent",void 0),(0,s._)([(0,b.Cb)({readOnly:!0})],Z.prototype,"hasAttributionData",null),(0,s._)([(0,b.Cb)({type:String,clonable:!1})],Z.prototype,"id",void 0),(0,s._)([(0,b.Cb)({type:Boolean,nonNullable:!0})],Z.prototype,"legendEnabled",void 0),(0,s._)([(0,b.Cb)({type:["show","hide","hide-children"]})],Z.prototype,"listMode",void 0),(0,s._)([(0,b.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],Z.prototype,"opacity",void 0),(0,s._)([(0,b.Cb)({clonable:!1})],Z.prototype,"parent",void 0),(0,s._)([(0,b.Cb)({readOnly:!0})],Z.prototype,"parsedUrl",null),(0,s._)([(0,b.Cb)({type:Boolean})],Z.prototype,"popupEnabled",void 0),(0,s._)([(0,b.Cb)({type:Boolean})],Z.prototype,"attributionVisible",void 0),(0,s._)([(0,b.Cb)({type:w.Z})],Z.prototype,"spatialReference",void 0),(0,s._)([(0,b.Cb)({type:String})],Z.prototype,"title",void 0),(0,s._)([(0,b.Cb)({readOnly:!0,json:{read:!1}})],Z.prototype,"type",void 0),(0,s._)([(0,b.Cb)()],Z.prototype,"url",void 0),(0,s._)([(0,b.Cb)({type:Boolean,nonNullable:!0})],Z.prototype,"visible",void 0);var G=Z=(0,s._)([(0,m.j)("esri.layers.Layer")],Z)},25899:function(e,r,t){t.d(r,{B5:function(){return p},DR:function(){return f},G:function(){return g},M8:function(){return S},Nm:function(){return b},Qc:function(){return d},XG:function(){return m},a7:function(){return L},h3:function(){return I},ld:function(){return v},wH:function(){return h}});var a=t(29439),n=t(92026),i=t(35995),u=t(53283),o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(o),s=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),y=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function p(e){return!!s.test(e)}function d(e){if((0,n.Wi)(e))return null;var r=(0,i.mN)(e),t=r.path.match(s)||r.path.match(c);if(!t)return null;var u=(0,a.Z)(t,5),l=u[1],y=u[2],p=u[3],d=u[4],f=y.indexOf("/");return{title:v(-1!==f?y.slice(f+1):y),serverType:o[p.toLowerCase()],sublayer:null!=d&&""!==d?parseInt(d,10):null,url:{path:l}}}function f(e){var r=(0,i.mN)(e).path.match(y);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function v(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function L(e,r){var t=[];if(e){var a=d(e);(0,n.pC)(a)&&a.title&&t.push(a.title)}if(r){var i=v(r);t.push(i)}if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function S(e){if(!e)return!1;var r=(e=e.toLowerCase()).includes(".arcgis.com/"),t=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return r&&t}function b(e,r){return e?(0,i.Qj)((0,i.Hu)(e,r)):e}function m(e){var r=e.url;if(!r)return{url:r};r=(0,i.Hu)(r,e.logger);var t,a=(0,i.mN)(r),u=d(a.path);if((0,n.pC)(u))null!=u.sublayer&&null==e.layer.layerId&&(t=u.sublayer),r=u.url.path;else if(e.nonStandardUrlAllowed){var o=f(a.path);(0,n.pC)(o)&&(r=o.serviceUrl,t=o.sublayerId)}return{url:(0,i.Qj)(r),layerId:t}}function h(e,r,t,a,n){(0,u.w)(r,a,"url",n),a.url&&null!=e.layerId&&(a.url=(0,i.v_)(a.url,t,e.layerId.toString()))}function g(e){if(!e)return!1;var r=e.toLowerCase(),t=r.includes("/services/"),a=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),i=r.includes("/wmsserver");return t&&(a||n||i)}function I(e){var r;if(!e)return!1;var t=null===(r=new i.R9((0,i.hF)(e)).authority)||void 0===r?void 0:r.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},20519:function(e,r,t){t.r(r),t.d(r,{populateOperationalLayers:function(){return S}});var a=t(1413),n=t(74165),i=t(37762),u=t(15861),o=t(80987),l=(t(93169),t(66978)),s=t(19610),c=t(98995);function y(e){return f(e,"notes")}function p(e){return f(e,"markup")}function d(e){return f(e,"route")}function f(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var v=t(43139),L=t(21371);function S(e,r,t){return b.apply(this,arguments)}function b(){return b=(0,u.Z)((0,n.Z)().mark((function e(r,t,a){var u,o,s,c,y,p,d,f,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:u=[],o=(0,i.Z)(t);try{for(o.s();!(s=o.n()).done;)c=s.value,y=Z(c,a),"GroupLayer"===c.layerType?u.push(W(y,c,a)):u.push(y)}catch(n){o.e(n)}finally{o.f()}return e.next=7,(0,l.as)(u);case 7:p=e.sent,d=(0,i.Z)(p);try{for(d.s();!(f=d.n()).done;)(v=f.value).value&&r.add(v.value)}catch(n){d.e(n)}finally{d.f()}case 10:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var m={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},h={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},g={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},I={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},w={ArcGISFeatureLayer:"FeatureLayer"},T={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function Z(e,r){return G.apply(this,arguments)}function G(){return(G=(0,u.Z)((0,n.Z)().mark((function e(r,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M,e.next=3,x(r,t);case 3:return e.t1=e.sent,e.t2=r,e.t3=t,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,r,t){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)((0,n.Z)().mark((function e(r,t,a){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=new r).read(t,a.context),e.t0="group"===i.type&&k(t),!e.t0){e.next=6;break}return e.next=6,F(i,t,a.context);case 6:return e.next=8,(0,L.y)(i,a.context);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r){return C.apply(this,arguments)}function C(){return C=(0,u.Z)((0,n.Z)().mark((function e(r,t){var a,i,u,o,l,f,L,S,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.context,u=O(i),!(o=r.layerType||r.type)&&t&&t.defaultLayerType&&(o=t.defaultLayerType),l=u[o],f=l?s.T[l]:s.T.UnknownLayer,!_(r)){e.next=20;break}if(L=null===i||void 0===i?void 0:i.portal,!r.itemId){e.next=18;break}return S=new c.default({id:r.itemId,portal:L}),e.next=11,S.load();case 11:return e.next=13,(0,v.selectLayerClassPath)(S);case 13:if(e.t0=e.sent.className,e.t0){e.next=16;break}e.t0="UnknownLayer";case 16:b=e.t0,f=s.T[b];case 18:e.next=21;break;case 20:"ArcGISFeatureLayer"===o?y(r)||p(r)?f=s.T.MapNotesLayer:d(r)?f=s.T.RouteLayer:k(r)&&(f=s.T.GroupLayer):r.wmtsInfo&&r.wmtsInfo.url&&r.wmtsInfo.layerIdentifier?f=s.T.WMTSLayer:"WFS"===o&&"2.0.0"!==(null===(a=r.wfsInfo)||void 0===a?void 0:a.version)&&(f=s.T.UnsupportedLayer);case 21:return e.abrupt("return",f());case 22:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function k(e){var r,t,a;return"ArcGISFeatureLayer"===e.layerType&&!_(e)&&(null!==(r=null===(t=e.featureCollection)||void 0===t||null===(a=t.layers)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>1}function _(e){return"Feature Collection"===e.type}function O(e){var r;if("web-scene"===e.origin)switch(e.layerContainerType){case"basemap":r=g;break;case"ground":r=h;break;default:r=m}else switch(e.layerContainerType){case"basemap":r=T;break;case"tables":r=w;break;default:r=I}return r}function W(e,r,t){return E.apply(this,arguments)}function E(){return E=(0,u.Z)((0,n.Z)().mark((function e(r,t,a){var i,u,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new o.Z,u=S(i,Array.isArray(t.layers)?t.layers:[],a),e.next=4,r;case 4:return l=e.sent,e.next=7,u;case 7:if("group"!==l.type){e.next=9;break}return e.abrupt("return",(l.layers.addMany(i),l));case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function F(e,r,t){return D.apply(this,arguments)}function D(){return D=(0,u.Z)((0,n.Z)().mark((function e(r,t,i){var u,o,l,c,y,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.T.FeatureLayer,e.next=3,o();case 3:l=e.sent,c=t.featureCollection,y=null===c||void 0===c?void 0:c.showLegend,p=null===c||void 0===c||null===(u=c.layers)||void 0===u?void 0:u.map((function(e,n){var u,o,s=new l;s.read(e,i);var c=(0,a.Z)((0,a.Z)({},i),{},{ignoreDefaults:!0});return s.read({id:"".concat(r.id,"-sublayer-").concat(n),visibility:null===(u=null===(o=t.visibleLayers)||void 0===o?void 0:o.includes(n))||void 0===u||u},c),null!=y&&s.read({showLegend:y},c),s})),r.layers.addMany(null!==p&&void 0!==p?p:[]);case 8:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}},73117:function(e,r,t){t.d(r,{$o:function(){return f},Kz:function(){return L},Ss:function(){return S},_$:function(){return p},ck:function(){return d},qj:function(){return y}});var a=t(37762),n=t(74165),i=t(15861),u=t(79803),o=t(78952),l=t(81753);function s(e){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(r){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.spatialReference).isWGS84){e.next=3;break}return e.abrupt("return",r.clone());case 3:if(!t.isWebMercator){e.next=5;break}return e.abrupt("return",(0,l.Sx)(r));case 5:return a=o.Z.WGS84,e.next=8,(0,u.iQ)(t,a);case 8:return e.abrupt("return",(0,u.iV)(r,a));case 9:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function y(e,r){if(!p(e,r)){var t=e.typeKeywords;t?t.push(r):e.typeKeywords=[r]}}function p(e,r){var t;return!(null===(t=e.typeKeywords)||void 0===t||!t.includes(r))}function d(e,r){var t=e.typeKeywords;if(t){var a=t.indexOf(r);a>-1&&t.splice(a,1)}}function f(e){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)((0,n.Z)().mark((function e(r){var t,i,u,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=r.clone().normalize()).length>1){u=(0,a.Z)(t);try{for(u.s();!(o=u.n()).done;)l=o.value,i?l.width>i.width&&(i=l):i=l}catch(n){u.e(n)}finally{u.f()}}else i=t[0];return e.abrupt("return",s(i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function S(e){var r,t=e.portal,a=e.isOrgItem,n=e.itemControl,i=null===(r=t.user)||void 0===r?void 0:r.privileges,u=!i||i.includes("features:user:edit"),o=!!a&&!(null===i||void 0===i||!i.includes("features:user:fullEdit")),l="update"===n||"admin"===n;return l?o=u=!0:o&&(u=!0),{features:{edit:u,fullEdit:o},content:{updateItem:l}}}},21371:function(e,r,t){t.d(r,{y:function(){return l}});var a=t(74165),n=t(15861),i=t(14921),u=t(66978),o=t(51370);function l(e,r,t){return s.apply(this,arguments)}function s(){return s=(0,n.Z)((0,a.Z)().mark((function e(r,t,n){var l,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l=r&&r.getAtOrigin&&r.getAtOrigin("renderer",t.origin))||"unique-value"!==l.type||!l.styleOrigin){e.next=6;break}return e.next=4,(0,i.q6)(l.populateFromStyle());case 4:s=e.sent,(0,u.k_)(n),!1===s.ok&&(c=s.error,t&&t.messages&&t.messages.push(new o.Z("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(c.message),{error:c,context:t})),r.clear("renderer",null===t||void 0===t?void 0:t.origin));case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}}}]);
//# sourceMappingURL=45263.6efe0e96.chunk.js.map