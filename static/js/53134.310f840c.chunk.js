/*! For license information please see 53134.310f840c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[53134],{80046:function(t,n,r){r.d(n,{a:function(){return o}});var e=r(77843);function o(t,n,r){var o=(0,e._)((0,e._)({params:{}},r),t);return o.params=n.reduce((function(n,r){return(t[r]||"boolean"===typeof t[r])&&(n[r]=t[r]),n}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(t,n){return o[n]&&(t[n]=o[n]),t}),{})}},78106:function(t,n,r){r.r(n),r.d(n,{arcgis_hub_item_resource_viewer:function(){return m}});var e=r(74165),o=r(15861),a=r(15671),i=r(43144),u=r(72585),c=r(41016),s=r(85015),f=r(69207),l=r(62254),h=(r(9882),r(77843),r(41817),r(80046),["B","kB","MB","GB","TB","PB","EB","ZB","YB"]);c.a.setLogLevel(c.L.info);var p=["jpg","jpeg","gif","png"],m=function(){function t(n){(0,a.Z)(this,t),(0,u.r)(this,n),this.portal="https://www.arcgis.com",this.layout="list"}return(0,i.Z)(t,[{key:"onitemIdChanged",value:function(t){c.a.error("".concat(t," changed")),this.fetchResources(this.itemId)}},{key:"onPortalChange",value:function(){var t=(0,o.Z)((0,e.Z)().mark((function t(){var n;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.A.create({portalUrl:this.portal});case 2:n=t.sent,this.context=n.context,console.log("this.context: ".concat(this.context)),console.log("this.portal: ".concat(this.portal));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getImageUrl",value:function(t){var n=this.itemId,r=this.context.sharingApiUrl;return"".concat(r,"/content/items/").concat(n,"/resources/").concat(t)}},{key:"parseCreatedDate",value:function(t){return this.dateTimeFormatter=new Intl.DateTimeFormat("en-us",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),this.dateTimeFormatter.format(new Date(t))}},{key:"fetchResources",value:function(){var t=(0,o.Z)((0,e.Z)().mark((function t(n){var r,o,a;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.context.sharingApiUrl,t.next=4,(0,f.f)(n,{portal:r});case 4:o=t.sent,this.resources=o.resources,t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),a=(0,l.g)(t.t0,"message"),c.a.error(a),this.resources=[];case 13:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(n){return t.apply(this,arguments)}}()},{key:"componentWillLoad",value:function(){var t=(0,o.Z)((0,e.Z)().mark((function t(){var n,r;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.itemId){t.next=2;break}return t.abrupt("return");case 2:if(this.context){t.next=9;break}return t.next=5,s.A.create({portalUrl:this.portal});case 5:n=t.sent,this.context=n.context,console.log("this.context.portalUrl: ".concat(this.context.portalUrl)),console.log("this.portal: ".concat(this.portal));case 9:return r=this.itemId,t.abrupt("return",this.fetchResources(r));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renderThumbnail",value:function(t,n){var r;return"grid"===t&&(r=(0,u.h)("span",{slot:"thumbnail"},(0,u.h)("img",{alt:"",src:this.getImageUrl(n)}))),r}},{key:"render",value:function(){var t,n=this;this.resources&&(t=this.resources.filter((function(t){return p.includes(t.resource.split(".").pop())})).map((function(t){return(0,u.h)("calcite-card",{selectable:n.selectable},n.renderThumbnail(n.layout,t.resource),(0,u.h)("span",{slot:"title"},t.resource),(0,u.h)("div",{slot:"footer-leading"},(0,u.h)("div",null,"Created: ",n.parseCreatedDate(t.created)),(0,u.h)("div",null,"size: ",function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=0===t?h.indexOf(r.unit||"kB"):r.unit?h.indexOf(r.unit):Math.min(Math.floor(Math.log10(t)/3),h.length-1);var e=Number.isInteger(r.round)?r.round:2,o=Math.pow(10,e);return t/=Math.pow(1e3,n),(t=Math.round(t*o)/o).toLocaleString(r.locale)+" "+h[n]}(t.size))))})));return(0,u.h)(u.H,null,t)}},{key:"element",get:function(){return(0,u.g)(this)}}],[{key:"watchers",get:function(){return{itemId:["onitemIdChanged","fetchResources"],portal:["onPortalChange"]}}}]),t}();m.style=":host([layout='grid']){display:grid;gap:0.5rem;grid-template-columns:repeat(auto-fill, minmax(max(400px, (100% - (4 - 1) * 0.5rem) / 4), 1fr))}:host([layout='list']) calcite-card{margin-bottom:0.5rem}span[slot=\"thumbnail\"] img{width:100%}"},30678:function(t,n,r){function e(t){return"string"!==typeof t||"/"===(t=t.trim())[t.length-1]&&(t=t.slice(0,-1)),t}r.d(n,{c:function(){return e}})},69207:function(t,n,r){r.d(n,{a:function(){return v},b:function(){return f},c:function(){return m},d:function(){return c},e:function(){return w},f:function(){return d},g:function(){return h},h:function(){return g},i:function(){return s},j:function(){return y},s:function(){return u}});var e=r(63613),o=r(98825),a=r(77843),i=r(80046);function u(t){var n=JSON.parse(JSON.stringify(t));return n.data&&("undefined"!==typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?n.file=t.data:n.text=t.data,delete n.data),n}function c(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function s(t){return Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[1])}function f(t){return t.join(",")}var l=/[\x00-\x1F\x7F-\x9F\xA0]/g;function h(t,n){var r=p(t,n),o=(0,e._)({httpMethod:"GET"},n);return(0,a.r)(r,o)}var p=function(t,n){return("string"===typeof n?n:(0,o.g)(n))+"/content/items/"+t};function m(t,n){var r=p(t,n)+"/data",o=(0,e._)({httpMethod:"GET",params:{}},n);return o.file&&(o.params.f=null),(0,a.r)(r,o).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function d(t,n){var r=p(t,n)+"/resources",o=(0,e._)({},n);return o.params=(0,e._)({num:1e3},o.params),(0,a.r)(r,o)}function g(t,n){var r=n.readAs||"blob";return x(t,"/resources/"+n.fileName,r,n)}function v(t,n){var r=p(t,n)+"/groups";return(0,a.r)(r,n)}function y(t){return c(t).then((function(n){var r=(0,o.g)(t)+"/content/users/"+n+"/items/"+t.id+"/status",u=(0,i.a)(t,["jobId","jobType"],{params:(0,e._)({},t.params)});return(0,a.r)(r,u)}))}function w(t,n){return function(t,n){var r=n||{},o=r.fileName,a=void 0===o?"iteminfo.xml":o,i=r.readAs;return x(t,"/info/"+a,void 0===i?"text":i,(0,e._)({httpMethod:"GET"},n))}(t,(0,e._)((0,e._)({},n),{fileName:"metadata/metadata.xml"}))}function x(t,n,r,o){var i=""+p(t,o)+n,u=(0,e._)({params:{}},o),c=u.rawResponse;return u.rawResponse=!0,u.params.f=null,(0,a.r)(i,u).then((function(t){return c?t:"json"!==r?t[r]():t.text().then((function(t){return JSON.parse(t.replace(l,""))}))}))}},41817:function(t,n,r){r.d(n,{a:function(){return u},g:function(){return i}});var e=r(63613),o=r(98825),a=r(77843);function i(t){return u(null,t)}function u(t,n){var r=t||"self",i=(0,o.g)(n)+"/portals/"+r,u=(0,e._)({httpMethod:"GET"},n);return(0,a.r)(i,u)}},98825:function(t,n,r){r.d(n,{g:function(){return o}});var e=r(30678);function o(t){return void 0===t&&(t={}),t.portal?(0,e.c)(t.portal):t.authentication?t.authentication.portal:"https://www.arcgis.com/sharing/rest"}},62254:function(t,n,r){function e(t,n){return n.split(".").reduce((function(t,n){return t?t[n]:void 0}),t)}r.d(n,{g:function(){return e}})},20399:function(t,n,r){r.d(n,{g:function(){return o}});var e=r(62254);function o(t,n,r){var o=(0,e.g)(t,n);return void 0!==o?o:r}},9882:function(t,n,r){r.d(n,{a:function(){return i},g:function(){return u}});var e=r(63613),o=r(98825),a=r(77843);function i(t){var n,r={httpMethod:"GET"};if("string"===typeof t)n="https://www.arcgis.com/sharing/rest/community/users/"+t;else{var i=t.username||t.authentication.username;n=(0,o.g)(t)+"/community/users/"+encodeURIComponent(i),r=(0,e._)((0,e._)({},t),r)}return(0,a.r)(n,r)}function u(t){var n=t;return t.match(/(qaext|\.mapsqa)\.arcgis.com/)?n="https://qaext.arcgis.com":t.match(/(devext|\.mapsdevext)\.arcgis.com/)?n="https://devext.arcgis.com":t.match(/(www|\.maps)\.arcgis.com/)&&(n="https://www.arcgis.com"),n}},63613:function(t,n,r){r.d(n,{_:function(){return e},a:function(){return o}});var e=function(){return e=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},e.apply(this,arguments)};function o(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),o=0;for(n=0;n<r;n++)for(var a=arguments[n],i=0,u=a.length;i<u;i++,o++)e[o]=a[i];return e}},25434:function(t,n,r){r.d(n,{a:function(){return u},b:function(){return f},c:function(){return o},d:function(){return s},e:function(){return p},f:function(){return m},g:function(){return a},i:function(){return h},m:function(){return c},u:function(){return l},w:function(){return i}});var e=r(62254);function o(t){var n={};if(Array.isArray(t))n=t.map(o);else if("object"===typeof t){for(var r in t)if(t.hasOwnProperty(r)){var e=t[r];null!=e&&"object"===typeof e?e instanceof Date?n[r]=new Date(e.getTime()):"undefined"!==typeof Blob&&e instanceof Blob?n[r]=new Blob([e],{type:e.type}):n[r]=o(e):n[r]=e}}else n=t;return n}function a(t,n,r){return t?t.reduce((function(t,o){return(0,e.g)(o,n)===r&&(t=o),t}),null):null}function i(t,n){return t.filter((function(t){return t!==n}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(t).concat(Math.random().toString(36).substr(2,8))}function c(t,n,r){return null!==n&&void 0!==n&&((r=o(r))[t]=n),r}function s(t,n){return null!==t&&void 0!==t&&(n=o(n)).push(t),n}function f(t){return(t=(t=t.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(t,n,r){return r?r.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(t,n,r){return t.toLowerCase()}))}function l(t,n,r){return r.indexOf(t)===n}var h=function(t){return null==t},p=function(t){var n=Array.from(t);return n[0]=n[0].toUpperCase(),n.join("")};function m(t){return t.reduce((function(t,n){return t.concat(n)}),[])}}}]);
//# sourceMappingURL=53134.310f840c.chunk.js.map