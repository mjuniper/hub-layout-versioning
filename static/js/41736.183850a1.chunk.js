"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[41736,92463,2170],{32877:function(e,t,r){r.r(t),r.d(t,{arcgis_hub_discussions_map_integrator:function(){return O}});var i,n=r(37762),a=r(29439),s=r(15671),o=r(43144),u=r(74165),c=r(15861),l=r(93433),h=r(5692),d=r(54825),p=r(81724),f=r(2170),y=r(2001),v=r(23872),g=r(13129),m=r(4541),w=r(93655),b=r(8537),x=r(81753),G=r(53866),k=r(52639),I=r(66978),Z=r(87718);r(39318),r(67450),r(89732),r(1319),r(47268),r(42377),r(98942),r(60415),r(76880),r(58669),r(29398),r(35137),r(16063),r(45059),r(73576),r(90494),r(59514),r(54805),r(7597),r(95101),r(19545);!function(e){e.ACTIVE="active",e.HOVER="hover",e.DEFAULT="default"}(i||(i={}));var R=[115,96,167],C={point:{color:R},polyline:{color:R,width:2},polygon:{color:R,width:2},callout:{backgroundColor:[255,255,255],textColor:[0,0,0],hoverColor:[169,169,169],activeColor:[39,129,153],width:2,isOffset:!1}},_={callout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.callout,r=arguments.length>2?arguments[2]:void 0,n=t.backgroundColor,a=t.textColor,s=t.hoverColor,o=t.activeColor,u=t.width,c=t.isOffset,h=t.is3D,d=r+1,p=[255,255,255];return e===i.HOVER?p=s:e===i.ACTIVE&&(p=o),{type:"cim",data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,size:30,frame:{xmin:-4,ymin:-4,xmax:4,ymax:4},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:c?4.5:4,y:c?h?9:11:4},symbol:{type:"CIMTextSymbol",fontFamilyName:"Arial",fontStyleName:"Bold",height:3.25,horizontalAlignment:"Center",symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:[].concat((0,l.Z)(a),[255])}]},verticalAlignment:"Center"},textString:d>99?"99+":"".concat(d)}],scaleSymbolsProportionally:!0},{type:"CIMVectorMarker",enable:!0,size:30,frame:{xmin:c?-5:-4,ymin:c?h?-9:-11:-4,xmax:c?3:4,ymax:c?h?-1:-3:4},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[0,0],[4,0],[4.35,.02],[4.69,.06],[5.04,.14],[5.37,.24],[5.69,.37],[6,.54],[6.29,.72],[6.57,.94],[6.83,1.17],[7.06,1.43],[7.28,1.71],[7.46,2],[7.63,2.31],[7.76,2.63],[7.86,2.96],[7.94,3.31],[7.98,3.65],[8,4],[7.98,4.35],[7.94,4.69],[7.86,5.04],[7.76,5.37],[7.63,5.69],[7.46,6],[7.28,6.29],[7.06,6.57],[6.83,6.83],[6.57,7.06],[6.29,7.28],[6,7.46],[5.69,7.63],[5.37,7.76],[5.04,7.86],[4.69,7.94],[4.35,7.98],[4,8],[3.65,7.98],[3.31,7.94],[2.96,7.86],[2.63,7.76],[2.31,7.63],[2,7.46],[1.71,7.28],[1.43,7.06],[1.17,6.83],[.94,6.57],[.72,6.29],[.54,6],[.37,5.69],[.24,5.37],[.14,5.04],[.06,4.69],[.02,4.35],[0,4],[0,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:u,color:[].concat((0,l.Z)(p),[255])},{type:"CIMSolidFill",enable:!0,color:[].concat((0,l.Z)(n),[255])}]}}]}]}}}},point:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.point,t=e.color;return{type:"text",color:[].concat((0,l.Z)(t),[.9]),text:"\ue61d",font:{size:24,family:"CalciteWebCoreIcons"}}},polyline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.polyline,t=e.color,r=e.width;return{type:"simple-line",color:[].concat((0,l.Z)(t),[1]),width:r,style:"solid"}},polygon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.polygon,t=e.color,r=e.width;return{type:"simple-fill",color:[].concat((0,l.Z)(t),[.15]),outline:{color:[].concat((0,l.Z)(t),[1]),width:r}}}},D={type:"Polygon",coordinates:[[[180,-90],[180,90],[-180,90],[-180,-90],[180,-90]]]},S=function(e){return new Promise((function(t){return setTimeout(t,e)}))},L=function(e,t,r,i,n){var a=Math.ceil(e/t);return a>i?(console.warn("Discussions requests exceeds desired threshold, throttling to ".concat(n,"ms per batch.")),n):r/a},F=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t,r){var i,n,a,s,o,h,d,f,y=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y.length>2&&void 0!==y[2]?y[2]:10,n=!(y.length>3&&void 0!==y[3])||y[3],a=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var s,o,c,h,d,f,y,v,g,m,w,b,x;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.discussion,o=void 0===s?null:s,c=t.geometry,h=void 0===c?null:c,d=t.start,f=void 0===d?1:d,y=Object.assign(Object.assign(Object.assign({discussion:o},h&&{geometry:h}),{parents:[],sortBy:p.P.UPDATED_AT,sortOrder:p.S.DESC,start:f,num:i}),r),v=(0,p.b)(y),1!==f){e.next=26;break}return e.next=6,v;case 6:g=e.sent,m=g.total,w=f+i,b=[v],x=n?L(m,i,2500,10,250):0;case 11:if(!(w<=m)){e.next=25;break}return e.next=14,S(x);case 14:return e.t0=b.push,e.t1=b,e.t2=l.Z,e.next=19,a({discussion:o,geometry:h,start:w});case 19:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4),w+=i,e.next=11;break;case 25:return e.abrupt("return",b);case 26:return e.abrupt("return",[v]);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=3,e.t0=Promise,e.t1=[],e.t2=l.Z,e.next=9,a({discussion:"".concat(t,"%?id=%")});case 9:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=l.Z,e.next=14,a({discussion:"".concat(t,"%"),geometry:JSON.stringify(D)});case 14:return e.t6=e.sent,e.t7=(0,e.t5)(e.t6),e.t8=e.t1.concat.call(e.t1,e.t4,e.t7),e.next=19,e.t0.all.call(e.t0,e.t8);case 19:return s=e.sent,o=function(e){var t=e.postDetails,r=e.replyDetails,i=e.channelDetails,n=r?r.post:t.post,a=r?t.postId:null,s=i.channelId;return Object.assign(Object.assign({},n),{channelId:s,parentId:a})},h=[],d=s.map((function(e){return e.items.map((function(e){return o(e)}))})).flat().filter((function(e){return!h.includes(e.id)&&(h.push(e.id),!0)})),e.abrupt("return",(0,p.p)(d));case 26:e.prev=26,e.t9=e.catch(3),f=e.t9.message,console.error("Could not fetch on-map discussions:",f);case 30:case"end":return e.stop()}}),e,null,[[3,26]])})));return function(t,r){return e.apply(this,arguments)}}(),A=function(e,t,r,i){var n,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},O=function(){function e(t){(0,s.Z)(this,e),(0,h.r)(this,t),this.arcgisHubMapPopoverOpen=(0,h.c)(this,"arcgisHubMapPopoverOpen",7),this.arcgisHubMapPopoverClear=(0,h.c)(this,"arcgisHubMapPopoverClear",7),this.hubTelemetry=(0,h.c)(this,"hubTelemetry",7),this.initialized=!1,this.cachedFeatures=[],this.unsavedExistingGeometry=[],this.cachedRelatedFeatureGeometry={},this.layerIds=[],this.persistAttribute="__persist__",this.theme={},this.preview=!0,(0,d.b)(this,"makeGraphic","makeCalloutGraphic","getRelatedFeature","setCalloutSymbolOnPointerMove","handleMapClickDiscussions","handleViewSizeChange","handleMapDrawSelect","addRelatedFeature","removeRelatedFeature","renderAddLocation","renderRemoveLocation","calculateOffsets")}return(0,o.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initialize(),e.next=3,g.i.loadIntlForComponent(this.element);case 3:this.intl=e.sent,(0,Z.l)();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnectedCallback",value:function(){this.teardown()}},{key:"eventTargetIsDiscussionsRef",value:function(e){return e.target===this.discussionsRef||e.target===this.onMapDiscussionsRef||e.target===this.onMapDiscussionsPreviewRef}},{key:"emitHubTelemetry",value:function(e){this.hubTelemetry.emit(Object.assign(Object.assign({},e),{postId:this.sketchPostId,channelId:this.currentDiscussionsRef.channelId}))}},{key:"attachView",value:function(e,t){var r=this.initialized;e&&e!==t?(r&&this.teardown(),this.initialize()):!e&&r&&this.teardown()}},{key:"attachdiscussionsRef",value:function(e){var t=this.initialized;e&&!t&&this.initialize()}},{key:"handleDrawRefUpdate",value:function(){this.saveInitialDrawOptions()}},{key:"calculateOffsets",value:function(){var e=this.view,t=this.preview,r=this.graphicGeometry,i=this.isOffset,n=this.previewHeight,a=this.activeMapDiscussion;if(e&&a&&r){var s=e.container.getBoundingClientRect(),o=s.top,u=s.left,c=s.right,l=e.toScreen(r),h=i?l.x+5:l.x,d=i?l.y-34:l.y;this.leftOffset=t?h+u:c,this.topOffset=t?d+o-n:o}}},{key:"handlePreviewDidLoad",value:function(e){var t=e.detail;this.previewHeight=0,this.previewHeight=t}},{key:"handlePreviewExpanded",value:function(){this.preview=!1}},{key:"handleGeometryGoTo",value:function(e){var t=e.detail,r=[].concat((0,l.Z)(this.geometryGraphicsLayer.graphics.toArray()),(0,l.Z)(this.calloutGraphicsLayer.graphics.toArray())),i=[];if(t){var n=t.postDetails.postId,a=t.replyDetails?t.replyDetails.postId:t.postDetails.postId;i=r.filter((function(e){var t=e.attributes,r=t.id,i=t.parentId;return r===a||n&&i===n}))}else{var s=this.activeMapDiscussion.locationId;i=r.filter((function(e){return e.attributes.relatedFeatureId===s}))}i.length&&this.goTo(i)}},{key:"handleGeometryFeature",value:function(e){var t=e.detail,r=t.post,i=t.create;this.unsavedExistingGeometry=[],this.cachedFeatures=this.cachedFeatures.filter((function(e){return e.properties.id!==r.id})),(0,p.d)(r)&&(this.cachedFeatures=[].concat((0,l.Z)(this.cachedFeatures),(0,l.Z)((0,p.d)(r))),i&&this.cachedFeatures.map((function(e){return e.properties.id===r.parentId&&("replyCount"in e.properties||(e.properties.replyCount=0),e.properties.replyCount+=1),e})),this.refreshFeatures(this.cachedFeatures),this.clearHoverActiveGraphics(!0))}},{key:"handleGeometryFeatureDeleted",value:function(e){var t=e.detail,r=t.id,i=t.parentId;this.cachedFeatures=this.cachedFeatures.filter((function(e){return e.properties.id!==r})).map((function(e){return e.properties.id===i&&(e.properties.replyCount-=1),e})),this.refreshFeatures(this.cachedFeatures),this.clearHoverActiveGraphics(!0)}},{key:"handleGeometryFeatureSelect",value:function(e){var t=e.detail.properties,r=t.id,n=t.relatedFeatureId,a=t.index;if(t.unsaved){var s=this.unsavedGeometryGraphicsLayer.graphics.getItemAt(a);n&&(s=this.makeGraphic(e.detail)),this.goTo(s)}else{var o=this.calloutGraphicsLayer.graphics.find((function(e){var t=e.attributes,i=t.relatedFeatureId,s=t.id,o=t.__index__;return n?n==i:s==r&&(null===o||a==o)}));if(o){this.addHighlightGraphic(o,i.ACTIVE,!1);var u=n?this.cachedRelatedFeatureGeometry[n].arcgis:this.getGraphicById(r,a);this.goTo(u)}}}},{key:"handleGeometryFeatureHighlight",value:function(e){var t=e.detail.properties,r=t.id,n=t.relatedFeatureId,a=t.index;if(t.unsaved)this.clearHoverActiveGraphics();else{var s=this.calloutGraphicsLayer.graphics.find((function(e){var t=e.attributes,i=t.relatedFeatureId,s=t.id,o=t.__index__;return n?n==i:s==r&&(null===o||a==o)}));s&&this.addHighlightGraphic(s,i.HOVER,!1)}}},{key:"handleFeatureRemove",value:function(e){var t=e.detail.properties,r=t.id,i=t.relatedFeatureId,n=t.index,a=t.unsaved,s=this.currentDiscussionsRef,o=s.unsavedFeatures,u=s.unsavedRelatedFeatures;if(a)if(i)this.currentDiscussionsRef.unsavedRelatedFeatures=[].concat((0,l.Z)(u.slice(0,n)),(0,l.Z)(u.slice(n+1,u.length)));else{this.currentDiscussionsRef.unsavedFeatures=[].concat((0,l.Z)(o.slice(0,n)),(0,l.Z)(o.slice(n+1,o.length)));var c=this.unsavedGeometryGraphicsLayer.graphics.getItemAt(n);this.unsavedGeometryGraphicsLayer.graphics.remove(c)}else{var h=function(e){var t=e.attributes,a=t.relatedFeatureId,s=t.id,o=t.__index__;return i?i==a:s==r&&(null===o||n==o)},d=this.calloutGraphicsLayer.graphics.find(h);d&&(d.visible=!1);var p=this.geometryGraphicsLayer.graphics.find(h);p&&(p.visible=!1)}this.clearHoverActiveGraphics(!0)}},{key:"handleGeometryDrawCreate",value:function(e){var t=e.detail;this.sketchPostId=t,this.drawRef.buffer=!1,this.drawRef.disablePrimaryOptions=!0,this.drawRef.disableEditOptions=!0}},{key:"handleGeometryDrawTypeSelect",value:function(e){this.mapActionNoticeActive=!0,this.drawRef.setActiveTool(e.detail)}},{key:"handleGeometryDrawDone",value:function(){this.mapActionNoticeActive=!1,this.drawRef.setActiveTool(void 0)}},{key:"handleGeometryDrawEdit",value:function(e){var t=this.drawRef,r=e.detail.properties,i=r.id,n=r.index,a=r.unsaved,s=(a?this.unsavedGeometryGraphicsLayer.graphics.getItemAt(n):this.getGraphicById(i,n)).geometry;this.hideLayers(),this.goTo(s),this.sketchPostId=i,this.sketchIndex=n,this.sketchIsUnsaved=a,t.geometry=s,t.disablePrimaryOptions=!0,t.buffer=!1}},{key:"handleGeometryDrawEditCancel",value:function(){this.currentDiscussionsRef.unsavedFeatures=(0,l.Z)(this.currentDiscussionsRef.unsavedFeatures),this.drawRef.forceReset(),this.showLayers()}},{key:"handleDrawGraphicsChange",value:function(e){var t=this,r=e.detail,i=r.graphics,n=r.save,a=r.canceled,s=r.unsaved,o=this.sketchPostId,u=this.sketchIndex,c=this.sketchIsUnsaved,h=i.getItemAt(0);if(h.geometry=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3.5,i=t.resolution;return(0,f.generalize)(e,i*r,!1)}(h.geometry.clone(),this.view),n&&this.drawRef.disablePrimaryOptions){var d=(0,x.Sx)(h.geometry),y=(0,p.g)(d);if(c){var v=this.currentDiscussionsRef.unsavedFeatures.map((function(e,r){return r===t.sketchIndex&&(e.geometry=y),e}));this.currentDiscussionsRef.unsavedFeatures=v,this.unsavedGeometryGraphicsLayer.graphics.getItemAt(this.sketchIndex).geometry=h.geometry}else{var g=this.postToGeoJSON(y,{index:u,id:o});this.currentDiscussionsRef.unsavedExistingFeatures=[].concat((0,l.Z)(this.currentDiscussionsRef.unsavedExistingFeatures.filter((function(e){return e.properties.index!==u}))),[g]);var w=this.getGraphicById(o,u);this.unsavedExistingGeometry.filter((function(e){var t=e.id,r=e.index;return t===o&&r===u})).length||this.unsavedExistingGeometry.push({id:o,index:u,geometry:w.geometry.clone()}),w.geometry=h.geometry}this.drawRef.forceReset(),this.showLayers();var b=(0,p.k)(y);this.emitHubTelemetry(m.d.dictionary.category.content.action.update.label.location.details[b])}else if(a)this.currentDiscussionsRef.unsavedFeatures=(0,l.Z)(this.currentDiscussionsRef.unsavedFeatures),this.drawRef.forceReset(),this.showLayers();else if(s){this.drawRef.forceReset(),h.symbol=_[h.geometry.type](this.themeWithDefaults[h.geometry.type]),this.addGraphicsToGraphicsLayer(this.unsavedGeometryGraphicsLayer,[h]);var G=[];i.forEach((function(e){var r=(0,x.Sx)(e.geometry),i=(0,p.g)(r);G.push({type:"Feature",geometry:i,properties:{id:t.sketchPostId}});var n=(0,p.k)(i);t.emitHubTelemetry(m.d.dictionary.category.content.action.create.label.location.details[n])})),this.currentDiscussionsRef.unsavedFeatures=[].concat((0,l.Z)(this.currentDiscussionsRef.unsavedFeatures),G)}}},{key:"handleGeometryDrawReset",value:function(){this.currentDiscussionsRef.unsavedFeatures=(0,l.Z)(this.currentDiscussionsRef.unsavedFeatures),this.restoreInitialDrawOptions(),this.showLayers()}},{key:"handleGeometryClearAll",value:function(){this.resetStagedFeatures(),this.restoreInitialDrawOptions(),this.showLayers(),this.unsavedGeometryGraphicsLayer.graphics.removeAll();var e=function(e){e.visible=!0};this.geometryGraphicsLayer.graphics.forEach(e),this.calloutGraphicsLayer.graphics.forEach(e),this.mapActionNoticeActive=!1}},{key:"addRelatedFeature",value:function(){var e=this.selectedGraphic.layer.objectIdField,t=this.selectedGraphic.attributes[e];this.selectedGraphic.geometry=(0,x.Sx)(this.selectedGraphic.geometry);var r={postId:this.sketchPostId,objectId:t,feature:(0,p.g)(this.selectedGraphic.toJSON())};this.currentDiscussionsRef.unsavedRelatedFeatures=[].concat((0,l.Z)(this.currentDiscussionsRef.unsavedRelatedFeatures),[r]),this.highlightGraphic(),this.arcgisHubMapPopoverClear.emit(),this.emitHubTelemetry(m.d.dictionary.category.interaction.action.select.label.content)}},{key:"removeRelatedFeature",value:function(){var e=this.currentDiscussionsRef.unsavedRelatedFeatures,t=this.selectedGraphic.layer.objectIdField,r=this.selectedGraphic.attributes[t],i=this.currentDiscussionsRef.unsavedRelatedFeatures.findIndex((function(e){return e.objectId==r}));this.currentDiscussionsRef.unsavedRelatedFeatures=[].concat((0,l.Z)(e.slice(0,i)),(0,l.Z)(e.slice(i+1,e.length))),this.arcgisHubMapPopoverClear.emit(),this.clearHighlights(),this.emitHubTelemetry(m.d.dictionary.category.interaction.action.deselect.label.content)}},{key:"renderAddLocation",value:function(){return(0,h.h)("calcite-action-pad",{"expand-disabled":!0,expanded:!0,layout:"horizontal"},(0,h.h)("calcite-action",{icon:"pin-plus",onClick:this.addRelatedFeature,text:this.intl.t("location.add"),textEnabled:!0}))}},{key:"renderRemoveLocation",value:function(){return(0,h.h)("calcite-action-pad",{"expand-disabled":!0,expanded:!0,layout:"horizontal"},(0,h.h)("calcite-action",{icon:"trash",onClick:this.removeRelatedFeature,text:this.intl.t("location.remove"),textEnabled:!0}))}},{key:"handleMapDrawSelect",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var r,i,n,s,o,c,l,h,d,p,f,y,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.detail,i=this.targetLayer,e.next=4,this.view.hitTest(r,{include:i});case 4:if(n=e.sent,s=n.results,!(null===(o=(0,Z.g)(s))||void 0===o?void 0:o.graphic)||!this.drawRef.disableEditOptions){e.next=26;break}if(c=o.graphic,l=c.layer.objectIdField,h=c.attributes[l],c.attributes.hasOwnProperty(i.displayField)){e.next=18;break}return e.next=14,i.queryFeatures({objectIds:[h],outFields:["*"],returnGeometry:!1});case 14:d=e.sent,p=(0,a.Z)(d.features,1),(f=p[0])&&(c.attributes=f.attributes);case 18:y=this.currentDiscussionsRef.unsavedRelatedFeatures.map((function(e){return e.objectId})),v=this.renderAddLocation,y.includes(h)&&(v=this.renderRemoveLocation),this.selectedGraphic=c,this.arcgisHubMapPopoverOpen.emit({geometry:c.geometry,view:this.view,render:v}),this.highlightGraphic(c),e.next=28;break;case 26:this.selectedGraphic=null,this.highlightGraphic();case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDiscussionsClose",value:function(e){e.target!==this.onMapDiscussionsRef&&e.target!==this.onMapDiscussionsPreviewRef||(this.activeMapDiscussion=void 0,this.clearHoverActiveGraphics(!0))}},{key:"setDiscussionsRefHasMap",value:function(e){this.discussionsRef&&(this.discussionsRef.hasMap=e)}},{key:"initialize",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(){var t,r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,r=this.context,this.saveInitialDrawOptions(),!t||!r){e.next=25;break}return e.next=5,t.when();case 5:if(this.addGeometryGraphicsLayer(),this.addStagedGeometryGraphicsLayer(),this.addCalloutGraphicsLayer(),this.addHighlightGraphicsLayer(),this.fetchSubject(),this.fetchPosts(),this.handleViewSizeChange(),!this.cachedFeatures.length){e.next=21;break}return e.prev=13,e.next=16,this.refreshFeatures(this.cachedFeatures);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(13),console.warn("Cannot add discussions features to the map",e.t0.message);case 21:this.setDiscussionsRefHasMap(!0),this.mapViewSizeChangeHandler=(0,b.YP)(t,"size",this.handleViewSizeChange),this.mapViewCenterChangeHandler=(0,b.YP)(t,"center",this.calculateOffsets),this.initialized=!0;case 25:case"end":return e.stop()}}),e,this,[[13,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"teardown",value:function(){this.initialized=!1,this.clearHighlights(),this.removeViewHandlers(),this.removeLayers(),this.resetSelect(),this.setDiscussionsRefHasMap(!1)}},{key:"fetchSubject",value:function(){var e=this.discussion,t=this.context;(0,p.h)(Object.assign({discussion:e},t.hubRequestOptions))}},{key:"fetchPosts",value:function(){var e=this;F(this.discussion,this.context.hubRequestOptions).then((function(t){(null===t||void 0===t?void 0:t.features)&&(e.cachedFeatures=t.features,e.initialized&&e.refreshFeatures(t.features))}))}},{key:"addGeometryGraphicsLayer",value:function(){this.geometryGraphicsLayer=new w.Z({graphics:[],elevationInfo:{mode:"on-the-ground"}}),this.view.map.add(this.geometryGraphicsLayer),this.layerIds.push(this.geometryGraphicsLayer.id)}},{key:"addStagedGeometryGraphicsLayer",value:function(){this.unsavedGeometryGraphicsLayer=new w.Z({graphics:[],elevationInfo:{mode:"on-the-ground"}}),this.view.map.add(this.unsavedGeometryGraphicsLayer),this.layerIds.push(this.geometryGraphicsLayer.id)}},{key:"addCalloutGraphicsLayer",value:function(){this.calloutGraphicsLayer=new w.Z({graphics:[],effect:"drop-shadow(0px, 2px, 8px, rgba(0, 0, 0, .20))",elevationInfo:{mode:"relative-to-ground"}}),this.view.map.add(this.calloutGraphicsLayer),this.layerIds.push(this.calloutGraphicsLayer.id),this.mapPointerMoveHandler=this.view.on("pointer-move",this.setCalloutSymbolOnPointerMove),this.mapClickDiscussionsHandler=this.view.on("click",this.handleMapClickDiscussions)}},{key:"addHighlightGraphicsLayer",value:function(){this.highlightGraphicsLayer=new w.Z({graphics:[],elevationInfo:{mode:"relative-to-ground"}}),this.view.map.add(this.highlightGraphicsLayer),this.layerIds.push(this.highlightGraphicsLayer.id)}},{key:"addHighlightGraphic",value:function(e,t,r){var i,n,a=this.themeWithDefaults,s=this.highlightGraphicsLayer,o=this.persistAttribute,u=this.is3D,c=e.clone();c.symbol=_.callout(t,Object.assign(Object.assign({},a.callout),{isOffset:null===(i=null===e||void 0===e?void 0:e.attributes)||void 0===i?void 0:i.isOffset,is3D:u}),null===(n=c.attributes)||void 0===n?void 0:n.totalCount),c.attributes[o]=r,this.clearHoverActiveGraphics(r),s.add(c)}},{key:"setCalloutSymbolOnPointerMove",value:function(e){var t=this;this.view.hitTest(e,{include:this.calloutGraphicsLayer}).then((function(e){if(e.results.length){var r=(0,Z.g)(e.results).graphic;t.addHighlightGraphic(r,i.HOVER,!1)}else t.clearHoverActiveGraphics(!1)}))}},{key:"removeLayers",value:function(){var e=this;[this.geometryGraphicsLayer,this.unsavedGeometryGraphicsLayer,this.calloutGraphicsLayer,this.highlightGraphicsLayer].forEach((function(t){return e.removeLayer(t)}))}},{key:"hideLayers",value:function(){[this.geometryGraphicsLayer,this.unsavedGeometryGraphicsLayer,this.calloutGraphicsLayer,this.highlightGraphicsLayer].forEach((function(e){return e.opacity=.1}))}},{key:"showLayers",value:function(){[this.geometryGraphicsLayer,this.unsavedGeometryGraphicsLayer,this.calloutGraphicsLayer,this.highlightGraphicsLayer].forEach((function(e){return e.opacity=1}))}},{key:"removeLayer",value:function(e){e&&e.destroy()}},{key:"emptyFeatures",value:function(){[this.geometryGraphicsLayer,this.unsavedGeometryGraphicsLayer,this.calloutGraphicsLayer].forEach((function(e){return e.removeAll()}))}},{key:"addGraphicsToGraphicsLayer",value:function(e,t){e.addMany(t)}},{key:"refreshFeatures",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var r,i,a,s,o,c,h,d,f,y,v,g,m,w=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emptyFeatures(),this.resetSelect(),t.forEach((function(e){var t;return e.properties.totalCount=null!==(t=e.properties.replyCount)&&void 0!==t?t:0})),r=function(e){var t=e.geometry;return Boolean(t)},i=t.map(this.makeGraphic).filter(r),a=t.map(this.makeCalloutGraphic).filter(r),s=function(e){var t=e.properties;return Boolean((0,p.i)(t.discussion).features)},o=t.filter(s),c=Array.from(new Set(o.map((function(e){var t=e.properties.discussion;return(0,p.i)(t).features.map((function(e){return e}))})).flat())),e.next=11,this.cacheRelatedFeatureGeometry(c);case 11:h=[],d=[],f=(0,n.Z)(o),e.prev=14,v=function(){var e=y.value;if(d.includes(e.properties.id))return"continue";d.push(e.properties.id);var t=e.properties,r=(0,p.i)(t.discussion).features;t.totalCount=0,r.forEach((function(r){var i,n=h.find((function(e){return e.properties.relatedFeatureId==r}));if(n){var a=n.properties,s=(null!==(i=t.totalCount)&&void 0!==i?i:0)+1;a.totalCount+=s}else try{var o=w.getRelatedFeature(r);o.properties=Object.assign(Object.assign({},e.properties),{relatedFeatureId:r}),h.push(o)}catch(u){console.warn("Failed to access post related feature:",u.message)}}))},f.s();case 17:if((y=f.n()).done){e.next=23;break}if("continue"!==v()){e.next=21;break}return e.abrupt("continue",21);case 21:e.next=17;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(14),f.e(e.t0);case 28:return e.prev=28,f.f(),e.finish(28);case 31:g=h.map(this.makeCalloutGraphic),m=[].concat((0,l.Z)(a),(0,l.Z)(g)),this.addGraphicsToGraphicsLayer(this.geometryGraphicsLayer,i),this.addGraphicsToGraphicsLayer(this.calloutGraphicsLayer,m);case 35:case"end":return e.stop()}}),e,this,[[14,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"pointToExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.0025,r=e.x,i=e.y,n=e.spatialReference,a=new G.Z({xmin:r-t,ymin:i-t,xmax:r+t,ymax:i+t,spatialReference:n});return a}},{key:"goTo",value:function(e){if(this.view){var t=e;t.geometry&&"point"===t.geometry.type&&(t=this.pointToExtent(t.geometry)),t.extent&&(t=t.extent.clone().expand(2)),this.view.goTo({target:t},{duration:1e3,easing:"ease"}).catch((function(e){(0,I.D_)(e)||console.error("Failed to zoom map to target feature or extent:",e.message)}))}}},{key:"postToGeoJSON",value:function(e,t){return{type:"Feature",geometry:e,properties:t}}},{key:"makeGraphic",value:function(e){var t,r=(0,p.j)(e),i=k.Z.fromJSON(r);return(null===(t=null===i||void 0===i?void 0:i.geometry)||void 0===t?void 0:t.type)&&(i.symbol=_[i.geometry.type](this.themeWithDefaults[i.geometry.type])),i}},{key:"makeCalloutGraphic",value:function(e){var t,r=this.is3D,n=_.callout,s=e.geometry,o=e.properties,u=s.coordinates.flat(1/0),c=(0,a.Z)(u,2),l=c[0],h=c[1],d=!o.relatedFeatureId&&"Point"===e.geometry.type,f=(0,p.j)({type:"Feature",geometry:{type:"Point",coordinates:[l,h]},properties:Object.assign(Object.assign({},o),{replyCount:o.replyCount||0,isOffset:d})}),y=k.Z.fromJSON(f);return y.symbol=n(i.DEFAULT,Object.assign(Object.assign({},this.themeWithDefaults.callout),{isOffset:d,is3D:r}),null===(t=e.properties)||void 0===t?void 0:t.totalCount),y}},{key:"getRelatedFeature",value:function(e){return{type:"Feature",geometry:this.cachedRelatedFeatureGeometry[e].geojson,properties:{}}}},{key:"cacheRelatedFeatureGeometry",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t){var r,i,n,a,s,o=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.cachedRelatedFeatureGeometry,this.targetLayer){e.next=4;break}return console.warn("Discussions service layer not defined; ingnoring related features"),e.abrupt("return");case 4:if(i=Object.keys(r),!(n=t.filter((function(e){return!i.includes("".concat(e))}))).length){e.next=13;break}return a={where:"1=1",objectIds:n.map((function(e){return+e})),returnGeometry:!0,outSpatialReference:{wkid:4326},outFields:[this.targetLayer.objectIdField,this.targetLayer.displayField]},e.next=10,this.targetLayer.queryFeatures(a);case 10:s=e.sent,s.features.forEach((function(e){var t=e.geometry,r=e.attributes,i=(0,p.g)(t);o.cachedRelatedFeatureGeometry[r[o.targetLayer.objectIdField]]={arcgis:t,geojson:i}}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGraphicById",value:function(e,t){return this.geometryGraphicsLayer.graphics.find((function(r){var i=r.attributes,n=i.id,a=i.__index__;return n===e&&(null===t||t==a)}))}},{key:"highlightGraphic",value:function(e){var t=this;this.clearHighlights(),e&&(this.clearHighlights(),this.view.whenLayerView(e.layer).then((function(r){t.highlightHandle=r.highlight(e)})))}},{key:"clearHighlights",value:function(){this.highlightHandle&&(this.highlightHandle.remove(),this.highlightHandle=null)}},{key:"clearHoverActiveGraphics",value:function(e){var t=this.persistAttribute,r=this.highlightGraphicsLayer;if(e)r.removeAll();else{var i=r.graphics.filter((function(e){return!e.attributes[t]}));r.removeMany(i.toArray())}}},{key:"removeViewHandlers",value:function(){[this.mapPointerMoveHandler,this.mapClickDiscussionsHandler,this.mapViewSizeChangeHandler,this.mapViewCenterChangeHandler].forEach((function(e){e&&(e.remove(),e=null)}))}},{key:"resetSelect",value:function(){this.clearHighlights()}},{key:"saveInitialDrawOptions",value:function(){var e=this.drawRef,t=e.buffer,r=e.disableEditOptions,i=e.disablePrimaryOptions;this.initialDrawOptions={buffer:t,disableEditOptions:r,disablePrimaryOptions:i}}},{key:"restoreInitialDrawOptions",value:function(){var e=this.initialDrawOptions,t=e.buffer,r=e.disableEditOptions,i=e.disablePrimaryOptions;this.drawRef.buffer=t,this.drawRef.disableEditOptions=r,this.drawRef.disablePrimaryOptions=i,this.drawRef.setActiveTool(void 0),this.drawRef.forceReset()}},{key:"resetStagedFeatures",value:function(){var e=this;this.currentDiscussionsRef.unsavedFeatures=[],this.currentDiscussionsRef.unsavedRelatedFeatures=[],this.currentDiscussionsRef.unsavedExistingFeatures=[],this.unsavedExistingGeometry.forEach((function(t){var r=t.id,i=t.index,n=t.geometry;e.getGraphicById(r,i).geometry=n})),this.unsavedExistingGeometry=[]}},{key:"handleMapClickDiscussions",value:function(e){var t=this;this.view.hitTest(e,{include:[this.calloutGraphicsLayer]}).then((function(e){if(e.results.length){t.preview=!0;var r=(0,Z.g)(e.results).graphic;t.graphicGeometry=r.geometry,t.isOffset=r.attributes.isOffset;var n=r.attributes,a=n.parentId,s=n.channelId,o=n.id,u=n.relatedFeatureId;if(u){var c=u;t.activeMapDiscussion={channelId:s,locationId:c}}else{var l=a||o,h=a?o:void 0;t.activeMapDiscussion={channelId:s,postId:l,replyId:h}}t.addHighlightGraphic(r,i.ACTIVE,!0)}}))}},{key:"handleViewSizeChange",value:function(){var e=this.view,t=e.height,r=e.width;this.viewHeight=t,this.viewWidth=r}},{key:"currentDiscussionsRef",get:function(){return this.activeMapDiscussion?this.onMapDiscussionsRef:this.discussionsRef}},{key:"themeWithDefaults",get:function(){var e=this.theme,t={};return["point","polyline","polygon","callout"].forEach((function(r){t[r]=Object.assign(Object.assign({},C[r]),e[r])})),t}},{key:"is3D",get:function(){return this.view.hasOwnProperty("camera")}},{key:"targetLayer",get:function(){var e=this;return this.view.map.allLayers.filter((function(t){return"feature"===t.type&&!e.layerIds.includes(t.id)})).getItemAt(0)}},{key:"styles",get:function(){var e=this.view,t=this.viewWidth,r=this.viewHeight,i=this.leftOffset,n=this.topOffset,a=this.previewHeight,s=this.preview,o={};if(e){var u=e.container.getBoundingClientRect(),c=u.top,l=u.left,h=u.right,d=u.bottom;o={"--left-offset":"".concat(i,"px"),"--top-offset":"".concat(n,"px"),"--panel-left":"".concat(l,"px"),"--panel-height":"".concat(s?r-a:d-c,"px"),"--panel-width":"".concat(h-l,"px"),"--view-width":"".concat(t,"px"),"--view-height":"".concat(r,"px")}}return o}},{key:"renderMapDiscussion",value:function(){var e=this,t=this.activeMapDiscussion,r=this.context,i=this.discussion,n=this.isHub;return this.preview?(0,h.h)("arcgis-hub-discussions-map-preview",{channelId:t.channelId,context:r,discussion:i,locationId:t.locationId,postId:t.postId,ref:function(t){e.onMapDiscussionsPreviewRef=t},replyId:t.replyId}):(0,h.h)("arcgis-hub-discussions",{channelId:t.channelId,context:r,disableNavigation:!t.locationId,discussion:i,dismissible:!0,enableGoTo:!0,hasMap:!0,isHub:n,locationId:t.locationId,postId:t.postId,ref:function(t){e.onMapDiscussionsRef=t},replyId:t.replyId})}},{key:"render",value:function(){var e=this.activeMapDiscussion,t=this.styles,r=this.view,i=this.mapActionNoticeActive;return(0,h.h)(h.H,{"data-element":"discussions-map-integrator",style:t},e&&this.renderMapDiscussion(),r&&i&&(0,h.h)("arcgis-hub-discussions-map-action-notice",{view:r}))}},{key:"element",get:function(){return(0,h.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{view:["attachView"],discussionsRef:["attachdiscussionsRef"],drawRef:["handleDrawRefUpdate"],preview:["calculateOffsets"],previewHeight:["calculateOffsets"],context:["initialize"]}}}]),e}();A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryGoTo",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryFeature",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryFeatureDeleted",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryFeatureSelect",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryFeatureHighlight",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleFeatureRemove",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryDrawCreate",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryDrawTypeSelect",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryDrawEdit",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryDrawEditCancel",null),A([(0,v.C)({when:function(e){return e.target===this.drawRef}})],O.prototype,"handleDrawGraphicsChange",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryDrawReset",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleGeometryClearAll",null),A([(0,v.C)({when:function(e){return this.eventTargetIsDiscussionsRef(e)}})],O.prototype,"handleDiscussionsClose",null),A([(0,v.C)({when:function(e){return e}})],O.prototype,"refreshFeatures",null),A([(0,v.C)({when:function(){return this.drawRef}})],O.prototype,"saveInitialDrawOptions",null),A([(0,v.C)({when:function(){return this.drawRef&&this.initialDrawOptions}})],O.prototype,"restoreInitialDrawOptions",null),A([(0,v.C)({when:function(){return this.currentDiscussionsRef}})],O.prototype,"resetStagedFeatures",null),A([(0,v.C)({when:function(){return!this.mapActionNoticeActive}})],O.prototype,"handleMapClickDiscussions",null),A([(0,y.D)({timeout:50})],O.prototype,"handleViewSizeChange",null),O.style=".sc-arcgis-hub-discussions-map-integrator-h{display:block}@media only screen and (min-width: 640px){arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{width:25rem}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{padding:0px}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{top:calc(var(--top-offset) + 4.5rem);left:calc(var(--left-offset) - 5rem - 25rem);max-height:calc(var(--panel-height) - 6rem)}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{width:25rem}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{top:calc(var(--top-offset));left:calc(var(--left-offset))}}@media only screen and (max-width: 640px){arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions.sc-arcgis-hub-discussions-map-integrator{width:calc(var(--panel-width) + 0.05rem);top:calc(var(--top-offset) + var(--panel-height) * .5);max-height:calc(var(--panel-height) * .5);height:calc(var(--panel-height) * .5);left:0.95rem}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{position:absolute}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{z-index:10}arcgis-hub-discussions-map-preview.sc-arcgis-hub-discussions-map-integrator{width:calc(var(--panel-width) - 0.95rem);top:calc(var(--panel-height) + 3.2rem);left:0.5rem}}"},23872:function(e,t,r){function i(e){return function(t,r,i){var n=i.value,a=e.when;return Object.assign(Object.assign({},i),{value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=a.apply(this,t);if(i)return n.apply(this,t)}})}}r.d(t,{C:function(){return i}})},2001:function(e,t,r){function i(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(i){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];clearTimeout(t),t=setTimeout((function(){return e.apply(i,a)}),r)}}function n(e){return function(t,r,n){var a=n.value,s="".concat(r.toString(),"Debounced");return Object.assign(Object.assign({},n),{value:function(){this[s]||Object.defineProperty(this,s,{value:i(a,e.timeout)});for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this[s].apply(this,[this].concat(r))}})}}r.d(t,{D:function(){return n}})},84397:function(e,t,r){r.d(t,{c:function(){return i},g:function(){return n}});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},41691:function(e,t,r){r.d(t,{p:function(){return p},r:function(){return f}});var i=r(15671),n=r(43144),a=r(60136),s=r(92572),o=r(27366),u=r(85015),c=r(100),l=r(49861),h=r(69912),d=r(61826),p=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"destroy",value:function(){var e,t;this.destroyed||(null!==(e=this._get("handles"))&&void 0!==e&&e.destroy(),null===(t=this._get("updatingHandles"))||void 0===t||t.destroy())}},{key:"handles",get:function(){return this._get("handles")||new c.Z}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new d.t}}]),r}(e);return(0,o._)([(0,l.Cb)({readOnly:!0})],t.prototype,"handles",null),(0,o._)([(0,l.Cb)({readOnly:!0})],t.prototype,"updatingHandles",null),t=(0,o._)([(0,h.j)("esri.core.HandleOwner")],t),t},f=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r)}(p(u.Z));f=(0,o._)([(0,h.j)("esri.core.HandleOwner")],f)},68748:function(e,t,r){r.d(t,{a:function(){return y},z:function(){return v}});var i=r(37762),n=r(15671),a=r(43144),s=r(60136),o=r(92572),u=r(27366),c=r(80987),l=r(60354),h=r(41691),d=(r(93169),r(32718),r(92026)),p=r(49861),f=(r(25243),r(63780),r(69912)),y=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).handles.add([i.on("before-add",(function(e){(0,d.Wi)(e.item)&&e.preventDefault()})),i.on("after-add",(function(e){return i._own(e.item)})),i.on("after-remove",(function(e){return i._release(e.item)}))]),i}return(0,a.Z)(r,[{key:"owner",get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}},{key:"_ownAll",value:function(){var e,t=(0,i.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._own(r)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_releaseAll",value:function(){var e,t=(0,i.Z)(this.items);try{for(t.s();!(e=t.n()).done;){var r=e.value;this._release(r)}}catch(n){t.e(n)}finally{t.f()}}},{key:"_createNewInstance",value:function(e){return this.itemType?new(c.Z.ofType(this.itemType.Type))(e):new c.Z(e)}}]),r}((0,h.p)(c.Z));function v(e,t){return{type:e,cast:l.R,set:function(r){var i=(0,l.Z)(r,this._get(t),e);i.owner=this,this._set(t,i)}}}(0,u._)([(0,p.Cb)()],y.prototype,"owner",null),y=(0,u._)([(0,f.j)("esri.core.support.OwningCollection")],y)},61826:function(e,t,r){r.d(t,{t:function(){return y}});var i=r(15671),n=r(43144),a=r(60136),s=r(92572),o=r(27366),u=r(85015),c=r(100),l=r(92026),h=r(94172),d=r(99346),p=r(49861),f=r(69912),y=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e._handleId=0,e._handles=new c.Z,e._scheduleHandleId=0,e._pendingPromises=new Set,e}return(0,n.Z)(r,[{key:"destroy",value:function(){this.removeAll(),this._handles.destroy()}},{key:"add",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,h.YP)}},{key:"addWhen",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._installWatch(e,t,r,h.gx)}},{key:"addOnCollectionChange",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.initial,a=void 0!==n&&n,s=i.final,o=void 0!==s&&s,u=++this._handleId;return this._handles.add([(0,h.on)(e,"after-changes",this._createSyncUpdatingCallback(),h.Z_),(0,h.on)(e,"change",t,{onListenerAdd:a?function(e){return t({added:e.toArray(),removed:[]})}:void 0,onListenerRemove:o?function(e){return t({added:[],removed:e.toArray()})}:void 0})],u),{remove:function(){return r._handles.remove(u)}}}},{key:"addPromise",value:function(e){var t=this;if((0,l.Wi)(e))return e;var r=++this._handleId;this._handles.add({remove:function(){t._pendingPromises.delete(e)&&(0!==t._pendingPromises.size||t._handles.has(v)||t._set("updating",!1))}},r),this._pendingPromises.add(e),this._set("updating",!0);var i=function(){return t._handles.remove(r)};return e.then(i,i),e}},{key:"removeAll",value:function(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}},{key:"_installWatch",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,a=++this._handleId;i.sync||this._installSyncUpdatingWatch(e,a);var s=n(e,t,i);return this._handles.add(s,a),{remove:function(){return r._handles.remove(a)}}}},{key:"_installSyncUpdatingWatch",value:function(e,t){var r=this._createSyncUpdatingCallback(),i=(0,h.YP)(e,r,{sync:!0,equals:function(){return!1}});return this._handles.add(i,t),i}},{key:"_createSyncUpdatingCallback",value:function(){var e=this;return function(){e._handles.remove(v),++e._scheduleHandleId;var t=e._scheduleHandleId;e._get("updating")||e._set("updating",!0),e._handles.add((0,d.Os)((function(){t===e._scheduleHandleId&&(e._set("updating",e._pendingPromises.size>0),e._handles.remove(v))})),v)}}}]),r}(u.Z);(0,o._)([(0,p.Cb)({readOnly:!0})],y.prototype,"updating",void 0),y=(0,o._)([(0,f.j)("esri.core.support.WatchUpdatingTracking")],y);var v=-42},8537:function(e,t,r){r.d(t,{YP:function(){return a}});var i=r(44927),n=(r(98928),r(84652),r(32718));r(66978);(0,i.K)(n.Z.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});function a(e,t,r,i){return e.watch(t,r,i)}},92463:function(e,t,r){r.r(t),r.d(t,{hydratedAdapter:function(){return u}});var i=r(53866),n=r(77577),a=r(585),s=r(80885),o=r(29909),u={convertToGEGeometry:function(e,t){if(null==t)return null;var r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){var i=e.hasZ(t),n=e.hasM(t),s=new a.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return i&&(s.z=e.getPointZ(t)),n&&(s.m=e.getPointM(t)),s.cache._geVersion=t,s},exportPolygon:function(e,t,r){var i=new s.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return i.cache._geVersion=t,i},exportPolyline:function(e,t,r){var i=new o.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return i.cache._geVersion=t,i},exportMultipoint:function(e,t,r){var i=new n.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return i.cache._geVersion=t,i},exportExtent:function(e,t,r){var n=e.hasZ(t),a=e.hasM(t),s=new i.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(n){var o=e.getZExtent(t);s.zmin=o.vmin,s.zmax=o.vmax}if(a){var u=e.getMExtent(t);s.mmin=u.vmin,s.mmax=u.vmax}return s.cache._geVersion=t,s}}},2170:function(e,t,r){r.r(t),r.d(t,{buffer:function(){return F},changeDefaultSpatialReferenceTolerance:function(){return Y},clearDefaultSpatialReferenceTolerance:function(){return X},clip:function(){return d},contains:function(){return f},convexHull:function(){return R},crosses:function(){return y},cut:function(){return p},densify:function(){return V},difference:function(){return C},disjoint:function(){return x},distance:function(){return v},equals:function(){return g},extendedSpatialReferenceInfo:function(){return h},flipHorizontal:function(){return P},flipVertical:function(){return j},generalize:function(){return z},geodesicArea:function(){return B},geodesicBuffer:function(){return A},geodesicDensify:function(){return N},geodesicLength:function(){return q},intersect:function(){return D},intersectLinesToPoints:function(){return J},intersects:function(){return m},isSimple:function(){return I},nearestCoordinate:function(){return O},nearestVertex:function(){return E},nearestVertices:function(){return M},offset:function(){return L},overlaps:function(){return G},planarArea:function(){return U},planarLength:function(){return W},relate:function(){return k},rotate:function(){return H},simplify:function(){return Z},symmetricDifference:function(){return _},touches:function(){return w},union:function(){return S},within:function(){return b}});var i=r(43144),n=r(15671),a=r(60136),s=r(92572),o=r(28664),u=r(99058),c=r(92463);function l(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function h(e){return u.G.extendedSpatialReferenceInfo(e)}function d(e,t){return u.G.clip(c.hydratedAdapter,l(e),e,t)}function p(e,t){return u.G.cut(c.hydratedAdapter,l(e),e,t)}function f(e,t){return u.G.contains(c.hydratedAdapter,l(e),e,t)}function y(e,t){return u.G.crosses(c.hydratedAdapter,l(e),e,t)}function v(e,t,r){return u.G.distance(c.hydratedAdapter,l(e),e,t,r)}function g(e,t){return u.G.equals(c.hydratedAdapter,l(e),e,t)}function m(e,t){return u.G.intersects(c.hydratedAdapter,l(e),e,t)}function w(e,t){return u.G.touches(c.hydratedAdapter,l(e),e,t)}function b(e,t){return u.G.within(c.hydratedAdapter,l(e),e,t)}function x(e,t){return u.G.disjoint(c.hydratedAdapter,l(e),e,t)}function G(e,t){return u.G.overlaps(c.hydratedAdapter,l(e),e,t)}function k(e,t,r){return u.G.relate(c.hydratedAdapter,l(e),e,t,r)}function I(e){return u.G.isSimple(c.hydratedAdapter,l(e),e)}function Z(e){return u.G.simplify(c.hydratedAdapter,l(e),e)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.G.convexHull(c.hydratedAdapter,l(e),e,t)}function C(e,t){return u.G.difference(c.hydratedAdapter,l(e),e,t)}function _(e,t){return u.G.symmetricDifference(c.hydratedAdapter,l(e),e,t)}function D(e,t){return u.G.intersect(c.hydratedAdapter,l(e),e,t)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u.G.union(c.hydratedAdapter,l(e),e,t)}function L(e,t,r,i,n,a){return u.G.offset(c.hydratedAdapter,l(e),e,t,r,i,n,a)}function F(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.G.buffer(c.hydratedAdapter,l(e),e,t,r,i)}function A(e,t,r,i,n,a){return u.G.geodesicBuffer(c.hydratedAdapter,l(e),e,t,r,i,n,a)}function O(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return u.G.nearestCoordinate(c.hydratedAdapter,l(e),e,t,r)}function E(e,t){return u.G.nearestVertex(c.hydratedAdapter,l(e),e,t)}function M(e,t,r,i){return u.G.nearestVertices(c.hydratedAdapter,l(e),e,t,r,i)}function T(e){var t,r;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e&&null!==(t=null===(r=e.extent)||void 0===r?void 0:r.center)&&void 0!==t?t:null}function H(e,t,r){var i;if(null==e)throw new K;var n=e.spatialReference;if(null==(r=null!==(i=r)&&void 0!==i?i:T(e)))throw new K;var a=e.constructor.fromJSON(u.G.rotate(e,t,r));return a.spatialReference=n,a}function P(e,t){var r;if(null==e)throw new K;var i=e.spatialReference;if(null==(t=null!==(r=t)&&void 0!==r?r:T(e)))throw new K;var n=e.constructor.fromJSON(u.G.flipHorizontal(e,t));return n.spatialReference=i,n}function j(e,t){var r;if(null==e)throw new K;var i=e.spatialReference;if(null==(t=null!==(r=t)&&void 0!==r?r:T(e)))throw new K;var n=e.constructor.fromJSON(u.G.flipVertical(e,t));return n.spatialReference=i,n}function z(e,t,r,i){return u.G.generalize(c.hydratedAdapter,l(e),e,t,r,i)}function V(e,t,r){return u.G.densify(c.hydratedAdapter,l(e),e,t,r)}function N(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return u.G.geodesicDensify(c.hydratedAdapter,l(e),e,t,r,i)}function U(e,t){return u.G.planarArea(c.hydratedAdapter,l(e),e,t)}function W(e,t){return u.G.planarLength(c.hydratedAdapter,l(e),e,t)}function B(e,t,r){return u.G.geodesicArea(c.hydratedAdapter,l(e),e,t,r)}function q(e,t,r){return u.G.geodesicLength(c.hydratedAdapter,l(e),e,t,r)}function J(e,t){return u.G.intersectLinesToPoints(c.hydratedAdapter,l(e),e,t)}function Y(e,t){u.G.changeDefaultSpatialReferenceTolerance(e,t)}function X(e){u.G.clearDefaultSpatialReferenceTolerance(e)}var K=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.call(this,"Illegal Argument Exception")}return(0,i.Z)(r)}((0,o.Z)(Error))},93655:function(e,t,r){r.d(t,{Z:function(){return w}});var i=r(15671),n=r(43144),a=r(11752),s=r(61120),o=r(60136),u=r(92572),c=r(27366),l=r(49861),h=(r(25243),r(63780),r(69912)),d=r(68748),p=r(30651),f=r(6693),y=r(56811),v=r(78983),g=r(64575),m=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).elevationInfo=null,n.graphics=new v.J,n.screenSizePerspectiveEnabled=!0,n.type="graphics",n.internal=!1,n}return(0,n.Z)(r,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return(0,a.Z)((0,s.Z)(r.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),r}((0,f.h)((0,y.M)(p.Z)));(0,c._)([(0,l.Cb)({type:g.Z})],m.prototype,"elevationInfo",void 0),(0,c._)([(0,l.Cb)((0,d.z)(v.J,"graphics"))],m.prototype,"graphics",void 0),(0,c._)([(0,l.Cb)({type:["show","hide"]})],m.prototype,"listMode",void 0),(0,c._)([(0,l.Cb)()],m.prototype,"screenSizePerspectiveEnabled",void 0),(0,c._)([(0,l.Cb)({readOnly:!0})],m.prototype,"type",void 0),(0,c._)([(0,l.Cb)({constructOnly:!0})],m.prototype,"internal",void 0);var w=m=(0,c._)([(0,h.j)("esri.layers.GraphicsLayer")],m)},30651:function(e,t,r){r.d(t,{Z:function(){return R}});var i=r(74165),n=r(15861),a=r(15671),s=r(43144),o=r(60136),u=r(92572),c=r(27366),l=(r(59486),r(76200)),h=r(10064),d=r(91505),p=r(79056),f=r(54472),y=r(32718),v=r(66978),g=r(35995),m=r(49861),w=(r(25243),r(63780),r(69912)),b=r(42265);function x(){return x=(0,n.Z)((0,i.Z)().mark((function e(t){var n,a,s,o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="portalItem"in t?t:{portalItem:t},e.next=3,Promise.all([r.e(79803),r.e(98995),r.e(46727),r.e(43139),r.e(6356)]).then(r.bind(r,43139));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(n);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),s=n&&n.portalItem,o=s&&s.id||"unset",u=s&&s.portal&&s.portal.url||b.Z.portalUrl,y.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+o+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),x.apply(this,arguments)}var G=r(53866),k=r(78952),I=0,Z=function(e){(0,o.Z)(c,e);var t=(0,u.Z)(c);function c(){var e;return(0,a.Z)(this,c),(e=t.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new G.Z(-180,-90,180,90,k.Z.WGS84),e.id=Date.now().toString(16)+"-layer-"+I++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=k.Z.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,s.Z)(c,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){var r,i;(0,v.D_)(t)||y.Z.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(r=e.title)&&void 0!==r?r:"no title","', id: '").concat(null!==(i=e.id)&&void 0!==i?i:"no id","')"),{error:t})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){return(0,g.mN)(this.url)}},{key:"fetchAttributionData",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.attributionDataUrl,!this.hasAttributionData||!t){e.next=5;break}return e.next=4,(0,l.default)(t,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new h.Z("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?{url:t}:t,e.next=3,Promise.all([r.e(46727),r.e(94650)]).then(r.bind(r,94650));case 3:return e.abrupt("return",e.sent.fromUrl(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return x.apply(this,arguments)}(e)}}]),c}(d.Z.EventedMixin((0,p.IG)(f.Z)));(0,c._)([(0,m.Cb)({type:String})],Z.prototype,"attributionDataUrl",void 0),(0,c._)([(0,m.Cb)({type:G.Z})],Z.prototype,"fullExtent",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],Z.prototype,"hasAttributionData",null),(0,c._)([(0,m.Cb)({type:String,clonable:!1})],Z.prototype,"id",void 0),(0,c._)([(0,m.Cb)({type:Boolean,nonNullable:!0})],Z.prototype,"legendEnabled",void 0),(0,c._)([(0,m.Cb)({type:["show","hide","hide-children"]})],Z.prototype,"listMode",void 0),(0,c._)([(0,m.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],Z.prototype,"opacity",void 0),(0,c._)([(0,m.Cb)({clonable:!1})],Z.prototype,"parent",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],Z.prototype,"parsedUrl",null),(0,c._)([(0,m.Cb)({type:Boolean})],Z.prototype,"popupEnabled",void 0),(0,c._)([(0,m.Cb)({type:Boolean})],Z.prototype,"attributionVisible",void 0),(0,c._)([(0,m.Cb)({type:k.Z})],Z.prototype,"spatialReference",void 0),(0,c._)([(0,m.Cb)({type:String})],Z.prototype,"title",void 0),(0,c._)([(0,m.Cb)({readOnly:!0,json:{read:!1}})],Z.prototype,"type",void 0),(0,c._)([(0,m.Cb)()],Z.prototype,"url",void 0),(0,c._)([(0,m.Cb)({type:Boolean,nonNullable:!0})],Z.prototype,"visible",void 0);var R=Z=(0,c._)([(0,w.j)("esri.layers.Layer")],Z)},6693:function(e,t,r){r.d(t,{h:function(){return d}});var i=r(43144),n=r(15671),a=r(60136),s=r(92572),o=r(27366),u=r(49861),c=(r(25243),r(63780),r(69912)),l=r(60676),h={read:{reader:l.ij},write:{allowNull:!0,writer:l.cW}},d=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).blendMode="normal",e.effect=null,e}return(0,i.Z)(r)}(e);return(0,o._)([(0,u.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),(0,o._)([(0,u.Cb)({json:{read:!1,write:!1,origins:{"web-map":h,"portal-item":h}}})],t.prototype,"effect",void 0),t=(0,o._)([(0,c.j)("esri.layers.mixins.BlendLayer")],t)}},56811:function(e,t,r){r.d(t,{M:function(){return l}});var i=r(15671),n=r(43144),a=r(60136),s=r(92572),o=r(27366),u=r(49861),c=(r(25243),r(63780),r(69912)),l=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).minScale=0,e.maxScale=0,e}return(0,n.Z)(r,[{key:"effectiveScaleRange",get:function(){var e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&function(e,t){e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale}(e,t.effectiveScaleRange);var r=this._get("effectiveScaleRange");return r&&r.minScale===e.minScale&&r.maxScale===e.maxScale?r:e}}]),r}(e);return(0,o._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,o._)([(0,u.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,o._)([(0,u.Cb)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,o._)([(0,c.j)("esri.layers.mixins.ScaleRangeLayer")],t)}},49229:function(e,t,r){r.d(t,{a:function(){return a}});var i=r(68860),n=r(22186),a={inches:(0,i.En)(1,"meters","inches"),feet:(0,i.En)(1,"meters","feet"),"us-feet":(0,i.En)(1,"meters","us-feet"),yards:(0,i.En)(1,"meters","yards"),miles:(0,i.En)(1,"meters","miles"),"nautical-miles":(0,i.En)(1,"meters","nautical-miles"),millimeters:(0,i.En)(1,"meters","millimeters"),centimeters:(0,i.En)(1,"meters","centimeters"),decimeters:(0,i.En)(1,"meters","decimeters"),meters:(0,i.En)(1,"meters","meters"),kilometers:(0,i.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,i.ty)(1,"meters",n.sv.radius)}},78983:function(e,t,r){r.d(t,{J:function(){return d}});var i=r(15671),n=r(43144),a=r(60136),s=r(92572),o=r(27366),u=r(52639),c=(r(32718),r(25243)),l=(r(63780),r(10064),r(93169),r(42017)),h=r(69912),d=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"_own",value:function(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}},{key:"_release",value:function(e){e.layer===this.owner&&(e.layer=null)}}]),r}(r(68748).a);(0,o._)([(0,l.c)({Type:u.Z,ensureType:(0,c.se)(u.Z)})],d.prototype,"itemType",void 0),d=(0,o._)([(0,h.j)("esri.support.GraphicsCollection")],d)},64575:function(e,t,r){r.d(t,{Z:function(){return _}});var i,n=r(15671),a=r(43144),s=r(11752),o=r(61120),u=r(60136),c=r(92572),l=r(27366),h=r(43404),d=r(46784),p=r(92026),f=r(49861),y=(r(25243),r(63780),r(38511)),v=r(69912),g=r(31201),m=r(74165),w=r(15861),b=r(80031),x=i=function(e){(0,u.Z)(r,e);var t=(0,c.Z)(r);function r(e){return(0,n.Z)(this,r),t.call(this,e)}return(0,a.Z)(r,[{key:"collectRequiredFields",value:function(){var e=(0,w.Z)((0,m.Z)().mark((function e(t,r){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.io)(t,r,this.expression));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"clone",value:function(){return new i({expression:this.expression,title:this.title})}},{key:"equals",value:function(e){return this.expression===e.expression&&this.title===e.title}}]),r}(d.wq);(0,l._)([(0,f.Cb)({type:String,json:{write:!0}})],x.prototype,"expression",void 0),(0,l._)([(0,f.Cb)({type:String,json:{write:!0}})],x.prototype,"title",void 0);var G,k=x=i=(0,l._)([(0,v.j)("esri.layers.support.FeatureExpressionInfo")],x),I=r(88152),Z=(0,h.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),R=new h.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),C=G=function(e){(0,u.Z)(r,e);var t=(0,c.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).offset=null,i}return(0,a.Z)(r,[{key:"readFeatureExpressionInfo",value:function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0}},{key:"writeFeatureExpressionInfo",value:function(e,t,r,i){t[r]=e.write({},i),"0"===e.expression&&(t.featureExpression={value:0})}},{key:"mode",get:function(){var e=this.offset,t=this.featureExpressionInfo;return this._isOverridden("mode")?this._get("mode"):(0,p.pC)(e)||t?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)}},{key:"unit",set:function(e){this._set("unit",e)}},{key:"write",value:function(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?(0,s.Z)((0,o.Z)(r.prototype),"write",this).call(this,e,t):null}},{key:"clone",value:function(){return new G({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}},{key:"equals",value:function(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,p._W)(this.featureExpressionInfo,e.featureExpressionInfo)}}]),r}(d.wq);(0,l._)([(0,f.Cb)({type:k,json:{write:!0}})],C.prototype,"featureExpressionInfo",void 0),(0,l._)([(0,y.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],C.prototype,"readFeatureExpressionInfo",null),(0,l._)([(0,g.c)("featureExpressionInfo",{featureExpressionInfo:{type:k},"featureExpression.value":{type:[0]}})],C.prototype,"writeFeatureExpressionInfo",null),(0,l._)([(0,f.Cb)({type:Z.apiValues,nonNullable:!0,json:{type:Z.jsonValues,read:Z.read,write:{writer:Z.write,isRequired:!0}}})],C.prototype,"mode",null),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],C.prototype,"offset",void 0),(0,l._)([(0,f.Cb)({type:I.f9,json:{type:String,read:R.read,write:R.write}})],C.prototype,"unit",null);var _=C=G=(0,l._)([(0,v.j)("esri.layers.support.ElevationInfo")],C)},88152:function(e,t,r){r.d(t,{Z7:function(){return a},f9:function(){return s},lt:function(){return n}});var i=r(49229);function n(e){return!!e&&null!=i.a[e]}function a(e){return 1/(i.a[e]||1)}var s=function(){var e=Object.keys(i.a);return e.sort(),e}()}}]);
//# sourceMappingURL=41736.183850a1.chunk.js.map