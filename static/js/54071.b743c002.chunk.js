/*! For license information please see 54071.b743c002.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[54071],{80046:function(t,e,n){n.d(e,{a:function(){return o}});var r=n(77843);function o(t,e,n){var o=(0,r._)((0,r._)({params:{}},n),t);return o.params=e.reduce((function(e,n){return(t[n]||"boolean"===typeof t[n])&&(e[n]=t[n]),e}),o.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce((function(t,e){return o[e]&&(t[e]=o[e]),t}),{})}},91968:function(t,e,n){n.r(e),n.d(e,{arcgis_hub_gallery_card:function(){return m}});var r,o=n(93433),i=n(74165),a=n(15861),u=n(15671),s=n(43144),c=n(72585),l=n(96728),h=n(12868),f=n(60796),p=n(29482),d=n(85015),g=n(69207),y=n(25434);n(84371),n(9882),n(77843),n(41016),n(41817),n(80046);!function(t){t.dynamic="dynamic",t.manual="manual"}(r||(r={}));var m=function(){function t(e){(0,u.Z)(this,t),(0,c.r)(this,e),this.access=[],this.catalogs=[],this.categories=[],this.groups=[],this.ids=[],this.limit=10,this.portal="https://www.arcgis.com",this.tags=[],this.types=[],this.mode=r.dynamic,this.newTab=!1,this.cardTitleTag="h4",this.corners=l.C.square,this.lazy=!0,this.showEmptyState=!0,this.showLinkButton=!1,this.shareable=!1,this.shareableByValue=!1,this.shareableByReference=!1,this.shareableOnHover=!1,this.hasResults=!1}return(0,s.Z)(t,[{key:"_limit",get:function(){var t=this._getArrayProp("ids");return this._isManualMode?t.length:this.limit}},{key:"_linkButtonStyle",get:function(){return{primary:"solid",default:"outline"}[this.linkButtonStyle]}},{key:"_linkButtonText",get:function(){return this.linkButtonText||this.intl.t("linkButtonDefaultText")}},{key:"_imageType",get:function(){return{Thumbnails:l.I.thumbnail,Icons:l.I.icon}[this.imageType]||l.I.thumbnail}},{key:"_isManualMode",get:function(){return this.mode===r.manual}},{key:"setButtonStyles",value:function(t,e,n){n={linkButtonBackgroundColor:"--calcite-ui-brand",linkButtonBackgroundHoverColor:"--calcite-ui-brand-hover",linkButtonTextColor:"--calcite-ui-text-inverse"}[n],t?this.element.style.setProperty(n,t):this.element.style.removeProperty(n)}},{key:"onResultsChange",value:function(t){var e=t.detail;this.hasResults=e.length>0}},{key:"componentWillLoad",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.i.loadIntlForComponent(this.element);case 2:if(this.intl=t.sent,this.setButtonStyles(this.linkButtonBackgroundColor,void 0,"linkButtonBackgroundColor"),this.setButtonStyles(this.linkButtonBackgroundHoverColor,void 0,"linkButtonBackgroundHoverColor"),this.setButtonStyles(this.linkButtonTextColor,void 0,"linkButtonTextColor"),this.context||!this.portal){t.next=11;break}return t.next=9,d.A.create({portalUrl:this.portal});case 9:e=t.sent,this.context=e.context;case 11:return t.abrupt("return",this._fetchCatalogData());case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_fetchCatalogData",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e,n,a,u,s,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._getArrayProp("catalogs")).length||this.mode!==r.dynamic){t.next=10;break}return n=this.context,a=n.session,u=n.sharingApiUrl,s={authentication:a,portal:u},t.next=6,Promise.all(e.map((function(t){return(0,g.c)(t,s)})));case 6:c=t.sent,this.catalogData=c.reduce((function(t,e){e.catalog.hasOwnProperty("groups")&&(e.catalog.group=e.catalog.groups,delete e.catalog.groups);var n={predicates:[e.catalog],operation:"AND"};return t=[].concat((0,o.Z)(t),[n])}),[]),t.next=11;break;case 10:this.catalogData=void 0;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_getArrayProps",value:function(){var t=this;return["access","catalogs","categories","groups","ids","tags","types"].reduce((function(e,n){var r=t._getArrayProp(n);return e[n]=r,e}),{})}},{key:"_getArrayProp",value:function(t){var e=this[t];return e&&!Array.isArray(e)&&(e=e.split(",").map((function(t){return t.trim()})).filter((function(t){return!!t}))),(0,o.Z)(e)}},{key:"getState",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var e,n,r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.element,t.next=3,(0,p.g)(e);case 3:return n=t.sent,r=this._getArrayProps(),o=this.baseUrl||window.location.origin,t.abrupt("return",Object.assign(Object.assign(Object.assign({},n),r),{"base-url":o}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"typeFilters",get:function(){var t=this._getArrayProp("types");if(!this._isManualMode&&t.length)return{operation:"OR",predicates:t.map((function(t){return"pageForCurrentSite"===t&&(t="page"),{type:"$".concat(t.toLowerCase())}}))}}},{key:"scope",get:function(){var t=this.catalogData,e=this.orgid,n=this.typeFilters,r=this._getArrayProps(),i=r.access,a=r.categories,u=r.groups,s=r.ids,c=r.tags,l=[];!this._isManualMode&&t&&(l=[].concat((0,o.Z)(l),(0,o.Z)((0,y.c)(t))));var h={operation:"AND",predicates:[]},f=function(t){return t.reduce((function(t,e){return!t&&e.predicates.reduce((function(t,e){return!t&&e.hasOwnProperty("group")}),!1)}),!1)};return this._isManualMode?h.predicates.push({id:s}):(a.length&&h.predicates.push({categories:a}),i.length&&(i.includes("private")&&i.push("shared"),h.predicates.push({access:i})),u.length&&(f(l)?l.forEach((function(t){t.predicates.forEach((function(t){t.hasOwnProperty("group")&&(t.group=[].concat((0,o.Z)(t.group),(0,o.Z)(u)))}))})):h.predicates.push({group:u})),this._isManualMode||!e||u.length||f(l)||h.predicates.push({orgid:e}),!this._isManualMode&&c.length&&h.predicates.push({tags:c})),h.predicates.length&&(l=(0,y.d)(h,l)),{targetEntity:"item",filters:l=(0,y.d)(n,l)}}},{key:"sortDirection",get:function(){return"title"===this.sort?"asc":"desc"}},{key:"collection",get:function(){var t=this.scope,e=this.sort,n={include:[],key:"default",label:"Default",scope:t,sortDirection:this.sortDirection,sortField:e,targetEntity:"item"};return JSON.stringify(n)==JSON.stringify(this._oldCollection)?this._oldCollection:(this._oldCollection=(0,y.c)(n),n)}},{key:"shouldQuery",get:function(){var t=this._getArrayProps(),e=t.catalogs,n=t.groups,r=t.types;return!!(this._isManualMode||r.length||n.length||e.length)}},{key:"_renderGallery",value:function(){if(this.shouldQuery){var t=this._getArrayProp("ids"),e=this._isManualMode?t:void 0;return(0,c.h)("arcgis-hub-gallery",{baseUrl:this.baseUrl,cardTitleTag:this.cardTitleTag,clickableCards:!0,collection:this.collection,context:this.context,corners:this.corners,imageType:this._imageType,layout:"grid-filled",lazy:this.lazy,limit:this._limit,linkButtonStyle:this._linkButtonStyle,linkButtonText:this._linkButtonText,newTab:this.newTab,shadow:this.shadow,showAdditionalInfo:!1,showBadges:!1,showEmptyState:this.showEmptyState,showLinkButton:this.showLinkButton,showOwner:!1,showThumbnail:!0,showType:!1,sortByIds:e,sortField:this.sort,sortOrder:this.sortDirection})}if(this.showEmptyState)return(0,c.h)("arcgis-hub-empty-state",null)}},{key:"render",value:function(){return(0,c.h)(c.H,{"data-element":"gallery-card"},(0,c.h)(f.S,{context:this,showShareUi:this.hasResults||this.showEmptyState},this._renderGallery()))}},{key:"element",get:function(){return(0,c.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{linkButtonBackgroundColor:["setButtonStyles"],linkButtonBackgroundHoverColor:["setButtonStyles"],linkButtonTextColor:["setButtonStyles"],catalogs:["_fetchCatalogData"]}}}]),t}();m.style=":host{display:block}arcgis-hub-gallery{--hub-text-decoration:none;text-align:center;--calcite-ui-text-link:var(--calcite-ui-text-2)}"},30678:function(t,e,n){function r(t){return"string"!==typeof t||"/"===(t=t.trim())[t.length-1]&&(t=t.slice(0,-1)),t}n.d(e,{c:function(){return r}})},69207:function(t,e,n){n.d(e,{a:function(){return m},b:function(){return l},c:function(){return d},d:function(){return s},e:function(){return b},f:function(){return g},g:function(){return f},h:function(){return y},i:function(){return c},j:function(){return v},s:function(){return u}});var r=n(63613),o=n(98825),i=n(77843),a=n(80046);function u(t){var e=JSON.parse(JSON.stringify(t));return e.data&&("undefined"!==typeof Blob&&t.data instanceof Blob||"ReadStream"===t.data.constructor.name?e.file=t.data:e.text=t.data,delete e.data),e}function s(t){return t.owner?Promise.resolve(t.owner):t.item&&t.item.owner?Promise.resolve(t.item.owner):t.authentication&&t.authentication.getUsername?t.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function c(t){return Array.isArray(t)&&Array.isArray(t[0])&&Array.isArray(t[1])}function l(t){return t.join(",")}var h=/[\x00-\x1F\x7F-\x9F\xA0]/g;function f(t,e){var n=p(t,e),o=(0,r._)({httpMethod:"GET"},e);return(0,i.r)(n,o)}var p=function(t,e){return("string"===typeof e?e:(0,o.g)(e))+"/content/items/"+t};function d(t,e){var n=p(t,e)+"/data",o=(0,r._)({httpMethod:"GET",params:{}},e);return o.file&&(o.params.f=null),(0,i.r)(n,o).catch((function(t){if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(t.message))throw t}))}function g(t,e){var n=p(t,e)+"/resources",o=(0,r._)({},e);return o.params=(0,r._)({num:1e3},o.params),(0,i.r)(n,o)}function y(t,e){var n=e.readAs||"blob";return w(t,"/resources/"+e.fileName,n,e)}function m(t,e){var n=p(t,e)+"/groups";return(0,i.r)(n,e)}function v(t){return s(t).then((function(e){var n=(0,o.g)(t)+"/content/users/"+e+"/items/"+t.id+"/status",u=(0,a.a)(t,["jobId","jobType"],{params:(0,r._)({},t.params)});return(0,i.r)(n,u)}))}function b(t,e){return function(t,e){var n=e||{},o=n.fileName,i=void 0===o?"iteminfo.xml":o,a=n.readAs;return w(t,"/info/"+i,void 0===a?"text":a,(0,r._)({httpMethod:"GET"},e))}(t,(0,r._)((0,r._)({},e),{fileName:"metadata/metadata.xml"}))}function w(t,e,n,o){var a=""+p(t,o)+e,u=(0,r._)({params:{}},o),s=u.rawResponse;return u.rawResponse=!0,u.params.f=null,(0,i.r)(a,u).then((function(t){return s?t:"json"!==n?t[n]():t.text().then((function(t){return JSON.parse(t.replace(h,""))}))}))}},41817:function(t,e,n){n.d(e,{a:function(){return u},g:function(){return a}});var r=n(63613),o=n(98825),i=n(77843);function a(t){return u(null,t)}function u(t,e){var n=t||"self",a=(0,o.g)(e)+"/portals/"+n,u=(0,r._)({httpMethod:"GET"},e);return(0,i.r)(a,u)}},98825:function(t,e,n){n.d(e,{g:function(){return o}});var r=n(30678);function o(t){return void 0===t&&(t={}),t.portal?(0,r.c)(t.portal):t.authentication?t.authentication.portal:"https://www.arcgis.com/sharing/rest"}},62254:function(t,e,n){function r(t,e){return e.split(".").reduce((function(t,e){return t?t[e]:void 0}),t)}n.d(e,{g:function(){return r}})},20399:function(t,e,n){n.d(e,{g:function(){return o}});var r=n(62254);function o(t,e,n){var o=(0,r.g)(t,e);return void 0!==o?o:n}},9882:function(t,e,n){n.d(e,{a:function(){return a},g:function(){return u}});var r=n(63613),o=n(98825),i=n(77843);function a(t){var e,n={httpMethod:"GET"};if("string"===typeof t)e="https://www.arcgis.com/sharing/rest/community/users/"+t;else{var a=t.username||t.authentication.username;e=(0,o.g)(t)+"/community/users/"+encodeURIComponent(a),n=(0,r._)((0,r._)({},t),n)}return(0,i.r)(e,n)}function u(t){var e=t;return t.match(/(qaext|\.mapsqa)\.arcgis.com/)?e="https://qaext.arcgis.com":t.match(/(devext|\.mapsdevext)\.arcgis.com/)?e="https://devext.arcgis.com":t.match(/(www|\.maps)\.arcgis.com/)&&(e="https://www.arcgis.com"),e}},96728:function(t,e,n){var r,o,i,a,u,s,c;n.d(e,{A:function(){return r},C:function(){return o},D:function(){return i},I:function(){return c},L:function(){return a},U:function(){return u},V:function(){return s}}),function(t){t.start="start",t.center="center",t.end="end"}(r||(r={})),function(t){t.square="square",t.round="round"}(o||(o={})),function(t){t.none="none",t.low="low",t.medium="medium",t.heavy="heavy"}(i||(i={})),function(t){t.simple="simple",t.dataViz="dataViz",t.moreInfo="moreInfo"}(a||(a={})),function(t){t.before="before",t.after="after",t.below="below"}(u||(u={})),function(t){t.none="none",t.sparkline="sparkline",t.icon="icon",t.logo="logo"}(s||(s={})),function(t){t.thumbnail="thumbnail",t.icon="icon"}(c||(c={}))},60796:function(t,e,n){n.d(e,{S:function(){return o}});var r=n(72585),o=function(t,e){var n=t.context,o=t.showShareUi;return(0,r.h)("arcgis-shareable-card",{referenceElement:n.element,shareable:n.shareable,shareableByReference:n.shareableByReference,shareableByValue:n.shareableByValue,shareableOnHover:n.shareableOnHover,showShareUi:o},e)}},29482:function(t,e,n){n.d(e,{a:function(){return c},b:function(){return l},c:function(){return s},g:function(){return u}});var r=n(29439),o=n(4942),i=n(93433),a="https://hubcdn.arcgis.com/@esri/hub-components";function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["class","data-hmr","hydrated","shareable-on-hover","style"].concat((0,i.Z)(e));return t.getAttributeNames().reduce((function(e,r){return n.includes(r)?e:Object.assign(Object.assign({},e),(0,o.Z)({},r,t.getAttribute(r)))}),{})}function s(t){return'<link rel="stylesheet" href="'.concat(a,"/").concat(t,'/dist/calcite/calcite.css">\n<script type="module" async src="').concat(a,"/").concat(t,'/dist/hub-components/hub-components.esm.js"><\/script>')}function c(t,e){var n,o=t.tagName.toLowerCase(),a=t.innerHTML,u=(n=e,Object.entries(n).reduce((function(t,e){var n=(0,r.Z)(e,2),o=n[0],a=n[1],u=o.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();return[].concat((0,i.Z)(t),["".concat(u,'="').concat(a,'"')])}),[]).join(" "));return"<".concat(o," ").concat(u,">").concat(a,"</").concat(o,">")}function l(t){var e=t.tagName.toLowerCase(),n=t.innerHTML;return"<".concat(e,' config-url="...">').concat(n,"</").concat(e,">")}},63613:function(t,e,n){n.d(e,{_:function(){return r},a:function(){return o}});var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function o(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}},25434:function(t,e,n){n.d(e,{a:function(){return u},b:function(){return l},c:function(){return o},d:function(){return c},e:function(){return p},f:function(){return d},g:function(){return i},i:function(){return f},m:function(){return s},u:function(){return h},w:function(){return a}});var r=n(62254);function o(t){var e={};if(Array.isArray(t))e=t.map(o);else if("object"===typeof t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];null!=r&&"object"===typeof r?r instanceof Date?e[n]=new Date(r.getTime()):"undefined"!==typeof Blob&&r instanceof Blob?e[n]=new Blob([r],{type:r.type}):e[n]=o(r):e[n]=r}}else e=t;return e}function i(t,e,n){return t?t.reduce((function(t,o){return(0,r.g)(o,e)===n&&(t=o),t}),null):null}function a(t,e){return t.filter((function(t){return t!==e}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(t).concat(Math.random().toString(36).substr(2,8))}function s(t,e,n){return null!==e&&void 0!==e&&((n=o(n))[t]=e),n}function c(t,e){return null!==t&&void 0!==t&&(e=o(e)).push(t),e}function l(t){return(t=(t=t.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(t,e,n){return n?n.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(t,e,n){return t.toLowerCase()}))}function h(t,e,n){return n.indexOf(t)===e}var f=function(t){return null==t},p=function(t){var e=Array.from(t);return e[0]=e[0].toUpperCase(),e.join("")};function d(t){return t.reduce((function(t,e){return t.concat(e)}),[])}}}]);
//# sourceMappingURL=54071.b743c002.chunk.js.map