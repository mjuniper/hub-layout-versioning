{"version":3,"file":"static/js/60416.e4ac1b32.chunk.js","mappings":"kRAIMA,EAAqB,WACzB,WAAYC,IAAS,gBACnBC,EAAAA,EAAAA,GAAiBC,KAAMF,GACvBE,KAAKC,gBAAiB,CACxB,CA4BI,OA5BH,oCACD,WAAe,WACRD,KAAKE,WACRF,KAAKG,UAAUH,KAAKI,KAAMJ,KAAKK,SAASC,MAAK,YAAe,IAAZC,EAAK,EAALA,MAC9C,EAAKA,MAAQA,CACf,IAAGC,SAAQ,WACT,EAAKP,gBAAiB,CACxB,GAEJ,GAAC,+BACD,WACED,KAAKS,YAAaC,EAAAA,EAAAA,GAAcV,KAAKW,QACvC,GAAC,gEACD,WAAgBP,EAAMC,GAAO,gFAGsC,OAFzDO,EAAkBP,EAAlBO,cACFC,GAASC,EAAAA,EAAAA,GAAQV,EAAK,GAAIQ,EAAcG,QAAQ,IAChDR,EAAQM,EAAOG,eAAehB,KAAKS,WAAWQ,cAAa,kBAC1D,CAAEV,MAAAA,IAAO,gDACjB,qDANA,IAMA,oBACD,WACE,OAAQW,EAAAA,EAAAA,GAAEC,EAAAA,EAAM,KAAMnB,KAAKE,WAAaF,KAAKC,gBACzCiB,EAAAA,EAAAA,GAAE,yBAA0B,CAAEE,QAAQ,EAAMC,KAAM,EAAGC,YAAY,KACjEJ,EAAAA,EAAAA,GAAE,mBAAoB,CAAEK,UAAWvB,KAAKwB,YAAaC,aAAczB,KAAK0B,aAAcC,SAAU3B,KAAK2B,SAAUpB,MAAOP,KAAKO,QACjI,GAAC,mBACD,WAAgB,OAAOqB,EAAAA,EAAAA,GAAW5B,KAAO,IAAC,qBAC1C,WAAwB,MAAO,CAC7B,KAAQ,CAAC,gBACT,QAAW,CAAC,gBACX,KAAC,EAhCqB,E,wBCA3B,SAASc,EAAQe,EAAKC,GAClB,OAAOA,EAAKC,MAAM,KAAKC,QAAO,SAAUC,EAAMC,GAE1C,OAAOD,EAAOA,EAAKC,QAAQC,CAC/B,GAAGN,EACP,C,6JCLMO,EAAmB,CACvBC,OAAQ,KACRC,QAAS,KACTC,QAAS,KACTC,MAAO,KACPC,OAAQ,KACRC,OAAQ,KACRC,MAAO,KACPC,QAAS,KACTC,WAAY,QACZC,QAAS,KACTC,SAAU,KACVC,QAAS,KACTC,OAAQ,KACRC,OAAQ,KACRC,SAAU,KACVC,UAAW,KACXC,WAAY,KACZC,QAAS,KACTC,SAAU,KACVC,OAAQ,KACRC,WAAY,KACZC,QAAS,KACTC,eAAgB,KAChBC,MAAO,KACPC,OAAQ,KACRC,iBAAkB,QAClBC,mBAAoB,QACpBC,SAAU,KACVC,QAAS,KACTC,QAAS,KACTC,UAAW,KACXC,OAAQ,KACRC,QAAS,KACTC,KAAM,KACNC,QAAS,KACTC,UAAW,KACXC,WAAY,KACZC,aAAc,QACdC,gBAAiB,QACjBC,cAAe,SAEXC,EAA6B,GAAH,eAC3BC,OAAOC,OAAO3C,IAAiB,CAClC,QACA,QACA,QACA,QACA,QACA,QACA,QACA,UAMI4C,EAAa,CAAC5C,EAAiBC,OAAQD,EAAiBc,QAqD9D,SAAS+B,EAAyBC,GAChC,IAAIC,EAAS/C,EAAiBQ,QAC9B,QAAeT,IAAX+C,EAAsB,CACxB,IAAME,EAAmBN,OAAOC,OAAO3C,GACjCiD,EAA6BD,EAAiBE,QAAO,SAACC,GAC1D,OAA6B,IAAtBA,EAAIC,QAAQ,IACrB,IACA,IAA6B,IAAzBN,EAAOM,QAAQ,KAAa,CAC9B,MAAuBN,EAAOnD,MAAM,KAAI,eAAjC0D,EAAI,KAAEC,EAAM,KAKnBR,EAAS,GAAH,OAAMO,EAAI,YAAIC,EAAOC,cAC7B,CACA,IAAoD,IAAhDN,EAA2BO,SAASV,GACtCC,EAASD,MAEN,CACH,IAAMW,EA5CZ,SAA4BX,GAC1B,IACMY,EAAmB,OAAXZ,QAA8B,IAAXA,OAAoB,EAASA,EAAOY,MAD7C,2BAEpBX,EAAS/C,EAAiBQ,QAS9B,OARc,OAAVkD,QAA4B3D,IAAV2D,IAAkC,OAAVA,QAA4B,IAAVA,OAAmB,EAASA,EAAMC,QAAU,EAG1GZ,EAASW,EAAM,GAE4D,KAAxD,OAAXZ,QAA8B,IAAXA,OAAoB,EAASA,EAAOa,SAAiBb,EAAOc,gBAAkBd,IACzGC,EAASD,GAEJC,CACT,CA+B0Bc,CAAmBf,IACQ,IAA3CE,EAAiBQ,SAASC,KAC5BV,EAASU,EAEb,CACF,CACA,OAAOV,CACT,CAYI,SAASe,EAA+BhB,GAC1C,IAAIjE,EAAe4D,EAA2BsB,MAAK,SAACC,GAAI,OAAKA,IAASlB,CAAM,IAI5E,QAHqB/C,IAAjBlB,IACFA,EAAeiE,QAEI/C,IAAjBlB,IAA6D,IAA/BA,EAAauE,QAAQ,KAAa,CAClE,MAAuBvE,EAAac,MAAM,KAAI,eAAvC0D,EAAI,KAAEC,EAAM,KACnBzE,EAAe,GAAH,OAAMwE,EAAI,YAAIC,EAAOC,cACnC,CACA,OAAO1E,CACT,CAQA,SAASoF,EAAkBC,EAAUC,GAYnC,OAXA,SAASC,EAAYC,GACnB,IAAI9F,EAQJ,OANEA,OADSwB,IAAPsE,GAAoBA,IAAOC,UAAYD,IAAOE,OACtC,KAGIF,EAAGG,QAAQN,IACNE,EAAYC,EAAGI,cAAcC,MAE3CnG,CACT,CACO6F,CAAYD,EACrB,CAMA,SAAS7F,IAAkD,IACrDqG,EAAIC,EADarG,EAAU,UAAH,6CAAG+F,SAASO,gBAElCC,EAAiBb,EAAkB,SAAU1F,GAC7CuE,EAAuF,QAA7E8B,EAA+B,QAAzBD,EAAKG,SAAmC,IAAPH,OAAgB,EAASA,EAAGtB,YAAyB,IAAPuB,EAAgBA,EAAKL,OAAOQ,UAAUC,SACrIC,EAAkBpC,EAAyBC,GAC3CjE,EAAeiF,EAA+BhB,GACpD,MAAO,CAAEA,OAAQmC,EAAiBC,IAAKtC,EAAWY,SAASyB,GAAkBpG,aAAAA,EAC/E,CACA,SAMesG,EAAmB,GAAD,+BAgBjC,aADC,OACD,0BAhBA,WAAkCC,GAAK,4FAKiE,OAJ9F1F,EAA2E0F,EAA3E1F,KAAMoD,EAAqEsC,EAArEtC,OAAQuC,EAA6DD,EAA7DC,QAAS,EAAoDD,EAApDE,gBAAAA,OAAe,IAAG,gCAA6B,EAG1EC,EAAa,CAAC,EACZC,EAAc,SAAAC,GAAO,OAAIH,EAAgBI,QAAQ,YAAahG,GAAMgG,QAAQ,WAAYD,EAAQ,oBAE7EE,MAAM,GAAD,OAAIN,EAAO,YAAIG,EAAY1C,KAAU,OAAnD,OAAR8C,EAAW,EAAH,cACKA,EAASC,OAAM,OAAlCN,EAAa,EAAH,wEAGoBI,MAAM,GAAD,OAAIN,EAAO,YAAIG,EAAYxF,EAAiBQ,WAAW,QAArE,OAAfsF,EAAkB,EAAH,eACFA,EAAgBD,OAAM,QAAzCN,EAAa,EAAH,sCAELA,GAAU,2DAClB,+BAMcQ,EAA4B,EAAD,iDAUzC,OAVyC,0BAA1C,WAA2CxH,EAAS8G,EAASC,GAAe,sFAEvD,OADbU,EAAgBzH,EAAQ0H,QAAQrC,cAAa,EAC3BtF,EAAcC,GAA9BuE,EAAM,EAANA,OAAQoC,EAAG,EAAHA,IAAG,SACGC,EAAmB,CAAEzF,KAAMsG,EAAelD,OAAAA,EAAQuC,QAAAA,EAASC,gBAAAA,IAAkB,OAKlG,OALKY,EAAU,EAAH,KAGK,SADdC,EAAY5H,EAAQ6H,aAAa,SACI,QAAdD,IACzBA,GAAoB,IAARjB,EAAe,MAAQ,OACpC,kBACM,CAAEgB,QAAAA,EAASC,UAAWA,IAAW,4CACzC,sB","sources":["../node_modules/@esri/hub-components/dist/esm/arcgis-telemetry-metric.entry.js","../node_modules/@esri/hub-components/dist/esm/get-prop-d82e4fa6.js","../node_modules/@esri/hub-components/dist/esm/index-4e91769f.js"],"sourcesContent":["import { r as registerInstance, h, H as Host, g as getElement } from './index-0d95d9d4.js';\nimport { g as getLocaleInfo } from './index-4e91769f.js';\nimport { g as getProp } from './get-prop-d82e4fa6.js';\n\nconst ArcgisTelemetryMetric = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.isTransforming = true;\n  }\n  handleChange() {\n    if (!this.isLoading) {\n      this.transform(this.data, this.options).then(({ value }) => {\n        this.value = value;\n      }).finally(() => {\n        this.isTransforming = false;\n      });\n    }\n  }\n  componentWillLoad() {\n    this.localeInfo = getLocaleInfo(this.element);\n  }\n  async transform(data, options) {\n    const { requestParams } = options;\n    const metric = getProp(data[0], requestParams.metrics[0]);\n    const value = metric.toLocaleString(this.localeInfo.formatLocale);\n    return { value };\n  }\n  render() {\n    return (h(Host, null, this.isLoading || this.isTransforming\n      ? h(\"arcgis-skeleton-loader\", { active: true, rows: 4, showFooter: true })\n      : h(\"arcgis-stat-card\", { cardTitle: this.reportTitle, popoverTitle: this.titleTooltip, subtitle: this.subtitle, value: this.value })));\n  }\n  get element() { return getElement(this); }\n  static get watchers() { return {\n    \"data\": [\"handleChange\"],\n    \"options\": [\"handleChange\"]\n  }; }\n};\n\nexport { ArcgisTelemetryMetric as arcgis_telemetry_metric };\n","/**\n * Get a property out of a deeply nested object\n * Does not handle anything but nested object graph\n */\nfunction getProp(obj, path) {\n    return path.split(\".\").reduce(function (prev, curr) {\n        /* istanbul ignore next no need to test undefined scenario */\n        return prev ? prev[curr] : undefined;\n    }, obj);\n}\n\nexport { getProp as g };\n","/**\n * Locale list (in alphabetical order) adopted from [JSAPI](https://devtopia.esri.com/WebGIS/arcgis-js-api/tree/master/esri/nls)\n * Full forms adopted from [1](https://www.science.co.il/language/Locale-codes.php) and [2](https://saimana.com/list-of-country-locale-code/)\n */\nconst SupportedLocales = {\n  Arabic: \"ar\",\n  Bosnian: \"bs\",\n  Catalan: \"ca\",\n  Czech: \"cs\",\n  Danish: \"da\",\n  German: \"de\",\n  Greek: \"el\",\n  English: \"en\",\n  EnglishUSA: \"en-US\",\n  Spanish: \"es\",\n  Estonian: \"et\",\n  Finnish: \"fi\",\n  French: \"fr\",\n  Hebrew: \"he\",\n  Croatian: \"hr\",\n  Hungarian: \"hu\",\n  Indonesian: \"id\",\n  Italian: \"it\",\n  Japanese: \"ja\",\n  Korean: \"ko\",\n  Lithuanian: \"lt\",\n  Latvian: \"lv\",\n  NorwegianBokml: \"nb\",\n  Dutch: \"nl\",\n  Polish: \"pl\",\n  PortugueseBrazil: \"pt-BR\",\n  PortuguesePortugal: \"pt-PT\",\n  Romanian: \"ro\",\n  Russian: \"ru\",\n  Serbian: \"sr\",\n  Slovenian: \"sl\",\n  Slovak: \"sk\",\n  Swedish: \"sv\",\n  Thai: \"th\",\n  Turkish: \"tr\",\n  Ukrainian: \"uk\",\n  Vietnamese: \"vi\",\n  ChineseChina: \"zh-CN\",\n  ChineseHongKong: \"zh-HK\",\n  ChineseTaiwan: \"zh-TW\"\n};\nconst SupportedLocalesForFormats = [\n  ...Object.values(SupportedLocales),\n  \"en-AU\",\n  \"en-GB\",\n  \"es-ES\",\n  \"es-MX\",\n  \"de-CH\",\n  \"de-DE\",\n  \"it-CH\",\n  \"it-IT\"\n];\n/**\n * List of supported locales that are RTL\n * Adopted from https://devtopia.esri.com/WebGIS/arcgis-js-api/blob/4master/esri/intl/locale.ts\n */\nconst RTLLocales = [SupportedLocales.Arabic, SupportedLocales.Hebrew];\n\n/*\nhttps://medium.com/@Cookie_Cookson/hi-lisa-backer-d0ebcdc2ff3e\nhttps://dockyard.com/blog/2019/04/16/lazy-loading-custom-assets-with-stenciljs-part-1\nuses the loaded script tag of the component to get the resource url\nexample:\n<script type=\"module\" src=\"http://127.0.0.1:5500/packages/arcgis-charts-config-components/dist/arcgis-charts-config-components/arcgis-charts-config-components.esm.js\"\ndata-stencil-namespace=\"arcgis-charts-config-components\"></script>\n*/\n/* Not working\nfunction getPublicPath(componentName: string): string {\n  const script: HTMLScriptElement = document.querySelector(\n    `script[data-stencil-namespace='${componentName}']`\n  ) as HTMLScriptElement;\n  return script?.getAttribute(\"data-resources-url\") ?? \"\";\n}\n*/\n/**\n * Extracts language portion of locale code\n * Reference: https://github.com/meikidd/locale-code/blob/master/src/index.js#L8\n * Examples:\n * - en-US => en\n * - zh-CN => zh\n * - zh-cn => zh\n * - en => en\n * @param locale\n */\nfunction extractLanguageTag(locale) {\n  const localeCodeRegex = /^([a-z]{2})-([A-Z]{2})$/;\n  const match = locale === null || locale === void 0 ? void 0 : locale.match(localeCodeRegex);\n  let output = SupportedLocales.English;\n  if (match !== null && match !== undefined && (match === null || match === void 0 ? void 0 : match.length) > 1) {\n    // TODO Remove next Eslint ignore comment.\n    // eslint-disable-next-line prefer-destructuring\n    output = match[1];\n  }\n  else if ((locale === null || locale === void 0 ? void 0 : locale.length) === 2 && locale.toLowerCase() === locale) {\n    output = locale;\n  }\n  return output;\n}\n/**\n * Converts a given locale into a supported locale.\n * In case of an unsupported locale, \"en\" is returned.\n * Examples:\n * - en-US => en-US\n * - zh-CN => zh-CN\n * - en => en\n * - es-AR => es\n * - en-UK => en\n * @param locale\n */\nfunction convertToSupportedLocale(locale) {\n  let output = SupportedLocales.English;\n  if (locale !== undefined) {\n    const supportedLocales = Object.values(SupportedLocales);\n    const hyphenatedSupportedLocales = supportedLocales.filter((ele) => {\n      return ele.indexOf(\"-\") !== -1;\n    });\n    if (locale.indexOf(\"-\") !== -1) {\n      const [lang, region] = locale.split(\"-\");\n      // To make sure it is valid locale code of form `zh-CN`.\n      // In ArcGIS Online user locale codes come with region in lower case `zh-cn`.\n      // TODO Remove next Eslint ignore comment.\n      // eslint-disable-next-line no-param-reassign\n      locale = `${lang}-${region.toUpperCase()}`;\n    }\n    if (hyphenatedSupportedLocales.includes(locale) === true) {\n      output = locale;\n    }\n    else {\n      const languageTag = extractLanguageTag(locale);\n      if (supportedLocales.includes(languageTag) === true) {\n        output = languageTag;\n      }\n    }\n  }\n  return output;\n}\n/**\n * Converts a given locale into a supported format locale.\n * In case of an unsupported locale, \"en\" is returned.\n * Examples:\n * - en-AU => en-AU\n * - zh-CN => zh-CN\n * - en => en\n * - en-GB => en-GB\n * - it-CH => it-CH\n * - it-ch => it-CH\n * @param locale\n */ function convertToSupportedFormatLocale(locale) {\n  let formatLocale = SupportedLocalesForFormats.find((item) => item === locale);\n  if (formatLocale === undefined) {\n    formatLocale = locale;\n  }\n  if (formatLocale !== undefined && formatLocale.indexOf(\"-\") !== -1) {\n    const [lang, region] = formatLocale.split(\"-\");\n    formatLocale = `${lang}-${region.toUpperCase()}`;\n  }\n  return formatLocale;\n}\n/**\n * Helper function to find the closest element crossing multiple (parent) shadowDOM boundaries.\n * The implementation is based on [this](https://stackoverflow.com/questions/54520554/custom-element-getrootnode-closest-function-crossing-multiple-parent-shadowd) solution.\n *\n * @param {string} selector\n * @param {Element} base\n */\nfunction getClosestElement(selector, base) {\n  function closestFrom(el) {\n    let element;\n    if (el === undefined || el === document || el === window) {\n      element = null;\n    }\n    else {\n      const found = el.closest(selector);\n      element = found || closestFrom(el.getRootNode().host);\n    }\n    return element;\n  }\n  return closestFrom(base);\n}\n/**\n * Finds the locale of the closest element to the given element.\n * If no element given, and converts `window.navigator.language` into a supported locale.\n * @param element\n */\nfunction getLocaleInfo(element = document.documentElement) {\n  var _a, _b;\n  const closestElement = getClosestElement(\"[lang]\", element);\n  const locale = (_b = (_a = closestElement) === null || _a === void 0 ? void 0 : _a.lang) !== null && _b !== void 0 ? _b : window.navigator.language;\n  const convertedLocale = convertToSupportedLocale(locale);\n  const formatLocale = convertToSupportedFormatLocale(locale);\n  return { locale: convertedLocale, rtl: RTLLocales.includes(convertedLocale), formatLocale };\n}\n/**\n * Fetches the locale file of the given component; defaults to `\"en\"` locale\n * @param componentName\n * @param locale\n * @param resourcesUrl\n */\nasync function fetchLocaleStrings(props) {\n  const { path, locale, baseURL, fileNamePattern = '{tagName}.t9n.{locale}.json' } = props;\n  // Using the getPublicPath method that leverages `data-resources-url` currently this is not working.\n  // const rUrl = getPublicPath(componentName) || resourcesUrl;\n  let localeData = {};\n  const getFileName = _locale => fileNamePattern.replace('{tagName}', path).replace('{locale}', _locale);\n  try {\n    const response = await fetch(`${baseURL}/${getFileName(locale)}`);\n    localeData = await response.json();\n  }\n  catch (e) {\n    const defaultResponse = await fetch(`${baseURL}/${getFileName(SupportedLocales.English)}`);\n    localeData = await defaultResponse.json();\n  }\n  return localeData;\n}\n/**\n * Fetches locale string for the given component\n * @param element\n * @param baseURL\n */\nasync function fetchComponentLocaleStrings(element, baseURL, fileNamePattern) {\n  const componentName = element.tagName.toLowerCase();\n  const { locale, rtl } = getLocaleInfo(element);\n  const strings = await fetchLocaleStrings({ path: componentName, locale, baseURL, fileNamePattern });\n  // Element's \"dir\" attribute takes precedence over the rtl boolean inferred from language\n  let direction = element.getAttribute(\"dir\");\n  if (direction !== \"ltr\" && direction !== \"rtl\") {\n    direction = rtl === true ? \"rtl\" : \"ltr\";\n  }\n  return { strings, direction: direction };\n}\n\nexport { fetchComponentLocaleStrings as f, getLocaleInfo as g };\n"],"names":["ArcgisTelemetryMetric","hostRef","registerInstance","this","isTransforming","isLoading","transform","data","options","then","value","finally","localeInfo","getLocaleInfo","element","requestParams","metric","getProp","metrics","toLocaleString","formatLocale","h","Host","active","rows","showFooter","cardTitle","reportTitle","popoverTitle","titleTooltip","subtitle","getElement","obj","path","split","reduce","prev","curr","undefined","SupportedLocales","Arabic","Bosnian","Catalan","Czech","Danish","German","Greek","English","EnglishUSA","Spanish","Estonian","Finnish","French","Hebrew","Croatian","Hungarian","Indonesian","Italian","Japanese","Korean","Lithuanian","Latvian","NorwegianBokml","Dutch","Polish","PortugueseBrazil","PortuguesePortugal","Romanian","Russian","Serbian","Slovenian","Slovak","Swedish","Thai","Turkish","Ukrainian","Vietnamese","ChineseChina","ChineseHongKong","ChineseTaiwan","SupportedLocalesForFormats","Object","values","RTLLocales","convertToSupportedLocale","locale","output","supportedLocales","hyphenatedSupportedLocales","filter","ele","indexOf","lang","region","toUpperCase","includes","languageTag","match","length","toLowerCase","extractLanguageTag","convertToSupportedFormatLocale","find","item","getClosestElement","selector","base","closestFrom","el","document","window","closest","getRootNode","host","_a","_b","documentElement","closestElement","navigator","language","convertedLocale","rtl","fetchLocaleStrings","props","baseURL","fileNamePattern","localeData","getFileName","_locale","replace","fetch","response","json","defaultResponse","fetchComponentLocaleStrings","componentName","tagName","strings","direction","getAttribute"],"sourceRoot":""}