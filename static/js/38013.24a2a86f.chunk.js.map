{"version":3,"file":"static/js/38013.24a2a86f.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/geometry/support/scaleUtils.js","../node_modules/@arcgis/core/layers/support/ExportImageParameters.js","../node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/HighlightGraphicContainer.js","../node_modules/@arcgis/core/views/layers/MapImageLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t,inchesPerMeter as n}from\"../../core/unitUtils.js\";const e=96;function i(i,r){const o=r||i.extent,c=i.width,d=t(o&&o.spatialReference);return o&&c?o.width/c*d*n*e:0}function r(i,r){return i/(t(r)*n*e)}function o(t){return t/(n*e)}function c(i,r){return i*(t(r)*n*e)}function d(t,n){const e=t.extent,i=t.width-(t.padding?t.padding.left+t.padding.right:0),o=r(n,e.spatialReference);return e.clone().expand(o*i/e.width)}export{d as getExtentForScale,r as getResolutionForScale,o as getResolutionInMetersForScale,i as getScale,c as getScaleForResolution};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{HandleOwnerMixin as s}from\"../../core/HandleOwner.js\";import{isSome as t}from\"../../core/maybe.js\";import{sqlAnd as i}from\"../../core/sql.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as l}from\"./commonProperties.js\";import{getLayerFloorFilterClause as n}from\"./floorFilterUtils.js\";import{isExportDynamic as y}from\"./sublayerUtils.js\";const m={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let c=class extends(s(r)){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=n(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&y(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.handles.remove(\"layer\"),e&&this.handles.add([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(m[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=!!this.floors?.length,r=this.visibleSublayers.filter((r=>null!=r.definitionExpression||e&&null!=r.floorInfo));return r.length?JSON.stringify(r.reduce(((e,r)=>{const s=n(this.floors,r),o=i(s,r.definitionExpression);return t(o)&&(e[r.id]=o),e}),{})):null}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\"),this.commitProperty(\"timeExtent\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=r=>{const t=this.scale,i=0===t,o=0===r.minScale||t<=r.minScale,a=0===r.maxScale||t>=r.maxScale;r.visible&&(i||o&&a)&&(r.sublayers?r.sublayers.forEach(s):e.unshift(r))};r&&r.forEach(s);const t=this._get(\"visibleSublayers\");return!t||t.length!==e.length||t.some(((r,s)=>e[s]!==r))?e:t}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e([o({readOnly:!0})],c.prototype,\"dynamicLayers\",null),e([o()],c.prototype,\"floors\",void 0),e([o({readOnly:!0})],c.prototype,\"hasDynamicLayers\",null),e([o()],c.prototype,\"layer\",null),e([o({readOnly:!0})],c.prototype,\"layers\",null),e([o({readOnly:!0})],c.prototype,\"layerDefs\",null),e([o({type:Number})],c.prototype,\"scale\",void 0),e([o(l)],c.prototype,\"timeExtent\",void 0),e([o({readOnly:!0})],c.prototype,\"version\",null),e([o({readOnly:!0})],c.prototype,\"visibleSublayers\",null),c=e([a(\"esri.layers.mixins.ExportImageParameters\")],c);export{c as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as h}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import g from\"./graphics/GraphicsView2D.js\";import n from\"./graphics/HighlightGraphicContainer.js\";import l from\"./support/ExportStrategy.js\";import m from\"../../layers/LayerView.js\";import c from\"../../layers/MapImageLayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import{MapServiceLayerViewHelper as u}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as y}from\"../../support/drapedUtils.js\";let f=class extends(c(d(p(m)))){constructor(){super(...arguments),this._highlightGraphics=new h,this._updateHash=\"\"}fetchPopupFeatures(t,e){return this._popupHighlightHelper.fetchPopupFeatures(t,e)}update(t){const r=`${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;this._updateHash!==r&&(this._updateHash=r,this.strategy.update(t).catch((t=>{i(t)||e.getLogger(this.declaredClass).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}attach(){const{imageMaxWidth:t,imageMaxHeight:e,version:i}=this.layer,s=i>=10.3,a=i>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer),this._highlightView=new g({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new u({createFetchPopupFeaturesQueryGeometry:(t,e)=>y(t,e,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(t,e)=>{this._highlightView.graphicUpdateHandler({graphic:t,property:e})},layerView:this,updatingHandles:this.updatingHandles}),this.strategy=new l({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:t,imageMaxHeight:e,imageRotationSupported:s,imageNormalizationSupported:a,hidpi:!0}),this.addAttachHandles(r((()=>this.exportImageVersion),(()=>this.requestUpdate()))),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(t){return this.layer.serviceSupportsSpatialReference(t)}async doRefresh(){this._updateHash=\"\",this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(t,e,i,r){return this.layer.fetchImage(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}fetchImageBitmap(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}highlight(t){return this._popupHighlightHelper.highlight(t)}};t([s()],f.prototype,\"strategy\",void 0),t([s()],f.prototype,\"updating\",void 0),f=t([a(\"esri.views.2d.layers.MapImageLayerView2D\")],f);const w=f;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/Error.js\";import\"../../../../core/has.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WGLDrawPhase as s}from\"../../engine/webgl/enums.js\";import t from\"./BaseGraphicContainer.js\";import{ClearBufferBit as o}from\"../../../webgl/enums.js\";let i=class extends t{doRender(e){e.drawPhase===s.HIGHLIGHT&&super.doRender(e)}renderChildren(e){if(this.attributeView.update(),!this.children.some((e=>e.hasData)))return;this.attributeView.bindTextures(e.context),super.renderChildren(e);const{painter:r}=e,s=r.effects.highlight;s.bind(e),e.context.setColorMask(!0,!0,!0,!0),e.context.clear(o.COLOR_BUFFER_BIT),this._renderChildren(e,s.defines.concat([\"highlightAll\"])),s.draw(e),s.unbind()}};i=e([r(\"esri.views.2d.layers.support.HighlightGraphicContainer\")],i);const n=i;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as o}from\"../../layers/support/commonProperties.js\";import{ExportImageParameters as s}from\"../../layers/support/ExportImageParameters.js\";const p=p=>{let a=class extends p{initialize(){this.exportImageParameters=new s({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"floors\"),(this._get(\"exportImageVersion\")||0)+1}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([r()],a.prototype,\"exportImageParameters\",void 0),e([r({readOnly:!0})],a.prototype,\"floors\",null),e([r({readOnly:!0})],a.prototype,\"exportImageVersion\",null),e([r()],a.prototype,\"layer\",void 0),e([r()],a.prototype,\"suspended\",void 0),e([r(o)],a.prototype,\"timeExtent\",void 0),a=e([t(\"esri.views.layers.MapImageLayerView\")],a),a};export{p as default};\n"],"names":["i","r","o","extent","c","width","d","t","spatialReference","n","e","padding","left","right","clone","expand","m","visible","definitionExpression","labelingInfo","labelsVisible","opacity","minScale","maxScale","renderer","source","floors","scale","this","layer","get","hasDynamicLayers","visibleSublayers","map","toExportImageJSON","length","JSON","stringify","y","serviceSublayers","gdbVersion","set","_get","_set","handles","remove","add","allSublayers","on","notifyChange","propertyName","id","join","filter","floorInfo","reduce","s","commitProperty","sublayers","forEach","a","unshift","some","dpi","format","imageFormat","transparent","imageTransparency","dynamicLayers","layers","layerDefs","readOnly","prototype","type","Number","l","f","arguments","_highlightGraphics","h","_updateHash","_popupHighlightHelper","fetchPopupFeatures","exportImageVersion","state","pixelRatio","stationary","strategy","update","catch","declaredClass","error","updateHighlightedFeatures","resolution","_highlightView","processUpdate","imageMaxWidth","imageMaxHeight","version","_bitmapContainer","container","addChild","g","view","graphics","requestUpdateCallback","requestUpdate","featuresTilingScheme","defaultPointSymbolEnabled","u","createFetchPopupFeaturesQueryGeometry","highlightGraphics","highlightGraphicUpdated","graphicUpdateHandler","graphic","property","layerView","updatingHandles","fetchSource","fetchImageBitmap","bind","imageRotationSupported","imageNormalizationSupported","hidpi","addAttachHandles","destroy","removeAllChildren","serviceSupportsSpatialReference","updating","updateRequested","fetchImage","timeExtent","highlight","p","w","drawPhase","attributeView","children","hasData","bindTextures","context","painter","effects","setColorMask","clear","_renderChildren","defines","concat","draw","unbind","exportImageParameters","isEmpty"],"sourceRoot":""}