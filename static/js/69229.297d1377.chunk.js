"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[69229],{32500:function(e,t,r){r.d(t,{I:function(){return S},b:function(){return Z}});var n,a,i,o=r(30168),s=r(92026),u=r(6394),l=r(37081),c=r(33280),h=r(94951),d=r(15226),p=r(26461),f=r(116),v=r(41012),g=r(82999),y=r(58406),m=r(98634),_=r(64201),x=r(19253),w=r(25920),b=r(4760);function Z(e){var t=new _.kG,r=t.vertex,Z=t.fragment;return(0,v.Sv)(r,e),t.include(h.w,e),t.attributes.add(b.T.POSITION,"vec3"),t.attributes.add(b.T.UV0,"vec2"),t.varyings.add("vpos","vec3"),e.hasMultipassTerrain&&t.varyings.add("depth","float"),r.uniforms.add(new g.A("textureCoordinateScaleFactor",(function(e){return(0,s.pC)(e.texture)&&(0,s.pC)(e.texture.descriptor.textureCoordinateScaleFactor)?e.texture.descriptor.textureCoordinateScaleFactor:u.O}))),r.code.add((0,m.H)(n||(n=(0,o.Z)(["\n    void main(void) {\n      vpos = position;\n      ","\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  "])),e.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":"")),t.include(c.f5,e),t.include(d.l,e),Z.uniforms.add([new x.A("tex",(function(e){return e.texture})),new y.p("opacity",(function(e){return e.opacity}))]),t.varyings.add("vTexCoord","vec2"),e.output===l.H.Alpha?Z.code.add((0,m.H)(a||(a=(0,o.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ",") {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    "])),e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":"",m.H.float(p.F))):(Z.include(f.Y),Z.code.add((0,m.H)(i||(i=(0,o.Z)(["\n    void main() {\n      discardBySlice(vpos);\n      ","\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ",") {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ","\n    }\n    "])),e.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":"",m.H.float(p.F),e.transparencyPassType===w.A.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""))),t}var S=Object.freeze(Object.defineProperty({__proto__:null,build:Z},Symbol.toStringTag,{value:"Module"}))},69229:function(e,t,r){r.d(t,{Z:function(){return J}});var n=r(1413),a=r(37762),i=r(74165),o=r(15861),s=r(15671),u=r(43144),l=r(11752),c=r(61120),h=r(60136),d=r(92572),p=r(27366),f=r(14921),v=r(42537),g=r(32718),y=r(92026),m=r(66978),_=r(94172),x=r(49861),w=(r(25243),r(63780),r(69912)),b=r(53866),Z=r(65156),S=r(26279),C=r(42069),k=r(91526),R=r(88699),T=r(73840),A=r(40779),P=r(70619),E=r(4760);function I(e,t){return(0,P.g7)(e,[[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function O(e,t,r){if(!(0,Z.kK)(t,r))return I(e,r);for(var n=[t[1]-r[1],Math.min(t[3],r[3])-Math.max(t[1],r[1]),r[3]-t[3],123456],a=[t[0]-r[0],Math.min(t[2],r[2])-Math.max(t[0],r[0]),r[2]-t[2],123456],i=r[2]-r[0],o=r[3]-r[1],s=a[0]>0&&a[2]>0?3:2,u=n[0]>0&&n[2]>0?3:2,l=(u+1)*(s+1),c=(0,R.bg)(3*l),h=(0,T.xx)(2*l),d=new Array(6*(u*s-1)),p=0,f=0,v=0,g=0,y=0,m=0;m<4;m++){var _=n[m];if(!(_<=0)){for(var x=0,w=0;w<4;w++){var b=a[w];b<=0||(c[f++]=r[0]+x,c[f++]=r[1]+p,c[f++]=-1,h[v++]=x/i,h[v++]=p/o,w<3&&m<3&&(1!==w||1!==m)&&(d[y++]=g,d[y++]=g+1,d[y++]=g+s+1,d[y++]=g+1,d[y++]=g+s+2,d[y++]=g+s+1),g++,x+=b)}p+=_}}var S=new Array(d.length);return new A.Z(e,[[E.T.POSITION,new k.a(c,3,!0)],[E.T.NORMAL,new k.a(M,3,!0)],[E.T.UV0,new k.a(h,2,!0)]],[[E.T.POSITION,d],[E.T.NORMAL,S],[E.T.UV0,d]])}var M=[0,0,1],D=r(61712),H=r(94463),L=r(54134),N=r(78289),F=r(39077),G=r(1487),U=r(78485),z=r(66156),j=r(67581),W=r(13107),V=r(69787),B=r(8548),q=function(e){(0,h.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).drapeSourceType=S.Lw.RasterImage,e.updatePolicy=U.j.SYNC,e.fullExtentInLocalViewSpatialReference=null,e.maximumDataResolution=null,e._images=new Array,e._extents=new Array,e._overlays=new Array,e.updateWhenStationary=!0,e._drapeSourceRenderer=null,e.refreshDebounced=(0,m.Ds)(function(){var t=(0,o.Z)((0,i.Z)().mark((function t(r){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.destroyed,t.t0){t.next=4;break}return t.next=4,e._doRefresh(r).catch((function(t){(0,m.D_)(t)||g.Z.getLogger(e.declaredClass).error(t)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),2e3),e}return(0,u.Z)(r,[{key:"initialize",value:function(){var e=this;this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.handles.add((0,v.kB)((function(){return e.view.basemapTerrain.overlayManager.unregisterDrapeSource(e)}))),this.addResolvingPromise((0,D.E)(this).then((function(t){return e._set("fullExtentInLocalViewSpatialReference",t)}))),this.updatingHandles.add((function(){return e.suspended}),(function(){return e._suspendedChangeHandler()})),this.handles.add(this.view.resourceController.scheduler.registerIdleStateCallbacks((function(){e._isScaleRangeActive()&&e.notifyChange("suspended")}),(function(){}))),this._isScaleRangeLayer()&&this.updatingHandles.add((function(){return e.layer.effectiveScaleRange}),(function(){return e.notifyChange("suspended")}))}},{key:"destroy",value:function(){this.clear()}},{key:"setDrapingExtent",value:function(e,t){var r=this;this._spatialReference=t,e.forEach((function(e){r._overlays[e.index]=e,r._updateImageExtent(e)}))}},{key:"_updateImageExtent",value:function(e){var t=this,r=this._clippedExtent(e.extent,K);if(!(0,y.Wi)(r)){var n=function(e,t,r){var n=(0,Z.bf)(e)/(0,Z.Cb)(e),a={width:r,height:r};return n>1.0001?a.height=r/n:n<.9999&&(a.width=r*n),a.width=Math.round(a.width/((0,Z.bf)(e)/(0,Z.bf)(t))),a.height=Math.round(a.height/((0,Z.Cb)(e)/(0,Z.Cb)(t))),a}(e.extent,r,e.resolution),a=e.pixelRatio*this.view.state.pixelRatio,i=this.layer;if("imageMaxWidth"in i&&null!=i.imageMaxWidth||"imageMaxHeight"in i&&null!=i.imageMaxHeight){var o=i.imageMaxWidth,s=i.imageMaxHeight;if(n.width>o){var u=o/n.width;n.height=Math.floor(n.height*u),n.width=o,a*=u}if(n.height>s){var l=s/n.height;n.width=Math.floor(n.width*l),n.height=s,a*=l}}var c=this._extents[e.index];c&&(0,Z.fS)(c.extent,r)&&this._imageSizeEquals(r,c.imageSize,n)||(this._extents[e.index]={extent:(0,Z.Ue)(r),imageSize:n,pixelRatio:a},this.suspended||this._fetch(e.index).catch((function(e){(0,m.D_)(e)||g.Z.getLogger(t.declaredClass).error(e)})))}}},{key:"clear",value:function(){for(var e=0;e<this._images.length;e++)this._clearImage(e)}},{key:"doRefresh",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._doRefresh());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_doRefresh",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:for(r=[],n=0;n<this._extents.length;n++)this._extents[n]&&r.push(this._fetch(n,t));return e.next=6,(0,m.as)(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){if(!(0,l.Z)((0,c.Z)(r.prototype),"canResume",this).call(this))return!1;var e=this.layer;if(this._isScaleRangeActive()){var t=e.effectiveScaleRange,n=t.minScale,a=t.maxScale,i=this.view.scale;if(i<a||n>0&&i>n)return!1}return!0}},{key:"isUpdating",value:function(){return this._images.some((function(e){return!!e.loadingPromise}))}},{key:"processResult",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r instanceof HTMLImageElement||r instanceof HTMLCanvasElement)&&(t.image=r);case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"findExtentInfoAt",value:function(e){var t,r=(0,a.Z)(this._extents);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.extent;if(new b.Z(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return n}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"getFetchOptions",value:function(){}},{key:"redraw",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.Ed)(this._images,function(){var e=(0,o.Z)((0,i.Z)().mark((function e(a,o){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,!e.t0){e.next=6;break}return e.next=4,t(a,r);case 4:return e.next=6,n._createStageObjects(o,a.image,r);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_imageSizeEquals",value:function(e,t,r){if(!this.maximumDataResolution)return!1;var n=(0,Z.bf)(e)/this.maximumDataResolution.x,a=(0,Z.Cb)(e)/this.maximumDataResolution.y,i=n/t.width,o=a/t.height,s=n/r.width,u=a/r.height,l=Math.abs(i-s),c=Math.abs(o-u),h=H.Z.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return l<=h&&c<=h}},{key:"_fetch",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var a,s,u,l,c,h,d,p=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.suspended){e.next=2;break}return e.abrupt("return");case 2:if(a=this._extents[t],s=a.extent,this._images[t]||(this._images[t]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,Z.Ue)(s)}),(u=this._images[t]).loadingAbortController=(0,y.IM)(u.loadingAbortController),0!==(l=new b.Z(s[0],s[1],s[2],s[3],this._spatialReference)).width&&0!==l.height){e.next=9;break}return e.abrupt("return",void this._clearImage(t));case 9:return c=new AbortController,u.loadingAbortController=c,(0,m.fu)(r,(function(){return c.abort()})),h=c.signal,d=this._waitFetchReady(h).then((0,o.Z)((0,i.Z)().mark((function e(){var r,o,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,n.Z)((0,n.Z)({requestAsImageElement:!0,pixelRatio:p._overlays[t].pixelRatio},p.getFetchOptions()),{},{signal:h}),o=a.imageSize,s=o.height,u=o.width,e.abrupt("return",p.layer.fetchImage(l,u,s,r));case 2:case"end":return e.stop()}}),e)})))).then((function(e){if((0,m.Hc)(h))throw g.Z.getLogger(p.declaredClass).warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,m.zE)();return p.processResult(u,e)})).then((function(){(0,Z.JG)(u.renderExtent,s)})).finally((function(){d===u.loadingPromise&&(u.loadingPromise=null,u.loadingAbortController=null)})),u.loadingPromise=d,this.notifyChange("updating"),e.next=16,d.then((0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.aborted){e.next=2;break}throw(0,m.zE)();case 2:return e.next=4,p._createStageObjects(t,u.image,h);case 4:p.notifyChange("updating");case 5:case"end":return e.stop()}}),e)})))).catch((function(e){throw e&&!(0,m.D_)(e)&&g.Z.getLogger(p.declaredClass).error(e),p.notifyChange("updating"),e}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_clearImage",value:function(e){var t=this._images[e];if(t){(0,y.pC)(t.renderGeometry)&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],N.T.UPDATE),t.renderGeometry=null);var r=this.view._stage;r.remove(t.texture),t.texture=null,r.remove(t.material),t.material=null,t.loadingAbortController=(0,y.IM)(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}},{key:"_createStageObjects",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var a,o,s,u,l,c,h=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.view._stage,o=this._images[t],s=function(){a.remove(o.texture),o.texture=null,(0,y.pC)(o.renderGeometry)&&(h._drapeSourceRenderer.removeGeometries([o.renderGeometry],N.T.UPDATE),o.renderGeometry=null)},!r){e.next=23;break}return u=new G.x(r,{width:r.width,height:r.height,preMultiplyAlpha:!0,wrap:{s:B.e8.CLAMP_TO_EDGE,t:B.e8.CLAMP_TO_EDGE}}),e.next=5,(0,f.q6)(this._images[t===L.fu.INNER?L.fu.OUTER:L.fu.INNER].loadingPromise);case 5:return(0,m.k_)(n),s(),a.add(u),e.next=10,a.loadImmediate(u);case 10:if(o.texture=u,(0,y.Wi)(o.material)?(o.material=new z.j({transparent:!0,textureId:u.id}),a.add(o.material)):o.material.setParameters({textureId:u.id}),t!==L.fu.INNER){e.next=16;break}l=I(o.material,o.renderExtent),e.next=20;break;case 16:if(c=this._images[0].renderExtent){e.next=19;break}return e.abrupt("return",void s());case 19:l=O(o.material,c,o.renderExtent);case 20:o.renderGeometry=new F.z(l),o.renderGeometry.localOrigin=this._overlays[t].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([o.renderGeometry],N.T.UPDATE),e.next=24;break;case 23:s(),a.remove(o.material),o.material=null;case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_isScaleRangeLayer",value:function(){return"effectiveScaleRange"in this.layer}},{key:"_isScaleRangeActive",value:function(){var e=this.layer;if(!this._isScaleRangeLayer())return!1;var t=e.effectiveScaleRange,r=t.minScale,n=t.maxScale;return(0,V.Av)(r,n)}},{key:"_clippedExtent",value:function(e,t){if("local"!==this.view.viewingMode)return(0,Z.JG)(t,e);var r=this.view.basemapTerrain;return r.ready?(0,Z.jV)(e,r.extent,t):(0,Z.JG)(t,e)}},{key:"_suspendedChangeHandler",value:function(){this.suspended?this.clear():this.refreshDebounced()}},{key:"_waitFetchReady",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.N1)((function(){return r.view.stationary}),t);case 2:(0,m.k_)(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,W.Z)((0,C.A)(j.Z)));(0,p._)([(0,x.Cb)()],q.prototype,"layer",void 0),(0,p._)([(0,x.Cb)()],q.prototype,"suspended",void 0),(0,p._)([(0,x.Cb)({readOnly:!0})],q.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,p._)([(0,x.Cb)()],q.prototype,"updating",void 0);var J=q=(0,p._)([(0,w.j)("esri.views.3d.layers.DynamicLayerView3D")],q),K=(0,Z.Ue)()},42069:function(e,t,r){r.d(t,{A:function(){return m}});var n=r(74165),a=r(15861),i=r(15671),o=r(43144),s=r(11752),u=r(61120),l=r(60136),c=r(92572),h=r(27366),d=r(42537),p=r(66978),f=r(94172),v=r(49861),g=(r(25243),r(63780),r(69912)),y=r(5354),m=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).slicePlaneEnabled=!1,e.supportsHeightUnitConversion=!1,e}return(0,o.Z)(r,[{key:"postscript",value:function(e){(0,s.Z)((0,u.Z)(r.prototype),"postscript",this).call(this,e),(0,y.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}},{key:"_validateHeightModelInfo",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,i=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,r=t.signal,this.handles.add((0,d.kB)((function(){return t.abort()}))),e.next=4,(0,f.N1)((function(){var e;return null===(e=i.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady}),r);case 4:if((0,p.k_)(r),!(a=(0,y.Wt)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion))){e.next=8;break}throw a;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"canResume",value:function(){var e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,s.Z)((0,u.Z)(r.prototype),"canResume",this).call(this)&&(!e||!e.minScale||!e.maxScale||e.minScale>=e.maxScale)}},{key:"getSuspendInfo",value:function(){var e=(0,s.Z)((0,u.Z)(r.prototype),"getSuspendInfo",this).call(this),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}}]),r}(e);return(0,h._)([(0,v.Cb)()],t.prototype,"view",void 0),(0,h._)([(0,v.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,h._)([(0,g.j)("esri.views.3d.layers.LayerView3D")],t)}},61712:function(e,t,r){r.d(t,{E:function(){return o}});var n=r(92026),a=r(81753),i=r(67387);function o(e){var t=e.view.spatialReference,r=e.layer.fullExtent,o=(0,n.pC)(r)&&r.spatialReference;if((0,n.Wi)(r)||!o)return Promise.resolve(null);if(o.equals(t))return Promise.resolve(r.clone());var s=(0,a.iV)(r,t);return(0,n.pC)(s)?Promise.resolve(s):e.view.state.isLocal?(0,i.projectGeometry)(r,t,e.layer.portalItem).then((function(t){return!e.destroyed&&t?t:null})).catch((function(){return null})):Promise.resolve(null)}},66156:function(e,t,r){r.d(t,{j:function(){return D}});var n=r(1413),a=r(15671),i=r(43144),o=r(60136),s=r(92572),u=r(37081),l=r(68401),c=r(17363),h=r(56529),d=r(78041),p=r(93822),f=r(12594),v=r(64642),g=r(11983),y=r(11752),m=r(61120),_=r(27366),x=r(98634),w=r(82144),b=r(31132),Z=r(33559),S=r(7566),C=r(27627),k=r(50411),R=r(25920),T=r(8883),A=r(32500),P=r(8548),E=r(36207),I=(x.K,function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"initializeProgram",value:function(e){return new C.$(e.rctx,r.shader.get().build(this.configuration),S.i)}},{key:"_setPipelineState",value:function(e,t){var r=this.configuration,n=e===R.A.NONE,a=e===R.A.FrontFace;return(0,E.sm)({blending:r.output!==u.H.Color&&r.output!==u.H.Alpha||!r.transparent?null:n?O:(0,d.j7)(e),culling:(0,E.zp)(r.cullFace),depthTest:{func:(0,d.Bh)(e)},depthWrite:n?r.writeDepth?E.LZ:null:(0,d.K5)(e),colorWrite:E.BK,stencilWrite:r.hasOccludees?k.s3:null,stencilTest:r.hasOccludees?t?k.eD:k.RY:null,polygonOffset:n||a?null:(0,d.je)(r.enableOffset)})}},{key:"initializePipeline",value:function(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}},{key:"getPipelineState",value:function(e,t){return t?this._occludeePipelineState:(0,y.Z)((0,m.Z)(r.prototype),"getPipelineState",this).call(this,e,t)}}]),r}(b.A));I.shader=new w.J(A.I,(function(){return r.e(18957).then(r.bind(r,18957))}));var O=(0,E.if)(P.zi.ONE,P.zi.ONE_MINUS_SRC_ALPHA),M=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).output=u.H.Color,e.cullFace=l.Vr.None,e.hasSlicePlane=!1,e.transparent=!1,e.enableOffset=!0,e.writeDepth=!0,e.hasOccludees=!1,e.transparencyPassType=R.A.NONE,e.hasMultipassTerrain=!1,e.cullAboveGround=!1,e}return(0,i.Z)(r)}(T.W);(0,_._)([(0,Z.o)({count:u.H.COUNT})],M.prototype,"output",void 0),(0,_._)([(0,Z.o)({count:l.Vr.COUNT})],M.prototype,"cullFace",void 0),(0,_._)([(0,Z.o)()],M.prototype,"hasSlicePlane",void 0),(0,_._)([(0,Z.o)()],M.prototype,"transparent",void 0),(0,_._)([(0,Z.o)()],M.prototype,"enableOffset",void 0),(0,_._)([(0,Z.o)()],M.prototype,"writeDepth",void 0),(0,_._)([(0,Z.o)()],M.prototype,"hasOccludees",void 0),(0,_._)([(0,Z.o)({count:R.A.COUNT})],M.prototype,"transparencyPassType",void 0),(0,_._)([(0,Z.o)()],M.prototype,"hasMultipassTerrain",void 0),(0,_._)([(0,Z.o)()],M.prototype,"cullAboveGround",void 0);var D=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e,new L)).supportsEdges=!0,n._configuration=new M,n}return(0,i.Z)(r,[{key:"getConfiguration",value:function(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<d.ve,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}},{key:"requiresSlot",value:function(e,t){return(t===u.H.Color||t===u.H.Alpha||t===u.H.Highlight)&&(e===p.r.DRAPED_MATERIAL||(t===u.H.Highlight?e===p.r.OPAQUE_MATERIAL:e===(this.parameters.transparent?this.parameters.writeDepth?p.r.TRANSPARENT_MATERIAL:p.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:p.r.OPAQUE_MATERIAL)))}},{key:"createGLMaterial",value:function(e){return new H(e)}},{key:"createBufferWriter",value:function(){return new f.G(v.W1)}}]),r}(g.c),H=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){return(0,a.Z)(this,r),t.call(this,(0,n.Z)((0,n.Z)({},e),e.material.parameters))}return(0,i.Z)(r,[{key:"_updateParameters",value:function(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(I,e)}},{key:"_updateOccludeeState",value:function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}},{key:"beginSlot",value:function(e){return this._output!==u.H.Color&&this._output!==u.H.Alpha||this._updateOccludeeState(e),this._updateParameters(e)}}]),r}(c.F),L=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.hasSlicePlane=!1,e.cullFace=l.Vr.None,e.hasOccludees=!1,e.opacity=1,e.textureId=null,e.initTextureTransparent=!0,e}return(0,i.Z)(r)}(h.Mt)},67581:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(15671),a=r(43144),i=r(60136),o=r(92572),s=r(27366),u=r(31319),l=r(91505),c=r(41691),h=r(79056),d=r(32718),p=r(92026),f=r(67426),v=r(49861),g=(r(25243),r(63780),r(69912)),y=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(e){var a;return(0,n.Z)(this,r),(a=t.call(this,e)).layer=null,a.parent=null,a}return(0,a.Z)(r,[{key:"initialize",value:function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";d.Z.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '".concat(n,"', id: '").concat(r,"')"),t)}}))}},{key:"fullOpacity",get:function(){return(0,p.Pt)(this.get("layer.opacity"),1)*(0,p.Pt)(this.get("parent.fullOpacity"),1)}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}},{key:"updating",get:function(){var e;return!((null===(e=this.updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}},{key:"updatingProgress",get:function(){return this.updating?0:1}},{key:"visible",get:function(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)},set:function(e){this._overrideIfSome("visible",e)}},{key:"canResume",value:function(){var e,t,r;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(t=this.parent)&&void 0!==t&&t.suspended)&&(null===(r=this.view)||void 0===r?void 0:r.ready)||!1}},{key:"getSuspendInfo",value:function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}},{key:"isUpdating",value:function(){return!1}}]),r}((0,c.p)((0,h.IG)((0,f.v)(l.Z.EventedMixin(u.Z)))));(0,s._)([(0,v.Cb)()],y.prototype,"fullOpacity",null),(0,s._)([(0,v.Cb)()],y.prototype,"layer",void 0),(0,s._)([(0,v.Cb)()],y.prototype,"parent",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],y.prototype,"suspended",null),(0,s._)([(0,v.Cb)({readOnly:!0})],y.prototype,"suspendInfo",null),(0,s._)([(0,v.Cb)({readOnly:!0})],y.prototype,"legendEnabled",null),(0,s._)([(0,v.Cb)({type:Boolean,readOnly:!0})],y.prototype,"updating",null),(0,s._)([(0,v.Cb)({readOnly:!0})],y.prototype,"updatingProgress",null),(0,s._)([(0,v.Cb)()],y.prototype,"visible",null),(0,s._)([(0,v.Cb)()],y.prototype,"view",void 0);var m=y=(0,s._)([(0,g.j)("esri.views.layers.LayerView")],y)}}]);
//# sourceMappingURL=69229.297d1377.chunk.js.map