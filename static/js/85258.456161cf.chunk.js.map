{"version":3,"file":"static/js/85258.456161cf.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as t,applySome as e}from\"../../../core/maybe.js\";import{createResolver as s,onAbortOrThrow as i,throwIfNotAbortError as r}from\"../../../core/promiseUtils.js\";import{g as h,h as o,r as u,k as a,m as n}from\"../../../chunks/mat3.js\";import{c as d}from\"../../../chunks/mat3f32.js\";import{f as l}from\"../../../chunks/vec2f32.js\";import{DisplayObject as c}from\"./DisplayObject.js\";import _ from\"./ImageryBitmapSource.js\";import{ContextType as m}from\"../../webgl/context-util.js\";import{TextureType as p,PixelFormat as g,SizedPixelFormat as x,PixelType as f,TextureWrapMode as b}from\"../../webgl/enums.js\";import{Texture as w}from\"../../webgl/Texture.js\";function T(t){return t&&\"render\"in t}function S(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function v(t){return T(t)?t instanceof _?e(t.getRenderedRasterPixels(),(t=>t.renderedRasterPixels)):S(t):t}class R extends c{constructor(t=null,e){super(),this.blendFunction=\"standard\",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e.immutable??!1,this.requestRenderOnSourceChangedEnabled=e.requestRenderOnSourceChangedEnabled??!0,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),t(this._uploadStatus)&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width),this.invalidateTexture())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(e,r){t(this._uploadStatus)&&this._uploadStatus.controller.abort();const h=new AbortController,o=s();return i(r,(()=>h.abort())),i(h,(t=>o.reject(t))),this._uploadStatus={controller:h,resolver:o},this.source=e,o.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=h(this.transforms.dvs),[s,i]=t.toScreenNoRotation([0,0],[this.x,this.y]),r=this.resolution/this.pixelRatio/t.resolution,d=r*this.width,c=r*this.height,_=Math.PI*this.rotation/180;o(e,e,l(s,i)),o(e,e,l(d/2,c/2)),u(e,e,-_),o(e,e,l(-d/2,-c/2)),a(e,e,l(d,c)),n(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:e,painter:s}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(e)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const i=v(this.source);try{if(t(this._uploadStatus)){const{controller:t,resolver:e}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=s.textureUploadManager;await a.enqueueTextureUpdate({data:i,texture:u,width:h,height:o},r),e.resolve(),this._uploadStatus=null}else this._texture.setData(i);this.ready()}catch(h){r(h)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:d()}}_createTexture(t){const e=this.immutable&&t.type===m.WEBGL2;return new w(t,{target:p.TEXTURE_2D,pixelFormat:g.RGBA,internalFormat:e?x.RGBA8:g.RGBA,dataType:f.UNSIGNED_BYTE,wrapMode:b.CLAMP_TO_EDGE,isImmutable:e,width:this._sourceWidth,height:this._sourceHeight})}}export{R as Bitmap,T as isImageSource,S as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../chunks/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,m=null){super(e,s,r,i,a,n),this.bitmap=new t(m,{immutable:!1,requestRenderOnSourceChangedEnabled:!1}),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{brushes as r}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import s from\"./webgl/TileContainer.js\";class n extends s{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),s=this._tileInfoView.getTileResolution(r.level),[n,o]=this._tileInfoView.tileInfo.size;return new i(r,s,t[0],t[3],n,o)}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[r.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),i]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";class l{constructor(e,t,l){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=l}get width(){return e(this.pixelBlock)?this.pixelBlock.width:0}get height(){return e(this.pixelBlock)?this.pixelBlock.height:0}render(e){const l=this.pixelBlock;if(t(l))return;const i=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??l});if(t(i.pixelBlock))return;i.pixelBlock.maskIsAlpha&&(i.pixelBlock.premultiplyAlpha=!0);const o=i.pixelBlock.getAsRGBA(),s=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);s.data.set(o),e.putImageData(s,0,0)}getRenderedRasterPixels(){const e=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return t(e.pixelBlock)?null:(e.pixelBlock.maskIsAlpha&&(e.pixelBlock.premultiplyAlpha=!0),{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)})}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/Error.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as r}from\"../engine/BitmapTileContainer.js\";const t=t=>{let s=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new r(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{t as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n"],"names":["T","t","S","e","document","createElement","width","height","render","getContext","R","blendFunction","_sourceWidth","_sourceHeight","_textureInvalidated","_texture","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","x","y","immutable","requestRenderOnSourceChangedEnabled","source","requestRender","bind","this","dispose","_uploadStatus","controller","abort","get","set","HTMLImageElement","naturalHeight","naturalWidth","invalidateTexture","updateTexture","r","h","AbortController","o","s","i","reject","resolver","promise","fadeTransitionEnabled","inFadeTransition","transforms","dvs","toScreenNoRotation","d","c","_","Math","PI","l","u","a","n","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","context","painter","_createTexture","setData","resize","getRenderedRasterPixels","renderedRasterPixels","signal","textureUploadManager","enqueueTextureUpdate","data","texture","resolve","ready","destroy","type","m","w","target","p","pixelFormat","g","internalFormat","dataType","f","wrapMode","b","isImmutable","bitmap","once","beforeRender","afterRender","tileMat3","stage","children","some","_tileInfoView","getTileBounds","getTileResolution","level","tileInfo","size","registerRenderPass","name","brushes","map","drawPhase","visible","pixelBlock","extent","originalPixelBlock","filter","maskIsAlpha","premultiplyAlpha","getAsRGBA","createImageData","putImageData","Uint8Array","buffer","view","timeline","record","layer","title","_bitmapView","container","addChild","removeChild","removeAllChildren","getLODInfoAt","getXForColumn","col","getYForRow","row","v","round","I","M","F","L","drawImage"],"sourceRoot":""}