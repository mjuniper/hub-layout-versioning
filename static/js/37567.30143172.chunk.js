"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[37567],{30651:function(e,r,t){t.d(r,{Z:function(){return x}});var n=t(74165),i=t(15861),a=t(15671),u=t(43144),o=t(60136),l=t(92572),s=t(27366),c=(t(59486),t(76200)),p=t(10064),d=t(91505),f=t(79056),v=t(54472),y=t(32718),b=t(66978),h=t(35995),m=t(49861),g=(t(25243),t(63780),t(69912)),w=t(42265);function C(){return C=(0,i.Z)((0,n.Z)().mark((function e(r){var i,a,u,o,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="portalItem"in r?r:{portalItem:r},e.next=3,Promise.all([t.e(79803),t.e(98995),t.e(46727),t.e(43139),t.e(6356)]).then(t.bind(t,43139));case 3:return a=e.sent,e.prev=4,e.next=7,a.fromItem(i);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),u=i&&i.portalItem,o=u&&u.id||"unset",l=u&&u.portal&&u.portal.url||w.Z.portalUrl,y.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,10]])}))),C.apply(this,arguments)}var S=t(53866),Z=t(78952),L=0,_=function(e){(0,o.Z)(s,e);var r=(0,l.Z)(s);function s(){var e;return(0,a.Z)(this,s),(e=r.apply(this,arguments)).attributionDataUrl=null,e.fullExtent=new S.Z(-180,-90,180,90,Z.Z.WGS84),e.id=Date.now().toString(16)+"-layer-"+L++,e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=Z.Z.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return(0,u.Z)(s,[{key:"initialize",value:function(){var e=this;this.when().catch((function(r){var t,n;(0,b.D_)(r)||y.Z.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '".concat(null!==(t=e.title)&&void 0!==t?t:"no title","', id: '").concat(null!==(n=e.id)&&void 0!==n?n:"no id","')"),{error:r})}))}},{key:"destroy",value:function(){if(this.parent){var e=this,r=this.parent;"layers"in r&&r.layers.includes(e)?r.layers.remove(e):"tables"in r&&r.tables.includes(e)?r.tables.remove(e):"baseLayers"in r&&r.baseLayers.includes(e)?r.baseLayers.remove(e):"baseLayers"in r&&r.referenceLayers.includes(e)&&r.referenceLayers.remove(e)}}},{key:"hasAttributionData",get:function(){return null!=this.attributionDataUrl}},{key:"parsedUrl",get:function(){return(0,h.mN)(this.url)}},{key:"fetchAttributionData",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.attributionDataUrl,!this.hasAttributionData||!r){e.next=5;break}return e.next=4,(0,c.default)(r,{query:{f:"json"},responseType:"json"});case 4:return e.abrupt("return",e.sent.data);case 5:throw new p.Z("layer:no-attribution-data","Layer does not have attribution data");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"fromArcGISServerUrl",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof r?{url:r}:r,e.next=3,Promise.all([t.e(46727),t.e(94650)]).then(t.bind(t,94650));case 3:return e.abrupt("return",e.sent.fromUrl(i));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromPortalItem",value:function(e){return function(e){return C.apply(this,arguments)}(e)}}]),s}(d.Z.EventedMixin((0,f.IG)(v.Z)));(0,s._)([(0,m.Cb)({type:String})],_.prototype,"attributionDataUrl",void 0),(0,s._)([(0,m.Cb)({type:S.Z})],_.prototype,"fullExtent",void 0),(0,s._)([(0,m.Cb)({readOnly:!0})],_.prototype,"hasAttributionData",null),(0,s._)([(0,m.Cb)({type:String,clonable:!1})],_.prototype,"id",void 0),(0,s._)([(0,m.Cb)({type:Boolean,nonNullable:!0})],_.prototype,"legendEnabled",void 0),(0,s._)([(0,m.Cb)({type:["show","hide","hide-children"]})],_.prototype,"listMode",void 0),(0,s._)([(0,m.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],_.prototype,"opacity",void 0),(0,s._)([(0,m.Cb)({clonable:!1})],_.prototype,"parent",void 0),(0,s._)([(0,m.Cb)({readOnly:!0})],_.prototype,"parsedUrl",null),(0,s._)([(0,m.Cb)({type:Boolean})],_.prototype,"popupEnabled",void 0),(0,s._)([(0,m.Cb)({type:Boolean})],_.prototype,"attributionVisible",void 0),(0,s._)([(0,m.Cb)({type:Z.Z})],_.prototype,"spatialReference",void 0),(0,s._)([(0,m.Cb)({type:String})],_.prototype,"title",void 0),(0,s._)([(0,m.Cb)({readOnly:!0,json:{read:!1}})],_.prototype,"type",void 0),(0,s._)([(0,m.Cb)()],_.prototype,"url",void 0),(0,s._)([(0,m.Cb)({type:Boolean,nonNullable:!0})],_.prototype,"visible",void 0);var x=_=(0,s._)([(0,g.j)("esri.layers.Layer")],_)},25899:function(e,r,t){t.d(r,{B5:function(){return d},DR:function(){return v},G:function(){return C},M8:function(){return h},Nm:function(){return m},Qc:function(){return f},XG:function(){return g},a7:function(){return b},h3:function(){return S},ld:function(){return y},wH:function(){return w}});var n=t(29439),i=t(92026),a=t(35995),u=t(53283),o={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},l=Object.values(o),s=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),c=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(".concat(l.join("|"),"))(?:\\/(?:layers\\/)?(\\d+))?"),"i"),p=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function d(e){return!!s.test(e)}function f(e){if((0,i.Wi)(e))return null;var r=(0,a.mN)(e),t=r.path.match(s)||r.path.match(c);if(!t)return null;var u=(0,n.Z)(t,5),l=u[1],p=u[2],d=u[3],f=u[4],v=p.indexOf("/");return{title:y(-1!==v?p.slice(v+1):p),serverType:o[d.toLowerCase()],sublayer:null!=f&&""!==f?parseInt(f,10):null,url:{path:l}}}function v(e){var r=(0,a.mN)(e).path.match(p);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function y(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function b(e,r){var t=[];if(e){var n=f(e);(0,i.pC)(n)&&n.title&&t.push(n.title)}if(r){var a=y(r);t.push(a)}if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function h(e){if(!e)return!1;var r=(e=e.toLowerCase()).includes(".arcgis.com/"),t=e.includes("//services")||e.includes("//tiles")||e.includes("//features");return r&&t}function m(e,r){return e?(0,a.Qj)((0,a.Hu)(e,r)):e}function g(e){var r=e.url;if(!r)return{url:r};r=(0,a.Hu)(r,e.logger);var t,n=(0,a.mN)(r),u=f(n.path);if((0,i.pC)(u))null!=u.sublayer&&null==e.layer.layerId&&(t=u.sublayer),r=u.url.path;else if(e.nonStandardUrlAllowed){var o=v(n.path);(0,i.pC)(o)&&(r=o.serviceUrl,t=o.sublayerId)}return{url:(0,a.Qj)(r),layerId:t}}function w(e,r,t,n,i){(0,u.w)(r,n,"url",i),n.url&&null!=e.layerId&&(n.url=(0,a.v_)(n.url,t,e.layerId.toString()))}function C(e){if(!e)return!1;var r=e.toLowerCase(),t=r.includes("/services/"),n=r.includes("/mapserver/wmsserver"),i=r.includes("/imageserver/wmsserver"),a=r.includes("/wmsserver");return t&&(n||i||a)}function S(e){var r;if(!e)return!1;var t=null===(r=new a.R9((0,a.hF)(e)).authority)||void 0===r?void 0:r.toLowerCase();return"server.arcgisonline.com"===t||"services.arcgisonline.com"===t}},37933:function(e,r,t){t.d(r,{A2:function(){return p},Am:function(){return f},CY:function(){return s},S1:function(){return w},Tv:function(){return d},fb:function(){return c},iC:function(){return l},ln:function(){return C},mt:function(){return h},oP:function(){return m},rQ:function(){return y},sy:function(){return v},y2:function(){return b}});var n=t(74165),i=t(15861),a=t(19545),u=t(76200),o=t(92026);function l(e){var r=null===e||void 0===e?void 0:e.type;return"base-tile"===r||"tile"===r||"elevation"===r||"imagery-tile"===r||"base-elevation"===r||"open-street-map"===r||"wcs"===r||"web-tile"===r||"wmts"===r||"vector-tile"===r}function s(e){return null!=e&&"type"in e&&"group"===e.type}var c={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function p(e){var r=null===e||void 0===e?void 0:e.type;return"building-scene"===r||"integrated-mesh"===r||"point-cloud"===r||"scene"===r}function d(e){return"voxel"===(null===e||void 0===e?void 0:e.type)}function f(e){return"imagery-tile"===(null===e||void 0===e?void 0:e.type)}function v(e){return null!=e&&null!=e.parent&&"declaredClass"in e.parent&&"esri.Basemap"===e.parent.declaredClass&&e.parent.baseLayers.includes(e)}function y(e){var r;return"feature"===(null===e||void 0===e?void 0:e.type)&&!e.url&&"memory"===(null===(r=e.source)||void 0===r?void 0:r.type)}function b(e){var r;return"feature"===(null===e||void 0===e?void 0:e.type)&&"feature-layer"===(null===(r=e.source)||void 0===r?void 0:r.type)}function h(e){if(e.activeLayer){var r=e.activeLayer.tileMatrixSet;if(r)return r;var t=e.activeLayer.tileMatrixSets;if(t)return t}return null}function m(e,r){return g.apply(this,arguments)}function g(){return g=(0,i.Z)((0,n.Z)().mark((function e(r,t){var i,l,s,c,p,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(null===(i=null===a.id||void 0===a.id?void 0:a.id.findServerInfo(r))||void 0===i?void 0:i.currentVersion)){e.next=3;break}return e.abrupt("return",i.owningSystemUrl||null);case 3:if(-1!==(l=r.toLowerCase().indexOf("/rest/services"))){e.next=6;break}return e.abrupt("return",null);case 6:return s="".concat(r.substring(0,l),"/rest/info"),c=(0,o.pC)(t)?t.signal:null,e.next=10,(0,u.default)(s,{query:{f:"json"},responseType:"json",signal:c});case 10:return p=e.sent,d=p.data,e.abrupt("return",(null===d||void 0===d?void 0:d.owningSystemUrl)||null);case 13:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){return function(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function C(e){return!!function(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}}}]);
//# sourceMappingURL=37567.30143172.chunk.js.map