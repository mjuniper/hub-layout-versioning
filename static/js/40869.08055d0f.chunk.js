"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[40869],{44925:function(e,t,n){function i(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{Z:function(){return i}})},84397:function(e,t,n){n.d(t,{c:function(){return i},g:function(){return r}});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},36231:function(e,t,n){n.d(t,{q:function(){return o}});var i,r,s,a={},u={get exports(){return a},set exports(e){a=e}};i=u,r=function(){function e(n,i,r,s,a){for(;s>r;){if(s-r>600){var u=s-r+1,o=i-r+1,l=Math.log(u),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(u-c)/u)*(o-u/2<0?-1:1);e(n,i,Math.max(r,Math.floor(i-o*c/u+d)),Math.min(s,Math.floor(i+(u-o)*c/u+d)),a)}var f=n[i],h=r,p=s;for(t(n,r,i),a(n[s],f)>0&&t(n,r,s);h<p;){for(t(n,h,p),h++,p--;a(n[h],f)<0;)h++;for(;a(n[p],f)>0;)p--}0===a(n[r],f)?t(n,r,p):t(n,++p,s),p<=i&&(r=p+1),i<=p&&(s=p-1)}}function t(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function n(e,t){return e<t?-1:e>t?1:0}return function(t,i,r,s,a){e(t,i,r||0,s||t.length-1,a||n)}},void 0!==(s=r())&&(i.exports=s);var o=a},59026:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(15671),r=n(43144),s=n(18759),a=function(){function e(t,n){(0,i.Z)(this,e),this._storage=new s.WJ,this._storage.maxSize=t,n&&this._storage.registerRemoveFunc("",n)}return(0,r.Z)(e,[{key:"put",value:function(e,t){this._storage.put(e,t,1,1)}},{key:"pop",value:function(e){return this._storage.pop(e)}},{key:"get",value:function(e){return this._storage.get(e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"destroy",value:function(){this._storage.destroy()}}]),e}()},18759:function(e,t,n){n.d(t,{WJ:function(){return h},Xq:function(){return f},an:function(){return d},lN:function(){return i}});var i,r,s=n(29439),a=n(37762),u=n(15671),o=n(43144),l=n(92026),c=n(27546),d=-3;(r=i||(i={}))[r.ALL=0]="ALL",r[r.SOME=1]="SOME";var f=function(){function e(t,n,i){(0,u.Z)(this,e),this._namespace=t,this._storage=n,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}return(0,o.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}},{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this._namespace+e,t,n,i)}},{key:"get",value:function(e){var t=this._storage.get(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this._namespace+e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,n){this._storage.updateSize(this._namespace+e,t,n)}},{key:"clear",value:function(){this._storage.clear(this._namespace)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"getStats",value:function(){return this._storage.getStats()}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,u.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new c.Z,this._users=new c.Z}return(0,o.Z)(e,[{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}},{key:"put",value:function(e,t,n,r){var s=this._db.get(e);if(s&&(this._size-=s.size,this._db.delete(e),s.entry!==t&&this._notifyRemove(e,s.entry,i.ALL)),n>this._maxSize)this._notifyRemove(e,t,i.ALL);else if(void 0!==t)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(r,d)-d;this._db.set(e,{entry:t,size:n,lifetime:a,lives:a}),this._size+=n,this._checkSizeLimit()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,n){var r=this._db.get(e);if(r&&r.entry===t){for(this._size-=r.size;n>this._maxSize;){var s=this._notifyRemove(e,t,i.SOME);if(!((0,l.pC)(s)&&s>0))return void this._db.delete(e);n=s}r.size=n,this._size+=n,this._checkSizeLimit()}}},{key:"pop",value:function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss}},{key:"get",value:function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss}},{key:"getStats",value:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},i=new Array;this._db.forEach((function(t,r){var s=t.lifetime;i[s]=(i[s]||0)+t.size,e._users.forAll((function(e){var i=e.namespace;if(r.startsWith(i)){var s=n[i]||0;n[i]=s+t.size}}))}));var r={};this._users.forAll((function(e){var t=e.namespace;if(!isNaN(e.hitRate)&&e.hitRate>0){var i=n[t]||0;n[t]=i,r[t]=Math.round(100*e.hitRate)+"%"}else r[t]="0%"}));var s=Object.keys(n);s.sort((function(e,t){return n[t]-n[e]})),s.forEach((function(e){return t[e]=Math.round(n[e]/Math.pow(2,20))+"MB / "+r[e]}));for(var a=i.length-1;a>=0;--a){var u=i[a];u&&(t["Priority "+(a+d-1)]=Math.round(u/this.size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this;this._db.forEach((function(n,r){r.startsWith(e)&&(t._size-=n.size,t._db.delete(r),t._notifyRemove(r,n.entry,i.ALL))}))}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,n){return e._notifyRemove(n,t.entry,i.ALL)})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,n){var i;return this._removeFuncs.some((function(r){if(e.startsWith(r[0])){var s=r[1](t,n);return"number"==typeof s&&(i=s),!0}return!1})),i}},{key:"_checkSizeLimit",value:function(){if(!(this._size<=this._maxSize)){var e,t=(0,a.Z)(this._db);try{for(t.s();!(e=t.n()).done;){var n=(0,s.Z)(e.value,2),r=n[0],u=n[1];if(this._db.delete(r),u.lives<=1){this._size-=u.size;var o=this._notifyRemove(r,u.entry,i.SOME);(0,l.pC)(o)&&o>0&&(this._size+=o,u.lives=u.lifetime,u.size=o,this._db.set(r,u))}else--u.lives,this._db.set(r,u);if(this._size<=.9*this.maxSize)return}}catch(c){t.e(c)}finally{t.f()}}}}]),e}()},93963:function(e,t,n){n.d(t,{f:function(){return u}});var i=n(15671),r=n(43144),s=n(39052),a=n(56885),u=function(){function e(t){(0,i.Z)(this,e),this._observable=new a.s,this._value=t}return(0,r.Z)(e,[{key:"get",value:function(){return(0,s.it)(this._observable),this._value}},{key:"set",value:function(e){e!==this._value&&(this._value=e,this._observable.notify())}}]),e}()},58971:function(e,t,n){n.d(t,{G6:function(){return I},Ie:function(){return k},J9:function(){return S},RF:function(){return g},U1:function(){return x},vY:function(){return l},ym:function(){return F}});var i=n(29439),r=n(92026),s=n(77981);var a=function(e,t,n){return[t,n]},u=function(e,t,n){return[t,n,e[2]]},o=function(e,t,n){return[t,n,e[2],e[3]]};function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,r.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){var n=e.scale,i=e.translate;return Math.round((t-i[0])/n[0])}function d(e,t){var n=e.scale,i=e.translate;return Math.round((i[1]-t)/n[1])}function f(e,t,n){for(var i,r,s,a,u=[],o=0;o<n.length;o++){var l=n[o];o>0?(s=c(e,l[0]),a=d(e,l[1]),s===i&&a===r||(u.push(t(l,s-i,a-r)),i=s,r=a)):(i=c(e,l[0]),r=d(e,l[1]),u.push(t(l,i,r)))}return u.length>0?u:null}function h(e,t){var n=e.scale,i=e.translate;return t*n[0]+i[0]}function p(e,t){var n=e.scale;return e.translate[1]-t*n[1]}function y(e,t,n){var r=new Array(n.length);if(!n.length)return r;var s=(0,i.Z)(e.scale,2),a=s[0],u=s[1],o=h(e,n[0][0]),l=p(e,n[0][1]);r[0]=t(n[0],o,l);for(var c=1;c<n.length;c++){var d=n[c];o+=d[0]*a,l-=d[1]*u,r[c]=t(d,o,l)}return r}function v(e,t,n){for(var i=new Array(n.length),r=0;r<n.length;r++)i[r]=y(e,t,n[r]);return i}function m(e,t,n,i,r){var s;return t.points=null!==(s=function(e,t,n,i){return f(e,n?i?o:u:i?u:a,t)}(e,n.points,i,r))&&void 0!==s?s:[],t}function g(e,t,n,i,r){return t.x=c(e,n.x),t.y=d(e,n.y),t!==n&&(i&&(t.z=n.z),r&&(t.m=n.m)),t}function _(e,t,n,i,r){var s=function(e,t,n,i){for(var r=[],s=n?i?o:u:i?u:a,l=0;l<t.length;l++){var c=f(e,s,t[l]);c&&c.length>=3&&r.push(c)}return r.length?r:null}(e,n.rings,i,r);return s?(t.rings=s,t):null}function b(e,t,n,i,r){var s=function(e,t,n,i){for(var r=[],s=n?i?o:u:i?u:a,l=0;l<t.length;l++){var c=f(e,s,t[l]);c&&c.length>=2&&r.push(c)}return r.length?r:null}(e,n.paths,i,r);return s?(t.paths=s,t):null}function F(e,t){return e&&t?(0,s.wp)(t)?g(e,{},t,!1,!1):(0,s.l9)(t)?b(e,{},t,!1,!1):(0,s.oU)(t)?_(e,{},t,!1,!1):(0,s.aW)(t)?m(e,{},t,!1,!1):(0,s.YX)(t)?function(e,t,n,i,r){return t.xmin=c(e,n.xmin),t.ymin=d(e,n.ymin),t.xmax=c(e,n.xmax),t.ymax=d(e,n.ymax),t!==n&&(i&&(t.zmin=n.zmin,t.zmax=n.zmax),r&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}(e,{},t,!1,!1):null:null}function S(e,t,n,i,s){return(0,r.pC)(n)&&(t.points=function(e,t,n,i){return y(e,n?i?o:u:i?u:a,t)}(e,n.points,i,s)),t}function x(e,t,n,i,s){return(0,r.Wi)(n)||(t.x=h(e,n.x),t.y=p(e,n.y),t!==n&&(i&&(t.z=n.z),s&&(t.m=n.m))),t}function k(e,t,n,i,s){return(0,r.pC)(n)&&(t.rings=function(e,t,n,i){return v(e,n?i?o:u:i?u:a,t)}(e,n.rings,i,s)),t}function I(e,t,n,i,s){return(0,r.pC)(n)&&(t.paths=function(e,t,n,i){return v(e,n?i?o:u:i?u:a,t)}(e,n.paths,i,s)),t}},34311:function(e,t,n){function i(e,t,n){return{objectId:e,target:t,distance:n,type:"vertex"}}function r(e,t,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{objectId:e,target:t,distance:n,type:"edge",start:i,end:r,draped:s}}n.d(t,{p:function(){return r},u:function(){return i}})},25820:function(e,t,n){n.d(t,{S:function(){return s},X:function(){return r}});var i=n(37762),r=1;function s(e,t){var n,r=0,s=(0,i.Z)(t);try{for(s.s();!(n=s.n()).done;){var a,u=null===(a=n.value.attributes)||void 0===a?void 0:a[e];"number"==typeof u&&isFinite(u)&&(r=Math.max(r,u))}}catch(o){s.e(o)}finally{s.f()}return r}},48782:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var i=n(74165),r=n(1413),s=n(37762),a=n(15861),u=n(15671),o=n(43144),l=n(10064),c=n(92026),d=n(77981),f=n(92975),h=n(83406),p=n(25820),y=n(68928),v=n(19995),m=n(14e3),g=n(63543),_=n(68808),b=n(52410),F=n(85249),S=n(80031),x=f.Zn,k={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:f.Zn},I={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function Z(e){return(0,d.wp)(e)?null!=e.z:!!e.hasZ}function w(e){return(0,d.wp)(e)?null!=e.m:!!e.hasM}var z=function(){function e(){(0,u.Z)(this,e),this._queryEngine=null,this._nextObjectId=null}return(0,o.Z)(e,[{key:"destroy",value:function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}},{key:"load",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,a,u,o,c,d,f,h,_,Z,w,z,M,T,E,R,q,j,O,A,L,D,C,P,Q,W,G;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],a=t.features,u=this._inferLayerProperties(a,t.fields),o=t.fields||[],c=null!=t.hasM?t.hasM:!!u.hasM,d=null!=t.hasZ?t.hasZ:!!u.hasZ,f=!t.spatialReference&&!u.spatialReference,h=f?x:t.spatialReference||u.spatialReference,_=f?k:null,Z=t.geometryType||u.geometryType,w=!Z,z=t.objectIdField||u.objectIdField,M=t.timeInfo,w||(f&&n.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),Z)){e.next=4;break}throw new l.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");case 4:if(z){e.next=6;break}throw new l.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");case 6:u.objectIdField&&z!==u.objectIdField&&(n.push({name:"feature-layer:duplicated-oid-field",message:'Provided objectIdField "'.concat(z,'" doesn\'t match the field name "').concat(u.objectIdField,'", found in the provided fields')}),z=u.objectIdField),z&&!u.objectIdField&&(T=null,o.some((function(e){return e.name===z&&(T=e,!0)}))?(T.type="esriFieldTypeOID",T.editable=!1,T.nullable=!1):o.unshift({alias:z,name:z,type:"esriFieldTypeOID",editable:!1,nullable:!1})),E=(0,s.Z)(o),e.prev=8,E.s();case 10:if((R=E.n()).done){e.next=18;break}if(null==(q=R.value).name&&(q.name=q.alias),null==q.alias&&(q.alias=q.name),q.name){e.next=14;break}throw new l.Z("feature-layer:invalid-field-name","field name is missing",{field:q});case 14:if(q.name===z&&(q.type="esriFieldTypeOID"),F.v.jsonValues.includes(q.type)){e.next=16;break}throw new l.Z("feature-layer:invalid-field-type",'invalid type for field "'.concat(q.name,'"'),{field:q});case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),E.e(e.t0);case 23:return e.prev=23,E.f(),e.finish(23);case 26:j={},O=(0,s.Z)(o);try{for(O.s();!(A=O.n()).done;)"esriFieldTypeOID"!==(L=A.value).type&&"esriFieldTypeGlobalID"!==L.type&&void 0!==(D=(0,S.os)(L))&&(j[L.name]=D)}catch(i){O.e(i)}finally{O.f()}if(this._fieldsIndex=new b.Z(o),this._createDefaultAttributes=(0,g.Dm)(j,z),M&&(M.startTimeField&&((C=this._fieldsIndex.get(M.startTimeField))?(M.startTimeField=C.name,C.type="esriFieldTypeDate"):M.startTimeField=null),M.endTimeField&&((P=this._fieldsIndex.get(M.endTimeField))?(M.endTimeField=P.name,P.type="esriFieldTypeDate"):M.endTimeField=null),M.trackIdField&&((Q=this._fieldsIndex.get(M.trackIdField))?M.trackIdField=Q.name:(M.trackIdField=null,n.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:M}}))),M.startTimeField||M.endTimeField||(n.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:M}}),M=null)),W={warnings:n,featureErrors:[],layerDefinition:(0,r.Z)((0,r.Z)({},I),{},{drawingInfo:(0,g.bU)(Z),templates:(0,g.Hq)(j),extent:_,geometryType:Z,objectIdField:z,fields:o,hasZ:d,hasM:c,timeInfo:M}),assignedObjectIds:{}},this._queryEngine=new m.q({fields:o,geometryType:Z,hasM:c,hasZ:d,objectIdField:z,spatialReference:h,featureStore:new y.Z({geometryType:Z,hasM:c,hasZ:d}),timeInfo:M,cacheSpatialQueries:!0}),a&&a.length){e.next=33;break}return e.abrupt("return",(this._nextObjectId=p.X,W));case 33:return G=(0,p.S)(z,a),this._nextObjectId=G+1,e.next=37,(0,v._W)(a,h);case 37:return e.abrupt("return",this._loadInitialFeatures(W,a));case 38:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._queryEngine,r=n.spatialReference,s=n.geometryType,e.next=3,Promise.all([(0,_.b)(r,s),(0,v._W)(t.adds,r),(0,v._W)(t.updates,r)]);case 3:return e.abrupt("return",this._applyEdits(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQuery(e,t.signal)}},{key:"queryFeatureCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForCount(e,t.signal)}},{key:"queryObjectIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForIds(e,t.signal)}},{key:"queryExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForExtent(e,t.signal)}},{key:"querySnapping",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForSnapping(e,t.signal)}},{key:"_inferLayerProperties",value:function(e,t){var n,i,r,a=null,u=null,o=null,l=(0,s.Z)(e);try{for(l.s();!(r=l.n()).done;){var f=r.value.geometry;if(!(0,c.Wi)(f)&&(a||(a=(0,d.Ji)(f)),u||(u=f.spatialReference),null==n&&(n=Z(f)),null==i&&(i=w(f)),a&&u&&null!=n&&null!=i))break}}catch(p){l.e(p)}finally{l.f()}if(t&&t.length){var h=null;t.some((function(e){var t="esriFieldTypeOID"===e.type,n=!e.type&&e.name&&"objectid"===e.name.toLowerCase();return h=e,t||n}))&&(o=h.name)}return{geometryType:a,spatialReference:u,objectIdField:o,hasM:i,hasZ:n}}},{key:"_loadInitialFeatures",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var r,a,u,o,l,f,p,y,m,g,b,F,S,x,k,I,Z,w;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this._queryEngine,a=r.geometryType,u=r.hasM,o=r.hasZ,l=r.objectIdField,f=r.spatialReference,p=r.featureStore,y=[],m=(0,s.Z)(n),e.prev=2,m.s();case 4:if((g=m.n()).done){e.next=13;break}if(null!=(b=g.value).uid&&(t.assignedObjectIds[b.uid]=-1),!b.geometry||a===(0,d.Ji)(b.geometry)){e.next=9;break}return t.featureErrors.push((0,_.av)("Incorrect geometry type.")),e.abrupt("continue",11);case 9:F=this._createDefaultAttributes(),(S=(0,_.O0)(this._fieldsIndex,F,b.attributes,!0,t.warnings))?t.featureErrors.push(S):(this._assignObjectId(F,b.attributes,!0),b.attributes=F,null!=b.uid&&(t.assignedObjectIds[b.uid]=b.attributes[l]),(0,c.pC)(b.geometry)&&(b.geometry=(0,v.iV)(b.geometry,b.geometry.spatialReference,f)),y.push(b));case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),m.e(e.t0);case 18:return e.prev=18,m.f(),e.finish(18);case 21:return p.addMany((0,h.Yn)([],y,a,o,u,l)),e.next=24,this._queryEngine.fetchRecomputedExtents();case 24:return x=e.sent,k=x.fullExtent,I=x.timeExtent,t.layerDefinition.extent=k,I&&(Z=I.start,w=I.end,t.layerDefinition.timeInfo.timeExtent=[Z,w]),e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_applyEdits",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,r,a,u,o,l,c,d,f,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.adds,r=t.updates,a=t.deletes,u={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}},n&&n.length&&this._applyAddEdits(u,n),r&&r.length&&this._applyUpdateEdits(u,r),a&&a.length){o=(0,s.Z)(a);try{for(o.s();!(l=o.n()).done;)c=l.value,u.deleteResults.push((0,_.d1)(c))}catch(i){o.e(i)}finally{o.f()}this._queryEngine.featureStore.removeManyById(a)}return e.next=4,this._queryEngine.fetchRecomputedExtents();case 4:return d=e.sent,f=d.fullExtent,h=d.timeExtent,e.abrupt("return",{extent:f,timeExtent:h,featureEditResults:u});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_applyAddEdits",value:function(e,t){var n,i=e.addResults,r=this._queryEngine,a=r.geometryType,u=r.hasM,o=r.hasZ,l=r.objectIdField,f=r.spatialReference,p=r.featureStore,y=[],m=(0,s.Z)(t);try{for(m.s();!(n=m.n()).done;){var g=n.value;if(g.geometry&&a!==(0,d.Ji)(g.geometry))i.push((0,_.av)("Incorrect geometry type."));else{var b=this._createDefaultAttributes(),F=(0,_.O0)(this._fieldsIndex,b,g.attributes);if(F)i.push(F);else{if(this._assignObjectId(b,g.attributes),g.attributes=b,null!=g.uid){var S=g.attributes[l];e.uidToObjectId[g.uid]=S}if((0,c.pC)(g.geometry)){var x,k=null!==(x=g.geometry.spatialReference)&&void 0!==x?x:f;g.geometry=(0,v.iV)((0,_.og)(g.geometry,k),k,f)}y.push(g),i.push((0,_.d1)(g.attributes[l]))}}}}catch(I){m.e(I)}finally{m.f()}p.addMany((0,h.Yn)([],y,a,o,u,l))}},{key:"_applyUpdateEdits",value:function(e,t){var n,i=e.updateResults,r=this._queryEngine,a=r.geometryType,u=r.hasM,o=r.hasZ,l=r.objectIdField,f=r.spatialReference,p=r.featureStore,y=(0,s.Z)(t);try{for(y.s();!(n=y.n()).done;){var m=n.value,g=m.attributes,b=m.geometry,F=g&&g[l];if(null!=F)if(p.has(F)){var S=(0,h.EI)(p.getFeature(F),a,o,u);if((0,c.pC)(b)){var x;if(a!==(0,d.Ji)(b)){i.push((0,_.av)("Incorrect geometry type."));continue}var k=null!==(x=b.spatialReference)&&void 0!==x?x:f;S.geometry=(0,v.iV)((0,_.og)(b,k),k,f)}if(g){var I=(0,_.O0)(this._fieldsIndex,S.attributes,g);if(I){i.push(I);continue}}p.add((0,h.XA)(S,a,o,u,l)),i.push((0,_.d1)(F))}else i.push((0,_.av)("Feature with object id ".concat(F," missing")));else i.push((0,_.av)("Identifier field ".concat(l," missing")))}}catch(Z){y.e(Z)}finally{y.f()}}},{key:"_assignObjectId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._queryEngine.objectIdField;n&&t&&isFinite(t[i])?e[i]=t[i]:e[i]=this._nextObjectId++}}]),e}()},63543:function(e,t,n){n.d(t,{Dm:function(){return f},Hq:function(){return h},MS:function(){return p},bU:function(){return l}});var i=n(4942),r=n(1413),s=n(93169),a=n(84652),u=n(60480),o=n(76115);function l(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.I4:"esriGeometryPolyline"===e?o.ET:o.lF}}}var c=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,d=1;function f(e,t){if((0,s.Z)("esri-csp-restrictions"))return function(){return(0,r.Z)((0,i.Z)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var a in e)n+="this".concat(c.test(a)?".".concat(a):'["'.concat(a,'"]')," = ").concat(JSON.stringify(e[a]),";");var u=new Function("\n      return class AttributesClass$".concat(d++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new u}}catch(o){return function(){return(0,r.Z)((0,i.Z)({},t,null),e)}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,a.d9)(e)}}]}function p(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:u.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},68808:function(e,t,n){n.d(t,{O0:function(){return g},av:function(){return h},b:function(){return x},d1:function(){return y},og:function(){return b}});var i=n(74165),r=n(15861),s=n(37762),a=n(43144),u=n(15671),o=n(92026),l=n(92975),c=n(80031),d=(0,a.Z)((function e(){(0,u.Z)(this,e),this.code=null,this.description=null})),f=(0,a.Z)((function e(t){(0,u.Z)(this,e),this.error=new d,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}));function h(e){return new f(e)}var p=(0,a.Z)((function e(t){(0,u.Z)(this,e),this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}));function y(e){return new p(e)}var v,m=new Set;function g(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0;for(var u in m.clear(),n){var o=e.get(u);if(o){var l=n[u],d=_(o,l);if(d!==l&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:o,originalValue:l,sanitizedValue:d}}),m.add(o.name),o&&(r||o.editable)){var f=(0,c.Qc)(o,d);if(f)return h((0,c.vP)(f,o,d));t[o.name]=d}}}var p,y=(0,s.Z)(null!==(i=null===e||void 0===e?void 0:e.requiredFields)&&void 0!==i?i:[]);try{for(y.s();!(p=y.n()).done;){var v=p.value;if(!m.has(v.name))return h('missing required field "'.concat(v.name,'"'))}}catch(g){y.e(g)}finally{y.f()}return null}function _(e,t){var n=t;return"string"==typeof t&&(0,c.H7)(e)?n=parseFloat(t):null!=t&&(0,c.qN)(e)&&"string"!=typeof t&&(n=String(t)),(0,c.Pz)(n)}function b(e,t){if(!e||!(0,l.JY)(t))return e;if("rings"in e||"paths"in e){if((0,o.Wi)(v))throw new TypeError("geometry engine not loaded");return v.simplify(t,e)}return e}function F(){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,o.Wi)(v),!e.t0){e.next=5;break}return e.next=4,Promise.all([n.e(99058),n.e(63645)]).then(n.bind(n,50309));case 4:v=e.sent;case 5:return e.abrupt("return",v);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(0,l.JY)(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n,e.t0){e.next=4;break}return e.next=4,F();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},52410:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(37762),r=n(15671),s=n(43144),a=n(80031);function u(e){return"date"===e.type||"esriFieldTypeDate"===e.type}function o(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function l(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,r.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var n,s=[],c=(0,i.Z)(t);try{for(c.s();!(n=c.n()).done;){var h=n.value,p=null===h||void 0===h?void 0:h.name,y=f(null===h||void 0===h?void 0:h.name);if(p&&y){var v=d(p);this._fieldsMap.set(p,h),this._fieldsMap.set(v,h),this._normalizedFieldsMap.set(y,h),s.push(v),u(h)?(this.dateFields.push(h),this._dateFieldsSet.add(h)):(0,a.H7)(h)&&(this._numericFieldsSet.add(h),this.numericFields.push(h)),o(h)||l(h)||(h.editable=null==h.editable||!!h.editable,h.nullable=null==h.nullable||!!h.nullable)}}}catch(m){c.e(m)}finally{c.f()}s.sort(),this.uid=s.join(",")}}return(0,s.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,i.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var n=e.value;o(n)||l(n)||n.nullable||void 0!==(0,a.os)(n)||this._requiredFields.push(n)}}catch(r){t.e(r)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var n=this._fieldsMap.get(e);return n||((n=null!==(t=this._fieldsMap.get(d(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(f(e)))&&this._fieldsMap.set(e,n),n)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,n=this.get(e);if(n)return null!==(t=n.name)&&void 0!==t?t:void 0}}]),e}();function d(e){return e.trim().toLowerCase()}function f(e){var t,n;return null!==(t=null===(n=(0,a.q6)(e))||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:""}},85249:function(e,t,n){n.d(t,{v:function(){return i}});var i=new(n(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},76115:function(e,t,n){n.d(t,{ET:function(){return a},I4:function(){return s},SQ:function(){return i},X1:function(){return r},eG:function(){return l},lF:function(){return u},lj:function(){return d},qP:function(){return o},wW:function(){return c}});var i=[252,146,31,255],r=[153,153,153,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},u={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=40869.08055d0f.chunk.js.map