"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[63169],{63169:function(e,t,i){i.r(t),i.d(t,{arcgis_hub_timeline_editor:function(){return b}});var n=i(93433),a=i(74165),r=i(15861),o=i(15671),l=i(43144),s=i(72585),c=i(12868),u=i(32836),h=i(64597),d=i(25434),g=(i(84371),{required:[],type:"object",properties:{title:{type:"string",maxLength:255},description:{type:"string",maxLength:500},canCollapse:{type:"boolean"}}}),p={type:"Layout",elements:[{labelKey:"title",scope:"/properties/title",type:"Control"},{labelKey:"description",scope:"/properties/description",type:"Control",options:{control:"hub-field-input-input",type:"textarea"}}]},f={required:["title"],type:"object",properties:{title:{type:"string",maxLength:255,minLength:1},timeframe:{type:"string"},stageDescription:{type:"string",maxLength:500},link:{type:"object",properties:{href:{type:"string",format:"url"},title:{type:"string"}}}}},m={type:"Layout",elements:[{labelKey:"title",scope:"/properties/title",type:"Control"},{labelKey:"timeframe",scope:"/properties/timeframe",type:"Control"},{labelKey:"stageDescription",scope:"/properties/stageDescription",type:"Control",options:{control:"hub-field-input-input",type:"textarea"}},{labelKey:"linkHref",scope:"/properties/link/properties/href",type:"Control",options:{helperText:{labelKey:"linkHrefHelperText"}}},{labelKey:"linkTitle",scope:"/properties/link/properties/title",type:"Control"}]},b=function(){function e(t){(0,o.Z)(this,e),(0,s.r)(this,t),this.arcgisHubTimelineEditorChange=(0,s.c)(this,"arcgisHubTimelineEditorChange",7),this.stages=[],this._timelineSchema=(0,d.c)(g),this._timelineUiSchema=(0,d.c)(p),this._stageSchema=(0,d.c)(f),this._stageUiSchema=(0,d.c)(m),this._currentStageIdx=-1,(0,u.b)(this,"handleAddStage","handleEditorChangeEvent","handleStageOrderChangeEvent","translationFunc")}return(0,l.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.i.loadIntlForComponent(this.element);case 2:this.intl=e.sent,this._timeline=this.values,this.stages=(null===(t=this.values)||void 0===t?void 0:t.stages)||[];case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateStages",value:function(e){this._timeline.stages=e,(this._timeline.canCollapse||void 0===this._timeline.canCollapse&&this.stages.length>=6)&&(this._timeline.canCollapse=this.stages.length>=6);var t={values:this._timeline,valid:!0};this.arcgisHubTimelineEditorChange.emit(t)}},{key:"handleRemoveStage",value:function(e){var t,i=(0,n.Z)(this._timeline.stages);i.forEach((function(i,n){i.key===e&&(t=n)})),i.splice(t,1),this._currentStageIdx=-1,this.stages=i,this.updateStages(i)}},{key:"handleAddStage",value:function(){var e={key:(new Date).getTime(),title:"",timeframe:"",stageDescription:"",status:"Not Started"},t=(0,n.Z)(this._timeline.stages||[]),i=t.push(e);this._currentStageIdx=i-1,this.stages=t,this.updateStages(t)}},{key:"handleEditorChangeEvent",value:function(e){if(e.stopPropagation(),e.detail.valid){this._timeline=Object.assign(Object.assign({},this._timeline),e.detail.values);var t={values:this._timeline,valid:!0};this.arcgisHubTimelineEditorChange.emit(t)}}},{key:"handleStageEditorChangeEvent",value:function(e,t){if(e.stopPropagation(),e.detail.valid){var i=(0,n.Z)(this._timeline.stages);i.forEach((function(n,a){n.key===t.key&&(i[a]=Object.assign(Object.assign({},n),e.detail.values))})),this.updateStages(i)}}},{key:"handleStageStatusChange",value:function(e,t){var i=(0,n.Z)(this._timeline.stages);i.forEach((function(i){i.key===e.key&&(i.status=t)})),this.updateStages(i)}},{key:"onStageEditorOpen",value:function(e){var t=this,i=(0,n.Z)(this._timeline.stages);i.forEach((function(i,n){i.key===e&&(t._currentStageIdx=n)})),this.stages=i,this.updateStages(i)}},{key:"handleStageOrderChangeEvent",value:function(e){e.stopPropagation();var t=(0,n.Z)(this._timeline.stages),i=t[e.oldIndex];t[e.oldIndex]=t[e.newIndex],t[e.newIndex]=i,this.updateStages(t)}},{key:"renderStages",value:function(){var e=this;return(0,s.h)("calcite-sortable-list",{onChange:this.handleStageOrderChangeEvent},this.stages.map((function(t,i){return e.renderStage(t,i)})))}},{key:"renderStage",value:function(e,t){var i=this,n={title:e.title,timeframe:e.timeframe,stageDescription:e.stageDescription,link:e.link};return(0,s.h)(s.F,null,(0,s.h)("calcite-block",{collapsible:!0,description:e.timeframe,"drag-handle":!0,heading:e.title,key:e.key,onClick:function(){return i.onStageEditorOpen(e.key)},open:t===this._currentStageIdx},(0,s.h)("calcite-icon",{icon:(0,h.g)(e.status),scale:"s",slot:"icon"}),(0,s.h)("calcite-card",{class:"stage-editor",dir:this.intl.direction},(0,s.h)("arcgis-configuration-editor",{onArcgisConfigurationEditorChange:function(t){return i.handleStageEditorChangeEvent(t,e)},schema:this._stageSchema,t:this.translationFunc,uiSchema:this._stageUiSchema,values:n}),(0,s.h)("calcite-label",null,this.intl.t("status"),(0,s.h)("calcite-combobox",{label:this.intl.t("setStatus"),"overlay-positioning":"fixed",placeholder:"Set status",scale:"m","selection-mode":"single"},(0,s.h)("calcite-combobox-item",{"aria-hidden":"true",icon:"circle",onClick:function(){return i.handleStageStatusChange(e,"Not Started")},selected:"Not Started"===e.status,textLabel:this.intl.t("notStarted"),value:"circle"}),(0,s.h)("calcite-combobox-item",{"aria-hidden":"true",icon:"star-circle",onClick:function(){return i.handleStageStatusChange(e,"In Progress")},selected:"In Progress"===e.status,textLabel:this.intl.t("inProgress"),value:"x-circle-f"}),(0,s.h)("calcite-combobox-item",{"aria-hidden":"true",icon:"x-circle-f",onClick:function(){return i.handleStageStatusChange(e,"Skipped")},selected:"Skipped"===e.status,textLabel:this.intl.t("skipped"),value:"star-circle"}),(0,s.h)("calcite-combobox-item",{"aria-hidden":"true",icon:"check-circle-f",onClick:function(){return i.handleStageStatusChange(e,"Complete")},selected:"Complete"===e.status,textLabel:this.intl.t("complete"),value:"check-circle-f"}))),(0,s.h)("calcite-button",{appearance:"outline",color:"red",onClick:function(){return i.handleRemoveStage(e.key)},scale:"s",width:"auto"},this.intl.t("delete")))))}},{key:"translationFunc",value:function(e,t,i){return this.intl.t(e,t,i)}},{key:"handleCollapseToggle",value:function(e){this._timeline.canCollapse=e.detail.switched,this.collapseToggle=e.detail.switched}},{key:"isCollapseToggleDisabled",value:function(){var e;return(null===(e=this._timeline.stages)||void 0===e?void 0:e.length)<6}},{key:"render",value:function(){var e,t,i,n={title:null===(e=this._timeline)||void 0===e?void 0:e.title,description:null===(t=this._timeline)||void 0===t?void 0:t.description,canCollapse:null===(i=this._timeline)||void 0===i?void 0:i.canCollapse};return(0,s.h)(s.H,null,(0,s.h)("arcgis-configuration-editor",{onArcgisConfigurationEditorChange:this.handleEditorChangeEvent,schema:this._timelineSchema,t:this.translationFunc,uiSchema:this._timelineUiSchema,values:n}),(0,s.h)("div",{class:"steps-heading"},this.intl.t("steps")),(0,s.h)("div",{class:"collapse-toggle-heading"},(0,s.h)("calcite-label",null,this.intl.t("enableCollapse")),(0,s.h)("calcite-icon",{icon:"information-f",id:"collapse-tooltip",scale:"s"}),(0,s.h)("calcite-tooltip",{label:this.intl.t("collapseToggle"),placement:"top","reference-element":"collapse-tooltip"},(0,s.h)("span",null,this.intl.t("collapseToggleTooltip")))),(0,s.h)("calcite-switch",{checked:this._timeline.canCollapse,disabled:this.isCollapseToggleDisabled()}),this.renderStages(),(0,s.h)("calcite-button",{appearance:"solid",color:"blue","icon-start":"plus-circle",onClick:this.handleAddStage,type:"button",width:"auto"},this.intl.t("addNewStep")))}},{key:"element",get:function(){return(0,s.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}}]),e}();b.style=".sc-arcgis-hub-timeline-editor-h{display:block}calcite-sortable-list.sc-arcgis-hub-timeline-editor{margin-bottom:1.5rem}.stage-editor.sc-arcgis-hub-timeline-editor{margin-left:1rem}calcite-combobox.sc-arcgis-hub-timeline-editor{margin-bottom:0.5rem}.collapse-toggle-heading.sc-arcgis-hub-timeline-editor{display:flex}.collapse-toggle-heading.sc-arcgis-hub-timeline-editor calcite-label.sc-arcgis-hub-timeline-editor{margin-right:0.25rem}.steps-heading.sc-arcgis-hub-timeline-editor{margin-bottom:0.75rem;border-width:0px;border-bottom-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-top:0.75rem;padding-bottom:1.25rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}"},32836:function(e,t,i){i.d(t,{b:function(){return n}});var n=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];i.forEach((function(t){if("function"!==typeof e[t])throw new Error("Cannot bind context. ".concat(t," must be a function"));e[t]=e[t].bind(e)}))}},64597:function(e,t,i){i.d(t,{g:function(){return n}});var n=function(e){var t;switch(e){case"Not Started":t="circle";break;case"In Progress":t="star-circle";break;case"Skipped":t="x-circle-f";break;case"Complete":t="check-circle-f"}return t}},62254:function(e,t,i){function n(e,t){return t.split(".").reduce((function(e,t){return e?e[t]:void 0}),e)}i.d(t,{g:function(){return n}})},25434:function(e,t,i){i.d(t,{a:function(){return l},b:function(){return u},c:function(){return a},d:function(){return c},e:function(){return g},f:function(){return p},g:function(){return r},i:function(){return d},m:function(){return s},u:function(){return h},w:function(){return o}});var n=i(62254);function a(e){var t={};if(Array.isArray(e))t=e.map(a);else if("object"===typeof e){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];null!=n&&"object"===typeof n?n instanceof Date?t[i]=new Date(n.getTime()):"undefined"!==typeof Blob&&n instanceof Blob?t[i]=new Blob([n],{type:n.type}):t[i]=a(n):t[i]=n}}else t=e;return t}function r(e,t,i){return e?e.reduce((function(e,a){return(0,n.g)(a,t)===i&&(e=a),e}),null):null}function o(e,t){return e.filter((function(e){return e!==t}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"i";return"".concat(e).concat(Math.random().toString(36).substr(2,8))}function s(e,t,i){return null!==t&&void 0!==t&&((i=a(i))[e]=t),i}function c(e,t){return null!==e&&void 0!==e&&(t=a(t)).push(e),t}function u(e){return(e=(e=e.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,(function(e,t,i){return i?i.toUpperCase():""})).replace(/(^|\/)([A-Z])/g,(function(e,t,i){return e.toLowerCase()}))}function h(e,t,i){return i.indexOf(e)===t}var d=function(e){return null==e},g=function(e){var t=Array.from(e);return t[0]=t[0].toUpperCase(),t.join("")};function p(e){return e.reduce((function(e,t){return e.concat(t)}),[])}}}]);
//# sourceMappingURL=63169.81381c51.chunk.js.map