"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[85575,65905],{44925:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,{Z:function(){return n}})},65905:function(e,t,r){r.d(t,{V:function(){return c},b:function(){return l}});var n=r(42265),o=r(76200),i=r(10064),a=r(32718),u=r(35995),s=a.Z.getLogger("esri.assets");function l(e,t){return(0,o.default)(c(e),t)}function c(e){if(!n.Z.assetsPath)throw s.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new i.Z("assets:path-not-set","config.assetsPath is not set");return(0,u.v_)(n.Z.assetsPath,e)}},8537:function(e,t,r){r.d(t,{YP:function(){return i}});var n=r(44927),o=(r(98928),r(84652),r(32718));r(66978);(0,n.K)(o.Z.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});function i(e,t,r,n){return e.watch(t,r,n)}},82582:function(e,t,r){r.d(t,{D9:function(){return u},DE:function(){return a},dp:function(){return i},yZ:function(){return o}});var n=r(68860);function o(e,t){var r=t||e.extent,o=e.width,i=(0,n.c9)(r&&r.spatialReference);return r&&o?r.width/o*i*n.hd*96:0}function i(e,t){return e/((0,n.c9)(t)*n.hd*96)}function a(e){return e/(96*n.hd)}function u(e,t){var r=e.extent,n=e.width-(e.padding?e.padding.left+e.padding.right:0),o=i(t,r.spatialReference);return r.clone().expand(o*n/r.width)}},59166:function(e,t,r){r(76969),r(6291),r(8704),r(36257);var n=r(41201),o=r(74165),i=r(15671),a=r(43144),u=r(15861),s=r(76200),l=r(10064),c=r(92026);function d(){return d=(0,u.Z)((0,o.Z)().mark((function e(t,r,i,a){var u,s,c,d,f,v,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r.exec(i)){e.next=3;break}throw new l.Z("esri-intl:invalid-bundle",'Bundle id "'.concat(i,'" is not compatible with the pattern "').concat(r,'"'));case 3:return s=u[1]?"".concat(u[1],"/"):"",c=u[2],d=(0,n.Su)(a),f="".concat(s).concat(c,".json"),v=d?"".concat(s).concat(c,"_").concat(d,".json"):f,e.prev=4,e.next=7,p(t(v));case 7:case 17:h=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),v!==f){e.next=14;break}throw new l.Z("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,p(t(f));case 20:throw e.prev=20,e.t1=e.catch(14),new l.Z("intl:unknown-bundle",'Bundle "'.concat(i,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",h);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,u.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.pC)(h.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",h.fetchBundleAsset(t));case 2:return e.next=4,(0,s.default)(t,{responseType:"text"});case 4:return r=e.sent,e.abrupt("return",JSON.parse(r.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){function e(t){var r,n=t.base,o=void 0===n?"":n,a=t.pattern,u=t.location,s=void 0===u?new URL(window.location.href):u;(0,i.Z)(this,e),r="string"==typeof s?function(e){return new URL(e,new URL(s,window.location.href)).href}:s instanceof URL?function(e){return new URL(e,s).href}:s,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=r,o=o?o.endsWith("/")?o:o+"/":"",this.matcher=new RegExp("^".concat(o,"(?:(.*)/)?(.*)$"))}return(0,a.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,r,n){return d.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var h={},g=r(65905);(0,n.tz)(function(e){return new v(e)}({pattern:"esri/",location:g.V}))},41201:function(e,t,r){r.d(t,{ME:function(){return b},Su:function(){return _},tz:function(){return m}});var n=r(74165),o=r(15671),i=r(43144),a=r(29439),u=r(15861),s=r(37762),l=r(10064),c=r(66978),d=r(36257),p=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,f={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function v(e){var t;return null!==(t=f[e])&&void 0!==t&&t}var h=[],g=new Map;function y(e){var t,r=(0,s.Z)(g.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;Z(e.pattern,n)&&g.delete(n)}}catch(o){r.e(o)}finally{r.f()}}function m(e){return h.includes(e)||(y(e),h.unshift(e)),{remove:function(){var t=h.indexOf(e);t>-1&&(h.splice(t,1),y(e))}}}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)((0,n.Z)().mark((function e(t){var r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,d.Kd)(),g.has(t)||g.set(t,S(t,r)),o=g.get(t),e.t0=o,!e.t0){e.next=7;break}return e.next=7,C.add(o);case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){if(!p.test(e))return null;var t=p.exec(e);if(null===t)return null;var r=(0,a.Z)(t,3),n=r[1],o=r[2],i=n+(o?"-"+o.toUpperCase():"");return v(i)?i:v(n)?n:null}function S(e,t){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)((0,n.Z)().mark((function e(t,r){var o,i,a,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=(0,s.Z)(h),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=18;break}if(!Z((u=a.value).pattern,t)){e.next=16;break}return e.prev=7,e.next=10,u.fetchMessageBundle(t,r);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(7),o.push(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),i.e(e.t1);case 23:return e.prev=23,i.f(),e.finish(23);case 26:if(!o.length){e.next=28;break}throw new l.Z("intl:message-bundle-error",'Errors occurred while loading "'.concat(t,'"'),{errors:o});case 28:throw new l.Z("intl:no-message-bundle-loader",'No loader found for message bundle "'.concat(t,'"'));case 29:case"end":return e.stop()}}),e,null,[[2,20,23,26],[7,13]])})))).apply(this,arguments)}function Z(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,d.Ze)((function(){g.clear()}));var C=new(function(){function e(){(0,o.Z)(this,e),this._numLoading=0,this._dfd=null}return(0,i.Z)(e,[{key:"waitForAll",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._dfd,!e.t0){e.next=4;break}return e.next=4,this._dfd.promise;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e){var t=this;return this._increase(),e.then((function(){return t._decrease()}),(function(){return t._decrease()})),this.waitForAll()}},{key:"_increase",value:function(){this._numLoading++,this._dfd||(this._dfd=(0,c.dD)())}},{key:"_decrease",value:function(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}]),e}())},8704:function(e,t,r){r.d(t,{n:function(){return l}});var n=r(32718),o=r(18202),i=r(643),a=r(76969),u=r(6291),s=n.Z.getLogger("esri.intl.substitute");function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.format,o=void 0===n?{}:n;return(0,i.gx)(e,(function(e){return c(e,t,o)}))}function c(e,t,r){var n,i,a,u=e.indexOf(":");if(-1===u?i=e.trim():(i=e.slice(0,u).trim(),a=e.slice(u+1).trim()),!i)return"";var s=(0,o.hS)(i,t);if(null==s)return"";var l=null!==(n=a?null===r||void 0===r?void 0:r[a]:null)&&void 0!==n?n:null===r||void 0===r?void 0:r[i];return l?d(s,l):a?p(s,a):f(s)}function d(e,t){switch(t.type){case"date":return(0,a.p6)(e,t.intlOptions);case"number":return(0,u.uf)(e,t.intlOptions);default:return s.warn("missing format descriptor for key {key}"),f(e)}}function p(e,t){switch(t.toLowerCase()){case"dateformat":return(0,a.p6)(e);case"numberformat":return(0,u.uf)(e);default:return s.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,a.p6)(e):/^numberformat/i.test(t)?(0,u.uf)(e):f(e)}}function f(e){switch(typeof e){case"string":return e;case"number":return(0,u.uf)(e);case"boolean":return""+e;default:return e instanceof Date?(0,a.p6)(e):""}}},45362:function(e,t,r){r.d(t,{i:function(){return f}});var n=r(74165),o=r(1413),i=r(15861),a=r(76200),u=r(25243),s=r(77981),l=r(23084),c=r(35594),d=r(81943),p=(0,u.se)(d.Z);function f(e,t,r){return v.apply(this,arguments)}function v(){return v=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var u,d,f,v,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p(r),u=(0,l.en)(t),d=(0,o.Z)((0,o.Z)({},u.query),{},{f:"json"},r.toJSON()),f=r.outSpatialReference,v=(0,s.Ji)(r.geometries[0]),h=(0,l.lA)(d,i),e.abrupt("return",(0,a.default)(u.path+"/project",h).then((function(e){var t=e.data.geometries;return(0,c.o)(t,v,f)})));case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}},35594:function(e,t,r){r.d(t,{F:function(){return o},o:function(){return i}});var n=r(77981);function o(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function i(e,t,r){var o=(0,n.q9)(t);return e.map((function(e){var t=o.fromJSON(e);return t.spatialReference=r,t}))}},12987:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(43144),o=r(15671),i=r(60136),a=r(92572),u=r(27366),s=r(11582),l=r(46784),c=r(92026),d=r(49861),p=(r(25243),r(63780),r(69912)),f=function(e){(0,i.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).onFields=null,n.operator=null,n.searchTerm=null,n.searchType=null,n}return(0,n.Z)(r)}((0,s.J)(l.wq));(0,u._)([(0,d.Cb)({type:[String],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:(0,c.pC)(this.onFields)&&this.onFields.length>0}}}}})],f.prototype,"onFields",void 0),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"operator",void 0),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"searchTerm",void 0),(0,u._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"searchType",void 0);var v=f=(0,u._)([(0,p.j)("esri.rest.support.FullTextSearch")],f)},81943:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(15671),o=r(43144),i=r(60136),a=r(92572),u=r(27366),s=r(46784),l=r(49861),c=(r(25243),r(63780),r(69912)),d=r(77981),p=function(e){(0,i.Z)(r,e);var t=(0,a.Z)(r);function r(e){var o;return(0,n.Z)(this,r),(o=t.call(this,e)).geometries=[],o.outSpatialReference=null,o.transformation=null,o.transformForward=null,o}return(0,o.Z)(r,[{key:"toJSON",value:function(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:(0,d.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}}]),r}(s.wq);(0,u._)([(0,l.Cb)()],p.prototype,"geometries",void 0),(0,u._)([(0,l.Cb)({json:{read:{source:"outSR"}}})],p.prototype,"outSpatialReference",void 0),(0,u._)([(0,l.Cb)()],p.prototype,"transformation",void 0),(0,u._)([(0,l.Cb)()],p.prototype,"transformForward",void 0);var f=p=(0,u._)([(0,c.j)("esri.rest.support.ProjectParameters")],p)},1337:function(e,t,r){r.d(t,{q:function(){return n}});var n={type:String,json:{read:{source:"token"},write:{target:"token"}}}},23084:function(e,t,r){r.d(t,{cv:function(){return s},en:function(){return u},lA:function(){return a}});var n=r(1413),o=(r(42265),r(19545),r(84652)),i=r(35995);r(66660);function a(e,t){return t?(0,n.Z)((0,n.Z)({},t),{},{query:(0,n.Z)((0,n.Z)({},null!==e&&void 0!==e?e:{}),t.query)}):{query:e}}function u(e){return"string"==typeof e?(0,i.mN)(e):(0,o.d9)(e)}function s(e,t,r){var n={};for(var o in e)if("declaredClass"!==o){var i=e[o];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){n[o]=[];for(var a=0;a<i.length;a++)n[o][a]=s(i[a])}else if("object"==typeof i)if(i.toJSON){var u=i.toJSON(r&&r[o]);n[o]=t?u:JSON.stringify(u)}else n[o]=t?i:JSON.stringify(i);else n[o]=i}return n}},69787:function(e,t,r){r.d(t,{Av:function(){return u},_1:function(){return i},lu:function(){return s},rs:function(){return a},tl:function(){return o}});var n=r(92026);function o(e){return e&&"function"==typeof e.highlight}function i(e){return e&&"function"==typeof e.maskOccludee}function a(e,t,r){return(0,n.Wi)(e)||e>r&&(0===t||e<t)}function u(e,t){return(0,n.pC)(e)&&e>0||(0,n.pC)(t)&&t>0}function s(e){var t,r,n=e.effectiveScaleRange;return{minScale:null!==(t=null===n||void 0===n?void 0:n.minScale)&&void 0!==t?t:0,maxScale:null!==(r=null===n||void 0===n?void 0:n.maxScale)&&void 0!==r?r:0}}},90196:function(e,t,r){r.d(t,{Z:function(){return Lt}});var n=r(93433),o=r(1413),i=r(74165),a=r(15861),u=r(15671),s=r(43144),l=r(60136),c=r(92572),d=r(27366),p=r(65905),f=r(42265),v=r(52639),h=r(44055),g=(r(51508),r(31319)),y=r(80987),m=r(10064),b=r(91505),w=r(100),_=r(32718),S=r(92026),x=r(66978),Z=r(94172),C=r(49861),k=r(25243),F=(r(63780),r(69912)),R=r(585),T=r(78952),j=r(36257),L=r(41201),E=r(70032),O=r(69787),I=r(97326),P=r(84652),N=r(79056),G=r(46784),A=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).autoNavigate=null,n.filter=null,n.getResults=null,n.getSuggestions=null,n.maxResults=null,n.maxSuggestions=null,n.minSuggestCharacters=null,n.outFields=null,n.placeholder="",n.popupEnabled=null,n.popupTemplate=null,n.prefix="",n.resultGraphicEnabled=null,n.resultSymbol=null,n.suggestionsEnabled=null,n.suffix="",n.withinViewEnabled=!1,n.zoomScale=null,n}return(0,s.Z)(r)}((0,N.IG)(G.wq));(0,d._)([(0,C.Cb)()],A.prototype,"autoNavigate",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"filter",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"getResults",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"getSuggestions",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"maxResults",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"maxSuggestions",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"minSuggestCharacters",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"outFields",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"placeholder",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"popupEnabled",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"popupTemplate",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"prefix",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"resultGraphicEnabled",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"resultSymbol",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"suggestionsEnabled",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"suffix",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"withinViewEnabled",void 0),(0,d._)([(0,C.Cb)()],A.prototype,"zoomScale",void 0);var D=A=(0,d._)([(0,F.j)("esri.widgets.Search.SearchSource")],A),M=(r(59166),r(68860)),J=r(80885),q=r(12987),z=(r(59486),r(82582)),K=r(53866),B=_.Z.getLogger("esri.widgets.Search.support.geometryUtils");function U(e,t){var r,n;if(!t)return B.error("missing-parameter: view is missing."),Promise.reject(new m.Z("searchgeometryutils:missing-parameter","view is missing."));if(!e)return B.error("missing-parameter: point is missing."),Promise.reject(new m.Z("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);var o=null===t||void 0===t||null===(r=t.map)||void 0===r?void 0:r.ground;return o&&o.layers.length?o.queryElevation(e,{cache:null===(n=t.basemapTerrain)||void 0===n?void 0:n.elevationQueryCache}).then((function(e){return e.geometry})):Promise.resolve(e)}function V(e){if((0,S.Wi)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function W(e,t,r){return(0,S.Wi)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?X(e,t,r):void 0}function H(e,t,r){return(0,S.Wi)(e)||(0,S.Wi)(t)?null:X(e.center,t,r)}function X(e,t,r){var n=e.hasZ?e.z:void 0;return t&&t.map?(r?(0,z.D9)(t,r):t.extent).clone().centerAt(e).set({zmax:n,zmin:n}):new K.Z({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:n,zmax:n})}var Q,$=r(8704),Y=r(76969),ee=/https?:\/\/services.*\.arcgis\.com/i,te=/(?:\{([^}]+)\})/g,re=_.Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function ne(e,t){var r=e.exactMatch,n=void 0!==r&&r,o=e.location,i=e.maxResults,a=e.spatialReference,u=e.source,s=e.sourceIndex,l=e.suggestResult,c=e.view,d=u.layer,p=u.filter,f=u.zoomScale,v=c&&c.scale,h=ie(u,c),g=t&&t.signal;return ue(d).then((function(){var e=d.popupTemplate;return e?e.getRequiredFields(d.fieldsIndex):null})).then((function(e){var t,r,y,b=d.objectIdField,w=d.returnZ,_=ve(u);if(!ge(d,_))throw re.error("invalid-field: displayField is invalid."),new m.Z("getResults():invalid-field","displayField is invalid.");var S=e&&e.length?e:[_],x=u.outFields||S,Z=ae(x);if(x.includes(b)||Z||x.push(b),(null===(t=d.floorInfo)||void 0===t?void 0:t.floorField)&&x.push(d.floorInfo.floorField),!Z&&!he(d,x))throw re.error("invalid-field: outField is invalid."),new m.Z("getResults():invalid-field","outField is invalid.");var C=d.createQuery(),k=u.orderByFields;if(k&&(C.orderByFields=k),a){C.outSpatialReference=a;var F=1/(0,M.c9)(a);F&&(C.maxAllowableOffset=F)}var R="mesh"===d.geometryType||"multipatch"===d.geometryType,T=(null===(r=d.capabilities)||void 0===r||null===(y=r.data)||void 0===y?void 0:y.supportsZ)&&!R;if(C.returnZ=T&&!1!==w,C.returnGeometry=!0,C.multipatchOption=R?"xyFootprint":null,x&&(C.outFields=x),o)C.geometry=o;else if(l.key)C.objectIds=[l.key];else{var j=u.searchFields||[_];if(!he(d,j))throw re.error("invalid-field: search field is invalid."),new m.Z("getResults():invalid-field","search field is invalid.");if(fe(d)&&(C.num=i),h&&(C.geometry=h),!l.text.trim())return[];var L=l.text,E=u.prefix,O=void 0===E?"":E,I=u.suffix,P=void 0===I?"":I,N=ye("".concat(O).concat(L).concat(P));pe(d)&&ce(d,j)&&!n&&L&&(C.fullText=de({text:L,searchFields:j}));var G=be({searchTerm:N,layer:d,searchFields:j,filter:p,exactMatch:n,query:C,type:"search"});if(C.where=G,!le(C))return[]}return d.queryFeatures(C,{signal:g}).then((function(e){return function(e,t,r,n,o,i,a){return e.features.map((function(e){return _e(e,t,r,n,o,i,a)}))}(e,c,u,s,_,v,f)}))}))}function oe(e,t){var r=e.source,n=e.spatialReference,o=e.view,i=e.suggestTerm,a=e.maxSuggestions,u=e.sourceIndex,s=e.exactMatch,l=r.layer,c=r.filter,d=t&&t.signal,p=ie(r,o);return ue(l).then((function(){if(!fe(l))return[];var e=ve(r),t=r.searchFields||[e],o=[];r.suggestionTemplate?r.suggestionTemplate.replace(te,(function(e,t){return o.push(t),e})):o.push(e);var f=ae(o);o.includes(l.objectIdField)||f||o.push(l.objectIdField);var v=ge(l,e),h=f||he(l,o),g=he(l,t);if(!v)throw re.error("invalid-field: displayField is invalid."),new m.Z("getSuggestions():invalid-field","displayField is invalid.");if(!h)throw re.error("invalid-field: outField is invalid."),new m.Z("getSuggestions():invalid-field","outField is invalid.");if(!g)throw re.error("invalid-field: search field is invalid."),new m.Z("getSuggestions():invalid-field","search field is invalid.");var y=l.createQuery(),b=r.orderByFields;if(b&&(y.orderByFields=b),y.outSpatialReference=n,y.returnGeometry=!1,y.num=a,y.outFields=o,p&&(y.geometry=p),!i.trim())return[];var w=r.prefix,_=void 0===w?"":w,S=r.suffix,x=void 0===S?"":S,Z=ye("".concat(_).concat(i).concat(x));pe(l)&&ce(l,t)&&!s&&i&&(y.fullText=de({text:i,searchFields:t}));var C=be({searchTerm:Z,layer:l,searchFields:t,filter:c,exactMatch:s,query:y,type:"suggest"});return y.where=C,le(y)?l.queryFeatures(y,{signal:d}).then((function(t){return function(e,t,r,n){return e.features.map((function(e){return function(e,t,r,n){var o=e.sourceLayer,i=e.attributes,a=o.objectIdField,u=i[a];return{text:we(e,t.suggestionTemplate,n),key:u,sourceIndex:r}}(e,t,r,n)}))}(t,r,u,e)})):[]}))}function ie(e,t){var r=e.filter,n=e.withinViewEnabled,o=t&&t.extent;return r&&r.geometry||(n&&o?o:void 0)}function ae(e){return e&&e.includes("*")}function ue(e){return se.apply(this,arguments)}function se(){return se=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=4;break}return e.next=4,t.load();case 4:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}function le(e){return!(!e.fullText&&!e.where)}function ce(e,t){var r=null===e||void 0===e?void 0:e.indexes;return!(!r||null===t||void 0===t||!t.length)&&r.filter((function(e){return"FullText"===e.indexType})).some((function(e){var r,n=(null===(r=e.fields)||void 0===r?void 0:r.split(",").map((function(e){return e.trim().toLowerCase()})))||[];return t.every((function(e){return n.includes(e.toLowerCase())}))}))}function de(e){var t=e.text,r=e.searchFields;return t.trim().split(" ").filter((function(e){return!!e.trim()})).map((function(e){return new q.Z({onFields:r,searchTerm:e,searchType:"prefix"})}))}function pe(e){var t,r,n;return null!==(t=null===e||void 0===e||null===(r=e.capabilities)||void 0===r||null===(n=r.query)||void 0===n?void 0:n.supportsFullTextSearch)&&void 0!==t&&t}function fe(e){var t,r,n;return null!==(t=null===e||void 0===e||null===(r=e.capabilities)||void 0===r||null===(n=r.query)||void 0===n?void 0:n.supportsPagination)&&void 0!==t&&t}function ve(e){return e.displayField||e.layer.displayField||function(e){var t,r,n,o;return null!==(t=null===e||void 0===e||null===(r=e.fieldsIndex)||void 0===r||null===(n=r.fields)||void 0===n||null===(o=n.find((function(e){return"string"===e.type})))||void 0===o?void 0:o.name)&&void 0!==t?t:""}(e.layer)}function he(e,t){return!(!e||null===t||void 0===t||!t.length)&&t.every((function(t){return ge(e,t)}))}function ge(e,t){return!!e.getField(t)}function ye(e){return e.replace(/\'/g,"''")}function me(e,t){var r=t&&t.where;return r?"(".concat(e,") AND (").concat(r,")"):e}function be(e){var t=e.searchTerm,r=e.layer,n=e.searchFields,o=e.filter,i=e.exactMatch,a=e.query,u=e.type,s=r.definitionExpression,l=r.url,c="";return!a.fullText&&t&&n&&n.forEach((function(e){var n=r.getField(e),a="function"==typeof r.getFieldDomain&&r.getFieldDomain(e),s=(a&&"coded-value"===a.type?function(e,t,r){var n=null,o=e.codedValues;return o&&o.some((function(e){var o=e.name,i=r?o:o.toLowerCase();return(r?t:t.toLowerCase())===i&&(n=e.code.toString(),!0)})),n}(a,t,i):null)||t||null;if(null!==s){var d=function(e){var t=e.currentTerm,r=e.field,n=e.filter,o=e.exactMatch,i=e.url,a=e.type,u=r.type,s=r.name;if("string"===u||"date"===u||"global-id"===u){var l=ee.test(i),c=l&&function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(t)?"N":"";return me(o&&"search"===a?"".concat(s," = ").concat(c,"'").concat(t,"'"):l?"".concat(s," LIKE ").concat(c,"'".concat(t,"%'")):"".concat("LOWER(".concat(s,")")," LIKE ",c,"'".concat(t.toLowerCase(),"%'")),n)}if("oid"===u||"small-integer"===u||"integer"===u||"single"===u||"double"===u){var d=Number(t);return isNaN(d)?null:me("".concat(s," = ").concat(d),n)}return me("".concat(s," = ").concat(t),n)}({currentTerm:s,field:n,filter:o,exactMatch:i,url:l,type:u});d&&(c+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(c,d))}})),s&&c?"(".concat(s,") AND (").concat(c,")"):s||c}function we(e,t,r){var n=e.sourceLayer,o=e.attributes,i="function"==typeof n.getFieldDomain&&n.getFieldDomain(r);if(t)return(0,$.n)(t,o);if(r&&o){var a=n.getField(r),u=function(e,t){return e[Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))]}(o,r);return null==u?"":i&&"coded-value"===i.type?function(e,t){var r=null,n=e.codedValues;return n&&n.length&&n.some((function(e){return e.code===t&&(r=e.name,!0)})),r}(i,u):"date"===(null===a||void 0===a?void 0:a.type)?(0,Y.p6)(new Date(u)):"number"==typeof u?u.toString():"string"!=typeof u?"":u.trim()}return""}function _e(e,t,r,n,o,i,a){var u=e.clone(),s=e.sourceLayer,l=s&&s.objectIdField,c=l&&e.attributes[l],d=we(e,r.searchTemplate,o),p=W(u.geometry,t,i),f="number"==typeof a?H((0,P.d9)(p),t,a):p,v=e.clone();return(0,S.pC)(f)&&(v.geometry=J.Z.fromExtent(f)),{extent:f,target:v,feature:u,key:c,name:d,sourceIndex:n}}var Se=Q=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).displayField=null,n.exactMatch=null,n.orderByFields=null,n.searchFields=null,n.searchTemplate=null,n.suggestionTemplate=null,n.getResults=function(e,t){return ne((0,o.Z)({source:(0,I.Z)(n)},e),t)},n.getSuggestions=function(e,t){return oe((0,o.Z)({source:(0,I.Z)(n)},e),t)},n}return(0,s.Z)(r,[{key:"layer",set:function(e){this._set("layer",e),e&&e.load().catch((function(){}))}},{key:"name",get:function(){var e;return null!==(e=this._getLayerTitle())&&void 0!==e?e:""},set:function(e){this._overrideIfSome("name",e)}},{key:"clone",value:function(){return new Q({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,P.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,P.d9)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}},{key:"_getFirstStringField",value:function(){var e,t;return null!==(e=null===(t=this.layer.fieldsIndex.fields.find((function(e){return"string"===e.type})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}},{key:"_getDisplayField",value:function(){return this.displayField||this.layer.displayField||this._getFirstStringField()}},{key:"_getSearchFieldsString",value:function(){var e=this.layer,t=this.searchFields;return e.loaded?": ".concat((t||[this._getDisplayField()]).map((function(t){var r=e.getField(t);return r&&r.alias||t})).join(", ")):""}},{key:"_getLayerTitle",value:function(){var e=this.layer;if(e){var t=e.title;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}}}]),r}(D);(0,d._)([(0,C.Cb)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Se.prototype,"displayField",void 0),(0,d._)([(0,C.Cb)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Se.prototype,"exactMatch",void 0),(0,d._)([(0,C.Cb)({value:null})],Se.prototype,"layer",null),(0,d._)([(0,C.Cb)()],Se.prototype,"name",null),(0,d._)([(0,C.Cb)({type:[String],json:{write:!0}})],Se.prototype,"orderByFields",void 0),(0,d._)([(0,C.Cb)()],Se.prototype,"searchFields",void 0),(0,d._)([(0,C.Cb)()],Se.prototype,"searchTemplate",void 0),(0,d._)([(0,C.Cb)()],Se.prototype,"suggestionTemplate",void 0);var xe=Se=Q=(0,d._)([(0,F.j)("esri.widgets.Search.LayerSearchSource")],Se),Ze=r(44925),Ce=r(76200),ke=r(23084);var Fe=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).address=null,n.attributes=null,n.extent=null,n.location=null,n.score=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],Fe.prototype,"address",void 0),(0,d._)([(0,C.Cb)({type:Object,json:{write:!0}})],Fe.prototype,"attributes",void 0),(0,d._)([(0,C.Cb)({type:K.Z,json:{write:!0}})],Fe.prototype,"extent",void 0),(0,d._)([(0,C.Cb)({type:R.Z,json:{write:!0}})],Fe.prototype,"location",void 0),(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],Fe.prototype,"score",void 0);var Re=Fe=(0,d._)([(0,F.j)("esri.rest.support.AddressCandidate")],Fe),Te=r(1337),je=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).address=null,n.apiKey=null,n.categories=null,n.countryCode=null,n.forStorage=null,n.location=null,n.locationType=null,n.magicKey=null,n.maxLocations=null,n.outFields=null,n.outSpatialReference=null,n.searchExtent=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:Object,json:{write:!0}})],je.prototype,"address",void 0),(0,d._)([(0,C.Cb)(Te.q)],je.prototype,"apiKey",void 0),(0,d._)([(0,C.Cb)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],je.prototype,"categories",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],je.prototype,"countryCode",void 0),(0,d._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],je.prototype,"forStorage",void 0),(0,d._)([(0,C.Cb)({type:R.Z,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],je.prototype,"location",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],je.prototype,"locationType",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],je.prototype,"magicKey",void 0),(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],je.prototype,"maxLocations",void 0),(0,d._)([(0,C.Cb)({type:[String],json:{write:{writer:function(e,t){t.outFields=e?e.join(","):null}}}})],je.prototype,"outFields",void 0),(0,d._)([(0,C.Cb)({type:T.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],je.prototype,"outSpatialReference",void 0),(0,d._)([(0,C.Cb)({type:K.Z,json:{write:{writer:function(e,t){var r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],je.prototype,"searchExtent",void 0),(je=(0,d._)([(0,F.j)("esri.rest.support.AddressToLocationsParameters")],je)).from=(0,k.se)(je);var Le=je,Ee=["address"];function Oe(){return Oe=(0,a.Z)((0,i.Z)().mark((function e(t,r,n){var a,u,s,l,c,d,p,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le.from(r),a=(0,ke.en)(t),u=r.toJSON(),s=u.address,l=(0,Ze.Z)(u,Ee),c=(0,o.Z)((0,o.Z)((0,o.Z)({},s),l),{},{f:"json"}),d=(0,ke.cv)((0,o.Z)((0,o.Z)({},a.query),c)),p=(0,ke.lA)(d,n),f="".concat(a.path,"/findAddressCandidates"),e.abrupt("return",(0,Ce.default)(f,p).then(Ie));case 3:case"end":return e.stop()}}),e)}))),Oe.apply(this,arguments)}function Ie(e){var t=e.data;if(!t)return[];var r=t.candidates,n=t.spatialReference;return r?r.map((function(e){if(e){var t=e.extent,r=e.location,o=!t||function(e){return e&&"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax}(t);return function(e){return!!e&&"number"==typeof e.x&&"number"==typeof e.y}(r)&&o?(t&&(t.spatialReference=n),r&&(r.spatialReference=n),Re.fromJSON(e)):void 0}})):[]}var Pe=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.location=null,n.locationType=null,n.outSpatialReference=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)(Te.q)],Pe.prototype,"apiKey",void 0),(0,d._)([(0,C.Cb)({type:R.Z,json:{write:{writer:function(e,t){var r=e?e.clone().normalize():null,n=void 0!==r;t.location=n?r:null}}}})],Pe.prototype,"location",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],Pe.prototype,"locationType",void 0),(0,d._)([(0,C.Cb)({type:T.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Pe.prototype,"outSpatialReference",void 0),(Pe=(0,d._)([(0,F.j)("esri.rest.support.LocationToAddressParameters")],Pe)).from=(0,k.se)(Pe);var Ne=Pe;function Ge(){return Ge=(0,a.Z)((0,i.Z)().mark((function e(t,r,n){var a,u,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ne.from(r),a=(0,ke.en)(t),u=(0,o.Z)((0,o.Z)({},r.toJSON()),{},{f:"json"}),s=(0,ke.cv)((0,o.Z)((0,o.Z)({},a.query),u)),l=(0,ke.lA)(s,n),c="".concat(a.path,"/reverseGeocode"),e.abrupt("return",(0,Ce.default)(c,l).then(Ae));case 3:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}function Ae(e){var t=e.data;if(t){var r=t.address,n=t.location,o=r&&r.Match_addr||"";return Re.fromJSON({address:o,attributes:r||{},location:n,score:100})}}var De=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).isCollection=null,n.magicKey=null,n.text=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],De.prototype,"isCollection",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],De.prototype,"magicKey",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],De.prototype,"text",void 0);var Me=De=(0,d._)([(0,F.j)("esri.rest.support.SuggestionCandidate")],De),Je=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.categories=null,n.countryCode=null,n.location=null,n.maxSuggestions=null,n.outSpatialReference=null,n.searchExtent=null,n.text=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)(Te.q)],Je.prototype,"apiKey",void 0),(0,d._)([(0,C.Cb)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Je.prototype,"categories",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],Je.prototype,"countryCode",void 0),(0,d._)([(0,C.Cb)({type:R.Z,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Je.prototype,"location",void 0),(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],Je.prototype,"maxSuggestions",void 0),(0,d._)([(0,C.Cb)({type:T.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Je.prototype,"outSpatialReference",void 0),(0,d._)([(0,C.Cb)({type:K.Z,json:{write:{writer:function(e,t){var r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],Je.prototype,"searchExtent",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],Je.prototype,"text",void 0),(Je=(0,d._)([(0,F.j)("esri.rest.support.SuggestLocationsParameters")],Je)).from=(0,k.se)(Je);var qe=Je;function ze(){return ze=(0,a.Z)((0,i.Z)().mark((function e(t,r,n){var a,u,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,ke.en)(t),u=(0,o.Z)((0,o.Z)({},(r=qe.from(r)).toJSON()),{},{f:"json"}),s=(0,ke.cv)((0,o.Z)((0,o.Z)({},a.query),u)),l=(0,ke.lA)(s,n),c="".concat(a.path,"/suggest"),e.abrupt("return",(0,Ce.default)(c,l).then(Ke));case 2:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ke(e){var t=e.data;if(!t)return[];var r=t.suggestions;return r?r.map((function(e){return new Me(e)})):[]}var Be="Single Line Input";function Ue(e,t){return e.location?function(e,t){var r=e.source,n=e.spatialReference,o=e.location,i=e.sourceIndex,a=e.view,u=r.apiKey,s=r.url,l=r.zoomScale,c=r.defaultZoomScale,d=a&&a.scale,p=t&&t.signal,f=new Ne;return f.location=o,u&&(f.apiKey=u),n&&(f.outSpatialReference=n),function(e,t,r){return Ge.apply(this,arguments)}(s,f,{signal:p}).then((function(e){return $e([e],{sourceIndex:i,scale:d,view:a,zoomScale:l,defaultZoomScale:c})})).catch((function(){return[]}))}(e,t):function(e,t){var r=e.source,n=e.suggestResult,o=e.spatialReference,i=e.view,a=e.maxResults,u=e.sourceIndex,s=r&&r.zoomScale,l=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);var c=!n.key&&r.prefix?r.prefix:"",d=!n.key&&r.suffix?r.suffix:"",p="".concat(c).concat(n.text).concat(d),f=new Le,v=r.apiKey,h=r.url,g=i&&i.scale,y=Qe(r,i),m=t&&t.signal;if(v&&(f.apiKey=v),!h)return Promise.resolve(null);r.categories&&(f.categories=r.categories),r.locationType&&(f.locationType=r.locationType),o&&(f.outSpatialReference=o);var b=Ve(i,r);b&&(f.location=b),f.maxLocations=a,y&&(f.searchExtent=(0,S.Wg)(y)),r.countryCode&&(f.countryCode=r.countryCode);var w=n.key,_="".concat(w);return w&&(f.magicKey=_),f.address={},f.address[r.singleLineFieldName||Be]=p,r.outFields&&(f.outFields=r.outFields),function(e,t,r){return Oe.apply(this,arguments)}(h,f,{signal:m}).then((function(e){return $e(e,{key:_,scale:g,sourceIndex:u,view:i,zoomScale:s,defaultZoomScale:l})}))}(e,t)}function Ve(e,t){if(t.localSearchDisabled)return null;var r=null===e||void 0===e?void 0:e.scale;return"number"==typeof r&&r<=3e5?e.get("extent.center"):null}function We(e,t){var r=e.source,n=e.spatialReference,o=e.view,i=e.suggestTerm,a=e.maxSuggestions,u=e.sourceIndex,s=new qe,l=r.apiKey,c=r.url,d=Qe(r,o),p=t&&t.signal;if(!c)return Promise.resolve(null);l&&(s.apiKey=l),r.categories&&(s.categories=r.categories),n&&(s.outSpatialReference=n);var f=Ve(o,r);if(f&&(s.location=f),!i.trim())return Promise.resolve(null);var v=r.prefix,h=void 0===v?"":v,g=r.suffix,y=void 0===g?"":g,m="".concat(h).concat(i).concat(y);return s.text=m,d&&(s.searchExtent=(0,S.Wg)(d)),s.maxSuggestions=a,r.countryCode&&(s.countryCode=r.countryCode),function(e,t,r){return ze.apply(this,arguments)}(c,s,{signal:p}).then((function(e){return function(e,t){return e.map((function(e){return function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)}))}(e,u)}))}function He(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}var Xe;function Qe(e,t){var r=e.filter,n=e.withinViewEnabled,o=t&&t.scale,i=t&&t.extent;return W(r&&r.geometry,t,o)||(n&&i?i:void 0)}function $e(e,t){return e.filter(Boolean).map((function(e){return function(e,t){var r=t.key,n=t.scale,o=t.sourceIndex,i=t.view,a=t.zoomScale,u=t.defaultZoomScale,s=e.attributes,l=e.extent,c=e.location,d=e.address,p=new v.Z({geometry:c,attributes:s}),f=l||c,h=W(f,i,n),g="number"==typeof a?H(h,i,a):"number"==typeof u&&"point"===f.type?H(h,i,u):h,y=c?"".concat(c.x,",").concat(c.y):"",m=d||y,b=p.clone();return(0,S.pC)(g)&&(b.geometry=J.Z.fromExtent(g)),{extent:g,feature:p,target:b,key:r,name:m,sourceIndex:o}}(e,t)}))}var Ye=Xe=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.categories=null,n.countryCode=null,n.defaultZoomScale=null,n.localSearchDisabled=!1,n.locationType=null,n.name="",n.placeholder="",n.searchTemplate="",n.singleLineFieldName=null,n.suggestionsEnabled=null,n.url=null,n.zoomScale=null,n.getResults=function(e,t){return Ue((0,o.Z)({source:(0,I.Z)(n)},e),t)},n.getSuggestions=function(e,t){return We((0,o.Z)({source:(0,I.Z)(n)},e),t)},n}return(0,s.Z)(r,[{key:"clone",value:function(){return new Xe({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,P.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,P.d9)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}}]),r}(D);(0,d._)([(0,C.Cb)()],Ye.prototype,"apiKey",void 0),(0,d._)([(0,C.Cb)()],Ye.prototype,"categories",void 0),(0,d._)([(0,C.Cb)()],Ye.prototype,"countryCode",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"defaultZoomScale",void 0),(0,d._)([(0,C.Cb)()],Ye.prototype,"localSearchDisabled",void 0),(0,d._)([(0,C.Cb)()],Ye.prototype,"locationType",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"name",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"placeholder",void 0),(0,d._)([(0,C.Cb)()],Ye.prototype,"searchTemplate",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"singleLineFieldName",void 0),(0,d._)([(0,C.Cb)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],Ye.prototype,"suggestionsEnabled",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"url",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],Ye.prototype,"zoomScale",void 0);var et=Ye=Xe=(0,d._)([(0,F.j)("esri.widgets.Search.LocatorSearchSource")],Ye),tt=r(93169),rt=r(81753),nt=(r(19545),r(35995),r(32238),r(77577),r(29909)),ot=r(43404),it=(new ot.X({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),r(77981));new ot.X({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});var at=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).deviationUnit=null,n.geometries=null,n.maxDeviation=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],at.prototype,"deviationUnit",void 0),(0,d._)([(0,C.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})).filter(S.pC):null}},write:{writer:function(e,t){var r;t.geometries=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],at.prototype,"geometries",void 0),(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],at.prototype,"maxDeviation",void 0),(at=(0,d._)([(0,F.j)("esri.rest.support.GeneralizeParameters")],at)).from=(0,k.se)(at);new ot.X({preserveShape:"preserve-shape"});var ut=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).calculationType=null,n.geodesic=null,n.lengthUnit=null,n.polylines=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],ut.prototype,"calculationType",void 0),(0,d._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],ut.prototype,"geodesic",void 0),(0,d._)([(0,C.Cb)({json:{write:!0}})],ut.prototype,"lengthUnit",void 0),(0,d._)([(0,C.Cb)({type:[nt.Z],json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],ut.prototype,"polylines",void 0),(ut=(0,d._)([(0,F.j)("esri.rest.support.LengthsParameters")],ut)).from=(0,k.se)(ut);new ot.X({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),new ot.X({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});var st=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).bevelRatio=null,n.geometries=null,n.offsetDistance=null,n.offsetHow=null,n.offsetUnit=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],st.prototype,"bevelRatio",void 0),(0,d._)([(0,C.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})).filter(S.pC):null}},write:{writer:function(e,t){var r;t.geometries=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],st.prototype,"geometries",void 0),(0,d._)([(0,C.Cb)({type:Number,json:{write:!0}})],st.prototype,"offsetDistance",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],st.prototype,"offsetHow",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],st.prototype,"offsetUnit",void 0),(st=(0,d._)([(0,F.j)("esri.rest.support.OffsetParameters")],st)).from=(0,k.se)(st);var lt=r(45362);new ot.X({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});var ct=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).geometries1=null,n.geometries2=null,n.relation=null,n.relationParameter=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})).filter(S.pC):null}},write:{writer:function(e,t){var r;t.geometries1=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],ct.prototype,"geometries1",void 0),(0,d._)([(0,C.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})).filter(S.pC):null}},write:{writer:function(e,t){var r;t.geometries2=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],ct.prototype,"geometries2",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],ct.prototype,"relation",void 0),(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],ct.prototype,"relationParameter",void 0),(ct=(0,d._)([(0,F.j)("esri.rest.support.RelationParameters")],ct)).from=(0,k.se)(ct);new ot.X({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});var dt=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).extendHow="default-curve-extension",n.polylines=null,n.trimExtendTo=null,n}return(0,s.Z)(r)}(G.wq);(0,d._)([(0,C.Cb)({type:String,json:{write:!0}})],dt.prototype,"extendHow",void 0),(0,d._)([(0,C.Cb)({type:[nt.Z],json:{read:{reader:function(e){return e?e.map((function(e){return(0,it.im)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],dt.prototype,"polylines",void 0),(0,d._)([(0,C.Cb)({json:{read:{reader:function(e){return e?(0,it.im)(e):null}},write:{writer:function(e,t){t.trimExtendTo=e.toJSON()}}}})],dt.prototype,"trimExtendTo",void 0),(dt=(0,d._)([(0,F.j)("esri.rest.support.TrimExtendParameters")],dt)).from=(0,k.se)(dt);var pt=r(81943),ft=_.Z.getLogger("esri.widgets.support.geolocationUtils"),vt={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function ht(){return function(){var e=(0,tt.Z)("esri-geolocation");return e||ft.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){var e=window.isSecureContext;return e||ft.warn("insecure-context","Geolocation requires a secure origin."),e}()}function gt(e,t){var r,n=e.position,o=e.view,i=null===(r=function(e){var t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}(n))||void 0===r?void 0:r.coords;if(!i)throw new m.Z("geometry-service:no-coords","Geolocation has no coordinates");return function(e,t,r){if(!t)return Promise.resolve(e);var n=t.spatialReference;return n.isWGS84?Promise.resolve(e):n.isWebMercator?Promise.resolve((0,rt.$)(e)):function(e){if(f.Z.geometryServiceUrl)return Promise.resolve(f.Z.geometryServiceUrl);var t=E.Z.getDefault();return t.load(e).catch((function(){})).then((function(){return t.get("helperServices.geometry.url")}))}(r).then((function(t){if(!t)throw new m.Z("geometry-service:missing-url","Geometry service URL is missing");var o=new pt.Z({geometries:[e],outSpatialReference:n});return(0,lt.i)(t,o,r).then((function(e){return e[0]}))}))}(function(e){var t=e.longitude,r=e.latitude,n=e.altitude;return new R.Z({longitude:t,latitude:r,z:n||void 0,spatialReference:{wkid:4326}})}(i),o,t)}var yt=r(99505),mt=r(91946),bt=r(16851),wt=r(61459),_t=r(58009);function St(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}var xt="esri.widgets.Search.SearchViewModel",Zt=_.Z.getLogger(xt),Ct="highlight",kt=y.Z.ofType({key:function(e){return e.layer?"layer":"locator"},base:D,typeMap:{layer:xe,locator:et}}),Ft=T.Z.WGS84,Rt=/<(?:.|\s)*?>/g,Tt=-1,jt=function(e){(0,l.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e))._handles=new w.Z,n._gotoController=null,n._searching=null,n._createdFeatureLayers=[],n.autoNavigate=!0,n.autoSelect=!0,n.defaultPopupTemplate=null,n.defaultSources=new kt,n.defaultSymbols={point:new mt.Z({url:(0,p.V)("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new bt.Z({color:[130,130,130,1],width:2}),polygon:new wt.Z({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},n.includeDefaultSources=!0,n.maxInputLength=128,n.maxResults=6,n.maxSuggestions=6,n.messages=null,n.minSuggestCharacters=3,n.popupEnabled=!0,n.popupTemplate=null,n.portal=E.Z.getDefault(),n.resultCount=null,n.resultGraphicEnabled=!0,n.resultGraphic=null,n.results=null,n.selectedSuggestion=null,n.searchAllEnabled=!0,n.selectedResult=null,n.sources=new kt,n.suggestionDelay=350,n.suggestionCount=null,n.suggestions=null,n.suggestionsEnabled=!0,n.view=null,n}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this,t=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,L.ME)("esri/widgets/Search/t9n/Search");case 2:r=t.sent,e.messages=r,e.defaultPopupTemplate=new h.Z({title:r.searchResult,content:"{Match_addr}"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),this._handles.add([(0,Z.YP)((function(){return[e.includeDefaultSources,e.view,e.portal]}),(function(){return e._update()}),Z.nn),(0,j.qe)(t)])}},{key:"destroy",value:function(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}},{key:"activeSource",get:function(){var e;return null!==(e=this.allSources.at(this.activeSourceIndex))&&void 0!==e?e:null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?Tt:0},set:function(e){this._overrideIfSome("activeSourceIndex",e)}},{key:"allPlaceholder",get:function(){var e;return null===(e=this.messages)||void 0===e?void 0:e.allPlaceholder},set:function(e){this._overrideIfSome("allPlaceholder",e)}},{key:"allSources",get:function(){var e=this.sources,t=this.defaultSources,r=this.includeDefaultSources,n="function"==typeof r?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,o=this._get("allSources")||new kt;return o.removeAll(),o.addMany(n.filter(Boolean)),o}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||ht()},set:function(e){if(void 0!==e){var t=ht();if(e&&!t){var r=new m.Z("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Zt.error(r)}this._override("locationEnabled",!!e&&t)}else this._clearOverride("locationEnabled")}},{key:"placeholder",get:function(){var e=this.allSources,t=this.activeSourceIndex,r=this.allPlaceholder;if(t===Tt)return r;var n=e.at(t);return n?n.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}},{key:"clear",value:function(){this.searchTerm=""}},{key:"clearGraphics",value:function(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}},{key:"search",value:function(e,t){var r=this;this.emit("search-start"),this.clearGraphics();var n=this._createSuggestionForSearch(e),o=this.when().then((function(){return r._getResultsFromSources(n,t).then((function(e){var o;if(null!==(o=(0,S.Wg)(null===t||void 0===t?void 0:t.signal))&&void 0!==o&&o.aborted)return null;var i={activeSourceIndex:r.activeSourceIndex,searchTerm:n.text,numResults:0,numErrors:0,errors:[],results:[]};r._formatResponse(i,e,n);var a=r._getFirstResult(i.results),u=(n.location&&a?a.name:n.text).replace(Rt,"");return r._set("searchTerm",u),(n.key&&"number"==typeof n.sourceIndex||n.location)&&r._set("selectedSuggestion",n),r._set("results",i.results),r._set("resultCount",i.results.reduce((function(e,t){return e+t.results.length}),0)),r.emit("search-complete",i),r._selectFirstResult(a).then((function(){return i}))}))})).then((function(e){return r._clearSearching(),e}),(function(e){throw r._clearSearching(),e}));return this._searching=o,o}},{key:"searchNearby",value:function(e){var t=this;if(!this.locationEnabled){var r=new m.Z("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Zt.error(r),Promise.reject(r)}var n=function(e){return e||(e=vt),new Promise((function(t,r){setTimeout((function(){return r(new m.Z("geolocation:timeout","getting the current geolocation position timed out"))}),15e3),navigator.geolocation.getCurrentPosition(t,r,e)}))}().then((function(r){return gt({position:r,view:t.view},e)})).then((function(r){return t.search(r,e)}));return this._searching=n,n.catch((function(){})).then((function(){return t._clearSearching()})),n}},{key:"select",value:function(e){var t=this;if(this.clearGraphics(),!e){var r=new m.Z("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Zt.error(r),Promise.reject(r)}var n=this.view,o=St(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),i=this.allSources.at(o);if(!i){var a=new m.Z("select:missing-source","Cannot select without a source.",{source:i});return Zt.error(a),Promise.reject(a)}var u=i instanceof xe?this._getLayerSourcePopupTemplate(i):i.popupTemplate,s=i.resultSymbol||this._getDefaultSymbol(e),l=St(i,"resultGraphicEnabled")?i.resultGraphicEnabled:this.resultGraphicEnabled,c=St(i,"autoNavigate")?i.autoNavigate:this.autoNavigate,d=St(i,"popupEnabled")?i.popupEnabled:this.popupEnabled,p=d?u||this.popupTemplate||this.defaultPopupTemplate:null,f=e.feature;if(!f){var h=new m.Z("select:missing-feature","Cannot select without a feature.",{feature:f});return Zt.error(h),Promise.reject(h)}var g=f.attributes,y=f.geometry,b=f.layer,w=f.sourceLayer,_=V(y),Z={layerViewQuery:this._getLayerView(f),elevationQuery:n&&(0,S.pC)(_)?U(_,n).catch((function(){return _})):Promise.resolve(_)};return(0,x.as)(Z).then((function(r){var a=r.layerViewQuery.value,u=r.elevationQuery.value;s instanceof _t.Z&&(s.text=e.name);var h=n&&c?e.target||e.extent:null;return((0,S.pC)(h)?t._goToSearchResult(h):Promise.resolve()).then((function(){var r,c=a?f:new v.Z({geometry:y,symbol:s,attributes:g,layer:b,sourceLayer:w,popupTemplate:p}),h=d&&(null===(r=t.view)||void 0===r?void 0:r.popup),m=h&&c.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled);return m&&n.popup.open({features:[c],location:u}),a&&(0,O.tl)(a)&&!m&&t._highlightFeature({graphic:c,layerView:a}),!a&&l&&n&&n.graphics.push(c),t._setResultFloor(e),t._set("selectedResult",e),t._set("resultGraphic",c),t.emit("select-result",{result:e,source:i,sourceIndex:o}),e}))}))}},{key:"suggest",value:function(e,t,r){var n=this,o=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:o}),this._suggestTimer(t,r).then((function(){return n._suggestImmediate(o,r).then((function(e){return n._set("suggestions",e.results),n._set("suggestionCount",e.results.reduce((function(e,t){return e+t.results.length}),0)),n.emit("suggest-complete",e),e}))}))}},{key:"when",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.N1)((function(){return!t.updating}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,r,n,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.portal,r=this.view,!this.includeDefaultSources){e.next=9;break}if(n=this._updatingPromise=(0,x.as)([null===t||void 0===t?void 0:t.load(),null===r||void 0===r?void 0:r.when()]),!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n;case 7:if(n===this._updatingPromise){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,(0,Z.N1)((function(){return o.messages}));case 11:this.destroyed||this._updateDefaultSources(),this._updatingPromise=null;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_clearSearching",value:function(){this._searching=null}},{key:"_convertHelperServices",value:function(){var e,t,r=this,n=null===(e=this.portal)||void 0===e||null===(t=e.helperServices)||void 0===t?void 0:t.geocode;return n?n.map((function(e){if(!1!==e.placefinding){var t=f.Z.apiKey&&He(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,n=et.fromJSON((0,o.Z)((0,o.Z)({},e),t)),i=n.url;if(He(i)||function(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}(i)||function(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}(i)){var a=n.outFields||["Addr_type","Match_addr","StAddr","City"],u=n.placeholder||r.messages.placeholder,s="number"==typeof n.defaultZoomScale?n.defaultZoomScale:2500;n.set({singleLineFieldName:"SingleLine",outFields:a,placeholder:u,defaultZoomScale:s})}return n.singleLineFieldName?n:void 0}})).filter(Boolean):[]}},{key:"_destroyFeatureLayers",value:function(){this._createdFeatureLayers.forEach((function(e){return null===e||void 0===e?void 0:e.destroy()})),this._createdFeatureLayers=[]}},{key:"_getLayerSources",value:function(e,t){var r,n=this,o=null===(r=this.view)||void 0===r?void 0:r.map;return e.map((function(e){var r=o.findLayerById(e.id);if(r){var i=n._getLayerJSON(e),a=xe.fromJSON(i);return a.placeholder=t,n._getLayer(r,i).then((function(e){a.layer=e})),a}})).filter(Boolean).toArray()}},{key:"_getTableSources",value:function(e,t){var r,n=this,o=null===(r=this.view)||void 0===r?void 0:r.map;return e.map((function(e){var r=o.findTableById(e.id);if(r){var i=n._getLayerJSON(e),a=xe.fromJSON(i);return a.placeholder=t,n._getLayer(r,i).then((function(e){a.layer=e})),a}})).filter(Boolean).toArray()}},{key:"_convertApplicationProperties",value:function(){var e,t,r,o=null===(e=this.view)||void 0===e?void 0:e.map,i=null===o||void 0===o||null===(t=o.applicationProperties)||void 0===t||null===(r=t.viewing)||void 0===r?void 0:r.search;if(!i)return[];var a=i.enabled,u=i.hintText,s=i.layers,l=i.tables;return a?[].concat((0,n.Z)(this._getLayerSources(s,u)),(0,n.Z)(this._getTableSources(l,u))):[]}},{key:"_getSubLayer",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(t.allSublayers){e.next=4;break}throw new Error;case 4:if(n=t.allSublayers.find((function(e){return e.id===r.subLayer}))){e.next=7;break}throw new Error;case 7:return e.next=9,n.createFeatureLayer();case 9:return o=e.sent,e.abrupt("return",(this._createdFeatureLayers.push(o),o));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getBuildingSubLayer",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if("building-component"===(null===(n=t.allSublayers.find((function(e){return e.id===r.subLayer})))||void 0===n?void 0:n.type)){e.next=5;break}throw new Error;case 5:return e.next=7,n.load();case 7:if(null!=n.associatedLayer){e.next=9;break}throw new Error;case 9:return e.next=11,n.associatedLayer.load();case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getLayer",value:function(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((function(){var t=new m.Z("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Zt.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}},{key:"_getLayerJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():e}},{key:"_updateDefaultSources",value:function(){var e=this.defaultSources,t=this.includeDefaultSources;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([].concat((0,n.Z)(this._convertApplicationProperties()),(0,n.Z)(this._convertHelperServices())))}},{key:"_abortGoTo",value:function(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}},{key:"_clear",value:function(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}},{key:"_closePopup",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.popup,r=this.resultGraphic;if(t&&r){var n=t.selectedFeature;n&&n===r&&t.close()}}},{key:"_suggestTimer",value:function(e,t){var r=null!=e?e:this.suggestionDelay;return(0,x.e4)(r,null,t&&t.signal)}},{key:"_createLocationForSearch",value:function(e){return e instanceof v.Z?V(e.geometry):e instanceof R.Z?e:Array.isArray(e)&&2===e.length?new R.Z({longitude:e[0],latitude:e[1]}):null}},{key:"_createSuggestionForSearch",value:function(e){if(e&&St(e,"key")&&St(e,"text")&&St(e,"sourceIndex"))return e;var t=this._createLocationForSearch(e),r="string"==typeof e?e:this.searchTerm,n=this.selectedSuggestion,o=this.selectedResult,i=!e&&n&&o,a=i&&n.key===o.key&&n.sourceIndex===o.sourceIndex,u=i&&n.location;return a||u?n:{location:(0,S.Wg)(t),text:t?"":r,sourceIndex:null,key:null}}},{key:"_getFirstResult",value:function(e){var t=null;return e&&e.some((function(e){var r=e.results[0],n=!!r;return n&&(t=r),n})),t}},{key:"_selectFirstResult",value:function(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}},{key:"_suggestImmediate",value:function(e,t){var r=this;return this.when().then((function(){return r._getSuggestionsFromSources(e,t)})).then((function(n){var o;if(null!==(o=(0,S.Wg)(null===t||void 0===t?void 0:t.signal))&&void 0!==o&&o.aborted)return null;var i={activeSourceIndex:r.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return r._formatResponse(i,n),i}))}},{key:"_formatSourceResponse",value:function(e,t,r){var n=t&&t.value||[],o=t&&t.error,i=this.allSources.at(r);if(o){var a={sourceIndex:r,source:i,error:o};e.errors.push(a),Zt.error(o),e.numErrors++}else{var u={sourceIndex:r,source:i,results:n};e.results.push(u),e.numResults+=n.length}}},{key:"_formatResponse",value:function(e,t,r){var n=this;if(t)if(e.activeSourceIndex===Tt){var o=r&&St(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;t.forEach((function(t,r){var i=void 0!==o?o:r;n._formatSourceResponse(e,t,i)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}},{key:"_getResultsFromSources",value:function(e,t){var r=this,n=this.allSources,o=!e.location&&St(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,i=[];if(!n.length){var a=new m.Z("search:no-sources-defined","At least one source is required.",{allSources:n});return Zt.error(a),Promise.reject(a)}return o===Tt?n.forEach((function(n,o){i.push(r._getResultsFromSource(e,o,t))})):i.push(this._getResultsFromSource(e,o,t)),(0,x.as)(i)}},{key:"_getSuggestionsFromSources",value:function(e,t){var r=this,n=this.allSources,o=this.activeSourceIndex,i=[];if(!n.length){var a=new m.Z("suggest:no-sources-defined","At least one source is required.",{allSources:n});return Zt.error(a),Promise.reject(a)}return o===Tt?n.forEach((function(n,o){i.push(r._getSuggestionsFromSource(e,o,t))})):i.push(this._getSuggestionsFromSource(e,o,t)),(0,x.as)(i)}},{key:"_getResultsFromSource",value:function(e,t,r){var n,o=this.allSources.at(t),i=e.location,a=void 0===i?null:i,u=(null===(n=this.view)||void 0===n?void 0:n.spatialReference)||Ft,s=St(o,"maxResults")?o.maxResults:this.maxResults,l=!!(o instanceof xe&&St(o,"exactMatch"))&&o.exactMatch,c=this.view;return o.getResults({view:c,sourceIndex:t,location:a,suggestResult:e,spatialReference:u,exactMatch:l,maxResults:s},r)}},{key:"_getSuggestionsFromSource",value:function(e,t,r){var n=this.allSources.at(t),o=St(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,i=e.length,a=St(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(o&&e.trim()&&i>=a){var u,s=(null===(u=this.view)||void 0===u?void 0:u.spatialReference)||Ft,l=St(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,c=this.view,d=!!(n instanceof xe&&St(n,"exactMatch"))&&n.exactMatch;return n.getSuggestions({view:c,sourceIndex:t,suggestTerm:e,spatialReference:s,maxSuggestions:l,exactMatch:d},r)}return Promise.resolve(null)}},{key:"_getLayerSourcePopupTemplate",value:function(e){var t=e.layer;if(t)return St(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}},{key:"_getSourceIndexOfResult",value:function(e){var t=this.results,r=null;return t.some((function(t){return t.results.some((function(n){return n===e&&(r=t.sourceIndex,!0)}))})),r}},{key:"_goToSearchResult",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!!t,this._abortGoTo(),n=new AbortController,this._gotoController=n,o={target:{target:t},options:{animate:r,signal:n.signal}},e.next=7,this.callGoTo(o);case 7:this._gotoController=null;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultSymbol",value:function(e){var t,r=this.defaultSymbols,n=null===(t=e.feature)||void 0===t?void 0:t.geometry;if((0,S.Wi)(n))return null;switch(n.type){case"point":case"multipoint":return r.point;case"polyline":return r.polyline;case"extent":case"polygon":return r.polygon;default:return null}}},{key:"_removeHighlight",value:function(){this._handles.remove(Ct)}},{key:"_getLayerView",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.view,t&&r&&"building-component"!==t.layer.type&&"subtype-sublayer"!==t.layer.type){e.next=3;break}return e.abrupt("return",null);case 3:return n=t.layer,e.next=6,r.when();case 6:return e.abrupt("return",r.whenLayerView(n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_highlightFeature",value:function(e){var t=e.graphic,r=e.layerView,n=t.attributes,o=t.layer.objectIdField,i=n&&n[o],a=r.highlight(i||t);this._handles.add(a,Ct)}},{key:"_setResultFloor",value:function(e){var t,r,n,o=this.view,i=null===(t=e.feature)||void 0===t?void 0:t.attributes,a=null===(r=e.feature)||void 0===r?void 0:r.sourceLayer;if(a&&"floorInfo"in a&&null!==a&&void 0!==a&&null!==(n=a.floorInfo)&&void 0!==n&&n.floorField&&i){var u=i[a.floorInfo.floorField];null===o||void 0===o||o.emit("select-result-floor",u)}}}]),r}((0,yt._)(b.Z.EventedMixin(g.Z)));jt.ALL_INDEX=Tt,(0,d._)([(0,C.Cb)()],jt.prototype,"_searching",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"_updatingPromise",void 0),(0,d._)([(0,C.Cb)({readOnly:!0,value:null})],jt.prototype,"activeSource",null),(0,d._)([(0,C.Cb)()],jt.prototype,"activeSourceIndex",null),(0,d._)([(0,C.Cb)()],jt.prototype,"allPlaceholder",null),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"allSources",null),(0,d._)([(0,C.Cb)()],jt.prototype,"autoNavigate",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"autoSelect",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"defaultPopupTemplate",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"defaultSources",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"defaultSymbols",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"includeDefaultSources",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"locationEnabled",null),(0,d._)([(0,C.Cb)()],jt.prototype,"maxInputLength",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"maxResults",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"maxSuggestions",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"messages",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"minSuggestCharacters",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"placeholder",null),(0,d._)([(0,C.Cb)()],jt.prototype,"popupEnabled",void 0),(0,d._)([(0,C.Cb)({type:h.Z})],jt.prototype,"popupTemplate",void 0),(0,d._)([(0,C.Cb)({type:E.Z})],jt.prototype,"portal",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"resultCount",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"resultGraphicEnabled",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"resultGraphic",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"results",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"selectedSuggestion",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"searchAllEnabled",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"selectedResult",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"searchTerm",null),(0,d._)([(0,C.Cb)({type:kt})],jt.prototype,"sources",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"state",null),(0,d._)([(0,C.Cb)()],jt.prototype,"suggestionDelay",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"suggestionCount",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"suggestions",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"suggestionsEnabled",void 0),(0,d._)([(0,C.Cb)({readOnly:!0})],jt.prototype,"updating",null),(0,d._)([(0,C.Cb)()],jt.prototype,"view",void 0),(0,d._)([(0,C.Cb)()],jt.prototype,"clear",null);var Lt=jt=(0,d._)([(0,F.j)(xt)],jt)},99505:function(e,t,r){r.d(t,{_:function(){return d}});var n=r(15671),o=r(43144),i=r(60136),a=r(92572),u=r(27366),s=r(92026),l=r(49861),c=(r(25243),r(63780),r(69912)),d=function(e){var t=function(e){(0,i.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).goToOverride=null,e.view=null,e}return(0,o.Z)(r,[{key:"callGoTo",value:function(e){var t=this.view;return(0,s.O3)(t),this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}}]),r}(e);return(0,u._)([(0,l.Cb)()],t.prototype,"goToOverride",void 0),(0,u._)([(0,l.Cb)()],t.prototype,"view",void 0),t=(0,u._)([(0,c.j)("esri.widgets.support.GoTo")],t)}}}]);
//# sourceMappingURL=85575.158f36db.chunk.js.map