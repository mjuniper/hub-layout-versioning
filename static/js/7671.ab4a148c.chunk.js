"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[7671,85164],{84506:function(e,r,t){t.d(r,{Z:function(){return o}});var n=t(83878),i=t(59199),a=t(40181),l=t(25267);function o(e){return(0,n.Z)(e)||(0,i.Z)(e)||(0,a.Z)(e)||(0,l.Z)()}},46228:function(e,r,t){t.d(r,{I:function(){return i},v:function(){return a}});var n=t(16889);function i(e,r){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,n.uZ)(e,0,u),a=0;a<4;a++)r[t+a]=Math.floor(256*s(i*l[a]))}function a(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0,n=0;n<4;n++)t+=e[r+n]*o[n];return t}var l=[1,256,65536,16777216],o=[1/256,1/65536,1/16777216,1/4294967296],u=a(new Uint8ClampedArray([255,255,255,255]));function s(e){return e-Math.floor(e)}},58971:function(e,r,t){t.d(r,{G6:function(){return E},Ie:function(){return T},J9:function(){return Z},RF:function(){return b},U1:function(){return w},vY:function(){return s},ym:function(){return S}});var n=t(29439),i=t(92026),a=t(77981);var l=function(e,r,t){return[r,t]},o=function(e,r,t){return[r,t,e[2]]},u=function(e,r,t){return[r,t,e[2],e[3]]};function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,i.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,r){var t=e.scale,n=e.translate;return Math.round((r-n[0])/t[0])}function f(e,r){var t=e.scale,n=e.translate;return Math.round((n[1]-r)/t[1])}function p(e,r,t){for(var n,i,a,l,o=[],u=0;u<t.length;u++){var s=t[u];u>0?(a=c(e,s[0]),l=f(e,s[1]),a===n&&l===i||(o.push(r(s,a-n,l-i)),n=a,i=l)):(n=c(e,s[0]),i=f(e,s[1]),o.push(r(s,n,i)))}return o.length>0?o:null}function d(e,r){var t=e.scale,n=e.translate;return r*t[0]+n[0]}function y(e,r){var t=e.scale;return e.translate[1]-r*t[1]}function m(e,r,t){var i=new Array(t.length);if(!t.length)return i;var a=(0,n.Z)(e.scale,2),l=a[0],o=a[1],u=d(e,t[0][0]),s=y(e,t[0][1]);i[0]=r(t[0],u,s);for(var c=1;c<t.length;c++){var f=t[c];u+=f[0]*l,s-=f[1]*o,i[c]=r(f,u,s)}return i}function v(e,r,t){for(var n=new Array(t.length),i=0;i<t.length;i++)n[i]=m(e,r,t[i]);return n}function g(e,r,t,n,i){var a;return r.points=null!==(a=function(e,r,t,n){return p(e,t?n?u:o:n?o:l,r)}(e,t.points,n,i))&&void 0!==a?a:[],r}function b(e,r,t,n,i){return r.x=c(e,t.x),r.y=f(e,t.y),r!==t&&(n&&(r.z=t.z),i&&(r.m=t.m)),r}function h(e,r,t,n,i){var a=function(e,r,t,n){for(var i=[],a=t?n?u:o:n?o:l,s=0;s<r.length;s++){var c=p(e,a,r[s]);c&&c.length>=3&&i.push(c)}return i.length?i:null}(e,t.rings,n,i);return a?(r.rings=a,r):null}function x(e,r,t,n,i){var a=function(e,r,t,n){for(var i=[],a=t?n?u:o:n?o:l,s=0;s<r.length;s++){var c=p(e,a,r[s]);c&&c.length>=2&&i.push(c)}return i.length?i:null}(e,t.paths,n,i);return a?(r.paths=a,r):null}function S(e,r){return e&&r?(0,a.wp)(r)?b(e,{},r,!1,!1):(0,a.l9)(r)?x(e,{},r,!1,!1):(0,a.oU)(r)?h(e,{},r,!1,!1):(0,a.aW)(r)?g(e,{},r,!1,!1):(0,a.YX)(r)?function(e,r,t,n,i){return r.xmin=c(e,t.xmin),r.ymin=f(e,t.ymin),r.xmax=c(e,t.xmax),r.ymax=f(e,t.ymax),r!==t&&(n&&(r.zmin=t.zmin,r.zmax=t.zmax),i&&(r.mmin=t.mmin,r.mmax=t.mmax)),r}(e,{},r,!1,!1):null:null}function Z(e,r,t,n,a){return(0,i.pC)(t)&&(r.points=function(e,r,t,n){return m(e,t?n?u:o:n?o:l,r)}(e,t.points,n,a)),r}function w(e,r,t,n,a){return(0,i.Wi)(t)||(r.x=d(e,t.x),r.y=y(e,t.y),r!==t&&(n&&(r.z=t.z),a&&(r.m=t.m))),r}function T(e,r,t,n,a){return(0,i.pC)(t)&&(r.rings=function(e,r,t,n){return v(e,t?n?u:o:n?o:l,r)}(e,t.rings,n,a)),r}function E(e,r,t,n,a){return(0,i.pC)(t)&&(r.paths=function(e,r,t,n){return v(e,t?n?u:o:n?o:l,r)}(e,t.paths,n,a)),r}},91935:function(e,r,t){t.d(r,{Z:function(){return u}});var n=t(1413),i=t(10064),a=t(32718),l=t(92026),o=t(58971);function u(e,r,t,i,o){if((0,l.Wi)(e))return null;var u=e.referencesGeometry()&&o?c(r,i,o):r,s=e.repurposeFeature(u);try{return e.evaluate((0,n.Z)((0,n.Z)({},t),{},{$feature:s}))}catch(f){return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}var s=new Map;function c(e,r,t){var l=t.transform,u=t.hasZ,c=t.hasM;s.has(r)||s.set(r,function(e){var r={};switch(e){case"esriGeometryPoint":return function(e,t,n,i){return(0,o.U1)(t,r,e,n,i)};case"esriGeometryPolygon":return function(e,t,n,i){return(0,o.Ie)(t,r,e,n,i)};case"esriGeometryPolyline":return function(e,t,n,i){return(0,o.G6)(t,r,e,n,i)};case"esriGeometryMultipoint":return function(e,t,n,i){return(0,o.J9)(t,r,e,n,i)};default:return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(r));var f=s.get(r)(e.geometry,l,u,c);return(0,n.Z)((0,n.Z)({},e),{},{geometry:f})}},18745:function(e,r,t){t.d(r,{a:function(){return o}});var n=t(10064),i=t(32718),a=t(80613),l=t(84319);function o(e){return(0,l.hj)(e.minDataValue)&&(0,l.hj)(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?a.X.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?a.X.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?a.X.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?a.X.SIZE_UNIT_VALUE:(i.Z.getLogger("esri.views.2d.engine.webgl").error(new n.Z("mapview-bad-type","Found invalid size VisualVariable",e)),a.X.NONE)}},85164:function(e,r,t){t.r(r),t.d(r,{createSymbolSchema:function(){return u}});var n=t(1413),i=t(80613),a=t(54815);function l(e){var r;return"line-marker"===e.type?{type:"line-marker",color:null===(r=e.color)||void 0===r?void 0:r.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function o(e){return(0,a.hF)(e)}function u(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return c(e,r,t);case"simple-marker":case"picture-marker":return p(e,r,t);case"simple-line":return f(e,r,t);case"text":return d(e,r,t);case"label":return s(e,r,t);case"cim":return{type:"cim",rendererKey:r.vvFlags,data:e.data,maxVVSize:r.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:r.vvFlags,data:e,maxVVSize:r.maxVVSize};case"web-style":return(0,n.Z)((0,n.Z)({},l(e)),{},{type:"web-style",hash:e.hash(),rendererKey:r.vvFlags,maxVVSize:r.maxVVSize});default:throw new Error("symbol not supported ".concat(e.type))}}function s(e,r,t){var l=e.toJSON(),u=(0,a.jj)(i.LW.LABEL,(0,n.Z)((0,n.Z)({},r),{},{placement:l.labelPlacement}));return(0,n.Z)((0,n.Z)({materialKey:t?o(u):u,hash:e.hash()},l),{},{labelPlacement:l.labelPlacement})}function c(e,r,t){var u=(0,a.jj)(i.LW.FILL,r),s=t?o(u):u,c=e.clone(),f=c.outline,p=(0,a.jy)(r.symbologyType);p||(c.outline=null);var d=(0,n.Z)({materialKey:s,hash:c.hash()},l(c));if(p)return d;var y=[];if(y.push(d),f){var m=(0,a.jj)(i.LW.LINE,(0,n.Z)((0,n.Z)({},r),{},{isOutline:!0})),v=(0,n.Z)({materialKey:t?o(m):m,hash:f.hash()},l(f));y.push(v)}return{type:"composite-symbol",layers:y,hash:y.reduce((function(e,r){return r.hash+e}),"")}}function f(e,r,t){var u=(0,a.jy)(r.symbologyType)?i.mD.DEFAULT:r.symbologyType,s=(0,a.jj)(i.LW.LINE,(0,n.Z)((0,n.Z)({},r),{},{symbologyType:u})),c=t?o(s):s,f=e.clone(),p=f.marker;f.marker=null;var d=[];if(d.push((0,n.Z)({materialKey:c,hash:f.hash()},l(f))),p){var y,m=(0,a.jj)(i.LW.MARKER,r),v=t?o(m):m;p.color=null!==(y=p.color)&&void 0!==y?y:f.color,d.push((0,n.Z)({materialKey:v,hash:p.hash(),lineWidth:f.width},l(p)))}return{type:"composite-symbol",layers:d,hash:d.reduce((function(e,r){return r.hash+e}),"")}}function p(e,r,t){var u=(0,a.jj)(i.LW.MARKER,r),s=t?o(u):u,c=l(e);return(0,n.Z)((0,n.Z)({materialKey:s,hash:e.hash()},c),{},{angle:e.angle,maxVVSize:r.maxVVSize})}function d(e,r,t){var u=(0,a.jj)(i.LW.TEXT,r),s=t?o(u):u,c=l(e);return(0,n.Z)((0,n.Z)({materialKey:s,hash:e.hash()},c),{},{angle:e.angle,maxVVSize:r.maxVVSize})}},69534:function(e,r,t){t.d(r,{MD:function(){return G},Ew:function(){return k},q5:function(){return I}});var n=t(93433),i=t(1413),a=t(37762),l=t(10064),o=t(93169),u=t(32718),s=t(92026),c=t(17842),f=t(76672),p=t(48732),d=t(85116),y=t(80613),m=t(84319),v=t(98029),g=t(18745);function b(e){if(!e)return y.X.NONE;var r,t=0,n=(0,a.Z)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if("size"===i.type){var l=(0,g.a)(i);t|=l,"outline"===i.target&&(t|=l<<4)}else"color"===i.type?t|=y.X.COLOR:"opacity"===i.type?t|=y.X.OPACITY:"rotation"===i.type&&(t|=y.X.ROTATION)}}catch(o){n.e(o)}finally{n.f()}return t}var h=t(85164),x=(t(78915),t(691)),S=t(94109);t(95857),t(98125);function Z(e,r){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var t=e.getVisualVariablesForType("size");if(!t[0])return 0;var n=t[0];if(r&&"cluster_count"===n.field&&"cluster"===r.type)return r.clusterMaxSize;if("outline"===n.target)return 0;if("stops"===n.transformationType)return n.stops.map((function(e){return e.size})).reduce(w,0);if("clamped-linear"===n.transformationType){var i,a;return i="number"==typeof n.maxSize?n.maxSize:n.maxSize.stops.map((function(e){return e.size})).reduce(w,0),a="number"==typeof n.minSize?n.minSize:n.minSize.stops.map((function(e){return e.size})).reduce(w,0),Math.max(i,a)}return"real-world-size"===n.transformationType?30:void 0}S.eF.metrics,new x.Z(0,0,24,24);function w(e,r){return Math.max(e,r)}var T=t(91370),E=t(20478),F=t(31666),V=u.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),z="ValidationError";function I(e,r){var t=0,n=0,i=y.mD.DEFAULT;if((0,s.pC)(e)){if(n=Z(e,r),"visualVariables"in e&&(t=b(e.visualVariables||[]),"dot-density"===e.type&&(i=y.mD.DOT_DENSITY)),"heatmap"===e.type&&(i=y.mD.HEATMAP),"dictionary"===e.type)return{maxVVSize:n,vvFlags:t,symbologyType:y.mD.DEFAULT};if("pie-chart"===e.type)return{maxVVSize:n,vvFlags:t,symbologyType:y.mD.PIE_CHART};if(i!==y.mD.DOT_DENSITY&&i!==y.mD.HEATMAP){var l=e.getSymbols();"backgroundFillSymbol"in e&&e.backgroundFillSymbol&&l.push(e.backgroundFillSymbol);var o,u=!0,c=!0,f=(0,a.Z)(l);try{for(f.s();!(o=f.n()).done;){var p=o.value;if("cim"===p.type&&(c=!1),"simple-fill"===p.type||"picture-fill"===p.type){var d=p.outline,m=d&&"none"!==d.style&&"solid"!==d.style,v="simple-fill"===p.type&&"none"!==p.style&&"solid"!==p.style;m&&(u=!1),("picture-fill"===p.type||v||m)&&(c=!1)}}}catch(g){f.e(g)}finally{f.f()}u?i=c?y.mD.OUTLINE_FILL_SIMPLE:y.mD.OUTLINE_FILL:c&&(i=y.mD.SIMPLE)}}return{vvFlags:t,maxVVSize:n,symbologyType:i}}var L=null;function k(e){if((0,o.Z)("esri-2d-update-debug")){var r=O(e,!0);console.debug("Created new schema",r),console.debug("Schema diff",(0,p.Hg)(L,r)),L=r}return O(e)}function O(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var t,n,i=_(e,r),a=J(e),l={};i.map((function(r){return M(l,e,r)}));var o=(0,s.pC)(e.subtypeCode)?"".concat(e.subtypeField," = ").concat(e.subtypeCode):null,u=(0,s.Wg)((0,f._)(e.definitionExpression,o));return{source:{definitionExpression:u,fields:e.fields.map((function(e){return e.toJSON()})),gdbVersion:e.gdbVersion,historicMoment:null===(t=e.historicMoment)||void 0===t?void 0:t.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:null===(n=e.timeExtent)||void 0===n?void 0:n.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:i,tileRenderer:a,targets:l}}catch(c){if(c.fieldName===z)return V.error(c),null;throw c}}function M(e,r,t){switch(t.target){case"feature":return void D(e,C(r),t);case"aggregate":if(!("featureReduction"in r))return;var n=r.featureReduction;switch(null===n||void 0===n?void 0:n.type){case"selection":throw new l.Z(z,"Mapview does not support `selection` reduction type",n);case"binning":return D(e,C(r),t),void function(e,r,t,n){var a;e.aggregate||(e.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:r.fixedBinLevel,fields:(null!==(a=r.fields)&&void 0!==a?a:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e.toJSON()),{},{type:P(e,t)})}))},attributes:{}}),N(e.aggregate,n.attributes.fields)}(e,n,r.fields.map((function(e){return e.toJSON()})),t);case"cluster":return D(e,C(r),t),void function(e,r,t,n){var a,l;e.aggregate||(e.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,c.F2)(r.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,c.F2)(r.clusterMaxSize)/64),fields:null===(a=null!==(l=r.fields)&&void 0!==l?l:[])||void 0===a?void 0:a.map((function(e){return(0,i.Z)((0,i.Z)({},e.toJSON()),{},{type:P(e,t)})}))}}),N(e.aggregate,n.attributes.fields)}(e,n,r.fields.map((function(e){return e.toJSON()})),t)}}}function N(e,r){for(var t in r){var n=r[t];if(n.target===e.name){var i=e.attributes[t];if(null!==i&&void 0!==i&&i.context){var a,l,o=i.context;o.mesh=o.mesh||(null===(a=n.context)||void 0===a?void 0:a.mesh),o.storage=o.storage||(null===(l=n.context)||void 0===l?void 0:l.storage)}else e.attributes[t]=n}}return e}function C(e){var r,t,n,i,a;return[null!==(r=null===(t=(0,s.Wg)(e.filter))||void 0===t?void 0:t.toJSON())&&void 0!==r?r:null,null!==(n=null===(i=(0,s.Wg)(null===(a=(0,s.Wg)(e.featureEffect))||void 0===a?void 0:a.filter))||void 0===i?void 0:i.toJSON())&&void 0!==n?n:null]}function D(e,r,t){return e.feature||(e.feature={name:"feature",input:"source",filters:r,attributes:{}}),N(e.feature,t.attributes.fields),e}function P(e,r){var t=e.onStatisticExpression,n=e.onStatisticField;switch(e.statisticType){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":if(t){var i=t.returnType;return i?"string"===i?"esriFieldTypeString":"esriFieldTypeDouble":(V.error(new l.Z(z,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}var a=r.find((function(e){return e.name===n}));return a?a.type:(V.error(new l.Z(z,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}}function A(e,r){return r.field?R(e,(0,i.Z)((0,i.Z)({},r),{},{type:"field",field:r.field})):r.valueExpression?R(e,(0,i.Z)((0,i.Z)({},r),{},{type:"expression",valueExpression:r.valueExpression})):{field:void 0,fieldIndex:void 0}}function R(e,r){switch(r.type){case"expression":var t=r.valueExpression;if(!e.fields[t]){var n=e.indexCount++;e.fields[t]=(0,i.Z)((0,i.Z)({},r),{},{name:t,fieldIndex:n})}return{fieldIndex:e.fields[t].fieldIndex};case"label-expression":var a=JSON.stringify(r.label);if(!e.fields[a]){var l=e.indexCount++;e.fields[a]=(0,i.Z)((0,i.Z)({},r),{},{name:a,fieldIndex:l})}return{fieldIndex:e.fields[a].fieldIndex};case"field":var o=r.field;return"aggregate"===r.target&&e.fields[o]||(e.fields[o]=(0,i.Z)((0,i.Z)({},r),{},{name:o})),{field:o};case"statistic":return e.fields[r.name]=(0,i.Z)({},r),{field:r.name}}}function _(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new Array,n=0;return t.push(B(e,n++,r)),t}function U(e,r,t,n,a){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=R(e,{type:"label-expression",target:t,context:{mesh:!0},resultType:"string",label:{labelExpression:r.labelExpression,labelExpressionInfo:r.labelExpressionInfo?{expression:r.labelExpressionInfo.expression}:null,symbol:!!r.symbol,where:r.where}}),u=o.fieldIndex;return(0,i.Z)((0,i.Z)({},(0,h.createSymbolSchema)(r,a,l)),{},{fieldIndex:u,target:t,index:n})}function W(e,r,t){var i,o,u="featureReduction"in r&&r.featureReduction;if(!u)return{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};var s=[],c=null,f=(0,F.oq)(r.geometryType),p=[],y=null;if(u)switch(u.type){case"selection":return V.error(new l.Z(z,"Mapview does not support `selection` reduction type",u)),{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};case"cluster":case"binning":if(s.push.apply(s,(0,n.Z)(null!==(i=u.fields)&&void 0!==i?i:[])),"cluster"===u.type?f="esriGeometryPoint":"binning"===u.type&&(f="esriGeometryPolygon"),!u.renderer||null!==(o=u.renderer.authoringInfo)&&void 0!==o&&o.isAutoGenerated){if("cluster"===u.type){if(y=(0,E.S1)(s,r.renderer,u,null,!0),u.symbol){var m=I(y,u);c={type:"simple",symbol:(0,h.createSymbolSchema)(u.symbol,m,t),symbologyType:m.symbologyType}}p=u&&u.labelsVisible&&u.labelingInfo||[]}}else{if("cluster"===u.type)y=(0,E.st)(u.renderer,u,null).renderer;else y=u.renderer;var v=I(u.renderer,u);c=G(e,"aggregate",u.renderer,v,t),p=u&&u.labelsVisible&&u.labelingInfo||[]}}return function(e,r){var t,n={mesh:!0,storage:!0},i=(0,a.Z)(r);try{for(i.s();!(t=i.n()).done;){var l=t.value,o=l.name,u=l.onStatisticField,s=l.onStatisticExpression,c=l.statisticType,f=void 0,p=void 0,d="numeric",y="feature";s?p=R(e,{type:"expression",target:y,valueExpression:s.expression,resultType:d}).fieldIndex:f=R(e,{type:"field",target:y,field:u,resultType:d}).field,R(e,{type:"statistic",target:"aggregate",name:o,context:n,inField:f,inFieldIndex:p,statisticType:c})}}catch(m){i.e(m)}finally{i.f()}}(e,s),{labels:(0,d.a)(p,"binning"===u.type?"esriGeometryPolygon":f),matcher:c,fields:s,rendererOverride:y}}function B(e,r){var t,i,o,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c={indexCount:0,fields:{}},f="featureReduction"in e&&null!==(t=e.featureReduction)&&void 0!==t?t:void 0,p=f?"aggregate":"feature";if("sublayers"in e){var m=function(){var r,t={type:"subtype",subtypeField:e.subtypeField,renderers:{},symbologyType:y.mD.DEFAULT},n={type:"subtype",mapping:{},target:"feature",subtypeField:e.subtypeField},i={type:"subtype",classes:{}},o={type:"symbol",target:"feature",aggregateFields:[],attributes:c,storage:n,mesh:{matcher:t,aggregateMatcher:null,labels:i,sortKey:null}},f=new Set,d=0,m=(0,a.Z)(e.sublayers);try{var v=function(){var e=r.value,a=e.renderer,o=e.subtypeCode,m=e.labelingInfo,v=e.labelsVisible,g=0;"visualVariables"in a&&a.visualVariables&&(a.visualVariables.some((function(e){return"rotation"!==e.type}))&&V.warnOnce("SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored."),g=b(a.visualVariables.filter((function(e){return"size"!==e.type}))));var h={symbologyType:y.mD.DEFAULT,vvFlags:g,maxVVSize:0},x=G(c,p,a,h,u),S=K(c,p,a),Z=v&&m;if("dictionary"===x.type)throw new l.Z(z,"Dictionary renderer is not supported in subtype layers");if("subtype"===x.type)throw new l.Z(z,"Nested subtype renderers is not supported");if((0,s.pC)(S)&&"subtype"===S.type)throw new l.Z(z,"Nested subtype storage is not supported");if((0,s.pC)(S)&&(0,s.pC)(S.attributeMapping))throw new l.Z(z,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===x.type)throw new l.Z(z,"Heatmaps are not supported in subtype layers");if("pie-chart"===x.type)throw new l.Z(z,"Pie-charts are not supported in subtype layers");if(f.has(o))throw new l.Z(z,"Subtype codes for sublayers must be unique");f.add(o),t.renderers[o]=x,n.mapping[o]=S,Z&&(i.classes[o]=Z.map((function(e){return U(c,e,"feature",d++,h,u)})))};for(m.s();!(r=m.n()).done;)v()}catch(g){m.e(g)}finally{m.f()}return{v:o}}();if("object"===typeof m)return m.v}if("heatmap"===(null===(i=e.renderer)||void 0===i?void 0:i.type)&&"raster"===(0,T.rk)()){var v=e.renderer,g=v.radius,h=v.fieldOffset,x=v.field;return{type:"heatmap",aggregateFields:[],attributes:c,target:p,storage:null,mesh:{radius:g,fieldOffset:h,field:A(c,{target:p,field:x,resultType:"numeric"}).field}}}var S=W(c,e,u),Z=(0,F.oq)(e.geometryType),w=null!==(o=S.rendererOverride)&&void 0!==o?o:e.renderer,E=I(w,f),L=G(c,p,w,E,u),k=K(c,p,w),O=j(c,e.orderBy,e.renderer,f),M=e.labelsVisible&&e.labelingInfo||[],N=(0,d.a)(M,Z),C=0,D=[].concat((0,n.Z)(N.map((function(e){return U(c,e,"feature",C++,E,u)}))),(0,n.Z)(S.labels.map((function(e){return U(c,e,"aggregate",C++,E,u)}))));return{type:"symbol",target:p,attributes:c,aggregateFields:S.fields,storage:k,mesh:{matcher:L,labels:{type:"simple",classes:D},aggregateMatcher:S.matcher,sortKey:O}}}function J(e){var r;return"heatmap"===(null===(r=e.renderer)||void 0===r?void 0:r.type)&&"raster"===(0,T.rk)()?{type:"heatmap"}:{type:"symbol"}}function j(e,r,t,n){if((0,s.pC)(n))return null;if((0,s.pC)(r)&&r.length){r.length>1&&V.warn("Layer rendering currently only supports ordering by 1 orderByInfo, but found ".concat(r.length,". All but the first will be discarded"));var i=r[0],a="ascending"===i.order?"asc":"desc";return i.field?{field:i.field,order:a}:i.valueExpression?{fieldIndex:R(e,{type:"expression",target:"feature",valueExpression:i.valueExpression,resultType:"numeric"}).fieldIndex,order:a}:(V.error(new l.Z(z,"Expected to find a field or valueExpression for OrderByInfo",i)),null)}return(0,s.pC)(t)&&"unique-value"===t.type&&t.orderByClassesEnabled?{byRenderer:!0,order:"asc"}:null}function K(e,r,t){var n;switch(t.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":n={visualVariables:!0,attributes:null};break;default:n=(0,v.EJ)(t).getStorageSpec(t)}return function(e,r,t,n){if((0,s.Wi)(t))return null;var i=t.visualVariables,a=t.attributes,l=null;i&&"visualVariables"in n&&(l=function(e,r,t){if(!t||!t.length)return[];var n={storage:!0},i="numeric";return(0,T.tv)(t).map((function(t){var a,l=(0,m.nU)(t.type),o=A(e,{target:r,valueExpression:t.valueExpression,field:t.field,context:n,resultType:i}),u=o.field,s=o.fieldIndex;switch(t.type){case"size":return"$view.scale"===t.valueExpression?null:{type:"size",binding:l,field:u,fieldIndex:s,normalizationField:A(e,{target:r,field:t.normalizationField,context:n,resultType:i}).field,valueRepresentation:null!==(a=t.valueRepresentation)&&void 0!==a?a:null};case"color":return{type:"color",binding:l,field:u,fieldIndex:s,normalizationField:A(e,{target:r,field:t.normalizationField,context:n,resultType:i}).field};case"opacity":return{type:"opacity",binding:l,field:u,fieldIndex:s,normalizationField:A(e,{target:r,field:t.normalizationField,context:n,resultType:i}).field};case"rotation":return{type:"rotation",binding:l,field:u,fieldIndex:s}}})).filter(s.pC)}(e,r,n.visualVariables));var o=(0,s.pC)(l)?4:0,u=null;return(0,s.pC)(a)&&(u=a.map((function(t,n){var i=A(e,{valueExpression:t.valueExpression,field:t.field,resultType:"numeric",target:r}),a=i.field,l=i.fieldIndex;return{binding:n+o,field:a,fieldIndex:l}}))),{type:"simple",target:r,attributeMapping:u,vvMapping:l}}(e,r,n,t)}function G(e,r,t,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=(0,s.Pt)(e,{indexCount:0,fields:{}});switch(t.type){case"simple":case"dot-density":return H(a,t,n,i);case"class-breaks":return q(a,r,t,n,i);case"unique-value":return Y(a,r,t,n,i);case"dictionary":return $(a,t,n,i);case"heatmap":return Q(a,t,n,i);case"pie-chart":return X(a,t,n,i)}}function H(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r.getSymbols(),a=i.length?i[0]:null;return{type:"simple",symbol:(0,h.createSymbolSchema)(a,t,n),symbologyType:t.symbologyType}}function X(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r.getSymbols(),a=i[0],l=i.length>1?i[1]:null;return{type:"pie-chart",markerSymbol:(0,h.createSymbolSchema)(a,t,n),fillSymbol:(0,h.createSymbolSchema)(l,t,n),symbologyType:t.symbologyType}}function q(e,r,t,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={mesh:!0,use:"renderer.field"},l=t.backgroundFillSymbol,o=A(e,{target:r,field:t.field,valueExpression:t.valueExpression,resultType:"numeric",context:a}),u=o.field,s=o.fieldIndex,c=t.normalizationType,f="log"===c?"esriNormalizeByLog":"percent-of-total"===c?"esriNormalizeByPercentOfTotal":"field"===c?"esriNormalizeByField":null,p=t.classBreakInfos.map((function(e){return{symbol:(0,h.createSymbolSchema)(e.symbol,n,i),min:e.minValue,max:e.maxValue}})).sort((function(e,r){return e.min-r.min}));return{type:"interval",attributes:e.fields,field:u,fieldIndex:s,backgroundFillSymbol:(0,h.createSymbolSchema)(l,n,i),defaultSymbol:(0,h.createSymbolSchema)(t.defaultSymbol,n,i),intervals:p,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,normalizationType:f,isMaxInclusive:t.isMaxInclusive,symbologyType:n.symbologyType}}function Y(e,r,t,n){var o,u,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=[],f=t.backgroundFillSymbol,p={target:r,context:{mesh:!0},resultType:"string"};if(t.field&&"string"!=typeof t.field)throw new l.Z(z,"Expected renderer.field to be a string",t);var d,y=A(e,(0,i.Z)((0,i.Z)({},p),{},{field:t.field,valueExpression:t.valueExpression})),m=y.field,v=y.fieldIndex,g=(0,a.Z)(null!==(u=t.uniqueValueInfos)&&void 0!==u?u:[]);try{for(g.s();!(d=g.n()).done;){var b=d.value;c.push({value:""+b.value,symbol:(0,h.createSymbolSchema)(b.symbol,n,s)})}}catch(x){g.e(x)}finally{g.f()}return{type:"map",attributes:e.fields,field:m,fieldIndex:v,field2:A(e,(0,i.Z)((0,i.Z)({},p),{},{field:t.field2})).field,field3:A(e,(0,i.Z)((0,i.Z)({},p),{},{field:t.field3})).field,fieldDelimiter:null!==(o=t.fieldDelimiter)&&void 0!==o?o:void 0,backgroundFillSymbol:(0,h.createSymbolSchema)(f,n),defaultSymbol:(0,h.createSymbolSchema)(t.defaultSymbol,n),map:c,symbologyType:n.symbologyType}}function $(e,r,t){return{type:"dictionary",config:r.config,fieldMap:r.fieldMap,scaleExpression:r.scaleExpression,url:r.url,symbolOptions:t,symbologyType:t.symbologyType}}function Q(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r.getSymbols(),a=i.length?i[0]:null;return{type:"heatmap",symbol:(0,h.createSymbolSchema)(a,t,n),symbologyType:t.symbologyType}}},91370:function(e,r,t){t.d(r,{TT:function(){return g},aR:function(){return f},rk:function(){return v},tv:function(){return p}});var n=t(93433),i=t(84506),a=t(10064),l=t(93169),o=t(32718),u=t(17842),s=t(90316),c=o.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils"),f=function(e){if(!("visualVariables"in e)||!e.visualVariables||!e.visualVariables.length)return e;var r=e.clone(),t=r.visualVariables.map((function(e){return d(e)?y(e):e}));return r.visualVariables=t,r};function p(e){return e.map((function(e){return d(e)?y(e.clone()):e}))}function d(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function y(e){var r;return e.stops=function(e,r){return r.length<=8?r:(c.warn("Found ".concat(r.length," Visual Variable stops, but MapView only supports ").concat(8,". Displayed stops will be simplified.")),r.length>16?function(e,r){for(var t=(0,i.Z)(r),n=t[0],a=t.slice(1),l=a.pop(),o=a[0].value,s=a[a.length-1].value,c=(s-o)/6,f=[],p=o;p<s;p+=c){for(var d=0;p>=a[d].value;)d++;var y=a[d],v=r[d-1],g=p-v.value,b=y.value===v.value?1:g/(y.value-v.value);if("color"===e){var h=a[d],x=r[d-1],S=h.color.clone();S.r=m(x.color.r,S.r,b),S.g=m(x.color.g,S.g,b),S.b=m(x.color.b,S.b,b),S.a=m(x.color.a,S.a,b),f.push({value:p,color:S,label:h.label})}else if("size"===e){var Z=a[d],w=r[d-1],T=(0,u.t_)(Z.size),E=m((0,u.t_)(w.size),T,b);f.push({value:p,size:E,label:Z.label})}else{var F=a[d],V=m(r[d-1].opacity,F.opacity,b);f.push({value:p,opacity:V,label:F.label})}}return[n].concat(f,[l])}(e,r):function(e){for(var r=(0,i.Z)(e),t=r[0],a=r.slice(1),l=a.pop();a.length>6;){for(var o=0,u=0,s=1;s<a.length;s++){var c=a[s-1],f=a[s],p=Math.abs(f.value-c.value);p>u&&(u=p,o=s)}a.splice(o,1)}return[t].concat((0,n.Z)(a),[l])}(r))}(e.type,null!==(r=e.stops)&&void 0!==r?r:[]),e}function m(e,r,t){return(1-t)*e+t*r}function v(){if((0,l.Z)("heatmap-force-raster"))return"raster";var e=(0,s.hc)("2d"),r=e.supportsTextureFloat,t=e.supportsTextureHalfFloat,n=e.supportsColorBufferFloat,i=e.supportsColorBufferFloatBlend,a=e.supportsColorBufferHalfFloat;return r&&n&&i||t&&a?"symbol":(0,l.Z)("heatmap-allow-raster-fallback")?"raster":"none"}function g(e){if(!e)return!0;switch(e.type){case"dot-density":if(!(0,s.hc)("2d").supportsTextureFloat)return c.error(new a.Z("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":var r=v();if("none"===r||"raster"===r&&!(0,l.Z)("heatmap-force-raster")){var t=(0,s.hc)("2d"),n=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((function(e){return!t[e]})).join(", ");if("none"===r)return c.errorOnce(new a.Z("webgl-missing-extension","Missing WebGL".concat(t.type," requirements for Heatmap: ").concat(n))),!1;"raster"===r&&c.warnOnce("Missing WebGL".concat(t.type," requirements for accelerated Heatmap: ").concat(n,". Feature support may be limited."))}}return!0}},95857:function(e,r,t){t.d(r,{I_:function(){return u},XA:function(){return y},Zu:function(){return c},ab:function(){return f},eT:function(){return d},y1:function(){return s},yA:function(){return p}});var n=t(29439),i=(t(75746),t(92026)),a=t(80885),l=t(65156),o=t(92975),u=(t(38999),t(94109),t(47975),512),s=50;function c(e,r){var t=(0,o.C5)(r);if(!t)return null;var i=(0,n.Z)(t.valid,2),a=i[0],u=i[1];return e[2]>u?[(0,l.Ue)([e[0],e[1],u,e[3]]),(0,l.Ue)([a,e[1],a+e[2]-u,e[3]])]:e[0]<a?[(0,l.Ue)([a,e[1],e[2],e[3]]),(0,l.Ue)([u-(a-e[0]),e[1],u,e[3]])]:null}function f(e){return"text"===e||"esriTS"===e}function p(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function d(e){switch((0,i.Wg)(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function y(e){if(!e)return null;var r=e.xmin,t=e.ymin,n=e.xmax,i=e.ymax,l=e.spatialReference;return new a.Z({rings:[[[r,t],[r,i],[n,i],[n,t],[r,t]]],spatialReference:l})}},98125:function(e,r,t){t.d(r,{x:function(){return L},B:function(){return z}});var n=t(74165),i=t(15861),a=t(98991),l=t(37762),o=t(15671),u=t(43144),s=t(80613),c=t(54815),f={marker:s.LW.MARKER,fill:s.LW.FILL,line:s.LW.LINE,text:s.LW.TEXT},p=function(){function e(r,t,n,i){(0,o.Z)(this,e);var a={minScale:null===t||void 0===t?void 0:t.minScale,maxScale:null===t||void 0===t?void 0:t.maxScale},u=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(a);this.layers=r,this.data=t,this.hash=this._createHash()+u,this.rendererKey=n;var p,d={isOutline:!1,placement:null,symbologyType:s.mD.DEFAULT,vvFlags:n},y=(0,l.Z)(r);try{for(y.s();!(p=y.n()).done;){var m=p.value,v=f[m.type];d.isOutline="line"===m.type&&m.isOutline,m.materialKey=(0,c.jj)(v,d),m.maxVVSize=i,m.scaleInfo=a,m.templateHash+=u}}catch(g){y.e(g)}finally{y.f()}}return(0,u.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,r="",t=(0,l.Z)(this.layers);try{for(t.s();!(e=t.n()).done;){r+=e.value.templateHash}}catch(n){t.e(n)}finally{t.f()}return r}}]),e}();var d=t(71277),y=t(10064),m=t(92026),v=t(66978),g=t(35995),b=t(70032),h=t(53283),x=t(38048);function S(e,r,t){return Z.apply(this,arguments)}function Z(){return Z=(0,i.Z)((0,n.Z)().mark((function e(r,t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.name){e.next=2;break}throw new y.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");case 2:if(!r.styleName||"Esri2DPointSymbolsStyle"!==r.styleName){e.next=4;break}return e.abrupt("return",w(r,i));case 4:return e.prev=4,e.t0=E,e.next=8,(0,x.n2)(r,t,i);case 8:return e.t1=e.sent,e.t2=r.name,e.t3=t,e.t4=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 15:return e.prev=15,e.t5=e.catch(4),e.abrupt("return",((0,v.k_)(e.t5),null));case 18:case"end":return e.stop()}}),e,null,[[4,15]])}))),Z.apply(this,arguments)}function w(e,r){return T.apply(this,arguments)}function T(){return T=(0,i.Z)((0,n.Z)().mark((function e(r,t){var i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x.wm.replace(/\{SymbolName\}/gi,r.name),e.prev=1,e.next=4,(0,x.EJ)(i,t);case 4:return a=e.sent,e.abrupt("return",(0,x.KV)(a.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",((0,v.k_)(e.t0),null));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),T.apply(this,arguments)}function E(e,r,t,n){return F.apply(this,arguments)}function F(){return F=(0,i.Z)((0,n.Z)().mark((function e(r,t,i,a){var l,o,u,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=r.data,o={portal:i&&(0,m.pC)(i.portal)?i.portal:b.Z.getDefault(),url:(0,g.mN)(r.baseUrl),origin:"portal-item"},u=l.items.find((function(e){return e.name===t}))){e.next=3;break}throw new y.Z("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(t,"' could not be found"),{symbolName:t});case 3:return s=(0,h.f)((0,x.v9)(u,"cimRef"),o),(0,d.XO)()&&(s=(0,d.pJ)(s)),e.prev=5,e.next=8,(0,x.EJ)(s,a);case 8:return c=e.sent,e.abrupt("return",(0,x.KV)(c.data));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",((0,v.k_)(e.t0),null));case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),F.apply(this,arguments)}var V=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r,t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,(0,a.c)(r.data,t,i);case 3:return e.t1=e.sent,e.t2=r.data,e.t3=r.rendererKey,e.t4=r.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}();function z(e,r,t,n){return I.apply(this,arguments)}function I(){return I=(0,i.Z)((0,n.Z)().mark((function e(r,t,i,a){var l,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==r.type){e.next=4;break}return e.abrupt("return",V(r,t,i));case 4:if("web-style"!==r.type){e.next=21;break}return e.next=7,S(r,null,a);case 7:if(e.t1=l=e.sent,e.t0=null!==e.t1,!e.t0){e.next=11;break}e.t0=void 0!==l;case 11:if(!e.t0){e.next=15;break}e.t2=l,e.next=16;break;case 15:e.t2=void 0;case 16:return e.t3=e.t2,e.t4=r.rendererKey,e.t5=r.maxVVSize,o={type:"cim",data:e.t3,rendererKey:e.t4,maxVVSize:e.t5},e.abrupt("return",V(o,t,i));case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function L(e){if(!e)return null;var r=e.avoidSDFRasterization,t=e.type,n=e.cim,i=e.url,a={cim:n,type:t,mosaicHash:e.materialHash,url:i,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:r};switch(t){case"marker":a.size=e.size,a.path=e.path,a.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":a.dashTemplate=e.dashTemplate;break;case"text":a.text=e.text,a.fontName=e.fontName}return a}},31666:function(e,r,t){t.d(r,{JV:function(){return a},oq:function(){return i}});var n=new(t(43404).X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function i(e){return n.toJSON(e)}function a(e){var r=e.raster.rasterInfo,t=r.bandCount,n=r.attributeTable,i=r.colormap,a=r.pixelType;return 1===t&&(null!=n||null!=i||"u8"===a||"s8"===a)}}}]);
//# sourceMappingURL=7671.ab4a148c.chunk.js.map