/*! For license information please see 29315.1922150a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[29315],{29315:function(e,t,n){n.d(t,{A:function(){return ge},B:function(){return Y},C:function(){return A},D:function(){return k},E:function(){return $e},F:function(){return Ye},G:function(){return J},H:function(){return $},I:function(){return W},J:function(){return je},K:function(){return K},L:function(){return Qe},M:function(){return Ze},N:function(){return Ue},P:function(){return F},S:function(){return P},W:function(){return Ce},a:function(){return te},b:function(){return He},c:function(){return ee},d:function(){return qe},e:function(){return Be},f:function(){return X},g:function(){return Se},h:function(){return ze},i:function(){return ae},j:function(){return Re},k:function(){return ot},l:function(){return ie},m:function(){return Q},n:function(){return _e},o:function(){return nt},p:function(){return We},q:function(){return he},r:function(){return ne},s:function(){return H},t:function(){return fe},u:function(){return at},v:function(){return V},w:function(){return ue},x:function(){return se},y:function(){return be},z:function(){return et}});var r=n(4942),o=n(74165),a=n(15861),i=n(84506),u=n(93433),s=n(29439),c=n(43144),l=n(15671),p=n(60136),f=n(92572),d=n(9882),h=n(84354),y=n(41817),m=n(46825),g=n(51274),v=n(25831),b=n(73948),E=n(18436),O=n(69207),x=n(21923),w=n(63613),T=n(98825),I=n(77843);function D(e){var t=(0,T.g)(e)+"/community/groups/"+e.group.id+"/update";return e.params=(0,w._)((0,w._)({},e.params),e.group),(0,I.r)(t,e)}var P,S,A,R,k,Z,j,C,_,M,N,U,F,B,L=function(e){(0,p.Z)(n,e);var t=(0,f.Z)(n);function n(e,r,o,a){var i;return(0,l.Z)(this,n),(i=t.call(this,e,r,o)).error=a,i}return(0,c.Z)(n)}(v.R);function G(e,t){return function(e){var t=e.token,n=e.authentication,r=function(){return Promise.resolve(t)};return n&&(r=n.getToken.bind(n,n.portal)),r()}(t).then((function(n){return function(e,t,n){var r=new Headers(t.headers);r.append("Content-Type","application/json"),n&&r.append("Authorization","Bearer ".concat(n));var o={headers:r,method:t.httpMethod||"GET",mode:t.mode,cache:t.cache,credentials:t.credentials},a=(0,v.b)({host:t.hubApiUrl||"https://hub.arcgis.com",path:"/api/discussions/v1"});if(t.params)if("GET"===t.httpMethod){var i=new URLSearchParams(t.params).toString();e+="?".concat(i)}else o.body=JSON.stringify(t.params);var u=[a.replace(/\/$/,""),e.replace(/^\//,"")].join("/");return fetch(u,o).then((function(e){if(e.ok)return e.json();var t=e.statusText,n=e.status;return e.json().then((function(e){throw new L(t,u,n,JSON.stringify(e.message))}))}))}(e,t,n)}))}function H(e){return e.httpMethod="GET",G("/posts",e)}function J(e){return G("/posts",Object.assign({httpMethod:"POST"},q(e)))}function K(e){return G("/posts/".concat(e.postId,"/reply"),Object.assign({httpMethod:"POST"},q(e)))}function z(e){var t="/posts/".concat(e.postId);return e.httpMethod="GET",G(t,e)}function V(e){var t="/posts/".concat(e.postId);return e.httpMethod="DELETE",G(t,e)}function W(e){return G("/posts/".concat(e.postId),Object.assign({httpMethod:"PATCH"},q(e)))}function q(e){var t=e.mentionUrl,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["mentionUrl"]);return t&&(n.headers=Object.assign(Object.assign({},n.headers),{"mention-url":t})),n}function Y(e){return e.httpMethod="GET",G("/channels",e)}function $(e){return e.httpMethod="GET",G("/channels/".concat(e.channelId),e)}function Q(e){return e.httpMethod="PATCH",G("/channels/".concat(e.channelId),e)}function X(e){return e.httpMethod="GET",G("/channels/".concat(e.channelId,"/notifications/opt-out"),e)}function ee(e){return e.httpMethod="POST",G("/channels/".concat(e.channelId,"/notifications/opt-out"),e)}function te(e){return e.httpMethod="DELETE",G("/channels/".concat(e.channelId,"/notifications/opt-out"),e)}function ne(e){return e.httpMethod="DELETE",G("/channels/".concat(e.channelId,"/activity"),e)}!function(e){e.ASC="ASC",e.DESC="DESC"}(P||(P={})),function(e){e.THUMBS_UP="thumbs_up",e.THUMBS_DOWN="thumbs_down",e.THINKING="thinking",e.HEART="heart",e.ONE_HUNDRED="one_hundred",e.SAD="sad",e.LAUGH="laugh",e.SURPRISED="surprised"}(S||(S={})),function(e){e.PUBLIC="public",e.ORG="org",e.PRIVATE="private"}(A||(A={})),function(e){e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.DELETED="deleted",e.HIDDEN="hidden"}(R||(R={})),function(e){e.GROUP="group",e.CONTENT="content"}(k||(k={})),function(e){e.HUB="hub",e.AGO="ago",e.URBAN="urban"}(Z||(Z={})),function(e){e.REPLIES="replies",e.REACTIONS="reactions",e.PARENT="parent",e.CHANNEL="channel"}(j||(j={})),function(e){e.SETTINGS="settings"}(C||(C={})),function(e){e.POST="post"}(_||(_={})),function(e){e.HAS_USER_POSTS="has_user_posts"}(M||(M={})),function(e){e.CREATED_AT="createdAt",e.CREATOR="creator",e.EDITOR="editor",e.ID="id",e.UPDATED_AT="updatedAt"}(N||(N={})),function(e){e.ACCESS="access",e.CREATED_AT="createdAt",e.CREATOR="creator",e.EDITOR="editor",e.ID="id",e.LAST_ACTIVITY="last_activity",e.UPDATED_AT="updatedAt"}(U||(U={})),function(e){e.BODY="body",e.CHANNEL_ID="channelId",e.CREATED_AT="createdAt",e.CREATOR="creator",e.DISCUSSION="discussion",e.EDITOR="editor",e.ID="id",e.PARENT_ID="parentId",e.STATUS="status",e.TITLE="title",e.UPDATED_AT="updatedAt"}(F||(F={})),function(e){e.READ="read",e.WRITE="write",e.READWRITE="readWrite",e.MODERATE="moderate",e.MANAGE="manage",e.OWNER="owner"}(B||(B={}));var re="cannotDiscuss",oe="data-mention";function ae(e){var t;try{t=new URL(e)}catch(d){throw new Error("Invalid URI: ".concat(e))}var n,r,o=t.protocol.replace(":",""),a=e.split("://"),i=(0,s.Z)(a,2)[1].split("/"),u=(0,s.Z)(i,2),c=u[0],l=u[1];if(l){var p=(0,b.p)(l);n=p.itemId,r=p.layerId}var f=new URLSearchParams(t.search.replace("?",""));return{source:o,type:c,id:n||null,layer:r||null,features:f.has("id")&&f.get("id").split(",")||null,attribute:f.has("attribute")&&f.get("attribute")||null}}function ie(e){var t;return!(null!==(t=e.typeKeywords)&&void 0!==t?t:[]).includes(re)}function ue(e,t){return e.creator===t.username}function se(e,t,n){return ue(e,n)||function(e,t){return e.creator===t.username||("private"===e.access?(n=["owner","admin"],function(e,t){var o=t.groups,a=e.groups.reduce(function(e){return function(t,n){return e.indexOf(n.userMembership.memberType)>-1&&t.push(n.id),t}}(n),[]);return o[r?"every":"some"]((function(e){return a.indexOf(e)>-1}))})(t,e):function(e,t){return function(e){return"org_admin"===e.role&&!e.roleId}(t)&&e.orgs.indexOf(t.orgId)>-1}(e,t));var n,r}(t,n)}var ce=new RegExp("".concat(oe,"=('|\")(\\w)+('|\")"),"g"),le=new RegExp("".concat(oe,"="),"g"),pe=new RegExp("[^\\w]","g");function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=function(e,t){return e.replace(t,"")},n=function(e,n){var r=[le,pe].reduce(t,n);return e.indexOf(r)<0?[].concat((0,u.Z)(e),[r]):e},r=e.match(ce)||[];return r.reduce(n,[])}var de=new Map;function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.scope,r=void 0===n?"default":n,o=t.getKey,a=void 0===o?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];return r}:o,u=t.ttl,s=void 0===u?0:u;if(!r||"string"!==typeof r)throw new TypeError("must provide a valid cache scope");if(s&&("number"!==typeof s||s<0))throw new TypeError("ttl must be a number greater than or equal to zero");if("function"!==typeof a)throw new TypeError("getKey must be a function");return function(){for(var n,o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];try{var l=[].concat(u).reverse(),p=(0,i.Z)(l),f=p[0],d=p.slice(1),h=Object.keys(f),y=(0,i.Z)(h),m=y[0],g=y.slice(1),v="bust"===m&&!g.length;if(!v)throw new Error("No cache arg provided");n=d.reverse()}catch(I){n=u}var b=t.context,E=void 0===b?this:b,O=de.get(r);O||(O=new Map,de.set(r,O));var x=a.apply(E,n);if(!x||"string"!==typeof x)throw new Error("getKey must return a string");var w=u.length===n.length?O.get(x):void 0,T=Date.now();return(!w||s&&T>w.created+s)&&(w={created:T,result:e.apply(E,n)},O.set(x,w)),w.result}}var ye=he((function(e,t){return(0,d.a)(Object.assign({username:e},t))}),{scope:"users"}),me=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ge=he((function(e,t){return(0,h.g)(e,t)}),{scope:"teams",ttl:5e3}),ve=he(h.a,{scope:"teamMembers"});function be(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,s,c,l,p,f,d,h,y;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.currentUser,a=t.query,i=me(t,["id","currentUser","query"]),e.next=3,ve(n,i);case 3:return s=e.sent,c=s.owner,l=s.admins,p=s.users,f=function(e,t,n){return e!==r.username&&n.indexOf(e)===t},d=[c].concat((0,u.Z)(l),(0,u.Z)(p)).filter(f),e.next=11,Promise.all(d.map((function(e){return ye(e,i)})));case 11:return h=e.sent,y=function(e){return e.username.includes(a)||e.fullName.includes(a)},e.abrupt("return",h.filter(y));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=he((function(e,t){return(0,y.a)(e,t)}),{scope:"orgs"}),xe=function(e,t,n,r){var o=(r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]),a=(t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]),i=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(0!==i){var u=o/i,s=a/i;if(u>=0&&u<=1&&s>=0&&s<=1)return!0}return!1},we=function(e,t){for(var n=0;n<e.length-1;n++)for(var r=0;r<t.length-1;r++)if(xe(e[n],e[n+1],t[r],t[r+1]))return!0;return!1},Te=function(e){return function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e},Ie=function(e){for(var t,n=0,r=0,o=e.length,a=e[r];r<o-1;r++)n+=((t=e[r+1])[0]-a[0])*(t[1]+a[1]),a=t;return n>=0},De=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},Pe=function(e,t){var n=we(e,t),r=function(e,t){for(var n=!1,r=-1,o=e.length,a=o-1;++r<o;a=r)(e[r][1]<=t[1]&&t[1]<e[a][1]||e[a][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[a][0]-e[r][0])*(t[1]-e[r][1])/(e[a][1]-e[r][1])+e[r][0]&&(n=!n);return n}(e,t[0]);return!(n||!r)},Se=function e(t,n){var r={};if(t.features){r.type="FeatureCollection",r.features=[];for(var o=0;o<t.features.length;o++)r.features.push(e(t.features[o],n))}if("number"===typeof t.x&&"number"===typeof t.y&&(r.type="Point",r.coordinates=[t.x,t.y],"number"===typeof t.z&&r.coordinates.push(t.z)),t.points&&(r.type="MultiPoint",r.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(r.type="LineString",r.coordinates=t.paths[0].slice(0)):(r.type="MultiLineString",r.coordinates=t.paths.slice(0))),t.rings&&(r=function(e){for(var t,n,r,o=[],a=[],i=0;i<e.length;i++){var u=Te(e[i].slice(0));if(!(u.length<4))if(Ie(u)){var s=[u.slice().reverse()];o.push(s)}else a.push(u.slice().reverse())}for(var c=[];a.length;){r=a.pop();var l=!1;for(t=o.length-1;t>=0;t--)if(n=o[t][0],Pe(n,r)){o[t].push(r),l=!0;break}l||c.push(r)}for(;c.length;){r=c.pop();var p=!1;for(t=o.length-1;t>=0;t--)if(n=o[t][0],we(n,r)){o[t].push(r),p=!0;break}p||o.push([r.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(t.rings.slice(0))),"number"===typeof t.xmin&&"number"===typeof t.ymin&&"number"===typeof t.xmax&&"number"===typeof t.ymax&&(r.type="Polygon",r.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(r.type="Feature",r.geometry=t.geometry?e(t.geometry):null,r.properties=t.attributes?De(t.attributes):null,t.attributes))try{r.id=function(e,t){for(var n=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<n.length;r++){var o=n[r];if(o in e&&("string"===typeof e[o]||"number"===typeof e[o]))return e[o]}throw Error("No valid id attribute found")}(t.attributes,n)}catch(a){}return JSON.stringify(r.geometry)===JSON.stringify({})&&(r.geometry=null),t.spatialReference&&t.spatialReference.wkid&&4326!==t.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),r},Ae=function(e){var t=[],n=e.slice(0),r=Te(n.shift().slice(0));if(r.length>=4){Ie(r)||r.reverse(),t.push(r);for(var o=0;o<n.length;o++){var a=Te(n[o].slice(0));a.length>=4&&(Ie(a)&&a.reverse(),t.push(a))}}return t},Re=function e(t,n){n=n||"OBJECTID";var r,o={wkid:4326},a={};switch(t.type){case"Point":a.x=t.coordinates[0],a.y=t.coordinates[1],t.coordinates[2]&&(a.z=t.coordinates[2]),a.spatialReference=o;break;case"MultiPoint":a.points=t.coordinates.slice(0),t.coordinates[0][2]&&(a.hasZ=!0),a.spatialReference=o;break;case"LineString":a.paths=[t.coordinates.slice(0)],t.coordinates[0][2]&&(a.hasZ=!0),a.spatialReference=o;break;case"MultiLineString":a.paths=t.coordinates.slice(0),t.coordinates[0][0][2]&&(a.hasZ=!0),a.spatialReference=o;break;case"Polygon":a.rings=Ae(t.coordinates.slice(0)),t.coordinates[0][0][2]&&(a.hasZ=!0),a.spatialReference=o;break;case"MultiPolygon":a.rings=function(e){for(var t=[],n=0;n<e.length;n++)for(var r=Ae(e[n]),o=r.length-1;o>=0;o--){var a=r[o].slice(0);t.push(a)}return t}(t.coordinates.slice(0)),t.coordinates[0][0][0][2]&&(a.hasZ=!0),a.spatialReference=o;break;case"Feature":t.geometry&&(a.geometry=e(t.geometry,n)),a.attributes=t.properties?De(t.properties):{},t.id&&(a.attributes[n]=t.id);break;case"FeatureCollection":for(a=[],r=0;r<t.features.length;r++)a.push(e(t.features[r],n));break;case"GeometryCollection":for(a=[],r=0;r<t.geometries.length;r++)a.push(e(t.geometries[r],n))}return a},ke=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ze=50,je=512,Ce=je-37;function _e(e){return Me.apply(this,arguments)}function Me(){return Me=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,i,u,s,c,l,p,f,d,h,y,m,g,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.postDetails,u=t.includeReplyCount,s=ke(t,["postDetails","includeReplyCount"]),i){e.next=3;break}throw new Error("Must provide postDetails object");case 3:if(c=i.postId,l=i.post,p=null,f=null,d=[],l){e.next=23;break}return e.prev=8,y=u?{relations:[j.REPLIES]}:{},e.next=12,z(Object.assign({postId:c,params:y},s));case 12:n=e.sent,h=n.replies,l=ke(n,["replies"]),c=l.id,h&&(l.replyCount=h.total),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),console.warn("Failed to fetch post ".concat(c)),l=null;case 23:if(!l){e.next=71;break}if(!u||void 0!==l.replyCount){e.next=37;break}return e.prev=25,e.next=28,H(Object.assign({params:{start:1,num:1,parents:l.id}},s));case 28:m=e.sent,g=m.total,l.replyCount=g,e.next=37;break;case 33:e.prev=33,e.t1=e.catch(25),console.warn("Failed to fetch reply count for post ".concat(l.id)),l.replyCount=0;case 37:return e.prev=37,e.next=40,ye(l.creator,s);case 40:p=e.sent,e.next=47;break;case 43:e.prev=43,e.t2=e.catch(37),p=null,console.warn("Failed to fetch user info for ".concat(l.creator));case 47:if(!(null===p||void 0===p?void 0:p.orgId)){e.next=58;break}return e.prev=48,e.next=51,Oe(p.orgId,s);case 51:f=e.sent,e.next=58;break;case 54:e.prev=54,e.t3=e.catch(48),f=null,console.warn("Failed to fetch user org for ".concat(p.username));case 58:if(!(v=fe(l.body)).length){e.next=71;break}return e.prev=60,e.next=63,Promise.all(v.map(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye(t,s);case 3:if(r=e.sent,a=null,!(null===r||void 0===r?void 0:r.orgId)){e.next=9;break}return e.next=8,Oe(r.orgId,s);case 8:a=e.sent;case 9:n={username:t,user:r,organization:a},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n=null;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()));case 63:d=e.sent,e.next=70;break;case 66:e.prev=66,e.t4=e.catch(60),d=[],console.warn("Failed to fetch mentioned users for ".concat(l.id));case 70:d=d.filter(Boolean);case 71:return e.abrupt("return",{post:l,postId:c||l.id,creatorDetails:{username:null!==(r=null===p||void 0===p?void 0:p.username)&&void 0!==r?r:null===l||void 0===l?void 0:l.creator,user:p,organization:f},mentionedUsers:d});case 72:case"end":return e.stop()}}),e,null,[[8,19],[25,33],[37,43],[48,54],[60,66]])}))),Me.apply(this,arguments)}var Ne=he((function(e,t){return(0,m.g)({url:e,id:t}).then(Se).catch((function(e){return console.warn("Failed to fetch related feature ".concat(t),e.message),null}))}),{scope:"relatedFeatures",getKey:function(e,t){return t.toString()}});function Ue(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,a.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!(Number((0,E.d)(t))>=0)){e.next=6;break}return e.next=4,Promise.all(n.map((function(e){return Ne(t,e)})));case 4:(r=e.sent).forEach((function(e,t){e&&(e.id=n[t])}));case 6:return e.abrupt("return",r.filter(Boolean));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Le.apply(this,arguments)}function Le(){return(Le=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,u,c,l,p,f,d,h,y,m,g;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channelDetails,r=t.user,a=ke(t,["channelDetails","user"]),n){e.next=3;break}throw new Error("Must provide a chanelDetails object");case 3:if(i=n.channelId,u=n.channel){e.next=15;break}return e.prev=5,e.next=8,$(Object.assign({channelId:i},a));case 8:u=e.sent,i=u.id,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.warn("Failed to fetch channel ".concat(i));case 15:if(c=[],!u){e.next=26;break}return p=Promise.all(u.groups.map((function(e){return ge(e,a).catch((function(){return null}))}))),r&&(f=H(Object.assign({params:{start:1,num:1,sortBy:F.CREATED_AT,sortOrder:P.DESC,channels:u.id,creator:r.username}},a))),e.next=21,Promise.all([p,f]);case 21:h=e.sent,y=(0,s.Z)(h,2),c=y[0],(d=y[1])&&(m=d,g=(0,s.Z)(m.items,1),l=g[0]);case 26:return e.abrupt("return",{channel:u,groups:c.filter(Boolean),channelId:i,latestUserPost:l});case 27:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}var Ge=function(e){return{postId:e.id,post:e}};function He(e){return Je.apply(this,arguments)}function Je(){return(Je=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,s,c,l,p,f,d,h,y,m,g,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.discussion,r=t.start,a=t.sortOrder,i=t.sortBy,s=t.parents,c=void 0===s?[]:s,l=t.num,p=void 0===l?10:l,f=t.geometry,d=ke(t,["discussion","start","sortOrder","sortBy","parents","num","geometry"]),e.next=3,H(Object.assign({params:Object.assign(Object.assign(Object.assign({discussion:n,num:p},(null===c||void 0===c?void 0:c.length)&&{parents:c}),{relations:[].concat((0,u.Z)((null===c||void 0===c?void 0:c.length)?[j.REPLIES]:[j.PARENT,j.REPLIES]),[j.CHANNEL]),sortBy:i,sortOrder:a,start:r}),f&&{geometry:f})},d));case 3:return h=e.sent,y=h.items,m=ke(h,["items"]),g=function(e){var t=e.channel,n=ke(e,["channel"]),r=Boolean(n.parent),o=Ge(n);return{postDetails:r?Ge(n.parent):o,replyDetails:r?o:null,channelDetails:{channelId:t.id,channel:t}}},v=y.map(g),e.abrupt("return",Object.assign(Object.assign({},m),{items:v}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=he(g.f,{scope:"content"});function ze(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,u,s,c,l,p,f,d,h,y;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.bust,a=t.discussion,i=t.locationId,u=ke(t,["bust","discussion","locationId"]),s={discussion:a,reference:null,displayField:null,source:null,type:null,id:null,layer:null,features:null,attribute:null},!a){e.next=23;break}return c=ae(a),l=c.type===k.GROUP?ge:Ke,e.next=7,l(c.id,u,{bust:r});case 7:if(p=e.sent,f={key:null===(n=null===p||void 0===p?void 0:p.layer)||void 0===n?void 0:n.displayField,isValid:Xe(p)},!i||!f.isValid){e.next=22;break}return e.prev=10,e.next=13,Ne(p.url,i);case 13:d=e.sent,h=d.properties,y=h[p.layer.displayField],f.value=y,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.error("Failed to load location:",e.t0.message);case 22:s=Object.assign({discussion:a,reference:p,displayField:f},c);case 23:return e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[10,19]])})))).apply(this,arguments)}function We(e){return{type:"FeatureCollection",features:e.filter((function(e){return Boolean(e.geometry||Qe(e.discussion))})).map(qe).flat()}}function qe(e){var t={type:"Point",coordinates:[]},n=e.geometry,r=ke(e,["geometry"]),o=[];return"GeometryCollection"===(null===n||void 0===n?void 0:n.type)?n.geometries.forEach((function(e,n){o.push({type:"Feature",geometry:e||t,properties:Object.assign(Object.assign({},r),{__index__:n})})})):o.push({type:"Feature",geometry:n||t,properties:r}),o}function Ye(e){var t=e.map((function(e){return e.geometry})).filter((function(e){return Boolean(e.coordinates.length)}));return t.length?{type:"GeometryCollection",geometries:t}:null}function $e(e,t,n){var r=ae(e),o=r.source,a=r.type,i=r.id,s=r.features,c="".concat(o,"://").concat(a,"/").concat(i,"_").concat(t),l=s||[],p=Array.from(new Set([].concat((0,u.Z)(l),(0,u.Z)(n))));return p.length&&(c+="?id=".concat(p.join(","))),c}function Qe(e){if(e){var t=ae(e).features;return t||void 0}}var Xe=function(e){if(!e.layer)return!1;var t=e.layer,n=t.displayField,r=t.fields.find((function(e){return"esriFieldTypeOID"===e.type})).name;return Boolean(n)&&n!==r};function et(e){return tt.apply(this,arguments)}function tt(){return tt=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,i,u,s,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=ke(t,["user"]),e.next=3,Y(Object.assign({params:{num:4,filterBy:M.HAS_USER_POSTS,sortBy:U.LAST_ACTIVITY,sortOrder:P.DESC}},r));case 3:return i=e.sent,u=i.items,s=ke(i,["items"]),e.next=8,Promise.all(u.map(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(Object.assign({channelDetails:{channelId:t.id,channel:t},user:n},r)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return c=e.sent,l=function(e){return Boolean(e.groups.length)&&ie(e.groups[0])},e.abrupt("return",Object.assign(Object.assign({},s),{items:c.filter(l)}));case 11:case"end":return e.stop()}}),e)}))),tt.apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,a.Z)((0,o.Z)().mark((function e(t){var n,r,a,i,u,s,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.parents,r=t.start,a=ke(t,["parents","start"]),e.next=3,H(Object.assign({params:{parents:n,num:10,start:r,sortOrder:P.DESC,sortBy:F.UPDATED_AT}},a));case 3:return i=e.sent,u=i.items,s=ke(i,["items"]),c=u.map(Ge),e.abrupt("return",Object.assign(Object.assign({},s),{items:c}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){var t=e.type;return"Point"===t||"MultiPoint"===t?"point":"LineString"===t||"MultiLineString"===t?"line":"Polygon"===t||"MultiPolygon"===t?"polygon":void 0}function at(e){return it.apply(this,arguments)}function it(){return(it=(0,a.Z)((0,o.Z)().mark((function e(t){var n,a,i,s,c,l,p,f,d,y;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subject,a=t.discussable,i=ke(t,["subject","discussable"]),"content"===(void 0===n.isInvitationOnly?"content":"group")?(s=O.g,c=x.u,l="item"):(s=h.g,c=D,l="group"),e.next=5,s(n.id,i);case 5:return p=e.sent,f=p.typeKeywords,d=a?f.filter((function(e){return e!==re})):[].concat((0,u.Z)(f),[re]),e.next=10,c(Object.assign((0,r.Z)({},l,{id:n.id,owner:n.owner,typeKeywords:d}),i));case 10:if(y=e.sent,y.success){e.next=14;break}throw new Error("Failed to update discussion settings");case 14:return e.abrupt("return",Object.assign(Object.assign({},n),{typeKeywords:d}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},84354:function(e,t,n){n.d(t,{a:function(){return s},g:function(){return u},s:function(){return c}});var r=n(63613),o=n(98825),a=n(77843),i=n(80046);function u(e,t){var n=(0,o.g)(t)+"/community/groups/"+e,i=(0,r._)({httpMethod:"GET"},t);return(0,a.r)(n,i)}function s(e,t){var n=(0,o.g)(t)+"/community/groups/"+e+"/users",i=(0,r._)({httpMethod:"GET"},t);return(0,a.r)(n,i)}function c(e,t){var n=(0,o.g)(t)+"/community/groups/"+e+"/userlist",r=(0,i.a)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return(0,a.r)(n,r)}},21923:function(e,t,n){n.d(t,{a:function(){return s},m:function(){return c},u:function(){return u}});var r=n(63613),o=n(98825),a=n(69207),i=n(77843);function u(e){return(0,a.d)(e).then((function(t){var n=e.folderId?(0,o.g)(e)+"/content/users/"+t+"/"+e.folderId+"/items/"+e.item.id+"/update":(0,o.g)(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=(0,r._)((0,r._)({},e.params),(0,a.s)(e.item)),e.params.extent&&(0,a.i)(e.params.extent)&&(e.params.extent=(0,a.b)(e.params.extent)),(0,i.r)(n,e)}))}function s(e){return(0,a.d)(e).then((function(t){var n=(0,o.g)(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=(0,r._)({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content},e.params),"undefined"!==typeof e.private&&(e.params.access=e.private?"private":"inherit"),(0,i.r)(n,e)}))}function c(e){return(0,a.d)(e).then((function(t){var n=(0,o.g)(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",a=e.folderId;return a||(a="/"),e.params=(0,r._)({folder:a},e.params),(0,i.r)(n,e)}))}}}]);
//# sourceMappingURL=29315.1922150a.chunk.js.map