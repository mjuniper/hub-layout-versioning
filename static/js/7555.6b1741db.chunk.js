"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[7555,65905],{7555:function(e,t,r){r.r(t),r.d(t,{arcgis_hub_map_widget_search:function(){return Jt}});var n=r(29439),i=r(74165),o=r(15861),a=r(15671),s=r(43144),u=r(5692),l=r(2001),c=r(54825),d=r(4541),p=r(13129),f=r(8537),h=r(93433),v=r(1413),g=r(60136),y=r(92572),m=r(27366),w=r(65905),b=r(42265),S=r(52639),_=r(44055),x=(r(51508),r(85015)),Z=r(80987),C=r(10064),k=r(91505),R=r(100),F=r(32718),T=r(92026),j=r(66978),E=r(94172),I=r(49861),L=r(25243),O=(r(63780),r(69912)),P=r(585),N=r(78952),G=r(36257),A=r(41201),D=r(70032),M=r(69787),J=r(97326),q=r(84652),z=r(79056),W=r(46784),K=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).autoNavigate=null,n.filter=null,n.getResults=null,n.getSuggestions=null,n.maxResults=null,n.maxSuggestions=null,n.minSuggestCharacters=null,n.outFields=null,n.placeholder="",n.popupEnabled=null,n.popupTemplate=null,n.prefix="",n.resultGraphicEnabled=null,n.resultSymbol=null,n.suggestionsEnabled=null,n.suffix="",n.withinViewEnabled=!1,n.zoomScale=null,n}return(0,s.Z)(r)}((0,z.IG)(W.wq));(0,m._)([(0,I.Cb)()],K.prototype,"autoNavigate",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"filter",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"getResults",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"getSuggestions",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"maxResults",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"maxSuggestions",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"minSuggestCharacters",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"outFields",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"placeholder",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"popupEnabled",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"popupTemplate",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"prefix",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"resultGraphicEnabled",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"resultSymbol",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"suggestionsEnabled",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"suffix",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"withinViewEnabled",void 0),(0,m._)([(0,I.Cb)()],K.prototype,"zoomScale",void 0);var V=K=(0,m._)([(0,O.j)("esri.widgets.Search.SearchSource")],K),B=(r(59166),r(68860)),U=r(80885),H=r(12987),X=(r(59486),r(82582)),Q=r(53866),Y=F.Z.getLogger("esri.widgets.Search.support.geometryUtils");function $(e,t){var r,n;if(!t)return Y.error("missing-parameter: view is missing."),Promise.reject(new C.Z("searchgeometryutils:missing-parameter","view is missing."));if(!e)return Y.error("missing-parameter: point is missing."),Promise.reject(new C.Z("searchgeometryutils:missing-parameter","point is missing."));if(e.hasZ||"2d"===t.type)return Promise.resolve(e);var i=null===t||void 0===t||null===(r=t.map)||void 0===r?void 0:r.ground;return i&&i.layers.length?i.queryElevation(e,{cache:null===(n=t.basemapTerrain)||void 0===n?void 0:n.elevationQueryCache}).then((function(e){return e.geometry})):Promise.resolve(e)}function ee(e){if((0,T.Wi)(e))return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":return e.getPoint(0);case"polyline":return e.getPoint(0,0)}return null}function te(e,t,r){return(0,T.Wi)(e)?null:"extent"===e.type?e:"multipoint"===e.type||"polygon"===e.type||"polyline"===e.type?e.extent:"point"===e.type?ne(e,t,r):void 0}function re(e,t,r){return(0,T.Wi)(e)||(0,T.Wi)(t)?null:ne(e.center,t,r)}function ne(e,t,r){var n=e.hasZ?e.z:void 0;return t&&t.map?(r?(0,X.D9)(t,r):t.extent).clone().centerAt(e).set({zmax:n,zmin:n}):new Q.Z({xmin:e.x-.25,ymin:e.y-.25,xmax:e.x+.25,ymax:e.y+.25,spatialReference:e.spatialReference,zmin:n,zmax:n})}var ie,oe=r(8704),ae=r(76969),se=/https?:\/\/services.*\.arcgis\.com/i,ue=/(?:\{([^}]+)\})/g,le=F.Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function ce(e,t){var r=e.exactMatch,n=void 0!==r&&r,i=e.location,o=e.maxResults,a=e.spatialReference,s=e.source,u=e.sourceIndex,l=e.suggestResult,c=e.view,d=s.layer,p=s.filter,f=s.zoomScale,h=c&&c.scale,v=pe(s,c),g=t&&t.signal;return he(d).then((function(){var e=d.popupTemplate;return e?e.getRequiredFields(d.fieldsIndex):null})).then((function(e){var t,r,y,m=d.objectIdField,w=d.returnZ,b=Se(s);if(!xe(d,b))throw le.error("invalid-field: displayField is invalid."),new C.Z("getResults():invalid-field","displayField is invalid.");var S=e&&e.length?e:[b],_=s.outFields||S,x=fe(_);if(_.includes(m)||x||_.push(m),(null===(t=d.floorInfo)||void 0===t?void 0:t.floorField)&&_.push(d.floorInfo.floorField),!x&&!_e(d,_))throw le.error("invalid-field: outField is invalid."),new C.Z("getResults():invalid-field","outField is invalid.");var Z=d.createQuery(),k=s.orderByFields;if(k&&(Z.orderByFields=k),a){Z.outSpatialReference=a;var R=1/(0,B.c9)(a);R&&(Z.maxAllowableOffset=R)}var F="mesh"===d.geometryType||"multipatch"===d.geometryType,T=(null===(r=d.capabilities)||void 0===r||null===(y=r.data)||void 0===y?void 0:y.supportsZ)&&!F;if(Z.returnZ=T&&!1!==w,Z.returnGeometry=!0,Z.multipatchOption=F?"xyFootprint":null,_&&(Z.outFields=_),i)Z.geometry=i;else if(l.key)Z.objectIds=[l.key];else{var j=s.searchFields||[b];if(!_e(d,j))throw le.error("invalid-field: search field is invalid."),new C.Z("getResults():invalid-field","search field is invalid.");if(be(d)&&(Z.num=o),v&&(Z.geometry=v),!l.text.trim())return[];var E=l.text,I=s.prefix,L=void 0===I?"":I,O=s.suffix,P=void 0===O?"":O,N=Ze("".concat(L).concat(E).concat(P));we(d)&&ye(d,j)&&!n&&E&&(Z.fullText=me({text:E,searchFields:j}));var G=ke({searchTerm:N,layer:d,searchFields:j,filter:p,exactMatch:n,query:Z,type:"search"});if(Z.where=G,!ge(Z))return[]}return d.queryFeatures(Z,{signal:g}).then((function(e){return function(e,t,r,n,i,o,a){return e.features.map((function(e){return Fe(e,t,r,n,i,o,a)}))}(e,c,s,u,b,h,f)}))}))}function de(e,t){var r=e.source,n=e.spatialReference,i=e.view,o=e.suggestTerm,a=e.maxSuggestions,s=e.sourceIndex,u=e.exactMatch,l=r.layer,c=r.filter,d=t&&t.signal,p=pe(r,i);return he(l).then((function(){if(!be(l))return[];var e=Se(r),t=r.searchFields||[e],i=[];r.suggestionTemplate?r.suggestionTemplate.replace(ue,(function(e,t){return i.push(t),e})):i.push(e);var f=fe(i);i.includes(l.objectIdField)||f||i.push(l.objectIdField);var h=xe(l,e),v=f||_e(l,i),g=_e(l,t);if(!h)throw le.error("invalid-field: displayField is invalid."),new C.Z("getSuggestions():invalid-field","displayField is invalid.");if(!v)throw le.error("invalid-field: outField is invalid."),new C.Z("getSuggestions():invalid-field","outField is invalid.");if(!g)throw le.error("invalid-field: search field is invalid."),new C.Z("getSuggestions():invalid-field","search field is invalid.");var y=l.createQuery(),m=r.orderByFields;if(m&&(y.orderByFields=m),y.outSpatialReference=n,y.returnGeometry=!1,y.num=a,y.outFields=i,p&&(y.geometry=p),!o.trim())return[];var w=r.prefix,b=void 0===w?"":w,S=r.suffix,_=void 0===S?"":S,x=Ze("".concat(b).concat(o).concat(_));we(l)&&ye(l,t)&&!u&&o&&(y.fullText=me({text:o,searchFields:t}));var Z=ke({searchTerm:x,layer:l,searchFields:t,filter:c,exactMatch:u,query:y,type:"suggest"});return y.where=Z,ge(y)?l.queryFeatures(y,{signal:d}).then((function(t){return function(e,t,r,n){return e.features.map((function(e){return function(e,t,r,n){var i=e.sourceLayer,o=e.attributes,a=i.objectIdField,s=o[a];return{text:Re(e,t.suggestionTemplate,n),key:s,sourceIndex:r}}(e,t,r,n)}))}(t,r,s,e)})):[]}))}function pe(e,t){var r=e.filter,n=e.withinViewEnabled,i=t&&t.extent;return r&&r.geometry||(n&&i?i:void 0)}function fe(e){return e&&e.includes("*")}function he(e){return ve.apply(this,arguments)}function ve(){return ve=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=4;break}return e.next=4,t.load();case 4:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}function ge(e){return!(!e.fullText&&!e.where)}function ye(e,t){var r=null===e||void 0===e?void 0:e.indexes;return!(!r||null===t||void 0===t||!t.length)&&r.filter((function(e){return"FullText"===e.indexType})).some((function(e){var r,n=(null===(r=e.fields)||void 0===r?void 0:r.split(",").map((function(e){return e.trim().toLowerCase()})))||[];return t.every((function(e){return n.includes(e.toLowerCase())}))}))}function me(e){var t=e.text,r=e.searchFields;return t.trim().split(" ").filter((function(e){return!!e.trim()})).map((function(e){return new H.Z({onFields:r,searchTerm:e,searchType:"prefix"})}))}function we(e){var t,r,n;return null!==(t=null===e||void 0===e||null===(r=e.capabilities)||void 0===r||null===(n=r.query)||void 0===n?void 0:n.supportsFullTextSearch)&&void 0!==t&&t}function be(e){var t,r,n;return null!==(t=null===e||void 0===e||null===(r=e.capabilities)||void 0===r||null===(n=r.query)||void 0===n?void 0:n.supportsPagination)&&void 0!==t&&t}function Se(e){return e.displayField||e.layer.displayField||function(e){var t,r,n,i;return null!==(t=null===e||void 0===e||null===(r=e.fieldsIndex)||void 0===r||null===(n=r.fields)||void 0===n||null===(i=n.find((function(e){return"string"===e.type})))||void 0===i?void 0:i.name)&&void 0!==t?t:""}(e.layer)}function _e(e,t){return!(!e||null===t||void 0===t||!t.length)&&t.every((function(t){return xe(e,t)}))}function xe(e,t){return!!e.getField(t)}function Ze(e){return e.replace(/\'/g,"''")}function Ce(e,t){var r=t&&t.where;return r?"(".concat(e,") AND (").concat(r,")"):e}function ke(e){var t=e.searchTerm,r=e.layer,n=e.searchFields,i=e.filter,o=e.exactMatch,a=e.query,s=e.type,u=r.definitionExpression,l=r.url,c="";return!a.fullText&&t&&n&&n.forEach((function(e){var n=r.getField(e),a="function"==typeof r.getFieldDomain&&r.getFieldDomain(e),u=(a&&"coded-value"===a.type?function(e,t,r){var n=null,i=e.codedValues;return i&&i.some((function(e){var i=e.name,o=r?i:i.toLowerCase();return(r?t:t.toLowerCase())===o&&(n=e.code.toString(),!0)})),n}(a,t,o):null)||t||null;if(null!==u){var d=function(e){var t=e.currentTerm,r=e.field,n=e.filter,i=e.exactMatch,o=e.url,a=e.type,s=r.type,u=r.name;if("string"===s||"date"===s||"global-id"===s){var l=se.test(o),c=l&&function(e){for(var t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}(t)?"N":"";return Ce(i&&"search"===a?"".concat(u," = ").concat(c,"'").concat(t,"'"):l?"".concat(u," LIKE ").concat(c,"'".concat(t,"%'")):"".concat("LOWER(".concat(u,")")," LIKE ",c,"'".concat(t.toLowerCase(),"%'")),n)}if("oid"===s||"small-integer"===s||"integer"===s||"single"===s||"double"===s){var d=Number(t);return isNaN(d)?null:Ce("".concat(u," = ").concat(d),n)}return Ce("".concat(u," = ").concat(t),n)}({currentTerm:u,field:n,filter:i,exactMatch:o,url:l,type:s});d&&(c+=function(e,t){return e?" OR (".concat(t,")"):"(".concat(t,")")}(c,d))}})),u&&c?"(".concat(u,") AND (").concat(c,")"):u||c}function Re(e,t,r){var n=e.sourceLayer,i=e.attributes,o="function"==typeof n.getFieldDomain&&n.getFieldDomain(r);if(t)return(0,oe.n)(t,i);if(r&&i){var a=n.getField(r),s=function(e,t){return e[Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))]}(i,r);return null==s?"":o&&"coded-value"===o.type?function(e,t){var r=null,n=e.codedValues;return n&&n.length&&n.some((function(e){return e.code===t&&(r=e.name,!0)})),r}(o,s):"date"===(null===a||void 0===a?void 0:a.type)?(0,ae.p6)(new Date(s)):"number"==typeof s?s.toString():"string"!=typeof s?"":s.trim()}return""}function Fe(e,t,r,n,i,o,a){var s=e.clone(),u=e.sourceLayer,l=u&&u.objectIdField,c=l&&e.attributes[l],d=Re(e,r.searchTemplate,i),p=te(s.geometry,t,o),f="number"==typeof a?re((0,q.d9)(p),t,a):p,h=e.clone();return(0,T.pC)(f)&&(h.geometry=U.Z.fromExtent(f)),{extent:f,target:h,feature:s,key:c,name:d,sourceIndex:n}}var Te=ie=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayField=null,n.exactMatch=null,n.orderByFields=null,n.searchFields=null,n.searchTemplate=null,n.suggestionTemplate=null,n.getResults=function(e,t){return ce((0,v.Z)({source:(0,J.Z)(n)},e),t)},n.getSuggestions=function(e,t){return de((0,v.Z)({source:(0,J.Z)(n)},e),t)},n}return(0,s.Z)(r,[{key:"layer",set:function(e){this._set("layer",e),e&&e.load().catch((function(){}))}},{key:"name",get:function(){var e;return null!==(e=this._getLayerTitle())&&void 0!==e?e:""},set:function(e){this._overrideIfSome("name",e)}},{key:"clone",value:function(){return new ie({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,q.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,q.d9)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}},{key:"_getFirstStringField",value:function(){var e,t;return null!==(e=null===(t=this.layer.fieldsIndex.fields.find((function(e){return"string"===e.type})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}},{key:"_getDisplayField",value:function(){return this.displayField||this.layer.displayField||this._getFirstStringField()}},{key:"_getSearchFieldsString",value:function(){var e=this.layer,t=this.searchFields;return e.loaded?": ".concat((t||[this._getDisplayField()]).map((function(t){var r=e.getField(t);return r&&r.alias||t})).join(", ")):""}},{key:"_getLayerTitle",value:function(){var e=this.layer;if(e){var t=e.title;return t?"".concat(t).concat(this._getSearchFieldsString()):void 0}}}]),r}(V);(0,m._)([(0,I.Cb)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],Te.prototype,"displayField",void 0),(0,m._)([(0,I.Cb)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],Te.prototype,"exactMatch",void 0),(0,m._)([(0,I.Cb)({value:null})],Te.prototype,"layer",null),(0,m._)([(0,I.Cb)()],Te.prototype,"name",null),(0,m._)([(0,I.Cb)({type:[String],json:{write:!0}})],Te.prototype,"orderByFields",void 0),(0,m._)([(0,I.Cb)()],Te.prototype,"searchFields",void 0),(0,m._)([(0,I.Cb)()],Te.prototype,"searchTemplate",void 0),(0,m._)([(0,I.Cb)()],Te.prototype,"suggestionTemplate",void 0);var je=Te=ie=(0,m._)([(0,O.j)("esri.widgets.Search.LayerSearchSource")],Te),Ee=r(44925),Ie=r(76200),Le=r(23084);var Oe=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).address=null,n.attributes=null,n.extent=null,n.location=null,n.score=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Oe.prototype,"address",void 0),(0,m._)([(0,I.Cb)({type:Object,json:{write:!0}})],Oe.prototype,"attributes",void 0),(0,m._)([(0,I.Cb)({type:Q.Z,json:{write:!0}})],Oe.prototype,"extent",void 0),(0,m._)([(0,I.Cb)({type:P.Z,json:{write:!0}})],Oe.prototype,"location",void 0),(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],Oe.prototype,"score",void 0);var Pe=Oe=(0,m._)([(0,O.j)("esri.rest.support.AddressCandidate")],Oe),Ne=r(1337),Ge=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).address=null,n.apiKey=null,n.categories=null,n.countryCode=null,n.forStorage=null,n.location=null,n.locationType=null,n.magicKey=null,n.maxLocations=null,n.outFields=null,n.outSpatialReference=null,n.searchExtent=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:Object,json:{write:!0}})],Ge.prototype,"address",void 0),(0,m._)([(0,I.Cb)(Ne.q)],Ge.prototype,"apiKey",void 0),(0,m._)([(0,I.Cb)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ge.prototype,"categories",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ge.prototype,"countryCode",void 0),(0,m._)([(0,I.Cb)({type:Boolean,json:{write:!0}})],Ge.prototype,"forStorage",void 0),(0,m._)([(0,I.Cb)({type:P.Z,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Ge.prototype,"location",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ge.prototype,"locationType",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ge.prototype,"magicKey",void 0),(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],Ge.prototype,"maxLocations",void 0),(0,m._)([(0,I.Cb)({type:[String],json:{write:{writer:function(e,t){t.outFields=e?e.join(","):null}}}})],Ge.prototype,"outFields",void 0),(0,m._)([(0,I.Cb)({type:N.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ge.prototype,"outSpatialReference",void 0),(0,m._)([(0,I.Cb)({type:Q.Z,json:{write:{writer:function(e,t){var r=e?e.shiftCentralMeridian():null;t.searchExtent=r}}}})],Ge.prototype,"searchExtent",void 0),(Ge=(0,m._)([(0,O.j)("esri.rest.support.AddressToLocationsParameters")],Ge)).from=(0,L.se)(Ge);var Ae=Ge,De=["address"];function Me(){return Me=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,u,l,c,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ae.from(r),o=(0,Le.en)(t),a=r.toJSON(),s=a.address,u=(0,Ee.Z)(a,De),l=(0,v.Z)((0,v.Z)((0,v.Z)({},s),u),{},{f:"json"}),c=(0,Le.cv)((0,v.Z)((0,v.Z)({},o.query),l)),d=(0,Le.lA)(c,n),p="".concat(o.path,"/findAddressCandidates"),e.abrupt("return",(0,Ie.default)(p,d).then(Je));case 3:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function Je(e){var t=e.data;if(!t)return[];var r=t.candidates,n=t.spatialReference;return r?r.map((function(e){if(e){var t=e.extent,r=e.location,i=!t||function(e){return e&&"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax}(t);return function(e){return!!e&&"number"==typeof e.x&&"number"==typeof e.y}(r)&&i?(t&&(t.spatialReference=n),r&&(r.spatialReference=n),Pe.fromJSON(e)):void 0}})):[]}var qe=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.location=null,n.locationType=null,n.outSpatialReference=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)(Ne.q)],qe.prototype,"apiKey",void 0),(0,m._)([(0,I.Cb)({type:P.Z,json:{write:{writer:function(e,t){var r=e?e.clone().normalize():null,n=void 0!==r;t.location=n?r:null}}}})],qe.prototype,"location",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],qe.prototype,"locationType",void 0),(0,m._)([(0,I.Cb)({type:N.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],qe.prototype,"outSpatialReference",void 0),(qe=(0,m._)([(0,O.j)("esri.rest.support.LocationToAddressParameters")],qe)).from=(0,L.se)(qe);var ze=qe;function We(){return We=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ze.from(r),o=(0,Le.en)(t),a=(0,v.Z)((0,v.Z)({},r.toJSON()),{},{f:"json"}),s=(0,Le.cv)((0,v.Z)((0,v.Z)({},o.query),a)),u=(0,Le.lA)(s,n),l="".concat(o.path,"/reverseGeocode"),e.abrupt("return",(0,Ie.default)(l,u).then(Ke));case 3:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function Ke(e){var t=e.data;if(t){var r=t.address,n=t.location,i=r&&r.Match_addr||"";return Pe.fromJSON({address:i,attributes:r||{},location:n,score:100})}}var Ve=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).isCollection=null,n.magicKey=null,n.text=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:Boolean,json:{write:!0}})],Ve.prototype,"isCollection",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ve.prototype,"magicKey",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ve.prototype,"text",void 0);var Be=Ve=(0,m._)([(0,O.j)("esri.rest.support.SuggestionCandidate")],Ve),Ue=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.categories=null,n.countryCode=null,n.location=null,n.maxSuggestions=null,n.outSpatialReference=null,n.searchExtent=null,n.text=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)(Ne.q)],Ue.prototype,"apiKey",void 0),(0,m._)([(0,I.Cb)({type:[String],json:{read:{source:"category",reader:function(e){return e?e.split(","):null}},write:{target:"category",writer:function(e,t){t.category=e?e.join(","):null}}}})],Ue.prototype,"categories",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ue.prototype,"countryCode",void 0),(0,m._)([(0,I.Cb)({type:P.Z,json:{write:{writer:function(e,t){t.location=e?e.clone().normalize():null}}}})],Ue.prototype,"location",void 0),(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],Ue.prototype,"maxSuggestions",void 0),(0,m._)([(0,I.Cb)({type:N.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ue.prototype,"outSpatialReference",void 0),(0,m._)([(0,I.Cb)({type:Q.Z,json:{write:{writer:function(e,t){var r=e?e.shiftCentralMeridian():null;t.searchExtent=JSON.stringify(r)}}}})],Ue.prototype,"searchExtent",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],Ue.prototype,"text",void 0),(Ue=(0,m._)([(0,O.j)("esri.rest.support.SuggestLocationsParameters")],Ue)).from=(0,L.se)(Ue);var He=Ue;function Xe(){return Xe=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,s,u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,Le.en)(t),a=(0,v.Z)((0,v.Z)({},(r=He.from(r)).toJSON()),{},{f:"json"}),s=(0,Le.cv)((0,v.Z)((0,v.Z)({},o.query),a)),u=(0,Le.lA)(s,n),l="".concat(o.path,"/suggest"),e.abrupt("return",(0,Ie.default)(l,u).then(Qe));case 2:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function Qe(e){var t=e.data;if(!t)return[];var r=t.suggestions;return r?r.map((function(e){return new Be(e)})):[]}var Ye="Single Line Input";function $e(e,t){return e.location?function(e,t){var r=e.source,n=e.spatialReference,i=e.location,o=e.sourceIndex,a=e.view,s=r.apiKey,u=r.url,l=r.zoomScale,c=r.defaultZoomScale,d=a&&a.scale,p=t&&t.signal,f=new ze;return f.location=i,s&&(f.apiKey=s),n&&(f.outSpatialReference=n),function(e,t,r){return We.apply(this,arguments)}(u,f,{signal:p}).then((function(e){return ot([e],{sourceIndex:o,scale:d,view:a,zoomScale:l,defaultZoomScale:c})})).catch((function(){return[]}))}(e,t):function(e,t){var r=e.source,n=e.suggestResult,i=e.spatialReference,o=e.view,a=e.maxResults,s=e.sourceIndex,u=r&&r.zoomScale,l=r&&r.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);var c=!n.key&&r.prefix?r.prefix:"",d=!n.key&&r.suffix?r.suffix:"",p="".concat(c).concat(n.text).concat(d),f=new Ae,h=r.apiKey,v=r.url,g=o&&o.scale,y=it(r,o),m=t&&t.signal;if(h&&(f.apiKey=h),!v)return Promise.resolve(null);r.categories&&(f.categories=r.categories),r.locationType&&(f.locationType=r.locationType),i&&(f.outSpatialReference=i);var w=et(o,r);w&&(f.location=w),f.maxLocations=a,y&&(f.searchExtent=(0,T.Wg)(y)),r.countryCode&&(f.countryCode=r.countryCode);var b=n.key,S="".concat(b);return b&&(f.magicKey=S),f.address={},f.address[r.singleLineFieldName||Ye]=p,r.outFields&&(f.outFields=r.outFields),function(e,t,r){return Me.apply(this,arguments)}(v,f,{signal:m}).then((function(e){return ot(e,{key:S,scale:g,sourceIndex:s,view:o,zoomScale:u,defaultZoomScale:l})}))}(e,t)}function et(e,t){if(t.localSearchDisabled)return null;var r=null===e||void 0===e?void 0:e.scale;return"number"==typeof r&&r<=3e5?e.get("extent.center"):null}function tt(e,t){var r=e.source,n=e.spatialReference,i=e.view,o=e.suggestTerm,a=e.maxSuggestions,s=e.sourceIndex,u=new He,l=r.apiKey,c=r.url,d=it(r,i),p=t&&t.signal;if(!c)return Promise.resolve(null);l&&(u.apiKey=l),r.categories&&(u.categories=r.categories),n&&(u.outSpatialReference=n);var f=et(i,r);if(f&&(u.location=f),!o.trim())return Promise.resolve(null);var h=r.prefix,v=void 0===h?"":h,g=r.suffix,y=void 0===g?"":g,m="".concat(v).concat(o).concat(y);return u.text=m,d&&(u.searchExtent=(0,T.Wg)(d)),u.maxSuggestions=a,r.countryCode&&(u.countryCode=r.countryCode),function(e,t,r){return Xe.apply(this,arguments)}(c,u,{signal:p}).then((function(e){return function(e,t){return e.map((function(e){return function(e,t){return{text:e.text,key:e.magicKey,sourceIndex:t}}(e,t)}))}(e,s)}))}function rt(e){return!!e&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}var nt;function it(e,t){var r=e.filter,n=e.withinViewEnabled,i=t&&t.scale,o=t&&t.extent;return te(r&&r.geometry,t,i)||(n&&o?o:void 0)}function ot(e,t){return e.filter(Boolean).map((function(e){return function(e,t){var r=t.key,n=t.scale,i=t.sourceIndex,o=t.view,a=t.zoomScale,s=t.defaultZoomScale,u=e.attributes,l=e.extent,c=e.location,d=e.address,p=new S.Z({geometry:c,attributes:u}),f=l||c,h=te(f,o,n),v="number"==typeof a?re(h,o,a):"number"==typeof s&&"point"===f.type?re(h,o,s):h,g=c?"".concat(c.x,",").concat(c.y):"",y=d||g,m=p.clone();return(0,T.pC)(v)&&(m.geometry=U.Z.fromExtent(v)),{extent:v,feature:p,target:m,key:r,name:y,sourceIndex:i}}(e,t)}))}var at=nt=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).apiKey=null,n.categories=null,n.countryCode=null,n.defaultZoomScale=null,n.localSearchDisabled=!1,n.locationType=null,n.name="",n.placeholder="",n.searchTemplate="",n.singleLineFieldName=null,n.suggestionsEnabled=null,n.url=null,n.zoomScale=null,n.getResults=function(e,t){return $e((0,v.Z)({source:(0,J.Z)(n)},e),t)},n.getSuggestions=function(e,t){return tt((0,v.Z)({source:(0,J.Z)(n)},e),t)},n}return(0,s.Z)(r,[{key:"clone",value:function(){return new nt({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,q.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,q.d9)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}}]),r}(V);(0,m._)([(0,I.Cb)()],at.prototype,"apiKey",void 0),(0,m._)([(0,I.Cb)()],at.prototype,"categories",void 0),(0,m._)([(0,I.Cb)()],at.prototype,"countryCode",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"defaultZoomScale",void 0),(0,m._)([(0,I.Cb)()],at.prototype,"localSearchDisabled",void 0),(0,m._)([(0,I.Cb)()],at.prototype,"locationType",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"name",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"placeholder",void 0),(0,m._)([(0,I.Cb)()],at.prototype,"searchTemplate",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"singleLineFieldName",void 0),(0,m._)([(0,I.Cb)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],at.prototype,"suggestionsEnabled",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"url",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],at.prototype,"zoomScale",void 0);var st=at=nt=(0,m._)([(0,O.j)("esri.widgets.Search.LocatorSearchSource")],at),ut=r(93169),lt=r(81753),ct=(r(19545),r(35995),r(32238),r(77577),r(29909)),dt=r(43404),pt=(new dt.X({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),r(77981));new dt.X({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});var ft=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).deviationUnit=null,n.geometries=null,n.maxDeviation=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],ft.prototype,"deviationUnit",void 0),(0,m._)([(0,I.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})).filter(T.pC):null}},write:{writer:function(e,t){var r;t.geometries=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],ft.prototype,"geometries",void 0),(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],ft.prototype,"maxDeviation",void 0),(ft=(0,m._)([(0,O.j)("esri.rest.support.GeneralizeParameters")],ft)).from=(0,L.se)(ft);new dt.X({preserveShape:"preserve-shape"});var ht=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).calculationType=null,n.geodesic=null,n.lengthUnit=null,n.polylines=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],ht.prototype,"calculationType",void 0),(0,m._)([(0,I.Cb)({type:Boolean,json:{write:!0}})],ht.prototype,"geodesic",void 0),(0,m._)([(0,I.Cb)({json:{write:!0}})],ht.prototype,"lengthUnit",void 0),(0,m._)([(0,I.Cb)({type:[ct.Z],json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],ht.prototype,"polylines",void 0),(ht=(0,m._)([(0,O.j)("esri.rest.support.LengthsParameters")],ht)).from=(0,L.se)(ht);new dt.X({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),new dt.X({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});var vt=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).bevelRatio=null,n.geometries=null,n.offsetDistance=null,n.offsetHow=null,n.offsetUnit=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],vt.prototype,"bevelRatio",void 0),(0,m._)([(0,I.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})).filter(T.pC):null}},write:{writer:function(e,t){var r;t.geometries=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],vt.prototype,"geometries",void 0),(0,m._)([(0,I.Cb)({type:Number,json:{write:!0}})],vt.prototype,"offsetDistance",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],vt.prototype,"offsetHow",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],vt.prototype,"offsetUnit",void 0),(vt=(0,m._)([(0,O.j)("esri.rest.support.OffsetParameters")],vt)).from=(0,L.se)(vt);var gt=r(45362);new dt.X({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});var yt=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).geometries1=null,n.geometries2=null,n.relation=null,n.relationParameter=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})).filter(T.pC):null}},write:{writer:function(e,t){var r;t.geometries1=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],yt.prototype,"geometries1",void 0),(0,m._)([(0,I.Cb)({json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})).filter(T.pC):null}},write:{writer:function(e,t){var r;t.geometries2=null!==(r=null===e||void 0===e?void 0:e.map((function(e){return e.toJSON()})))&&void 0!==r?r:null}}}})],yt.prototype,"geometries2",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],yt.prototype,"relation",void 0),(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],yt.prototype,"relationParameter",void 0),(yt=(0,m._)([(0,O.j)("esri.rest.support.RelationParameters")],yt)).from=(0,L.se)(yt);new dt.X({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});var mt=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).extendHow="default-curve-extension",n.polylines=null,n.trimExtendTo=null,n}return(0,s.Z)(r)}(W.wq);(0,m._)([(0,I.Cb)({type:String,json:{write:!0}})],mt.prototype,"extendHow",void 0),(0,m._)([(0,I.Cb)({type:[ct.Z],json:{read:{reader:function(e){return e?e.map((function(e){return(0,pt.im)(e)})):null}},write:{writer:function(e,t){t.polylines=e.map((function(e){return e.toJSON()}))}}}})],mt.prototype,"polylines",void 0),(0,m._)([(0,I.Cb)({json:{read:{reader:function(e){return e?(0,pt.im)(e):null}},write:{writer:function(e,t){t.trimExtendTo=e.toJSON()}}}})],mt.prototype,"trimExtendTo",void 0),(mt=(0,m._)([(0,O.j)("esri.rest.support.TrimExtendParameters")],mt)).from=(0,L.se)(mt);var wt=r(81943),bt=F.Z.getLogger("esri.widgets.support.geolocationUtils"),St={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function _t(){return function(){var e=(0,ut.Z)("esri-geolocation");return e||bt.warn("geolocation-unsupported","Geolocation unsupported."),e}()&&function(){var e=window.isSecureContext;return e||bt.warn("insecure-context","Geolocation requires a secure origin."),e}()}function xt(e,t){var r,n=e.position,i=e.view,o=null===(r=function(e){var t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e?{coords:r,timestamp:e.timestamp}:e}(n))||void 0===r?void 0:r.coords;if(!o)throw new C.Z("geometry-service:no-coords","Geolocation has no coordinates");return function(e,t,r){if(!t)return Promise.resolve(e);var n=t.spatialReference;return n.isWGS84?Promise.resolve(e):n.isWebMercator?Promise.resolve((0,lt.$)(e)):function(e){if(b.Z.geometryServiceUrl)return Promise.resolve(b.Z.geometryServiceUrl);var t=D.Z.getDefault();return t.load(e).catch((function(){})).then((function(){return t.get("helperServices.geometry.url")}))}(r).then((function(t){if(!t)throw new C.Z("geometry-service:missing-url","Geometry service URL is missing");var i=new wt.Z({geometries:[e],outSpatialReference:n});return(0,gt.i)(t,i,r).then((function(e){return e[0]}))}))}(function(e){var t=e.longitude,r=e.latitude,n=e.altitude;return new P.Z({longitude:t,latitude:r,z:n||void 0,spatialReference:{wkid:4326}})}(o),i,t)}var Zt=r(99505),Ct=r(91946),kt=r(16851),Rt=r(61459),Ft=r(58009);function Tt(e,t){return e.hasOwnProperty(t)&&null!=e[t]&&""!==e[t]}var jt="esri.widgets.Search.SearchViewModel",Et=F.Z.getLogger(jt),It="highlight",Lt=Z.Z.ofType({key:function(e){return e.layer?"layer":"locator"},base:V,typeMap:{layer:je,locator:st}}),Ot=N.Z.WGS84,Pt=/<(?:.|\s)*?>/g,Nt=-1,Gt=function(e){(0,g.Z)(r,e);var t=(0,y.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e))._handles=new R.Z,n._gotoController=null,n._searching=null,n._createdFeatureLayers=[],n.autoNavigate=!0,n.autoSelect=!0,n.defaultPopupTemplate=null,n.defaultSources=new Lt,n.defaultSymbols={point:new Ct.Z({url:(0,w.V)("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new kt.Z({color:[130,130,130,1],width:2}),polygon:new Rt.Z({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},n.includeDefaultSources=!0,n.maxInputLength=128,n.maxResults=6,n.maxSuggestions=6,n.messages=null,n.minSuggestCharacters=3,n.popupEnabled=!0,n.popupTemplate=null,n.portal=D.Z.getDefault(),n.resultCount=null,n.resultGraphicEnabled=!0,n.resultGraphic=null,n.results=null,n.selectedSuggestion=null,n.searchAllEnabled=!0,n.selectedResult=null,n.sources=new Lt,n.suggestionDelay=350,n.suggestionCount=null,n.suggestions=null,n.suggestionsEnabled=!0,n.view=null,n}return(0,s.Z)(r,[{key:"initialize",value:function(){var e=this,t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,A.ME)("esri/widgets/Search/t9n/Search");case 2:r=t.sent,e.messages=r,e.defaultPopupTemplate=new _.Z({title:r.searchResult,content:"{Match_addr}"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(),this._handles.add([(0,E.YP)((function(){return[e.includeDefaultSources,e.view,e.portal]}),(function(){return e._update()}),E.nn),(0,G.qe)(t)])}},{key:"destroy",value:function(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}},{key:"activeSource",get:function(){var e;return null!==(e=this.allSources.at(this.activeSourceIndex))&&void 0!==e?e:null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?Nt:0},set:function(e){this._overrideIfSome("activeSourceIndex",e)}},{key:"allPlaceholder",get:function(){var e;return null===(e=this.messages)||void 0===e?void 0:e.allPlaceholder},set:function(e){this._overrideIfSome("allPlaceholder",e)}},{key:"allSources",get:function(){var e=this.sources,t=this.defaultSources,r=this.includeDefaultSources,n="function"==typeof r?r.call(null,{sources:e,defaultSources:t}):r?t.concat(e):e,i=this._get("allSources")||new Lt;return i.removeAll(),i.addMany(n.filter(Boolean)),i}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||_t()},set:function(e){if(void 0!==e){var t=_t();if(e&&!t){var r=new C.Z("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Et.error(r)}this._override("locationEnabled",!!e&&t)}else this._clearOverride("locationEnabled")}},{key:"placeholder",get:function(){var e=this.allSources,t=this.activeSourceIndex,r=this.allPlaceholder;if(t===Nt)return r;var n=e.at(t);return n?n.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),""===e&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}},{key:"clear",value:function(){this.searchTerm=""}},{key:"clearGraphics",value:function(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}},{key:"search",value:function(e,t){var r=this;this.emit("search-start"),this.clearGraphics();var n=this._createSuggestionForSearch(e),i=this.when().then((function(){return r._getResultsFromSources(n,t).then((function(e){var i;if(null!==(i=(0,T.Wg)(null===t||void 0===t?void 0:t.signal))&&void 0!==i&&i.aborted)return null;var o={activeSourceIndex:r.activeSourceIndex,searchTerm:n.text,numResults:0,numErrors:0,errors:[],results:[]};r._formatResponse(o,e,n);var a=r._getFirstResult(o.results),s=(n.location&&a?a.name:n.text).replace(Pt,"");return r._set("searchTerm",s),(n.key&&"number"==typeof n.sourceIndex||n.location)&&r._set("selectedSuggestion",n),r._set("results",o.results),r._set("resultCount",o.results.reduce((function(e,t){return e+t.results.length}),0)),r.emit("search-complete",o),r._selectFirstResult(a).then((function(){return o}))}))})).then((function(e){return r._clearSearching(),e}),(function(e){throw r._clearSearching(),e}));return this._searching=i,i}},{key:"searchNearby",value:function(e){var t=this;if(!this.locationEnabled){var r=new C.Z("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Et.error(r),Promise.reject(r)}var n=function(e){return e||(e=St),new Promise((function(t,r){setTimeout((function(){return r(new C.Z("geolocation:timeout","getting the current geolocation position timed out"))}),15e3),navigator.geolocation.getCurrentPosition(t,r,e)}))}().then((function(r){return xt({position:r,view:t.view},e)})).then((function(r){return t.search(r,e)}));return this._searching=n,n.catch((function(){})).then((function(){return t._clearSearching()})),n}},{key:"select",value:function(e){var t=this;if(this.clearGraphics(),!e){var r=new C.Z("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return Et.error(r),Promise.reject(r)}var n=this.view,i=Tt(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),o=this.allSources.at(i);if(!o){var a=new C.Z("select:missing-source","Cannot select without a source.",{source:o});return Et.error(a),Promise.reject(a)}var s=o instanceof je?this._getLayerSourcePopupTemplate(o):o.popupTemplate,u=o.resultSymbol||this._getDefaultSymbol(e),l=Tt(o,"resultGraphicEnabled")?o.resultGraphicEnabled:this.resultGraphicEnabled,c=Tt(o,"autoNavigate")?o.autoNavigate:this.autoNavigate,d=Tt(o,"popupEnabled")?o.popupEnabled:this.popupEnabled,p=d?s||this.popupTemplate||this.defaultPopupTemplate:null,f=e.feature;if(!f){var h=new C.Z("select:missing-feature","Cannot select without a feature.",{feature:f});return Et.error(h),Promise.reject(h)}var v=f.attributes,g=f.geometry,y=f.layer,m=f.sourceLayer,w=ee(g),b={layerViewQuery:this._getLayerView(f),elevationQuery:n&&(0,T.pC)(w)?$(w,n).catch((function(){return w})):Promise.resolve(w)};return(0,j.as)(b).then((function(r){var a=r.layerViewQuery.value,s=r.elevationQuery.value;u instanceof Ft.Z&&(u.text=e.name);var h=n&&c?e.target||e.extent:null;return((0,T.pC)(h)?t._goToSearchResult(h):Promise.resolve()).then((function(){var r,c=a?f:new S.Z({geometry:g,symbol:u,attributes:v,layer:y,sourceLayer:m,popupTemplate:p}),h=d&&(null===(r=t.view)||void 0===r?void 0:r.popup),w=h&&c.getEffectivePopupTemplate(h.defaultPopupTemplateEnabled);return w&&n.popup.open({features:[c],location:s}),a&&(0,M.tl)(a)&&!w&&t._highlightFeature({graphic:c,layerView:a}),!a&&l&&n&&n.graphics.push(c),t._setResultFloor(e),t._set("selectedResult",e),t._set("resultGraphic",c),t.emit("select-result",{result:e,source:o,sourceIndex:i}),e}))}))}},{key:"suggest",value:function(e,t,r){var n=this,i=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:i}),this._suggestTimer(t,r).then((function(){return n._suggestImmediate(i,r).then((function(e){return n._set("suggestions",e.results),n._set("suggestionCount",e.results.reduce((function(e,t){return e+t.results.length}),0)),n.emit("suggest-complete",e),e}))}))}},{key:"when",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.N1)((function(){return!t.updating}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,n,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.portal,r=this.view,!this.includeDefaultSources){e.next=9;break}if(n=this._updatingPromise=(0,j.as)([null===t||void 0===t?void 0:t.load(),null===r||void 0===r?void 0:r.when()]),!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n;case 7:if(n===this._updatingPromise){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,(0,E.N1)((function(){return o.messages}));case 11:this.destroyed||this._updateDefaultSources(),this._updatingPromise=null;case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_clearSearching",value:function(){this._searching=null}},{key:"_convertHelperServices",value:function(){var e,t,r=this,n=null===(e=this.portal)||void 0===e||null===(t=e.helperServices)||void 0===t?void 0:t.geocode;return n?n.map((function(e){if(!1!==e.placefinding){var t=b.Z.apiKey&&rt(e.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,n=st.fromJSON((0,v.Z)((0,v.Z)({},e),t)),i=n.url;if(rt(i)||function(e){return!!e&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e)}(i)||function(e){return!!e&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e)}(i)){var o=n.outFields||["Addr_type","Match_addr","StAddr","City"],a=n.placeholder||r.messages.placeholder,s="number"==typeof n.defaultZoomScale?n.defaultZoomScale:2500;n.set({singleLineFieldName:"SingleLine",outFields:o,placeholder:a,defaultZoomScale:s})}return n.singleLineFieldName?n:void 0}})).filter(Boolean):[]}},{key:"_destroyFeatureLayers",value:function(){this._createdFeatureLayers.forEach((function(e){return null===e||void 0===e?void 0:e.destroy()})),this._createdFeatureLayers=[]}},{key:"_getLayerSources",value:function(e,t){var r,n=this,i=null===(r=this.view)||void 0===r?void 0:r.map;return e.map((function(e){var r=i.findLayerById(e.id);if(r){var o=n._getLayerJSON(e),a=je.fromJSON(o);return a.placeholder=t,n._getLayer(r,o).then((function(e){a.layer=e})),a}})).filter(Boolean).toArray()}},{key:"_getTableSources",value:function(e,t){var r,n=this,i=null===(r=this.view)||void 0===r?void 0:r.map;return e.map((function(e){var r=i.findTableById(e.id);if(r){var o=n._getLayerJSON(e),a=je.fromJSON(o);return a.placeholder=t,n._getLayer(r,o).then((function(e){a.layer=e})),a}})).filter(Boolean).toArray()}},{key:"_convertApplicationProperties",value:function(){var e,t,r,n=null===(e=this.view)||void 0===e?void 0:e.map,i=null===n||void 0===n||null===(t=n.applicationProperties)||void 0===t||null===(r=t.viewing)||void 0===r?void 0:r.search;if(!i)return[];var o=i.enabled,a=i.hintText,s=i.layers,u=i.tables;return o?[].concat((0,h.Z)(this._getLayerSources(s,a)),(0,h.Z)(this._getTableSources(u,a))):[]}},{key:"_getSubLayer",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if(t.allSublayers){e.next=4;break}throw new Error;case 4:if(n=t.allSublayers.find((function(e){return e.id===r.subLayer}))){e.next=7;break}throw new Error;case 7:return e.next=9,n.createFeatureLayer();case 9:return o=e.sent,e.abrupt("return",(this._createdFeatureLayers.push(o),o));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getBuildingSubLayer",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load();case 2:if("building-component"===(null===(n=t.allSublayers.find((function(e){return e.id===r.subLayer})))||void 0===n?void 0:n.type)){e.next=5;break}throw new Error;case 5:return e.next=7,n.load();case 7:if(null!=n.associatedLayer){e.next=9;break}throw new Error;case 9:return e.next=11,n.associatedLayer.load();case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getLayer",value:function(e,t){return"feature"===e.type||"scene"===e.type||"csv"===e.type||"geojson"===e.type||"ogc-feature"===e.type?Promise.resolve(e):"map-image"===e.type?this._getSubLayer(e,t).catch((function(){var t=new C.Z("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return Et.error(t),null})):"building-scene"===e.type?this._getBuildingSubLayer(e,t):Promise.resolve(null)}},{key:"_getLayerJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():e}},{key:"_updateDefaultSources",value:function(){var e=this.defaultSources,t=this.includeDefaultSources;this._destroyFeatureLayers(),e.removeAll(),t&&e.addMany([].concat((0,h.Z)(this._convertApplicationProperties()),(0,h.Z)(this._convertHelperServices())))}},{key:"_abortGoTo",value:function(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}},{key:"_clear",value:function(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}},{key:"_closePopup",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.popup,r=this.resultGraphic;if(t&&r){var n=t.selectedFeature;n&&n===r&&t.close()}}},{key:"_suggestTimer",value:function(e,t){var r=null!=e?e:this.suggestionDelay;return(0,j.e4)(r,null,t&&t.signal)}},{key:"_createLocationForSearch",value:function(e){return e instanceof S.Z?ee(e.geometry):e instanceof P.Z?e:Array.isArray(e)&&2===e.length?new P.Z({longitude:e[0],latitude:e[1]}):null}},{key:"_createSuggestionForSearch",value:function(e){if(e&&Tt(e,"key")&&Tt(e,"text")&&Tt(e,"sourceIndex"))return e;var t=this._createLocationForSearch(e),r="string"==typeof e?e:this.searchTerm,n=this.selectedSuggestion,i=this.selectedResult,o=!e&&n&&i,a=o&&n.key===i.key&&n.sourceIndex===i.sourceIndex,s=o&&n.location;return a||s?n:{location:(0,T.Wg)(t),text:t?"":r,sourceIndex:null,key:null}}},{key:"_getFirstResult",value:function(e){var t=null;return e&&e.some((function(e){var r=e.results[0],n=!!r;return n&&(t=r),n})),t}},{key:"_selectFirstResult",value:function(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}},{key:"_suggestImmediate",value:function(e,t){var r=this;return this.when().then((function(){return r._getSuggestionsFromSources(e,t)})).then((function(n){var i;if(null!==(i=(0,T.Wg)(null===t||void 0===t?void 0:t.signal))&&void 0!==i&&i.aborted)return null;var o={activeSourceIndex:r.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return r._formatResponse(o,n),o}))}},{key:"_formatSourceResponse",value:function(e,t,r){var n=t&&t.value||[],i=t&&t.error,o=this.allSources.at(r);if(i){var a={sourceIndex:r,source:o,error:i};e.errors.push(a),Et.error(i),e.numErrors++}else{var s={sourceIndex:r,source:o,results:n};e.results.push(s),e.numResults+=n.length}}},{key:"_formatResponse",value:function(e,t,r){var n=this;if(t)if(e.activeSourceIndex===Nt){var i=r&&Tt(r,"sourceIndex")&&-1!==r.sourceIndex?r.sourceIndex:void 0;t.forEach((function(t,r){var o=void 0!==i?i:r;n._formatSourceResponse(e,t,o)}))}else this._formatSourceResponse(e,t[0],e.activeSourceIndex)}},{key:"_getResultsFromSources",value:function(e,t){var r=this,n=this.allSources,i=!e.location&&Tt(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,o=[];if(!n.length){var a=new C.Z("search:no-sources-defined","At least one source is required.",{allSources:n});return Et.error(a),Promise.reject(a)}return i===Nt?n.forEach((function(n,i){o.push(r._getResultsFromSource(e,i,t))})):o.push(this._getResultsFromSource(e,i,t)),(0,j.as)(o)}},{key:"_getSuggestionsFromSources",value:function(e,t){var r=this,n=this.allSources,i=this.activeSourceIndex,o=[];if(!n.length){var a=new C.Z("suggest:no-sources-defined","At least one source is required.",{allSources:n});return Et.error(a),Promise.reject(a)}return i===Nt?n.forEach((function(n,i){o.push(r._getSuggestionsFromSource(e,i,t))})):o.push(this._getSuggestionsFromSource(e,i,t)),(0,j.as)(o)}},{key:"_getResultsFromSource",value:function(e,t,r){var n,i=this.allSources.at(t),o=e.location,a=void 0===o?null:o,s=(null===(n=this.view)||void 0===n?void 0:n.spatialReference)||Ot,u=Tt(i,"maxResults")?i.maxResults:this.maxResults,l=!!(i instanceof je&&Tt(i,"exactMatch"))&&i.exactMatch,c=this.view;return i.getResults({view:c,sourceIndex:t,location:a,suggestResult:e,spatialReference:s,exactMatch:l,maxResults:u},r)}},{key:"_getSuggestionsFromSource",value:function(e,t,r){var n=this.allSources.at(t),i=Tt(n,"suggestionsEnabled")?n.suggestionsEnabled:this.suggestionsEnabled,o=e.length,a=Tt(n,"minSuggestCharacters")?n.minSuggestCharacters:this.minSuggestCharacters;if(i&&e.trim()&&o>=a){var s,u=(null===(s=this.view)||void 0===s?void 0:s.spatialReference)||Ot,l=Tt(n,"maxSuggestions")?n.maxSuggestions:this.maxSuggestions,c=this.view,d=!!(n instanceof je&&Tt(n,"exactMatch"))&&n.exactMatch;return n.getSuggestions({view:c,sourceIndex:t,suggestTerm:e,spatialReference:u,maxSuggestions:l,exactMatch:d},r)}return Promise.resolve(null)}},{key:"_getLayerSourcePopupTemplate",value:function(e){var t=e.layer;if(t)return Tt(e,"popupTemplate")?e.popupTemplate:t.popupTemplate}},{key:"_getSourceIndexOfResult",value:function(e){var t=this.results,r=null;return t.some((function(t){return t.results.some((function(n){return n===e&&(r=t.sourceIndex,!0)}))})),r}},{key:"_goToSearchResult",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!!t,this._abortGoTo(),n=new AbortController,this._gotoController=n,o={target:{target:t},options:{animate:r,signal:n.signal}},e.next=7,this.callGoTo(o);case 7:this._gotoController=null;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultSymbol",value:function(e){var t,r=this.defaultSymbols,n=null===(t=e.feature)||void 0===t?void 0:t.geometry;if((0,T.Wi)(n))return null;switch(n.type){case"point":case"multipoint":return r.point;case"polyline":return r.polyline;case"extent":case"polygon":return r.polygon;default:return null}}},{key:"_removeHighlight",value:function(){this._handles.remove(It)}},{key:"_getLayerView",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.view,t&&r&&"building-component"!==t.layer.type&&"subtype-sublayer"!==t.layer.type){e.next=3;break}return e.abrupt("return",null);case 3:return n=t.layer,e.next=6,r.when();case 6:return e.abrupt("return",r.whenLayerView(n));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_highlightFeature",value:function(e){var t=e.graphic,r=e.layerView,n=t.attributes,i=t.layer.objectIdField,o=n&&n[i],a=r.highlight(o||t);this._handles.add(a,It)}},{key:"_setResultFloor",value:function(e){var t,r,n,i=this.view,o=null===(t=e.feature)||void 0===t?void 0:t.attributes,a=null===(r=e.feature)||void 0===r?void 0:r.sourceLayer;if(a&&"floorInfo"in a&&null!==a&&void 0!==a&&null!==(n=a.floorInfo)&&void 0!==n&&n.floorField&&o){var s=o[a.floorInfo.floorField];null===i||void 0===i||i.emit("select-result-floor",s)}}}]),r}((0,Zt._)(k.Z.EventedMixin(x.Z)));Gt.ALL_INDEX=Nt,(0,m._)([(0,I.Cb)()],Gt.prototype,"_searching",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"_updatingPromise",void 0),(0,m._)([(0,I.Cb)({readOnly:!0,value:null})],Gt.prototype,"activeSource",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"activeSourceIndex",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"allPlaceholder",null),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"allSources",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"autoNavigate",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"autoSelect",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"defaultPopupTemplate",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"defaultSources",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"defaultSymbols",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"includeDefaultSources",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"locationEnabled",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"maxInputLength",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"maxResults",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"maxSuggestions",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"messages",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"minSuggestCharacters",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"placeholder",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"popupEnabled",void 0),(0,m._)([(0,I.Cb)({type:_.Z})],Gt.prototype,"popupTemplate",void 0),(0,m._)([(0,I.Cb)({type:D.Z})],Gt.prototype,"portal",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"resultCount",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"resultGraphicEnabled",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"resultGraphic",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"results",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"selectedSuggestion",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"searchAllEnabled",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"selectedResult",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"searchTerm",null),(0,m._)([(0,I.Cb)({type:Lt})],Gt.prototype,"sources",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"state",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"suggestionDelay",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"suggestionCount",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"suggestions",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"suggestionsEnabled",void 0),(0,m._)([(0,I.Cb)({readOnly:!0})],Gt.prototype,"updating",null),(0,m._)([(0,I.Cb)()],Gt.prototype,"view",void 0),(0,m._)([(0,I.Cb)()],Gt.prototype,"clear",null);var At=Gt=(0,m._)([(0,O.j)(jt)],Gt),Dt=r(87718),Mt=(r(95101),r(7597),function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}),Jt=function(){function e(t){(0,a.Z)(this,e),(0,u.r)(this,t),this.arcgisHubWidgetPanelToggled=(0,u.c)(this,"arcgisHubWidgetPanelToggled",7),this.hubTelemetry=(0,u.c)(this,"hubTelemetry",7),this.scale="m",this.suggestions=[],this.width="25rem",(0,c.b)(this,"handleSetInputRef","handleSetDropdownRef","searchIfEnter","toggleActive","setInputWidth")}return(0,s.Z)(e,[{key:"componentWillLoad",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.el,r=t&&t.closest("arcgis-hub-map-widget-container"),this.viewPosition=null===r||void 0===r?void 0:r.viewPosition,e.next=5,p.i.loadIntlForComponent(t);case 5:return this.intl=e.sent,e.next=8,this.connectViewModel();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this.connectWatch()}},{key:"disconnectedCallback",value:function(){this.removeWatch()}},{key:"componentDidLoad",value:function(){this.setInputScale(),(0,Dt.l)()}},{key:"componentDidRender",value:function(){var e=this.active,t=this.inputEl;e&&t&&(t.setFocus(),t.scale=this.inputScale,this.setInputWidth())}},{key:"handleViewChange",value:function(e,t){var r=this;e&&e!==t&&(this.removeWatch(),this.connectViewModel().then((function(){r.connectWatch()})))}},{key:"handleSuggestionsChange",value:function(){var e=this.dropdownEl,t=this.suggestions;e.active=Boolean(t.length)}},{key:"handleActiveChange",value:function(e){var t=this.hubTelemetry,r=e?d.d.dictionary.category.interaction.action.open.label.search:d.d.dictionary.category.interaction.action.close.label.search;t.emit(r)}},{key:"handlePanelToggled",value:function(e){var t=e.target,r=e.detail;t===this.el||r||(this.active=!1)}},{key:"onCalciteDropdownSelect",value:function(){var e=this.dropdownEl;this.selectedKey=e.selectedItems[0].dataset.value,this.value=this.selected.text,this.search()}},{key:"onCalciteInputChange",value:function(e){this.value=e.target.value}},{key:"onCalciteInputInput",value:function(e){var t=e.detail.value;this.value=t,t&&this.getSuggestions()}},{key:"handleSetDropdownRef",value:function(e){e&&(this.dropdownEl=e)}},{key:"handleSetInputRef",value:function(e){e&&(this.inputEl=e)}},{key:"getSuggestions",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,o,a,s,u,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.value,r=this.searchComplete,o=this.hubTelemetry,a=this.searchViewModel,o.emit(Object.assign(Object.assign({},d.d.dictionary.category.interaction.action.search.label.query),{search:t})),e.next=4,a.suggest(t);case 4:s=e.sent,u=(0,n.Z)(s.results,1),l=u[0],r?this.searchComplete=!1:this.suggestions=(null===l||void 0===l?void 0:l.results)||[];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r,n,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.value,r=this.hubTelemetry,n=this.searchViewModel,this.loading=!0,o=this.selected||t,e.next=5,n.search(o);case 5:a=e.sent,r.emit(Object.assign(Object.assign({},d.d.dictionary.category.interaction.action.zoom.label.to),{details:null===a||void 0===a?void 0:a.searchTerm})),this.loading=!1,this.selectedKey=null,this.suggestions=[],this.searchComplete=!0;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchIfEnter",value:function(e){"Enter"===e.key&&this.search()}},{key:"toggleActive",value:function(){var e=this.active,t=this.arcgisHubWidgetPanelToggled;this.active=!e,t.emit(e)}},{key:"connectWatch",value:function(){var e=this.view;e&&(this.handle=(0,f.YP)(e,"size",this.setInputWidth))}},{key:"removeWatch",value:function(){var e=this.handle;e&&e.remove(),this.handle=void 0}},{key:"connectViewModel",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,r=this.searchViewModel,!t||r){e.next=5;break}return e.next=4,t.when();case 4:this.searchViewModel=new At({autoSelect:!0,suggestionsEnabled:!0,maxResults:1,maxSuggestions:5,minSuggestCharacters:3,view:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setInputScale",value:function(){var e=this.scale;this.inputScale="s"===e?"m":"l"}},{key:"setInputWidth",value:function(){var e=this.inputEl,t=this.view.size;if(e){var r=(0,n.Z)(t,1)[0],i=e.offsetWidth;this.width=i/r>.7?"".concat(.7*r,"px"):"25rem"}}},{key:"positionClass",get:function(){var e=this.viewPosition;if(e)return"hub-widget-search ".concat(e.split("-").join(" "))}},{key:"selected",get:function(){var e=this.suggestions,t=this.selectedKey;return e.filter((function(e){return e.key===t})).pop()}},{key:"styles",get:function(){return{"--width":this.width}}},{key:"render",value:function(){var e=this.value,t=this.loading,r=this.scale,n=this.active,i=this.styles,o=this.intl.t("textOpen"),a=this.intl.t("textClose"),s=this.intl.t("placeholder");return(0,u.h)(u.H,{"data-element":"map-widget-search",style:i},this.active&&(0,u.h)("section",{class:this.positionClass},(0,u.h)("calcite-dropdown",{ref:this.handleSetDropdownRef,scale:r},(0,u.h)("calcite-input",{clearable:!0,icon:"search",loading:t,onKeyPress:this.searchIfEnter,placeholder:s,ref:this.handleSetInputRef,scale:this.inputScale,slot:"dropdown-trigger",value:e}),(0,u.h)("calcite-dropdown-group",{selectionMode:"single"},this.suggestions.map((function(e){return(0,u.h)("calcite-dropdown-item",{"data-value":e.key,key:e.key},e.text)}))))),(0,u.h)("arcgis-hub-map-widget-generic",{active:n,icon:"search",onClick:this.toggleActive,scale:r,text:n?a:o}))}},{key:"el",get:function(){return(0,u.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{view:["handleViewChange"],suggestions:["handleSuggestionsChange"],active:["handleActiveChange"]}}}]),e}();Mt([(0,l.D)({timeout:300})],Jt.prototype,"getSuggestions",null),Jt.style=":host{display:block}calcite-dropdown{position:absolute}calcite-input{width:var(--width)}calcite-dropdown-group{width:var(--width)}.hub-widget-search.top{position:absolute;width:var(--width)}.hub-widget-search.right{right:100%;margin-right:1rem}.hub-widget-search.left{left:100%;margin-left:1rem}"},2001:function(e,t,r){function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];clearTimeout(t),t=setTimeout((function(){return e.apply(n,o)}),r)}}function i(e){return function(t,r,i){var o=i.value,a="".concat(r.toString(),"Debounced");return Object.assign(Object.assign({},i),{value:function(){this[a]||Object.defineProperty(this,a,{value:n(o,e.timeout)});for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];this[a].apply(this,[this].concat(r))}})}}r.d(t,{D:function(){return i}})},44925:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:function(){return n}})},65905:function(e,t,r){r.d(t,{V:function(){return c},b:function(){return l}});var n=r(42265),i=r(76200),o=r(10064),a=r(32718),s=r(35995),u=a.Z.getLogger("esri.assets");function l(e,t){return(0,i.default)(c(e),t)}function c(e){if(!n.Z.assetsPath)throw u.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new o.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(n.Z.assetsPath,e)}},8537:function(e,t,r){r.d(t,{YP:function(){return o}});var n=r(44927),i=(r(98928),r(84652),r(32718));r(66978);(0,n.K)(i.Z.getLogger("esri.core.watchUtils"),"esri/core/watchUtils",{see:"https://arcg.is/1LTnuf",replacement:"esri/core/reactiveUtils",warnOnce:!0,version:"4.24"});function o(e,t,r,n){return e.watch(t,r,n)}},82582:function(e,t,r){r.d(t,{D9:function(){return s},DE:function(){return a},dp:function(){return o},yZ:function(){return i}});var n=r(68860);function i(e,t){var r=t||e.extent,i=e.width,o=(0,n.c9)(r&&r.spatialReference);return r&&i?r.width/i*o*n.hd*96:0}function o(e,t){return e/((0,n.c9)(t)*n.hd*96)}function a(e){return e/(96*n.hd)}function s(e,t){var r=e.extent,n=e.width-(e.padding?e.padding.left+e.padding.right:0),i=o(t,r.spatialReference);return r.clone().expand(i*n/r.width)}},59166:function(e,t,r){r(76969),r(6291),r(8704),r(36257);var n=r(41201),i=r(74165),o=r(15671),a=r(43144),s=r(15861),u=r(76200),l=r(10064),c=r(92026);function d(){return d=(0,s.Z)((0,i.Z)().mark((function e(t,r,o,a){var s,u,c,d,f,h,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.exec(o)){e.next=3;break}throw new l.Z("esri-intl:invalid-bundle",'Bundle id "'.concat(o,'" is not compatible with the pattern "').concat(r,'"'));case 3:return u=s[1]?"".concat(s[1],"/"):"",c=s[2],d=(0,n.Su)(a),f="".concat(u).concat(c,".json"),h=d?"".concat(u).concat(c,"_").concat(d,".json"):f,e.prev=4,e.next=7,p(t(h));case 7:case 17:v=e.sent,e.next=23;break;case 10:if(e.prev=10,e.t0=e.catch(4),h!==f){e.next=14;break}throw new l.Z("intl:unknown-bundle",'Bundle "'.concat(o,'" cannot be loaded'),{error:e.t0});case 14:return e.prev=14,e.next=17,p(t(f));case 20:throw e.prev=20,e.t1=e.catch(14),new l.Z("intl:unknown-bundle",'Bundle "'.concat(o,'" cannot be loaded'),{error:e.t1});case 23:return e.abrupt("return",v);case 24:case"end":return e.stop()}}),e,null,[[4,10],[14,20]])}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,c.pC)(v.fetchBundleAsset)){e.next=2;break}return e.abrupt("return",v.fetchBundleAsset(t));case 2:return e.next=4,(0,u.default)(t,{responseType:"text"});case 4:return r=e.sent,e.abrupt("return",JSON.parse(r.data));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){function e(t){var r,n=t.base,i=void 0===n?"":n,a=t.pattern,s=t.location,u=void 0===s?new URL(window.location.href):s;(0,o.Z)(this,e),r="string"==typeof u?function(e){return new URL(e,new URL(u,window.location.href)).href}:u instanceof URL?function(e){return new URL(e,u).href}:u,this.pattern="string"==typeof a?new RegExp("^".concat(a)):a,this.getAssetUrl=r,i=i?i.endsWith("/")?i:i+"/":"",this.matcher=new RegExp("^".concat(i,"(?:(.*)/)?(.*)$"))}return(0,a.Z)(e,[{key:"fetchMessageBundle",value:function(e,t){return function(e,t,r,n){return d.apply(this,arguments)}(this.getAssetUrl,this.matcher,e,t)}}]),e}();var v={},g=r(65905);(0,n.tz)(function(e){return new h(e)}({pattern:"esri/",location:g.V}))},41201:function(e,t,r){r.d(t,{ME:function(){return w},Su:function(){return S},tz:function(){return m}});var n=r(74165),i=r(15671),o=r(43144),a=r(29439),s=r(15861),u=r(37762),l=r(10064),c=r(66978),d=r(36257),p=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,f={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function h(e){var t;return null!==(t=f[e])&&void 0!==t&&t}var v=[],g=new Map;function y(e){var t,r=(0,u.Z)(g.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;Z(e.pattern,n)&&g.delete(n)}}catch(i){r.e(i)}finally{r.f()}}function m(e){return v.includes(e)||(y(e),v.unshift(e)),{remove:function(){var t=v.indexOf(e);t>-1&&(v.splice(t,1),y(e))}}}function w(e){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,d.Kd)(),g.has(t)||g.set(t,_(t,r)),i=g.get(t),e.t0=i,!e.t0){e.next=7;break}return e.next=7,C.add(i);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){if(!p.test(e))return null;var t=p.exec(e);if(null===t)return null;var r=(0,a.Z)(t,3),n=r[1],i=r[2],o=n+(i?"-"+i.toUpperCase():"");return h(o)?o:h(n)?n:null}function _(e,t){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i,o,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=(0,u.Z)(v),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=18;break}if(!Z((s=a.value).pattern,t)){e.next=16;break}return e.prev=7,e.next=10,s.fetchMessageBundle(t,r);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(7),i.push(e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),o.e(e.t1);case 23:return e.prev=23,o.f(),e.finish(23);case 26:if(!i.length){e.next=28;break}throw new l.Z("intl:message-bundle-error",'Errors occurred while loading "'.concat(t,'"'),{errors:i});case 28:throw new l.Z("intl:no-message-bundle-loader",'No loader found for message bundle "'.concat(t,'"'));case 29:case"end":return e.stop()}}),e,null,[[2,20,23,26],[7,13]])})))).apply(this,arguments)}function Z(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}(0,d.Ze)((function(){g.clear()}));var C=new(function(){function e(){(0,i.Z)(this,e),this._numLoading=0,this._dfd=null}return(0,o.Z)(e,[{key:"waitForAll",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._dfd,!e.t0){e.next=4;break}return e.next=4,this._dfd.promise;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e){var t=this;return this._increase(),e.then((function(){return t._decrease()}),(function(){return t._decrease()})),this.waitForAll()}},{key:"_increase",value:function(){this._numLoading++,this._dfd||(this._dfd=(0,c.dD)())}},{key:"_decrease",value:function(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}]),e}())},8704:function(e,t,r){r.d(t,{n:function(){return l}});var n=r(32718),i=r(18202),o=r(643),a=r(76969),s=r(6291),u=n.Z.getLogger("esri.intl.substitute");function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.format,i=void 0===n?{}:n;return(0,o.gx)(e,(function(e){return c(e,t,i)}))}function c(e,t,r){var n,o,a,s=e.indexOf(":");if(-1===s?o=e.trim():(o=e.slice(0,s).trim(),a=e.slice(s+1).trim()),!o)return"";var u=(0,i.hS)(o,t);if(null==u)return"";var l=null!==(n=a?null===r||void 0===r?void 0:r[a]:null)&&void 0!==n?n:null===r||void 0===r?void 0:r[o];return l?d(u,l):a?p(u,a):f(u)}function d(e,t){switch(t.type){case"date":return(0,a.p6)(e,t.intlOptions);case"number":return(0,s.uf)(e,t.intlOptions);default:return u.warn("missing format descriptor for key {key}"),f(e)}}function p(e,t){switch(t.toLowerCase()){case"dateformat":return(0,a.p6)(e);case"numberformat":return(0,s.uf)(e);default:return u.warn("inline format is unsupported since 4.12: ".concat(t)),/^(dateformat|datestring)/i.test(t)?(0,a.p6)(e):/^numberformat/i.test(t)?(0,s.uf)(e):f(e)}}function f(e){switch(typeof e){case"string":return e;case"number":return(0,s.uf)(e);case"boolean":return""+e;default:return e instanceof Date?(0,a.p6)(e):""}}},45362:function(e,t,r){r.d(t,{i:function(){return f}});var n=r(74165),i=r(1413),o=r(15861),a=r(76200),s=r(25243),u=r(77981),l=r(23084),c=r(35594),d=r(81943),p=(0,s.se)(d.Z);function f(e,t,r){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((0,n.Z)().mark((function e(t,r,o){var s,d,f,h,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p(r),s=(0,l.en)(t),d=(0,i.Z)((0,i.Z)({},s.query),{},{f:"json"},r.toJSON()),f=r.outSpatialReference,h=(0,u.Ji)(r.geometries[0]),v=(0,l.lA)(d,o),e.abrupt("return",(0,a.default)(s.path+"/project",v).then((function(e){var t=e.data.geometries;return(0,c.o)(t,h,f)})));case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}},35594:function(e,t,r){r.d(t,{F:function(){return i},o:function(){return o}});var n=r(77981);function i(e){return{geometryType:(0,n.Ji)(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function o(e,t,r){var i=(0,n.q9)(t);return e.map((function(e){var t=i.fromJSON(e);return t.spatialReference=r,t}))}},12987:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(43144),i=r(15671),o=r(60136),a=r(92572),s=r(27366),u=r(11582),l=r(46784),c=r(92026),d=r(49861),p=(r(25243),r(63780),r(69912)),f=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).onFields=null,n.operator=null,n.searchTerm=null,n.searchType=null,n}return(0,n.Z)(r)}((0,u.J)(l.wq));(0,s._)([(0,d.Cb)({type:[String],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:(0,c.pC)(this.onFields)&&this.onFields.length>0}}}}})],f.prototype,"onFields",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"operator",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"searchTerm",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],f.prototype,"searchType",void 0);var h=f=(0,s._)([(0,p.j)("esri.rest.support.FullTextSearch")],f)},81943:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),s=r(27366),u=r(46784),l=r(49861),c=(r(25243),r(63780),r(69912)),d=r(77981),p=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).geometries=[],i.outSpatialReference=null,i.transformation=null,i.transformForward=null,i}return(0,i.Z)(r,[{key:"toJSON",value:function(){var e=this.geometries.map((function(e){return e.toJSON()})),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:(0,d.Ji)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}}]),r}(u.wq);(0,s._)([(0,l.Cb)()],p.prototype,"geometries",void 0),(0,s._)([(0,l.Cb)({json:{read:{source:"outSR"}}})],p.prototype,"outSpatialReference",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"transformation",void 0),(0,s._)([(0,l.Cb)()],p.prototype,"transformForward",void 0);var f=p=(0,s._)([(0,c.j)("esri.rest.support.ProjectParameters")],p)},1337:function(e,t,r){r.d(t,{q:function(){return n}});var n={type:String,json:{read:{source:"token"},write:{target:"token"}}}},23084:function(e,t,r){r.d(t,{cv:function(){return u},en:function(){return s},lA:function(){return a}});var n=r(1413),i=(r(42265),r(19545),r(84652)),o=r(35995);r(66660);function a(e,t){return t?(0,n.Z)((0,n.Z)({},t),{},{query:(0,n.Z)((0,n.Z)({},null!==e&&void 0!==e?e:{}),t.query)}):{query:e}}function s(e){return"string"==typeof e?(0,o.mN)(e):(0,i.d9)(e)}function u(e,t,r){var n={};for(var i in e)if("declaredClass"!==i){var o=e[i];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){n[i]=[];for(var a=0;a<o.length;a++)n[i][a]=u(o[a])}else if("object"==typeof o)if(o.toJSON){var s=o.toJSON(r&&r[i]);n[i]=t?s:JSON.stringify(s)}else n[i]=t?o:JSON.stringify(o);else n[i]=o}return n}},69787:function(e,t,r){r.d(t,{Av:function(){return s},_1:function(){return o},lu:function(){return u},rs:function(){return a},tl:function(){return i}});var n=r(92026);function i(e){return e&&"function"==typeof e.highlight}function o(e){return e&&"function"==typeof e.maskOccludee}function a(e,t,r){return(0,n.Wi)(e)||e>r&&(0===t||e<t)}function s(e,t){return(0,n.pC)(e)&&e>0||(0,n.pC)(t)&&t>0}function u(e){var t,r,n=e.effectiveScaleRange;return{minScale:null!==(t=null===n||void 0===n?void 0:n.minScale)&&void 0!==t?t:0,maxScale:null!==(r=null===n||void 0===n?void 0:n.maxScale)&&void 0!==r?r:0}}},99505:function(e,t,r){r.d(t,{_:function(){return d}});var n=r(15671),i=r(43144),o=r(60136),a=r(92572),s=r(27366),u=r(92026),l=r(49861),c=(r(25243),r(63780),r(69912)),d=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;(0,n.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).goToOverride=null,e.view=null,e}return(0,i.Z)(r,[{key:"callGoTo",value:function(e){var t=this.view;return(0,u.O3)(t),this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)}}]),r}(e);return(0,s._)([(0,l.Cb)()],t.prototype,"goToOverride",void 0),(0,s._)([(0,l.Cb)()],t.prototype,"view",void 0),t=(0,s._)([(0,c.j)("esri.widgets.support.GoTo")],t)}}}]);
//# sourceMappingURL=7555.6b1741db.chunk.js.map