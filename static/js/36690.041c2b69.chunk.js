"use strict";(self.webpackChunkhub_layout_versioning=self.webpackChunkhub_layout_versioning||[]).push([[36690],{36690:function(s,e,t){t.r(e),t.d(e,{arcgis_hub_discussions_options_modal:function(){return d}});var i=t(74165),n=t(15861),o=t(15671),a=t(43144),c=t(5692),l=t(13129),r=t(54825),u=t(4541),h=t(81724),d=(t(7597),t(95101),t(39318),t(67450),t(89732),t(1319),t(47268),t(42377),t(98942),t(60415),t(76880),t(58669),t(29398),t(35137),t(16063),t(45059),t(73576),t(90494),t(59514),t(54805),function(){function s(e){(0,o.Z)(this,s),(0,c.r)(this,e),this.hubTelemetry=(0,c.c)(this,"hubTelemetry",7),this.arcgisHubDiscussionsOptionsModalClosed=(0,c.c)(this,"arcgisHubDiscussionsOptionsModalClosed",7),this.arcgisHubDiscussionsOptionsModalUpdated=(0,c.c)(this,"arcgisHubDiscussionsOptionsModalUpdated",7),this.canDiscuss=!1,(0,r.b)(this,"handleCloseModal","handleModalClosed","handleSave","handleNoticeClosed","handleOptionsChanged")}return(0,a.Z)(s,[{key:"componentWillLoad",value:function(){var s=(0,n.Z)((0,i.Z)().mark((function s(){return(0,i.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.i.loadIntlForComponent(this.element);case 2:this.intl=s.sent,this.updateCanDiscuss();case 4:case"end":return s.stop()}}),s,this)})));return function(){return s.apply(this,arguments)}}()},{key:"updateCanDiscuss",value:function(){this.canDiscuss=(0,h.l)(this.subject)}},{key:"handleModalClosed",value:function(){this.hubTelemetry.emit(u.d.dictionary.category.interaction.action.close.label.modal.details.discussionOptions),this.arcgisHubDiscussionsOptionsModalClosed.emit()}},{key:"handleOptionsChanged",value:function(s){this.canDiscuss=s.detail}},{key:"handleCloseModal",value:function(){this.open=!1}},{key:"isGroup",get:function(){return void 0!==this.subject.isInvitationOnly}},{key:"handleSave",value:function(){var s=(0,n.Z)((0,i.Z)().mark((function s(){var e,t,n,o,a,c,l,r,d;return(0,i.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.subject,t=this.context,n=this.optionsElement,o=this.isGroup,a=n.value,c=o?"groups":"content",l=a?"allowDiscussions":"blockDiscussions",r=u.d.dictionary.category[c].action.update.label.settings.details[l],this.saving=!0,this.error=null,s.prev=7,s.next=10,(0,h.u)(Object.assign({subject:e,discussable:n.value},t.requestOptions));case 10:d=s.sent,this.hubTelemetry.emit(Object.assign(Object.assign({},r),{response:u.d.constants.response.SUCCESS})),this.subject=d,this.arcgisHubDiscussionsOptionsModalUpdated.emit(d),s.next=20;break;case 16:s.prev=16,s.t0=s.catch(7),this.error=s.t0,this.hubTelemetry.emit(Object.assign(Object.assign({},r),{response:u.d.constants.response.FAILURE}));case 20:return s.prev=20,this.saving=!1,s.finish(20);case 23:case"end":return s.stop()}}),s,this,[[7,16,20,23]])})));return function(){return s.apply(this,arguments)}}()},{key:"handleNoticeClosed",value:function(){this.error=null}},{key:"render",value:function(){var s=this,e=this.intl,t=this.saving,i=this.open,n=this.error,o=this.isGroup,a=this.canDiscuss;return(0,c.h)(c.H,null,(0,c.h)("arcgis-wormhole",null,(0,c.h)("calcite-modal",{"data-element":"discussions-options-modal",disableCloseButton:t,disableOutsideClose:!0,onCalciteModalClose:this.handleModalClosed,open:i},(0,c.h)("header",{slot:"header"},e.t("header")),(0,c.h)("arcgis-hub-discussions-options",{disabled:t,layout:"horizontal",onArcgisHubDiscussionsOptionsChange:this.handleOptionsChanged,ref:function(e){s.optionsElement=e},slot:"content",value:a,variant:o?h.D.GROUP:h.D.CONTENT}),n&&(0,c.h)("calcite-notice",{active:!0,closable:!0,color:"red",onCalciteNoticeClose:this.handleNoticeClosed,slot:"content"},(0,c.h)("header",{slot:"title"},this.intl.t("error.title")),(0,c.h)("p",{slot:"message"},this.intl.t("error.message"))),(0,c.h)("calcite-button",{appearance:"outline",disabled:t,onClick:this.handleCloseModal,slot:"secondary",type:"button"},e.t("secondary")),(0,c.h)("calcite-button",{loading:t,onClick:this.handleSave,slot:"primary",type:"submit"},e.t(t?"pending":"primary")))))}},{key:"element",get:function(){return(0,c.g)(this)}}],[{key:"assetsDirs",get:function(){return["locales"]}},{key:"watchers",get:function(){return{open:["updateCanDiscuss"],subject:["updateCanDiscuss"]}}}]),s}());d.style=".sc-arcgis-hub-discussions-options-modal-h{display:block}calcite-notice.sc-arcgis-hub-discussions-options-modal{margin-top:0.5rem}p.sc-arcgis-hub-discussions-options-modal{margin:0px}"}}]);
//# sourceMappingURL=36690.041c2b69.chunk.js.map